import{c as $g,u as Ug,Q as qg,l as Wg,h as Jl,m as Kg,n as jg,i as Yg}from"./QBtn.bba32a8e.js";import{c as ks,a as no,h as ui,g as Xg,r as ea,C as Qg,D as Qa,E as nl,F as kr,M as Ar,G as pr,L as al,a3 as Zf,a4 as il,a5 as Jf,f as Zg,v as Jg,I as ep}from"./index.66de43ae.js";import{a as tp,u as rp,e as np,f as ec,i as ol,g as ap,h as tc,d as ip,b as op}from"./QSplitter.44fafa63.js";var sp=ks({name:"QAvatar",props:{...$g,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(r,{slots:e}){const t=Ug(r),n=no(()=>"q-avatar"+(r.color?` bg-${r.color}`:"")+(r.textColor?` text-${r.textColor} q-chip--colored`:"")+(r.square===!0?" q-avatar--square":r.rounded===!0?" rounded-borders":"")),a=no(()=>r.fontSize?{fontSize:r.fontSize}:null);return()=>{const i=r.icon!==void 0?[ui(qg,{name:r.icon})]:void 0;return ui("div",{class:n.value,style:t.value},[ui("div",{class:"q-avatar__content row flex-center overflow-hidden",style:a.value},Wg(e.default,i))])}}}),Bo=ks({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(r,{slots:e}){const t=no(()=>`q-card__section q-card__section--${r.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>ui(r.tag,{class:t.value},Jl(e.default))}}),rc=ks({name:"QCard",props:{...tp,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(r,{slots:e}){const{proxy:{$q:t}}=Xg(),n=rp(r,t),a=no(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(r.bordered===!0?" q-card--bordered":"")+(r.square===!0?" q-card--square no-border-radius":"")+(r.flat===!0?" q-card--flat no-shadow":""));return()=>ui(r.tag,{class:a.value},Jl(e.default))}}),up=ks({name:"QCardActions",props:{...Kg,vertical:Boolean},setup(r,{slots:e}){const t=jg(r),n=no(()=>`q-card__actions ${t.value} q-card__actions--${r.vertical===!0?"vert column":"horiz row"}`);return()=>ui("div",{class:n.value},Jl(e.default))}});function cr(r){return cr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cr(r)}function ef(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function nc(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function tf(r,e,t){return e&&nc(r.prototype,e),t&&nc(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Hh(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function on(r,e){return lp(r)||fp(r,e)||$h(r,e)||cp()}function lp(r){if(Array.isArray(r))return r}function fp(r,e){var t=r==null?null:typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function $h(r,e){if(!!r){if(typeof r=="string")return ac(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ac(r,e)}}function ac(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function cp(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hp(r,e){var t=typeof Symbol!="undefined"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=$h(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return i=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}var lr=typeof window=="undefined"?null:window,ic=lr?lr.navigator:null;lr&&lr.document;var dp=cr(""),Uh=cr({}),vp=cr(function(){}),gp=typeof HTMLElement=="undefined"?"undefined":cr(HTMLElement),mo=function(e){return e&&e.instanceString&&Zt(e.instanceString)?e.instanceString():null},Qe=function(e){return e!=null&&cr(e)==dp},Zt=function(e){return e!=null&&cr(e)===vp},zt=function(e){return!Kr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},_t=function(e){return e!=null&&cr(e)===Uh&&!zt(e)&&e.constructor===Object},pp=function(e){return e!=null&&cr(e)===Uh},Be=function(e){return e!=null&&cr(e)===cr(1)&&!isNaN(e)},yp=function(e){return Be(e)&&Math.floor(e)===e},hs=function(e){if(gp!=="undefined")return e!=null&&e instanceof HTMLElement},Kr=function(e){return bo(e)||qh(e)},bo=function(e){return mo(e)==="collection"&&e._private.single},qh=function(e){return mo(e)==="collection"&&!e._private.single},rf=function(e){return mo(e)==="core"},Wh=function(e){return mo(e)==="stylesheet"},mp=function(e){return mo(e)==="event"},sa=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},bp=function(e){return typeof HTMLElement=="undefined"?!1:e instanceof HTMLElement},wp=function(e){return _t(e)&&Be(e.x1)&&Be(e.x2)&&Be(e.y1)&&Be(e.y2)},xp=function(e){return pp(e)&&Zt(e.then)},Sp=function(){return ic&&ic.userAgent.match(/msie|trident|edge/i)},ao=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,l=t.apply(i,o),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},nf=ao(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),As=ao(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Kh=ao(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),oc=function(e){return sa(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},fr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Cp="rgb[a]?\\(("+fr+"[%]?)\\s*,\\s*("+fr+"[%]?)\\s*,\\s*("+fr+"[%]?)(?:\\s*,\\s*("+fr+"))?\\)",_p="rgb[a]?\\((?:"+fr+"[%]?)\\s*,\\s*(?:"+fr+"[%]?)\\s*,\\s*(?:"+fr+"[%]?)(?:\\s*,\\s*(?:"+fr+"))?\\)",Ep="hsl[a]?\\(("+fr+")\\s*,\\s*("+fr+"[%])\\s*,\\s*("+fr+"[%])(?:\\s*,\\s*("+fr+"))?\\)",Tp="hsl[a]?\\((?:"+fr+")\\s*,\\s*(?:"+fr+"[%])\\s*,\\s*(?:"+fr+"[%])(?:\\s*,\\s*(?:"+fr+"))?\\)",Pp="\\#[0-9a-fA-F]{3}",kp="\\#[0-9a-fA-F]{6}",jh=function(e,t){return e<t?-1:e>t?1:0},Ap=function(e,t){return-1*jh(e,t)},tt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},Dp=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Mp=function(e){var t,n,a,i,o,s,l,u;function f(d,b,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?d+(b-d)*6*x:x<1/2?b:x<2/3?d+(b-d)*(2/3-x)*6:d}var c=new RegExp("^"+Ep+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(c[2]),a<0||a>100||(a=a/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,o=c[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var p=i<.5?i*(1+a):i+a-i*a,g=2*i-p;s=Math.round(255*f(g,p,n+1/3)),l=Math.round(255*f(g,p,n)),u=Math.round(255*f(g,p,n-1/3))}t=[s,l,u,o]}return t},Op=function(e){var t,n=new RegExp("^"+Cp+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;t.push(u)}}return t},Lp=function(e){return Ip[e.toLowerCase()]},Np=function(e){return(zt(e)?e:null)||Lp(e)||Dp(e)||Op(e)||Mp(e)},Ip={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Yh=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(_t(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},Xh=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(_t(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t};function Rp(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var Oa=Rp,Yi=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Fp(r,e){return e={exports:{}},r(e,e.exports),e.exports}var Bp=typeof Yi=="object"&&Yi&&Yi.Object===Object&&Yi,zp=Bp,Gp=typeof self=="object"&&self&&self.Object===Object&&self,Vp=zp||Gp||Function("return this")(),Ds=Vp,Hp=function(){return Ds.Date.now()},sl=Hp,$p=/\s/;function Up(r){for(var e=r.length;e--&&$p.test(r.charAt(e)););return e}var qp=Up,Wp=/^\s+/;function Kp(r){return r&&r.slice(0,qp(r)+1).replace(Wp,"")}var jp=Kp,Yp=Ds.Symbol,di=Yp,Qh=Object.prototype,Xp=Qh.hasOwnProperty,Qp=Qh.toString,Vi=di?di.toStringTag:void 0;function Zp(r){var e=Xp.call(r,Vi),t=r[Vi];try{r[Vi]=void 0;var n=!0}catch{}var a=Qp.call(r);return n&&(e?r[Vi]=t:delete r[Vi]),a}var Jp=Zp,ey=Object.prototype,ty=ey.toString;function ry(r){return ty.call(r)}var ny=ry,ay="[object Null]",iy="[object Undefined]",sc=di?di.toStringTag:void 0;function oy(r){return r==null?r===void 0?iy:ay:sc&&sc in Object(r)?Jp(r):ny(r)}var Zh=oy;function sy(r){return r!=null&&typeof r=="object"}var uy=sy,ly="[object Symbol]";function fy(r){return typeof r=="symbol"||uy(r)&&Zh(r)==ly}var wo=fy,uc=0/0,cy=/^[-+]0x[0-9a-f]+$/i,hy=/^0b[01]+$/i,dy=/^0o[0-7]+$/i,vy=parseInt;function gy(r){if(typeof r=="number")return r;if(wo(r))return uc;if(Oa(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=Oa(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=jp(r);var t=hy.test(r);return t||dy.test(r)?vy(r.slice(2),t?2:8):cy.test(r)?uc:+r}var lc=gy,py="Expected a function",yy=Math.max,my=Math.min;function by(r,e,t){var n,a,i,o,s,l,u=0,f=!1,c=!1,p=!0;if(typeof r!="function")throw new TypeError(py);e=lc(e)||0,Oa(t)&&(f=!!t.leading,c="maxWait"in t,i=c?yy(lc(t.maxWait)||0,e):i,p="trailing"in t?!!t.trailing:p);function g(D){var v=n,E=a;return n=a=void 0,u=D,o=r.apply(E,v),o}function d(D){return u=D,s=setTimeout(w,e),f?g(D):o}function b(D){var v=D-l,E=D-u,k=e-v;return c?my(k,i-E):k}function x(D){var v=D-l,E=D-u;return l===void 0||v>=e||v<0||c&&E>=i}function w(){var D=sl();if(x(D))return C(D);s=setTimeout(w,b(D))}function C(D){return s=void 0,p&&n?g(D):(n=a=void 0,o)}function m(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function S(){return s===void 0?o:C(sl())}function P(){var D=sl(),v=x(D);if(n=arguments,a=this,l=D,v){if(s===void 0)return d(l);if(c)return clearTimeout(s),s=setTimeout(w,e),g(l)}return s===void 0&&(s=setTimeout(w,e)),o}return P.cancel=m,P.flush=S,P}var Ms=by,ul=lr?lr.performance:null,Jh=ul&&ul.now?function(){return ul.now()}:function(){return Date.now()},wy=function(){if(lr){if(lr.requestAnimationFrame)return function(r){lr.requestAnimationFrame(r)};if(lr.mozRequestAnimationFrame)return function(r){lr.mozRequestAnimationFrame(r)};if(lr.webkitRequestAnimationFrame)return function(r){lr.webkitRequestAnimationFrame(r)};if(lr.msRequestAnimationFrame)return function(r){lr.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(Jh())},1e3/60)}}(),ds=function(e){return wy(e)},zn=Jh,ii=9261,ed=65599,Xi=5381,td=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ii,n=t,a;a=e.next(),!a.done;)n=n*ed+a.value|0;return n},io=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ii;return t*ed+e|0},oo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Xi;return(t<<5)+t+e|0},xy=function(e,t){return e*2097152+t},ta=function(e){return e[0]*2097152+e[1]},zo=function(e,t){return[io(e[0],t[0]),oo(e[1],t[1])]},Sy=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return td(o,t)},La=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return td(o,t)},rd=function(){return Cy(arguments)},Cy=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=La(a):t=La(a,t)}return t},fc=!0,_y=console.warn!=null,Ey=console.trace!=null,af=Number.MAX_SAFE_INTEGER||9007199254740991,nd=function(){return!0},vs=function(){return!1},cc=function(){return 0},of=function(){},er=function(e){throw new Error(e)},ad=function(e){if(e!==void 0)fc=!!e;else return fc},At=function(e){!ad()||(_y?console.warn(e):(console.log(e),Ey&&console.trace()))},Ty=function(e){return tt({},e)},Cn=function(e){return e==null?e:zt(e)?e.slice():_t(e)?Ty(e):e},Py=function(e){return e.slice()},id=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},ky={},od=function(){return ky},_r=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},ua=function(e,t,n){for(var a=e.length-1;a>=0&&!(e[a]===t&&(e.splice(a,1),n));a--);},sf=function(e){e.splice(0,e.length)},Ay=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},un=function(e,t,n){return n&&(t=Kh(n,t)),e[t]},na=function(e,t,n,a){n&&(t=Kh(n,t)),e[t]=a},Dy=function(){function r(){ef(this,r),this._obj={}}return tf(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),_n=typeof Map!="undefined"?Map:Dy,My="undefined",Oy=function(){function r(e){if(ef(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return tf(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),wi=(typeof Set=="undefined"?"undefined":cr(Set))!==My?Set:Oy,Os=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!rf(e)){er("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){er("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new wi,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];zt(t.classes)?u=t.classes:Qe(t.classes)&&(u=t.classes.split(/\s+/));for(var f=0,c=u.length;f<c;f++){var p=u[f];!p||p===""||i.classes.add(p)}this.createEmitter();var g=t.style||t.css;g&&(At("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g)),(n===void 0||n)&&this.restore()},hc=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;_t(n)&&!Kr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!Zt(a)?a:i,a=Zt(a)?a:function(){};for(var s=this._private.cy,l=n=Qe(n)?this.filter(n):n,u=[],f=[],c={},p={},g={},d=0,b,x=this.byGroup(),w=x.nodes,C=x.edges,m=0;m<l.length;m++){var S=l[m],P=S.id();S.isNode()&&(u.unshift(S),e.bfs&&(g[P]=!0,f.push(S)),p[P]=0)}for(var D=function(){var H=e.bfs?u.shift():u.pop(),G=H.id();if(e.dfs){if(g[G])return"continue";g[G]=!0,f.push(H)}var Y=p[G],j=c[G],q=j!=null?j.source():null,X=j!=null?j.target():null,K=j==null?void 0:H.same(q)?X[0]:q[0],T=void 0;if(T=a(H,j,K,d++,Y),T===!0)return b=H,"break";if(T===!1)return"break";for(var M=H.connectedEdges().filter(function(ee){return(!i||ee.source().same(H))&&C.has(ee)}),L=0;L<M.length;L++){var F=M[L],W=F.connectedNodes().filter(function(ee){return!ee.same(H)&&w.has(ee)}),Z=W.id();W.length!==0&&!g[Z]&&(W=W[0],u.push(W),e.bfs&&(g[Z]=!0,f.push(W)),c[Z]=F,p[Z]=p[G]+1)}};u.length!==0;){var v=D();if(v!=="continue"&&v==="break")break}for(var E=s.collection(),k=0;k<f.length;k++){var N=f[k],O=c[N.id()];O!=null&&E.push(O),E.push(N)}return{path:s.collection(E),found:s.collection(b)}}},so={breadthFirstSearch:hc({bfs:!0}),depthFirstSearch:hc({dfs:!0})};so.bfs=so.breadthFirstSearch;so.dfs=so.depthFirstSearch;var Ly=Fp(function(r,e){(function(){var t,n,a,i,o,s,l,u,f,c,p,g,d,b,x;a=Math.floor,c=Math.min,n=function(w,C){return w<C?-1:w>C?1:0},f=function(w,C,m,S,P){var D;if(m==null&&(m=0),P==null&&(P=n),m<0)throw new Error("lo must be non-negative");for(S==null&&(S=w.length);m<S;)D=a((m+S)/2),P(C,w[D])<0?S=D:m=D+1;return[].splice.apply(w,[m,m-m].concat(C)),C},s=function(w,C,m){return m==null&&(m=n),w.push(C),b(w,0,w.length-1,m)},o=function(w,C){var m,S;return C==null&&(C=n),m=w.pop(),w.length?(S=w[0],w[0]=m,x(w,0,C)):S=m,S},u=function(w,C,m){var S;return m==null&&(m=n),S=w[0],w[0]=C,x(w,0,m),S},l=function(w,C,m){var S;return m==null&&(m=n),w.length&&m(w[0],C)<0&&(S=[w[0],C],C=S[0],w[0]=S[1],x(w,0,m)),C},i=function(w,C){var m,S,P,D,v,E;for(C==null&&(C=n),D=function(){E=[];for(var k=0,N=a(w.length/2);0<=N?k<N:k>N;0<=N?k++:k--)E.push(k);return E}.apply(this).reverse(),v=[],S=0,P=D.length;S<P;S++)m=D[S],v.push(x(w,m,C));return v},d=function(w,C,m){var S;if(m==null&&(m=n),S=w.indexOf(C),S!==-1)return b(w,0,S,m),x(w,S,m)},p=function(w,C,m){var S,P,D,v,E;if(m==null&&(m=n),P=w.slice(0,C),!P.length)return P;for(i(P,m),E=w.slice(C),D=0,v=E.length;D<v;D++)S=E[D],l(P,S,m);return P.sort(m).reverse()},g=function(w,C,m){var S,P,D,v,E,k,N,O,I;if(m==null&&(m=n),C*10<=w.length){if(D=w.slice(0,C).sort(m),!D.length)return D;for(P=D[D.length-1],N=w.slice(C),v=0,k=N.length;v<k;v++)S=N[v],m(S,P)<0&&(f(D,S,0,null,m),D.pop(),P=D[D.length-1]);return D}for(i(w,m),I=[],E=0,O=c(C,w.length);0<=O?E<O:E>O;0<=O?++E:--E)I.push(o(w,m));return I},b=function(w,C,m,S){var P,D,v;for(S==null&&(S=n),P=w[m];m>C;){if(v=m-1>>1,D=w[v],S(P,D)<0){w[m]=D,m=v;continue}break}return w[m]=P},x=function(w,C,m){var S,P,D,v,E;for(m==null&&(m=n),P=w.length,E=C,D=w[C],S=2*C+1;S<P;)v=S+1,v<P&&!(m(w[S],w[v])<0)&&(S=v),w[C]=w[S],C=S,S=2*C+1;return w[C]=D,b(w,E,C,m)},t=function(){w.push=s,w.pop=o,w.replace=u,w.pushpop=l,w.heapify=i,w.updateItem=d,w.nlargest=p,w.nsmallest=g;function w(C){this.cmp=C!=null?C:n,this.nodes=[]}return w.prototype.push=function(C){return s(this.nodes,C,this.cmp)},w.prototype.pop=function(){return o(this.nodes,this.cmp)},w.prototype.peek=function(){return this.nodes[0]},w.prototype.contains=function(C){return this.nodes.indexOf(C)!==-1},w.prototype.replace=function(C){return u(this.nodes,C,this.cmp)},w.prototype.pushpop=function(C){return l(this.nodes,C,this.cmp)},w.prototype.heapify=function(){return i(this.nodes,this.cmp)},w.prototype.updateItem=function(C){return d(this.nodes,C,this.cmp)},w.prototype.clear=function(){return this.nodes=[]},w.prototype.empty=function(){return this.nodes.length===0},w.prototype.size=function(){return this.nodes.length},w.prototype.clone=function(){var C;return C=new w,C.nodes=this.nodes.slice(0),C},w.prototype.toArray=function(){return this.nodes.slice(0)},w.prototype.insert=w.prototype.push,w.prototype.top=w.prototype.peek,w.prototype.front=w.prototype.peek,w.prototype.has=w.prototype.contains,w.prototype.copy=w.prototype.clone,w}(),function(w,C){return r.exports=C()}(this,function(){return t})}).call(Yi)}),xo=Ly,Ny=_r({root:null,weight:function(e){return 1},directed:!1}),Iy={dijkstra:function(e){if(!_t(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Ny(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=Qe(a)?this.filter(a)[0]:a[0],f={},c={},p={},g=this.byGroup(),d=g.nodes,b=g.edges;b.unmergeBy(function(Y){return Y.isLoop()});for(var x=function(j){return f[j.id()]},w=function(j,q){f[j.id()]=q,C.updateItem(j)},C=new xo(function(Y,j){return x(Y)-x(j)}),m=0;m<d.length;m++){var S=d[m];f[S.id()]=S.same(u)?0:1/0,C.push(S)}for(var P=function(j,q){for(var X=(o?j.edgesTo(q):j.edgesWith(q)).intersect(b),K=1/0,T,M=0;M<X.length;M++){var L=X[M],F=l(L);(F<K||!T)&&(K=F,T=L)}return{edge:T,dist:K}};C.size()>0;){var D=C.pop(),v=x(D),E=D.id();if(p[E]=v,v!==1/0)for(var k=D.neighborhood().intersect(d),N=0;N<k.length;N++){var O=k[N],I=O.id(),H=P(D,O),G=v+H.dist;G<x(O)&&(w(O,G),c[I]={node:D,edge:H.edge})}}return{distanceTo:function(j){var q=Qe(j)?d.filter(j)[0]:j[0];return p[q.id()]},pathTo:function(j){var q=Qe(j)?d.filter(j)[0]:j[0],X=[],K=q,T=K.id();if(q.length>0)for(X.unshift(q);c[T];){var M=c[T];X.unshift(M.edge),X.unshift(M.node),K=M.node,T=K.id()}return s.spawn(X)}}}},Ry={kruskal:function(e){e=e||function(m){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),s=n,l=function(S){for(var P=0;P<o.length;P++){var D=o[P];if(D.has(S))return P}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var f=a.sort(function(m,S){return e(m)-e(S)}),c=0;c<f.length;c++){var p=f[c],g=p.source()[0],d=p.target()[0],b=l(g),x=l(d),w=o[b],C=o[x];b!==x&&(s.merge(p),w.merge(C),o.splice(x,1))}return s}},Fy=_r({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),By={aStar:function(e){var t=this.cy(),n=Fy(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var u=a.id(),f=i.id(),c={},p={},g={},d=new xo(function(T,M){return p[T.id()]-p[M.id()]}),b=new wi,x={},w={},C=function(M,L){d.push(M),b.add(L)},m,S,P=function(){m=d.pop(),S=m.id(),b.delete(S)},D=function(M){return b.has(M)};C(a,u),c[u]=0,p[u]=o(a);for(var v=0;d.size()>0;){if(P(),v++,S===f){for(var E=[],k=i,N=f,O=w[N];E.unshift(k),O!=null&&E.unshift(O),k=x[N],k!=null;)N=k.id(),O=w[N];return{found:!0,distance:c[S],path:this.spawn(E),steps:v}}g[S]=!0;for(var I=m._private.edges,H=0;H<I.length;H++){var G=I[H];if(!!this.hasElementWithId(G.id())&&!(s&&G.data("source")!==S)){var Y=G.source(),j=G.target(),q=Y.id()!==S?Y:j,X=q.id();if(!!this.hasElementWithId(X)&&!g[X]){var K=c[S]+l(G);if(!D(X)){c[X]=K,p[X]=K+o(q),C(q,X),x[X]=m,w[X]=G;continue}K<c[X]&&(c[X]=K,p[X]=K+o(q),x[X]=m,w[X]=G)}}}}return{found:!1,distance:void 0,path:void 0,steps:v}}},zy=_r({weight:function(e){return 1},directed:!1}),Gy={floydWarshall:function(e){for(var t=this.cy(),n=zy(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,f=l.length,c=f*f,p=function(F){return l.indexOf(F)},g=function(F){return l[F]},d=new Array(c),b=0;b<c;b++){var x=b%f,w=(b-x)/f;w===x?d[b]=0:d[b]=1/0}for(var C=new Array(c),m=new Array(c),S=0;S<u.length;S++){var P=u[S],D=P.source()[0],v=P.target()[0];if(D!==v){var E=p(D),k=p(v),N=E*f+k,O=o(P);if(d[N]>O&&(d[N]=O,C[N]=k,m[N]=P),!i){var I=k*f+E;!i&&d[I]>O&&(d[I]=O,C[I]=E,m[I]=P)}}}for(var H=0;H<f;H++)for(var G=0;G<f;G++)for(var Y=G*f+H,j=0;j<f;j++){var q=G*f+j,X=H*f+j;d[Y]+d[X]<d[q]&&(d[q]=d[Y]+d[X],C[q]=C[Y])}var K=function(F){return(Qe(F)?t.filter(F):F)[0]},T=function(F){return p(K(F))},M={distance:function(F,W){var Z=T(F),ee=T(W);return d[Z*f+ee]},path:function(F,W){var Z=T(F),ee=T(W),Q=g(Z);if(Z===ee)return Q.collection();if(C[Z*f+ee]==null)return t.collection();var oe=t.collection(),fe=Z,ce;for(oe.merge(Q);Z!==ee;)fe=Z,Z=C[Z*f+ee],ce=m[fe*f+Z],oe.merge(ce),oe.merge(g(Z));return oe}};return M}},Vy=_r({weight:function(e){return 1},directed:!1,root:null}),Hy={bellmanFord:function(e){var t=this,n=Vy(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),f=this.byGroup(),c=f.edges,p=f.nodes,g=p.length,d=new _n,b=!1,x=[];o=u.collection(o)[0],c.unmergeBy(function(we){return we.isLoop()});for(var w=c.length,C=function(xe){var Ne=d.get(xe.id());return Ne||(Ne={},d.set(xe.id(),Ne)),Ne},m=function(xe){return(Qe(xe)?u.$(xe):xe)[0]},S=function(xe){return C(m(xe)).dist},P=function(xe){for(var Ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,qe=m(xe),at=[],We=qe;;){if(We==null)return t.spawn();var Re=C(We),ge=Re.edge,z=Re.pred;if(at.unshift(We[0]),We.same(Ne)&&at.length>0)break;ge!=null&&at.unshift(ge),We=z}return l.spawn(at)},D=0;D<g;D++){var v=p[D],E=C(v);v.same(o)?E.dist=0:E.dist=1/0,E.pred=null,E.edge=null}for(var k=!1,N=function(xe,Ne,qe,at,We,Re){var ge=at.dist+Re;ge<We.dist&&!qe.same(at.edge)&&(We.dist=ge,We.pred=xe,We.edge=qe,k=!0)},O=1;O<g;O++){k=!1;for(var I=0;I<w;I++){var H=c[I],G=H.source(),Y=H.target(),j=s(H),q=C(G),X=C(Y);N(G,Y,H,q,X,j),i||N(Y,G,H,X,q,j)}if(!k)break}if(k)for(var K=[],T=0;T<w;T++){var M=c[T],L=M.source(),F=M.target(),W=s(M),Z=C(L).dist,ee=C(F).dist;if(Z+W<ee||!i&&ee+W<Z)if(b||(At("Graph contains a negative weight cycle for Bellman-Ford"),b=!0),e.findNegativeWeightCycles!==!1){var Q=[];Z+W<ee&&Q.push(L),!i&&ee+W<Z&&Q.push(F);for(var oe=Q.length,fe=0;fe<oe;fe++){var ce=Q[fe],Se=[ce];Se.push(C(ce).edge);for(var De=C(ce).pred;Se.indexOf(De)===-1;)Se.push(De),Se.push(C(De).edge),De=C(De).pred;Se=Se.slice(Se.indexOf(De));for(var Le=Se[0].id(),ke=0,me=2;me<Se.length;me+=2)Se[me].id()<Le&&(Le=Se[me].id(),ke=me);Se=Se.slice(ke).concat(Se.slice(0,ke)),Se.push(Se[0]);var _e=Se.map(function(we){return we.id()}).join(",");K.indexOf(_e)===-1&&(x.push(l.spawn(Se)),K.push(_e))}}else break}return{distanceTo:S,pathTo:P,hasNegativeWeightCycle:b,negativeWeightCycles:x}}},$y=Math.sqrt(2),Uy=function(e,t,n){n.length===0&&er("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=t[i],l=t[o],u=n,f=u.length-1;f>=0;f--){var c=u[f],p=c[1],g=c[2];(t[p]===s&&t[g]===l||t[p]===l&&t[g]===s)&&u.splice(f,1)}for(var d=0;d<u.length;d++){var b=u[d];b[1]===l?(u[d]=b.slice(),u[d][1]=s):b[2]===l&&(u[d]=b.slice(),u[d][2]=s)}for(var x=0;x<t.length;x++)t[x]===l&&(t[x]=s);return u},ll=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=Uy(i,e,t),n--}return t},qy={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(X){return X.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/$y);if(i<2){er("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],f=0;f<o;f++){var c=a[f];u.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var p=1/0,g=[],d=new Array(i),b=new Array(i),x=new Array(i),w=function(K,T){for(var M=0;M<i;M++)T[M]=K[M]},C=0;C<=s;C++){for(var m=0;m<i;m++)b[m]=m;var S=ll(b,u.slice(),i,l),P=S.slice();w(b,x);var D=ll(b,S,l,2),v=ll(x,P,l,2);D.length<=v.length&&D.length<p?(p=D.length,g=D,w(b,d)):v.length<=D.length&&v.length<p&&(p=v.length,g=v,w(x,d))}for(var E=this.spawn(g.map(function(X){return a[X[0]]})),k=this.spawn(),N=this.spawn(),O=d[0],I=0;I<d.length;I++){var H=d[I],G=n[I];H===O?k.merge(G):N.merge(G)}var Y=function(K){var T=e.spawn();return K.forEach(function(M){T.merge(M),M.connectedEdges().forEach(function(L){e.contains(L)&&!E.contains(L)&&T.merge(L)})}),T},j=[Y(k),Y(N)],q={cut:E,components:j,partition1:k,partition2:N};return q}},Wy=function(e){return{x:e.x,y:e.y}},Ls=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},sd=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},oi=function(e){return{x:e[0],y:e[1]}},Ky=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},jy=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},Yy=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},Xy=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(p,g){return p-g});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+s]:(e[c-1+s]+e[c+s])/2},Qy=function(e){return Math.PI*e/180},Go=function(e,t){return Math.atan2(t,e)-Math.PI/2},uf=Math.log2||function(r){return Math.log(r)/Math.log(2)},ud=function(e){return e>0?1:e<0?-1:0},Na=function(e,t){return Math.sqrt(Ta(e,t))},Ta=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},Zy=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},yr=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},li=function(e,t,n,a){return{x:yr(e.x,t.x,n.x,a),y:yr(e.y,t.y,n.y,a)}},Jy=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Na(e,t),s={x:i.x/o,y:i.y/o};return n=n==null?0:n,a=a!=null?a:n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},uo=function(e,t,n){return Math.max(e,Math.min(n,t))},qr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},em=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},tm=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},rm=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},ld=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},nm=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},rs=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ns=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var s=on(t,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},dc=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},lf=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},vi=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},am=function(e,t){return vi(e,t.x,t.y)},fd=function(e,t){return vi(e,t.x1,t.y1)&&vi(e,t.x2,t.y2)},cd=function(e,t,n,a,i,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?Ia(i,o):l,f=i/2,c=o/2;u=Math.min(u,f,c);var p=u!==f,g=u!==c,d;if(p){var b=n-f+u-s,x=a-c-s,w=n+f-u+s,C=x;if(d=aa(e,t,n,a,b,x,w,C,!1),d.length>0)return d}if(g){var m=n+f+s,S=a-c+u-s,P=m,D=a+c-u+s;if(d=aa(e,t,n,a,m,S,P,D,!1),d.length>0)return d}if(p){var v=n-f+u-s,E=a+c+s,k=n+f-u+s,N=E;if(d=aa(e,t,n,a,v,E,k,N,!1),d.length>0)return d}if(g){var O=n-f-s,I=a-c+u-s,H=O,G=a+c-u+s;if(d=aa(e,t,n,a,O,I,H,G,!1),d.length>0)return d}var Y;{var j=n-f+u,q=a-c+u;if(Y=Qi(e,t,n,a,j,q,u+s),Y.length>0&&Y[0]<=j&&Y[1]<=q)return[Y[0],Y[1]]}{var X=n+f-u,K=a-c+u;if(Y=Qi(e,t,n,a,X,K,u+s),Y.length>0&&Y[0]>=X&&Y[1]<=K)return[Y[0],Y[1]]}{var T=n+f-u,M=a+c-u;if(Y=Qi(e,t,n,a,T,M,u+s),Y.length>0&&Y[0]>=T&&Y[1]>=M)return[Y[0],Y[1]]}{var L=n-f+u,F=a+c-u;if(Y=Qi(e,t,n,a,L,F,u+s),Y.length>0&&Y[0]<=L&&Y[1]>=F)return[Y[0],Y[1]]}return[]},im=function(e,t,n,a,i,o,s){var l=s,u=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,o),p=Math.max(a,o);return u-l<=e&&e<=f+l&&c-l<=t&&t<=p+l},om=function(e,t,n,a,i,o,s,l,u){var f={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<f.x1||e>f.x2||t<f.y1||t>f.y2)},sm=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-t+o)/s,u=(-t-o)/s;return[l,u]},um=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var s,l,u,f,c,p,g,d;if(l=(3*n-t*t)/9,u=-(27*a)+t*(9*n-2*(t*t)),u/=54,s=l*l*l+u*u,i[1]=0,g=t/3,s>0){c=u+Math.sqrt(s),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),p=u-Math.sqrt(s),p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-g+c+p,g+=(c+p)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-p+c)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,s===0){d=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-g+2*d,i[4]=i[2]=-(d+g);return}l=-l,f=l*l*l,f=Math.acos(u/Math.sqrt(f)),d=2*Math.sqrt(l),i[0]=-g+d*Math.cos(f/3),i[2]=-g+d*Math.cos((f+2*Math.PI)/3),i[4]=-g+d*Math.cos((f+4*Math.PI)/3)},lm=function(e,t,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,f=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,c=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*t+2*o*o+2*o*t-l*t,p=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,g=[];um(u,f,c,p,g);for(var d=1e-7,b=[],x=0;x<6;x+=2)Math.abs(g[x+1])<d&&g[x]>=0&&g[x]<=1&&b.push(g[x]);b.push(1),b.push(0);for(var w=-1,C,m,S,P=0;P<b.length;P++)C=Math.pow(1-b[P],2)*n+2*(1-b[P])*b[P]*i+b[P]*b[P]*s,m=Math.pow(1-b[P],2)*a+2*(1-b[P])*b[P]*o+b[P]*b[P]*l,S=Math.pow(C-e,2)+Math.pow(m-t,2),w>=0?S<w&&(w=S):w=S;return w},fm=function(e,t,n,a,i,o){var s=[e-n,t-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],f=s[0]*s[0]+s[1]*s[1],c=s[0]*l[0]+s[1]*l[1],p=c*c/u;return c<0?f:p>u?(e-i)*(e-i)+(t-o)*(t-o):f-p},Ur=function(e,t,n){for(var a,i,o,s,l,u=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(o=n[(f+1)*2],s=n[(f+1)*2+1]):(o=n[(f+1-n.length/2)*2],s=n[(f+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>t&&u++;else continue;return u%2!==0},Gn=function(e,t,n,a,i,o,s,l,u){var f=new Array(n.length),c;l[0]!=null?(c=Math.atan(l[1]/l[0]),l[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=l;for(var p=Math.cos(-c),g=Math.sin(-c),d=0;d<f.length/2;d++)f[d*2]=o/2*(n[d*2]*p-n[d*2+1]*g),f[d*2+1]=s/2*(n[d*2+1]*p+n[d*2]*g),f[d*2]+=a,f[d*2+1]+=i;var b;if(u>0){var x=ps(f,-u);b=gs(x)}else b=f;return Ur(e,t,b)},cm=function(e,t,n,a,i,o,s,l){for(var u=new Array(n.length*2),f=0;f<l.length;f++){var c=l[f];u[f*4+0]=c.startX,u[f*4+1]=c.startY,u[f*4+2]=c.stopX,u[f*4+3]=c.stopY;var p=Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2);if(p<=Math.pow(c.radius,2))return!0}return Ur(e,t,u)},gs=function(e){for(var t=new Array(e.length/2),n,a,i,o,s,l,u,f,c=0;c<e.length/4;c++){n=e[c*4],a=e[c*4+1],i=e[c*4+2],o=e[c*4+3],c<e.length/4-1?(s=e[(c+1)*4],l=e[(c+1)*4+1],u=e[(c+1)*4+2],f=e[(c+1)*4+3]):(s=e[0],l=e[1],u=e[2],f=e[3]);var p=aa(n,a,i,o,s,l,u,f,!0);t[c*2]=p[0],t[c*2+1]=p[1]}return t},ps=function(e,t){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,f=-(o-a),c=Math.sqrt(u*u+f*f),p=u/c,g=f/c;n[l*4]=a+p*t,n[l*4+1]=i+g*t,n[l*4+2]=o+p*t,n[l*4+3]=s+g*t}return n},hm=function(e,t,n,a,i,o){var s=n-e,l=a-t;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),f=u-1;if(f<0)return[];var c=f/u;return[(n-e)*c+e,(a-t)*c+t]},Ma=function(e,t,n,a,i,o,s){return e-=i,t-=o,e/=n/2+s,t/=a/2+s,e*e+t*t<=1},Qi=function(e,t,n,a,i,o,s){var l=[n-e,a-t],u=[e-i,t-o],f=l[0]*l[0]+l[1]*l[1],c=2*(u[0]*l[0]+u[1]*l[1]),p=u[0]*u[0]+u[1]*u[1]-s*s,g=c*c-4*f*p;if(g<0)return[];var d=(-c+Math.sqrt(g))/(2*f),b=(-c-Math.sqrt(g))/(2*f),x=Math.min(d,b),w=Math.max(d,b),C=[];if(x>=0&&x<=1&&C.push(x),w>=0&&w<=1&&C.push(w),C.length===0)return[];var m=C[0]*l[0]+e,S=C[0]*l[1]+t;if(C.length>1){if(C[0]==C[1])return[m,S];var P=C[1]*l[0]+e,D=C[1]*l[1]+t;return[m,S,P,D]}else return[m,S]},fl=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},aa=function(e,t,n,a,i,o,s,l,u){var f=e-i,c=n-e,p=s-i,g=t-o,d=a-t,b=l-o,x=p*g-b*f,w=c*g-d*f,C=b*c-p*d;if(C!==0){var m=x/C,S=w/C,P=.001,D=0-P,v=1+P;return D<=m&&m<=v&&D<=S&&S<=v?[e+m*c,t+m*d]:u?[e+m*c,t+m*d]:[]}else return x===0||w===0?fl(e,n,s)===s?[s,l]:fl(e,n,i)===i?[i,o]:fl(i,s,n)===n?[n,a]:[]:[]},lo=function(e,t,n,a,i,o,s,l){var u=[],f,c=new Array(n.length),p=!0;o==null&&(p=!1);var g;if(p){for(var d=0;d<c.length/2;d++)c[d*2]=n[d*2]*o+a,c[d*2+1]=n[d*2+1]*s+i;if(l>0){var b=ps(c,-l);g=gs(b)}else g=c}else g=n;for(var x,w,C,m,S=0;S<g.length/2;S++)x=g[S*2],w=g[S*2+1],S<g.length/2-1?(C=g[(S+1)*2],m=g[(S+1)*2+1]):(C=g[0],m=g[1]),f=aa(e,t,a,i,x,w,C,m),f.length!==0&&u.push(f[0],f[1]);return u},dm=function(e,t,n,a,i,o,s,l,u){var f=[],c,p=new Array(n.length*2);u.forEach(function(C,m){m===0?(p[p.length-2]=C.startX,p[p.length-1]=C.startY):(p[m*4-2]=C.startX,p[m*4-1]=C.startY),p[m*4]=C.stopX,p[m*4+1]=C.stopY,c=Qi(e,t,a,i,C.cx,C.cy,C.radius),c.length!==0&&f.push(c[0],c[1])});for(var g=0;g<p.length/4;g++)c=aa(e,t,a,i,p[g*4],p[g*4+1],p[g*4+2],p[g*4+3],!1),c.length!==0&&f.push(c[0],c[1]);if(f.length>2){for(var d=[f[0],f[1]],b=Math.pow(d[0]-e,2)+Math.pow(d[1]-t,2),x=1;x<f.length/2;x++){var w=Math.pow(f[x*2]-e,2)+Math.pow(f[x*2+1]-t,2);w<=b&&(d[0]=f[x*2],d[1]=f[x*2+1],b=w)}return d}return f},Vo=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},Fr=function(e,t){var n=Dl(e,t);return n=hd(n),n},hd=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);for(var f=2/(s-i),c=2/(l-o),p=0;p<a;p++)t=e[2*p]=e[2*p]*f,n=e[2*p+1]=e[2*p+1]*c,i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var g=0;g<a;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},Dl=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Ia=function(e,t){return Math.min(e/4,t/4,8)},dd=function(e,t){return Math.min(e/10,t/10,8)},ff=function(){return 8},vm=function(e,t,n){return[e-2*t+n,2*(t-e),e]},Ml=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},gm=_r({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),pm={pageRank:function(e){for(var t=gm(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,f=l.edges,c=u.length,p=c*c,g=f.length,d=new Array(p),b=new Array(c),x=(1-n)/c,w=0;w<c;w++){for(var C=0;C<c;C++){var m=w*c+C;d[m]=0}b[w]=0}for(var S=0;S<g;S++){var P=f[S],D=P.data("source"),v=P.data("target");if(D!==v){var E=u.indexOfId(D),k=u.indexOfId(v),N=o(P),O=k*c+E;d[O]+=N,b[E]+=N}}for(var I=1/c+x,H=0;H<c;H++)if(b[H]===0)for(var G=0;G<c;G++){var Y=G*c+H;d[Y]=I}else for(var j=0;j<c;j++){var q=j*c+H;d[q]=d[q]/b[H]+x}for(var X=new Array(c),K=new Array(c),T,M=0;M<c;M++)X[M]=1;for(var L=0;L<i;L++){for(var F=0;F<c;F++)K[F]=0;for(var W=0;W<c;W++)for(var Z=0;Z<c;Z++){var ee=W*c+Z;K[W]+=d[ee]*X[Z]}Zy(K),T=X,X=K,K=T;for(var Q=0,oe=0;oe<c;oe++){var fe=T[oe]-X[oe];Q+=fe*fe}if(Q<a)break}var ce={rank:function(De){return De=s.collection(De)[0],X[u.indexOf(De)]}};return ce}},vc=_r({root:null,weight:function(e){return 1},directed:!1,alpha:0}),fi={degreeCentralityNormalized:function(e){e=vc(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},p=0,g=0,d=0;d<a;d++){var b=n[d],x=b.id();e.root=b;var w=this.degreeCentrality(e);p<w.indegree&&(p=w.indegree),g<w.outdegree&&(g=w.outdegree),f[x]=w.indegree,c[x]=w.outdegree}return{indegree:function(m){return p==0?0:(Qe(m)&&(m=t.filter(m)),f[m.id()]/p)},outdegree:function(m){return g===0?0:(Qe(m)&&(m=t.filter(m)),c[m.id()]/g)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(m){return o===0?0:(Qe(m)&&(m=t.filter(m)),i[m.id()]/o)}}}},degreeCentrality:function(e){e=vc(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=t.collection(i)[0],s){for(var g=i.connectedEdges(),d=g.filter(function(D){return D.target().same(i)&&n.has(D)}),b=g.filter(function(D){return D.source().same(i)&&n.has(D)}),x=d.length,w=b.length,C=0,m=0,S=0;S<d.length;S++)C+=o(d[S]);for(var P=0;P<b.length;P++)m+=o(b[P]);return{indegree:Math.pow(x,1-l)*Math.pow(C,l),outdegree:Math.pow(w,1-l)*Math.pow(m,l)}}else{for(var u=i.connectedEdges().intersection(n),f=u.length,c=0,p=0;p<u.length;p++)c+=o(u[p]);return{degree:Math.pow(f,1-l)*Math.pow(c,l)}}}};fi.dc=fi.degreeCentrality;fi.dcn=fi.degreeCentralityNormalised=fi.degreeCentralityNormalized;var gc=_r({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),ci={closenessCentralityNormalized:function(e){for(var t=gc(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),s={},l=0,u=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<u.length;c++){for(var p=0,g=u[c],d=0;d<u.length;d++)if(c!==d){var b=f.distance(g,u[d]);n?p+=1/b:p+=b}n||(p=1/p),l<p&&(l=p),s[g.id()]=p}return{closeness:function(w){return l==0?0:(Qe(w)?w=o.filter(w)[0].id():w=w.id(),s[w]/l)}}},closenessCentrality:function(e){var t=gc(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),f=0;f<u.length;f++){var c=u[f];if(!c.same(n)){var p=s.distanceTo(c);o?l+=1/p:l+=p}}return o?l:1/l}};ci.cc=ci.closenessCentrality;ci.ccn=ci.closenessCentralityNormalised=ci.closenessCentralityNormalized;var ym=_r({weight:null,directed:!1}),Ol={betweennessCentrality:function(e){for(var t=ym(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},f=0,c={set:function(m,S){u[m]=S,S>f&&(f=S)},get:function(m){return u[m]}},p=0;p<s.length;p++){var g=s[p],d=g.id();n?l[d]=g.outgoers().nodes():l[d]=g.openNeighborhood().nodes(),c.set(d,0)}for(var b=function(m){for(var S=s[m].id(),P=[],D={},v={},E={},k=new xo(function(Z,ee){return E[Z]-E[ee]}),N=0;N<s.length;N++){var O=s[N].id();D[O]=[],v[O]=0,E[O]=1/0}for(v[S]=1,E[S]=0,k.push(S);!k.empty();){var I=k.pop();if(P.push(I),i)for(var H=0;H<l[I].length;H++){var G=l[I][H],Y=o.getElementById(I),j=void 0;Y.edgesTo(G).length>0?j=Y.edgesTo(G)[0]:j=G.edgesTo(Y)[0];var q=a(j);G=G.id(),E[G]>E[I]+q&&(E[G]=E[I]+q,k.nodes.indexOf(G)<0?k.push(G):k.updateItem(G),v[G]=0,D[G]=[]),E[G]==E[I]+q&&(v[G]=v[G]+v[I],D[G].push(I))}else for(var X=0;X<l[I].length;X++){var K=l[I][X].id();E[K]==1/0&&(k.push(K),E[K]=E[I]+1),E[K]==E[I]+1&&(v[K]=v[K]+v[I],D[K].push(I))}}for(var T={},M=0;M<s.length;M++)T[s[M].id()]=0;for(;P.length>0;){for(var L=P.pop(),F=0;F<D[L].length;F++){var W=D[L][F];T[W]=T[W]+v[W]/v[L]*(1+T[L])}L!=s[m].id()&&c.set(L,c.get(L)+T[L])}},x=0;x<s.length;x++)b(x);var w={betweenness:function(m){var S=o.collection(m).id();return c.get(S)},betweennessNormalized:function(m){if(f==0)return 0;var S=o.collection(m).id();return c.get(S)/f}};return w.betweennessNormalised=w.betweennessNormalized,w}};Ol.bc=Ol.betweennessCentrality;var mm=_r({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),bm=function(e){return mm(e)},wm=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},xm=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},vd=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},Sm=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*t[s*n+l]}return a},Cm=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=Sm(e,a,t);return e},_m=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return vd(a,t),a},Em=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},Tm=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var s=[],l=0;l<t;l++)Math.round(e[o*t+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},Pm=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},km=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&Pm(e[t],e[n])&&e.splice(n,1);return e},pc=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=bm(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var l=t.length,u=l*l,f=new Array(u),c,p=0;p<u;p++)f[p]=0;for(var g=0;g<n.length;g++){var d=n[g],b=o[d.source().id()],x=o[d.target().id()],w=wm(d,i.attributes);f[b*l+x]+=w,f[x*l+b]+=w}xm(f,l,i.multFactor),vd(f,l);for(var C=!0,m=0;C&&m<i.maxIterations;)C=!1,c=Cm(f,l,i.expandFactor),f=_m(c,l,i.inflateFactor),Em(f,c,u,4)||(C=!0),m++;var S=Tm(f,l,t,a);return S=km(S),S},Am={markovClustering:pc,mcl:pc},Dm=function(e){return e},gd=function(e,t){return Math.abs(t-e)},yc=function(e,t,n){return e+gd(t,n)},mc=function(e,t,n){return e+Math.pow(n-t,2)},Mm=function(e){return Math.sqrt(e)},Om=function(e,t,n){return Math.max(e,gd(t,n))},Hi=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:Dm,s=a,l,u,f=0;f<e;f++)l=t(f),u=n(f),s=i(s,l,u);return o(s)},gi={euclidean:function(e,t,n){return e>=2?Hi(e,t,n,0,mc,Mm):Hi(e,t,n,0,yc)},squaredEuclidean:function(e,t,n){return Hi(e,t,n,0,mc)},manhattan:function(e,t,n){return Hi(e,t,n,0,yc)},max:function(e,t,n){return Hi(e,t,n,-1/0,Om)}};gi["squared-euclidean"]=gi.squaredEuclidean;gi.squaredeuclidean=gi.squaredEuclidean;function Ns(r,e,t,n,a,i){var o;return Zt(r)?o=r:o=gi[r]||gi.euclidean,e===0&&Zt(r)?o(a,i):o(e,t,n,a,i)}var Lm=_r({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),cf=function(e){return Lm(e)},ys=function(e,t,n,a,i){var o=i!=="kMedoids",s=o?function(c){return n[c]}:function(c){return a[c](n)},l=function(p){return a[p](t)},u=n,f=t;return Ns(e,a.length,s,l,u,f)},cl=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(t),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var f=0;f<t;f++){l=[];for(var c=0;c<a;c++)l[c]=Math.random()*(o[c]-i[c])+i[c];s[f]=l}return s},pd=function(e,t,n,a,i){for(var o=1/0,s=0,l=0;l<t.length;l++){var u=ys(n,e,t[l],a,i);u<o&&(o=u,s=l)}return s},yd=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},Nm=function(e,t,n){return Math.abs(t-e)<=n},Im=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},Rm=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},bc=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];Rm(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},wc=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=ys("manhattan",t[i],e,n,"kMedoids");return a},Fm=function(e){var t=this.cy(),n=this.nodes(),a=null,i=cf(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=cl(n,i.k,i.attributes)):cr(i.testCentroids)==="object"?l=i.testCentroids:l=cl(n,i.k,i.attributes):l=cl(n,i.k,i.attributes);for(var u=!0,f=0;u&&f<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],s[a.id()]=pd(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var p=0;p<i.k;p++){var g=yd(p,n,s);if(g.length!==0){for(var d=i.attributes.length,b=l[p],x=new Array(d),w=new Array(d),C=0;C<d;C++){w[C]=0;for(var m=0;m<g.length;m++)a=g[m],w[C]+=i.attributes[C](a);x[C]=w[C]/g.length,Nm(x[C],b[C],i.sensitivityThreshold)||(u=!0)}l[p]=x,o[p]=t.collection(g)}}f++}return o},Bm=function(e){var t=this.cy(),n=this.nodes(),a=null,i=cf(e),o=new Array(i.k),s,l={},u,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(cr(i.testCentroids)==="object"?s=i.testCentroids:s=bc(n,i.k)):s=bc(n,i.k);for(var c=!0,p=0;c&&p<i.maxIterations;){for(var g=0;g<n.length;g++)a=n[g],l[a.id()]=pd(a,s,i.distance,i.attributes,"kMedoids");c=!1;for(var d=0;d<s.length;d++){var b=yd(d,n,l);if(b.length!==0){f[d]=wc(s[d],b,i.attributes);for(var x=0;x<b.length;x++)u=wc(b[x],b,i.attributes),u<f[d]&&(f[d]=u,s[d]=b[x],c=!0);o[d]=t.collection(b)}}p++}return o},zm=function(e,t,n,a,i){for(var o,s,l=0;l<t.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){o=0,s=0;for(var p=0;p<t.length;p++)o+=a[p][f]*i.attributes[c](t[p]),s+=a[p][f];e[f][c]=o/s}},Gm=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,l,u,f=2/(i.m-1),c=0;c<n.length;c++)for(var p=0;p<a.length;p++){s=0;for(var g=0;g<n.length;g++)l=ys(i.distance,a[p],n[c],i.attributes,"cmeans"),u=ys(i.distance,a[p],n[g],i.attributes,"cmeans"),s+=Math.pow(l/u,f);e[p][c]=1/s}},Vm=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<t.length;u++){s=-1/0,l=-1;for(var f=0;f<t[0].length;f++)t[u][f]>s&&(s=t[u][f],l=f);i[l].push(e[u])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},xc=function(e){var t=this.cy(),n=this.nodes(),a=cf(e),i,o,s,l,u;l=new Array(n.length);for(var f=0;f<n.length;f++)l[f]=new Array(a.k);s=new Array(n.length);for(var c=0;c<n.length;c++)s[c]=new Array(a.k);for(var p=0;p<n.length;p++){for(var g=0,d=0;d<a.k;d++)s[p][d]=Math.random(),g+=s[p][d];for(var b=0;b<a.k;b++)s[p][b]=s[p][b]/g}o=new Array(a.k);for(var x=0;x<a.k;x++)o[x]=new Array(a.attributes.length);u=new Array(n.length);for(var w=0;w<n.length;w++)u[w]=new Array(a.k);for(var C=!0,m=0;C&&m<a.maxIterations;)C=!1,zm(o,n,s,u,a),Gm(s,l,o,n,a),Im(s,l,a.sensitivityThreshold)||(C=!0),m++;return i=Vm(n,s,a,t),{clusters:i,degreeOfMembership:s}},Hm={kMeans:Fm,kMedoids:Bm,fuzzyCMeans:xc,fcm:xc},$m=_r({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),Um={single:"min",complete:"max"},qm=function(e){var t=$m(e),n=Um[t.linkage];return n!=null&&(t.linkage=n),t},Sc=function(e,t,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,f=function(k,N){return Ns(i.distance,u.length,function(O){return u[O](k)},function(O){return u[O](N)},k,N)},c=0;c<e.length;c++){var p=e[c].key,g=n[p][a[p]];g<s&&(o=p,s=g)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var d=t[o],b=t[a[o]],x;i.mode==="dendrogram"?x={left:d,right:b,key:d.key}:x={value:d.value.concat(b.value),key:d.key},e[d.index]=x,e.splice(b.index,1),t[d.key]=x;for(var w=0;w<e.length;w++){var C=e[w];d.key===C.key?l=1/0:i.linkage==="min"?(l=n[d.key][C.key],n[d.key][C.key]>n[b.key][C.key]&&(l=n[b.key][C.key])):i.linkage==="max"?(l=n[d.key][C.key],n[d.key][C.key]<n[b.key][C.key]&&(l=n[b.key][C.key])):i.linkage==="mean"?l=(n[d.key][C.key]*d.size+n[b.key][C.key]*b.size)/(d.size+b.size):i.mode==="dendrogram"?l=f(C.value,d.value):l=f(C.value[0],d.value[0]),n[d.key][C.key]=n[C.key][d.key]=l}for(var m=0;m<e.length;m++){var S=e[m].key;if(a[S]===d.key||a[S]===b.key){for(var P=S,D=0;D<e.length;D++){var v=e[D].key;n[S][v]<n[S][P]&&(P=v)}a[S]=P}e[m].index=m}return d.key=b.key=d.index=b.index=null,!0},Ho=function r(e,t,n){!e||(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},Wm=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),a=r(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},Km=function r(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&Ho(e.left,a),e.right&&Ho(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&Ho(e.left,a),e.right&&Ho(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=r(e.left,t-1,n)),e.right&&(i=r(e.right,t-1,n)),a.concat(i))},Cc=function(e){for(var t=this.cy(),n=this.nodes(),a=qm(e),i=a.attributes,o=function(m,S){return Ns(a.distance,i.length,function(P){return i[P](m)},function(P){return i[P](S)},m,S)},s=[],l=[],u=[],f=[],c=0;c<n.length;c++){var p={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};s[c]=p,f[c]=p,l[c]=[],u[c]=0}for(var g=0;g<s.length;g++)for(var d=0;d<=g;d++){var b=void 0;a.mode==="dendrogram"?b=g===d?1/0:o(s[g].value,s[d].value):b=g===d?1/0:o(s[g].value[0],s[d].value[0]),l[g][d]=b,l[d][g]=b,b<l[g][u[g]]&&(u[g]=d)}for(var x=Sc(s,f,l,u,a);x;)x=Sc(s,f,l,u,a);var w;return a.mode==="dendrogram"?(w=Km(s[0],a.dendrogramDepth,t),a.addDendrogram&&Wm(s[0],t)):(w=new Array(s.length),s.forEach(function(C,m){C.key=C.index=null,w[m]=t.collection(C.value)})),w},jm={hierarchicalClustering:Cc,hca:Cc},Ym=_r({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),Xm=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||er("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||Be(n)||er("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),Ym(e)},Qm=function(e,t,n,a){var i=function(s,l){return a[l](s)};return-Ns(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},Zm=function(e,t){var n=null;return t==="median"?n=Xy(e):t==="mean"?n=Yy(e):t==="min"?n=Ky(e):t==="max"?n=jy(e):n=t,n},Jm=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},_c=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];t[i*e+u]>s&&(o=u,s=t[i*e+u])}o>0&&a.push(o)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},e0=function(e,t,n){for(var a=_c(e,t,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,f=0;f<o.length;f++){for(var c=0,p=0;p<o.length;p++)c+=t[o[p]*e+o[f]];c>u&&(l=f,u=c)}n[i]=o[l]}return a=_c(e,t,n),a},Ec=function(e){for(var t=this.cy(),n=this.nodes(),a=Xm(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,f,c,p;s=n.length,l=s*s,u=new Array(l);for(var g=0;g<l;g++)u[g]=-1/0;for(var d=0;d<s;d++)for(var b=0;b<s;b++)d!==b&&(u[d*s+b]=Qm(a.distance,n[d],n[b],a.attributes));f=Zm(u,a.preference);for(var x=0;x<s;x++)u[x*s+x]=f;c=new Array(l);for(var w=0;w<l;w++)c[w]=0;p=new Array(l);for(var C=0;C<l;C++)p[C]=0;for(var m=new Array(s),S=new Array(s),P=new Array(s),D=0;D<s;D++)m[D]=0,S[D]=0,P[D]=0;for(var v=new Array(s*a.minIterations),E=0;E<v.length;E++)v[E]=0;var k;for(k=0;k<a.maxIterations;k++){for(var N=0;N<s;N++){for(var O=-1/0,I=-1/0,H=-1,G=0,Y=0;Y<s;Y++)m[Y]=c[N*s+Y],G=p[N*s+Y]+u[N*s+Y],G>=O?(I=O,O=G,H=Y):G>I&&(I=G);for(var j=0;j<s;j++)c[N*s+j]=(1-a.damping)*(u[N*s+j]-O)+a.damping*m[j];c[N*s+H]=(1-a.damping)*(u[N*s+H]-I)+a.damping*m[H]}for(var q=0;q<s;q++){for(var X=0,K=0;K<s;K++)m[K]=p[K*s+q],S[K]=Math.max(0,c[K*s+q]),X+=S[K];X-=S[q],S[q]=c[q*s+q],X+=S[q];for(var T=0;T<s;T++)p[T*s+q]=(1-a.damping)*Math.min(0,X-S[T])+a.damping*m[T];p[q*s+q]=(1-a.damping)*(X-S[q])+a.damping*m[q]}for(var M=0,L=0;L<s;L++){var F=p[L*s+L]+c[L*s+L]>0?1:0;v[k%a.minIterations*s+L]=F,M+=F}if(M>0&&(k>=a.minIterations-1||k==a.maxIterations-1)){for(var W=0,Z=0;Z<s;Z++){P[Z]=0;for(var ee=0;ee<a.minIterations;ee++)P[Z]+=v[ee*s+Z];(P[Z]===0||P[Z]===a.minIterations)&&W++}if(W===s)break}}for(var Q=Jm(s,c,p),oe=e0(s,u,Q),fe={},ce=0;ce<Q.length;ce++)fe[Q[ce]]=[];for(var Se=0;Se<n.length;Se++){var De=i[n[Se].id()],Le=oe[De];Le!=null&&fe[Le].push(n[Se])}for(var ke=new Array(Q.length),me=0;me<Q.length;me++)ke[me]=t.collection(fe[Q[me]]);return ke},t0={affinityPropagation:Ec,ap:Ec},r0=_r({root:void 0,directed:!1}),n0={hierholzer:function(e){if(!_t(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=r0(e),a=n.root,i=n.directed,o=this,s=!1,l,u,f;a&&(f=Qe(a)?this.filter(a)[0].id():a[0].id());var c={},p={};i?o.forEach(function(C){var m=C.id();if(C.isNode()){var S=C.indegree(!0),P=C.outdegree(!0),D=S-P,v=P-S;D==1?l?s=!0:l=m:v==1?u?s=!0:u=m:(v>1||D>1)&&(s=!0),c[m]=[],C.outgoers().forEach(function(E){E.isEdge()&&c[m].push(E.id())})}else p[m]=[void 0,C.target().id()]}):o.forEach(function(C){var m=C.id();if(C.isNode()){var S=C.degree(!0);S%2&&(l?u?s=!0:u=m:l=m),c[m]=[],C.connectedEdges().forEach(function(P){return c[m].push(P.id())})}else p[m]=[C.source().id(),C.target().id()]});var g={found:!1,trail:void 0};if(s)return g;if(u&&l)if(i){if(f&&u!=f)return g;f=u}else{if(f&&u!=f&&l!=f)return g;f||(f=u)}else f||(f=o[0].id());var d=function(m){for(var S=m,P=[m],D,v,E;c[S].length;)D=c[S].shift(),v=p[D][0],E=p[D][1],S!=E?(c[E]=c[E].filter(function(k){return k!=D}),S=E):!i&&S!=v&&(c[v]=c[v].filter(function(k){return k!=D}),S=v),P.unshift(D),P.unshift(S);return P},b=[],x=[];for(x=d(f);x.length!=1;)c[x[0]].length==0?(b.unshift(o.getElementById(x.shift())),b.unshift(o.getElementById(x.shift()))):x=d(x.shift()).concat(x);b.unshift(o.getElementById(x.shift()));for(var w in c)if(c[w].length)return g;return g.found=!0,g.trail=this.spawn(b,!0),g}},$o=function(){var e=this,t={},n=0,a=0,i=[],o=[],s={},l=function(p,g){for(var d=o.length-1,b=[],x=e.spawn();o[d].x!=p||o[d].y!=g;)b.push(o.pop().edge),d--;b.push(o.pop().edge),b.forEach(function(w){var C=w.connectedNodes().intersection(e);x.merge(w),C.forEach(function(m){var S=m.id(),P=m.connectedEdges().intersection(e);x.merge(m),t[S].cutVertex?x.merge(P.filter(function(D){return D.isLoop()})):x.merge(P)})}),i.push(x)},u=function c(p,g,d){p===d&&(a+=1),t[g]={id:n,low:n++,cutVertex:!1};var b=e.getElementById(g).connectedEdges().intersection(e);if(b.size()===0)i.push(e.spawn(e.getElementById(g)));else{var x,w,C,m;b.forEach(function(S){x=S.source().id(),w=S.target().id(),C=x===g?w:x,C!==d&&(m=S.id(),s[m]||(s[m]=!0,o.push({x:g,y:C,edge:S})),C in t?t[g].low=Math.min(t[g].low,t[C].id):(c(p,C,g),t[g].low=Math.min(t[g].low,t[C].low),t[g].id<=t[C].low&&(t[g].cutVertex=!0,l(g,C))))})}};e.forEach(function(c){if(c.isNode()){var p=c.id();p in t||(a=0,u(p,p),t[p].cutVertex=a>1)}});var f=Object.keys(t).filter(function(c){return t[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},a0={hopcroftTarjanBiconnected:$o,htbc:$o,htb:$o,hopcroftTarjanBiconnectedComponents:$o},Uo=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),s=function l(u){i.push(u),t[u]={index:n,low:n++,explored:!1};var f=e.getElementById(u).connectedEdges().intersection(e);if(f.forEach(function(b){var x=b.target().id();x!==u&&(x in t||l(x),t[x].explored||(t[u].low=Math.min(t[u].low,t[x].low)))}),t[u].index===t[u].low){for(var c=e.spawn();;){var p=i.pop();if(c.merge(e.getElementById(p)),t[p].low=t[u].index,t[p].explored=!0,p===u)break}var g=c.edgesWith(c),d=c.merge(g);a.push(d),o=o.difference(d)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in t||s(u)}}),{cut:o,components:a}},i0={tarjanStronglyConnected:Uo,tsc:Uo,tscc:Uo,tarjanStronglyConnectedComponents:Uo},md={};[so,Iy,Ry,By,Gy,Hy,qy,pm,fi,ci,Ol,Am,Hm,jm,t0,n0,a0,i0].forEach(function(r){tt(md,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var bd=0,wd=1,xd=2,Vn=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=bd,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Vn.prototype={fulfill:function(e){return Tc(this,wd,"fulfillValue",e)},reject:function(e){return Tc(this,xd,"rejectReason",e)},then:function(e,t){var n=this,a=new Vn;return n.onFulfilled.push(kc(e,a,"fulfill")),n.onRejected.push(kc(t,a,"reject")),Sd(n),a.proxy}};var Tc=function(e,t,n,a){return e.state===bd&&(e.state=t,e[n]=a,Sd(e)),e},Sd=function(e){e.state===wd?Pc(e,"onFulfilled",e.fulfillValue):e.state===xd&&Pc(e,"onRejected",e.rejectReason)},Pc=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},kc=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}o0(t,i)}}},o0=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(cr(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):r(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};Vn.all=function(r){return new Vn(function(e,t){for(var n=new Array(r.length),a=0,i=function(l,u){n[l]=u,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var l=r[s],u=l!=null&&l.then!=null;if(u)l.then(function(c){i(s,c)},function(c){t(c)});else{var f=l;i(s,f)}})(o)})};Vn.resolve=function(r){return new Vn(function(e,t){e(r)})};Vn.reject=function(r){return new Vn(function(e,t){t(r)})};var xi=typeof Promise!="undefined"?Promise:Vn,Ll=function(e,t,n){var a=rf(e),i=!a,o=this._private=tt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&Zt(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Ra=Ll.prototype;tt(Ra,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Kr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,f){var c=e[u];c!=null&&(e[u]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new xi(function(a,i){n.push(function(){a()})})}});Ra.complete=Ra.completed;Ra.run=Ra.play;Ra.running=Ra.playing;var s0={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var f=s.style();t=tt({},t,n);var c=Object.keys(t).length===0;if(c)return new Ll(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(u&&(t.style=f.getPropsList(t.style||t.css),t.css=void 0),u&&t.renderedPosition!=null){var p=t.renderedPosition,g=s.pan(),d=s.zoom();t.position=sd(p,d,g)}if(l&&t.panBy!=null){var b=t.panBy,x=s.pan();t.pan={x:x.x+b.x,y:x.y+b.y}}var w=t.center||t.centre;if(l&&w!=null){var C=s.getCenterPan(w.eles,t.zoom);C!=null&&(t.pan=C)}if(l&&t.fit!=null){var m=t.fit,S=s.getFitViewport(m.eles||m.boundingBox,m.padding);S!=null&&(t.pan=S.pan,t.zoom=S.zoom)}if(l&&_t(t.zoom)){var P=s.getZoomedViewport(t.zoom);P!=null?(P.zoomed&&(t.zoom=P.zoom),P.panned&&(t.pan=P.pan)):t.zoom=null}return new Ll(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=tt({},t,n));for(var l=0;l<o.length;l++){var u=o[l],f=u.animated()&&(t.queue===void 0||t.queue),c=u.animation(t,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],f=u._private,c=f.animation.current,p=0;p<c.length;p++){var g=c[p],d=g._private;n&&(d.duration=0)}t&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},u0=Array.isArray,Is=u0,l0=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f0=/^\w*$/;function c0(r,e){if(Is(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||wo(r)?!0:f0.test(r)||!l0.test(r)||e!=null&&r in Object(e)}var h0=c0,d0="[object AsyncFunction]",v0="[object Function]",g0="[object GeneratorFunction]",p0="[object Proxy]";function y0(r){if(!Oa(r))return!1;var e=Zh(r);return e==v0||e==g0||e==d0||e==p0}var m0=y0,b0=Ds["__core-js_shared__"],hl=b0,Ac=function(){var r=/[^.]+$/.exec(hl&&hl.keys&&hl.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function w0(r){return!!Ac&&Ac in r}var x0=w0,S0=Function.prototype,C0=S0.toString;function _0(r){if(r!=null){try{return C0.call(r)}catch{}try{return r+""}catch{}}return""}var E0=_0,T0=/[\\^$.*+?()[\]{}|]/g,P0=/^\[object .+?Constructor\]$/,k0=Function.prototype,A0=Object.prototype,D0=k0.toString,M0=A0.hasOwnProperty,O0=RegExp("^"+D0.call(M0).replace(T0,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function L0(r){if(!Oa(r)||x0(r))return!1;var e=m0(r)?O0:P0;return e.test(E0(r))}var N0=L0;function I0(r,e){return r==null?void 0:r[e]}var R0=I0;function F0(r,e){var t=R0(r,e);return N0(t)?t:void 0}var hf=F0,B0=hf(Object,"create"),fo=B0;function z0(){this.__data__=fo?fo(null):{},this.size=0}var G0=z0;function V0(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var H0=V0,$0="__lodash_hash_undefined__",U0=Object.prototype,q0=U0.hasOwnProperty;function W0(r){var e=this.__data__;if(fo){var t=e[r];return t===$0?void 0:t}return q0.call(e,r)?e[r]:void 0}var K0=W0,j0=Object.prototype,Y0=j0.hasOwnProperty;function X0(r){var e=this.__data__;return fo?e[r]!==void 0:Y0.call(e,r)}var Q0=X0,Z0="__lodash_hash_undefined__";function J0(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=fo&&e===void 0?Z0:e,this}var eb=J0;function Si(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Si.prototype.clear=G0;Si.prototype.delete=H0;Si.prototype.get=K0;Si.prototype.has=Q0;Si.prototype.set=eb;var Dc=Si;function tb(){this.__data__=[],this.size=0}var rb=tb;function nb(r,e){return r===e||r!==r&&e!==e}var Cd=nb;function ab(r,e){for(var t=r.length;t--;)if(Cd(r[t][0],e))return t;return-1}var Rs=ab,ib=Array.prototype,ob=ib.splice;function sb(r){var e=this.__data__,t=Rs(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():ob.call(e,t,1),--this.size,!0}var ub=sb;function lb(r){var e=this.__data__,t=Rs(e,r);return t<0?void 0:e[t][1]}var fb=lb;function cb(r){return Rs(this.__data__,r)>-1}var hb=cb;function db(r,e){var t=this.__data__,n=Rs(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var vb=db;function Ci(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ci.prototype.clear=rb;Ci.prototype.delete=ub;Ci.prototype.get=fb;Ci.prototype.has=hb;Ci.prototype.set=vb;var gb=Ci,pb=hf(Ds,"Map"),yb=pb;function mb(){this.size=0,this.__data__={hash:new Dc,map:new(yb||gb),string:new Dc}}var bb=mb;function wb(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var xb=wb;function Sb(r,e){var t=r.__data__;return xb(e)?t[typeof e=="string"?"string":"hash"]:t.map}var Fs=Sb;function Cb(r){var e=Fs(this,r).delete(r);return this.size-=e?1:0,e}var _b=Cb;function Eb(r){return Fs(this,r).get(r)}var Tb=Eb;function Pb(r){return Fs(this,r).has(r)}var kb=Pb;function Ab(r,e){var t=Fs(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var Db=Ab;function _i(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}_i.prototype.clear=bb;_i.prototype.delete=_b;_i.prototype.get=Tb;_i.prototype.has=kb;_i.prototype.set=Db;var _d=_i,Mb="Expected a function";function df(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Mb);var t=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=t.cache;if(i.has(a))return i.get(a);var o=r.apply(this,n);return t.cache=i.set(a,o)||i,o};return t.cache=new(df.Cache||_d),t}df.Cache=_d;var Ob=df,Lb=500;function Nb(r){var e=Ob(r,function(n){return t.size===Lb&&t.clear(),n}),t=e.cache;return e}var Ib=Nb,Rb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fb=/\\(\\)?/g,Bb=Ib(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(Rb,function(t,n,a,i){e.push(a?i.replace(Fb,"$1"):n||t)}),e}),Ed=Bb;function zb(r,e){for(var t=-1,n=r==null?0:r.length,a=Array(n);++t<n;)a[t]=e(r[t],t,r);return a}var Td=zb,Gb=1/0,Mc=di?di.prototype:void 0,Oc=Mc?Mc.toString:void 0;function Pd(r){if(typeof r=="string")return r;if(Is(r))return Td(r,Pd)+"";if(wo(r))return Oc?Oc.call(r):"";var e=r+"";return e=="0"&&1/r==-Gb?"-0":e}var Vb=Pd;function Hb(r){return r==null?"":Vb(r)}var kd=Hb;function $b(r,e){return Is(r)?r:h0(r,e)?[r]:Ed(kd(r))}var Ad=$b,Ub=1/0;function qb(r){if(typeof r=="string"||wo(r))return r;var e=r+"";return e=="0"&&1/r==-Ub?"-0":e}var vf=qb;function Wb(r,e){e=Ad(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[vf(e[t++])];return t&&t==n?r:void 0}var Kb=Wb;function jb(r,e,t){var n=r==null?void 0:Kb(r,e);return n===void 0?t:n}var Yb=jb,Xb=function(){try{var r=hf(Object,"defineProperty");return r({},"",{}),r}catch{}}(),Lc=Xb;function Qb(r,e,t){e=="__proto__"&&Lc?Lc(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var Zb=Qb,Jb=Object.prototype,e1=Jb.hasOwnProperty;function t1(r,e,t){var n=r[e];(!(e1.call(r,e)&&Cd(n,t))||t===void 0&&!(e in r))&&Zb(r,e,t)}var r1=t1,n1=9007199254740991,a1=/^(?:0|[1-9]\d*)$/;function i1(r,e){var t=typeof r;return e=e==null?n1:e,!!e&&(t=="number"||t!="symbol"&&a1.test(r))&&r>-1&&r%1==0&&r<e}var o1=i1;function s1(r,e,t,n){if(!Oa(r))return r;e=Ad(e,r);for(var a=-1,i=e.length,o=i-1,s=r;s!=null&&++a<i;){var l=vf(e[a]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(a!=o){var f=s[l];u=n?n(f,l,s):void 0,u===void 0&&(u=Oa(f)?f:o1(e[a+1])?[]:{})}r1(s,l,u),s=s[l]}return r}var u1=s1;function l1(r,e,t){return r==null?r:u1(r,e,t)}var f1=l1;function c1(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var h1=c1;function d1(r){return Is(r)?Td(r,vf):wo(r)?[r]:h1(Ed(kd(r)))}var v1=d1,g1={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=tt({},t,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],f=l?s[0]:s;if(Qe(a)){var c=a.indexOf(".")!==-1,p=c&&v1(a);if(o.allowGetting&&i===void 0){var g;return f&&(o.beforeGet(f),p&&f._private[o.field][a]===void 0?g=Yb(f._private[o.field],p):g=f._private[o.field][a]),g}else if(o.allowSetting&&i!==void 0){var d=!o.immutableKeys[a];if(d){var b=Hh({},a,i);o.beforeSet(s,b);for(var x=0,w=u.length;x<w;x++){var C=u[x];o.canSet(C)&&(p&&f._private[o.field][a]===void 0?f1(C._private[o.field],p,i):C._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&_t(a)){var m=a,S,P,D=Object.keys(m);o.beforeSet(s,m);for(var v=0;v<D.length;v++){S=D[v],P=m[S];var E=!o.immutableKeys[S];if(E)for(var k=0;k<u.length;k++){var N=u[k];o.canSet(N)&&(N._private[o.field][S]=P)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&Zt(a)){var O=a;s.on(o.bindingEvent,O)}else if(o.allowGetting&&a===void 0){var I;return f&&(o.beforeGet(f),I=f._private[o.field]),I}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=tt({},t,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(Qe(a)){for(var u=a.split(/\s+/),f=u.length,c=0;c<f;c++){var p=u[c];if(!sa(p)){var g=!i.immutableKeys[p];if(g)for(var d=0,b=l.length;d<b;d++)l[d]._private[i.field][p]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var x=0,w=l.length;x<w;x++)for(var C=l[x]._private[i.field],m=Object.keys(C),S=0;S<m.length;S++){var P=m[S],D=!i.immutableKeys[P];D&&(C[P]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},p1={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new xi(function(s,l){var u=function(g){i.off.apply(i,c),s(g)},f=o.concat([u]),c=f.concat([]);i.on.apply(i,f)})}}},kt={};[s0,g1,p1].forEach(function(r){tt(kt,r)});var y1={animate:kt.animate(),animation:kt.animation(),animated:kt.animated(),clearQueue:kt.clearQueue(),delay:kt.delay(),delayAnimation:kt.delayAnimation(),stop:kt.stop()},as={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(d){return n.push(d)}),n}else zt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new wi(e),o=0;o<t.length;o++){for(var s=t[o],l=s._private,u=l.classes,f=!1,c=0;c<e.length;c++){var p=e[c],g=u.has(p);if(!g){f=!0;break}}f||(f=u.size!==e.length),f&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){zt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,f=!1,c=0;c<e.length;c++){var p=e[c],g=u.has(p),d=!1;t||a&&!g?(u.add(p),d=!0):(!t||a&&g)&&(u.delete(p),d=!0),!f&&d&&(i.push(l),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};as.className=as.classNames=as.classes;var Ct={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:fr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};Ct.variable="(?:[\\w-.]|(?:\\\\"+Ct.metaChar+"))+";Ct.className="(?:[\\w-]|(?:\\\\"+Ct.metaChar+"))+";Ct.value=Ct.string+"|"+Ct.number;Ct.id=Ct.variable;(function(){var r,e,t;for(r=Ct.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],Ct.comparatorOp+="|@"+e;for(r=Ct.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(Ct.comparatorOp+="|\\!"+e)})();var Nt=function(){return{checks:[]}},Ue={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},Nl=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return Ap(r.selector,e.selector)}),m1=function(){for(var r={},e,t=0;t<Nl.length;t++)e=Nl[t],r[e.selector]=e.matches;return r}(),b1=function(e,t){return m1[e](t)},w1="("+Nl.map(function(r){return r.selector}).join("|")+")",Za=function(e){return e.replace(new RegExp("\\\\("+Ct.metaChar+")","g"),function(t,n){return n})},ra=function(e,t,n){e[e.length-1]=n},Il=[{name:"group",query:!0,regex:"("+Ct.group+")",populate:function(e,t,n){var a=on(n,1),i=a[0];t.checks.push({type:Ue.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:w1,populate:function(e,t,n){var a=on(n,1),i=a[0];t.checks.push({type:Ue.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+Ct.id+")",populate:function(e,t,n){var a=on(n,1),i=a[0];t.checks.push({type:Ue.ID,value:Za(i)})}},{name:"className",query:!0,regex:"\\.("+Ct.className+")",populate:function(e,t,n){var a=on(n,1),i=a[0];t.checks.push({type:Ue.CLASS,value:Za(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+Ct.variable+")\\s*\\]",populate:function(e,t,n){var a=on(n,1),i=a[0];t.checks.push({type:Ue.DATA_EXIST,field:Za(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+Ct.variable+")\\s*("+Ct.comparatorOp+")\\s*("+Ct.value+")\\s*\\]",populate:function(e,t,n){var a=on(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+Ct.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Ue.DATA_COMPARE,field:Za(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+Ct.boolOp+")\\s*("+Ct.variable+")\\s*\\]",populate:function(e,t,n){var a=on(n,2),i=a[0],o=a[1];t.checks.push({type:Ue.DATA_BOOL,field:Za(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+Ct.meta+")\\s*("+Ct.comparatorOp+")\\s*("+Ct.number+")\\s*\\]\\]",populate:function(e,t,n){var a=on(n,3),i=a[0],o=a[1],s=a[2];t.checks.push({type:Ue.META_COMPARE,field:Za(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:Ct.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=Nt();return s}},{name:"directedEdge",separator:!0,regex:Ct.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Nt(),a=t,i=Nt();return n.checks.push({type:Ue.DIRECTED_EDGE,source:a,target:i}),ra(e,t,n),e.edgeCount++,i}else{var o=Nt(),s=t,l=Nt();return o.checks.push({type:Ue.NODE_SOURCE,source:s,target:l}),ra(e,t,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:Ct.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=Nt(),a=t,i=Nt();return n.checks.push({type:Ue.UNDIRECTED_EDGE,nodes:[a,i]}),ra(e,t,n),e.edgeCount++,i}else{var o=Nt(),s=t,l=Nt();return o.checks.push({type:Ue.NODE_NEIGHBOR,node:s,neighbor:l}),ra(e,t,o),l}}},{name:"child",separator:!0,regex:Ct.child,populate:function(e,t){if(e.currentSubject==null){var n=Nt(),a=Nt(),i=e[e.length-1];return n.checks.push({type:Ue.CHILD,parent:i,child:a}),ra(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=Nt(),s=e[e.length-1],l=Nt(),u=Nt(),f=Nt(),c=Nt();return o.checks.push({type:Ue.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:Ue.TRUE}],c.checks.push({type:Ue.TRUE}),l.checks.push({type:Ue.PARENT,parent:c,child:f}),ra(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var p=Nt(),g=Nt(),d=[{type:Ue.PARENT,parent:p,child:g}];return p.checks=t.checks,t.checks=d,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:Ct.descendant,populate:function(e,t){if(e.currentSubject==null){var n=Nt(),a=Nt(),i=e[e.length-1];return n.checks.push({type:Ue.DESCENDANT,ancestor:i,descendant:a}),ra(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=Nt(),s=e[e.length-1],l=Nt(),u=Nt(),f=Nt(),c=Nt();return o.checks.push({type:Ue.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:Ue.TRUE}],c.checks.push({type:Ue.TRUE}),l.checks.push({type:Ue.ANCESTOR,ancestor:c,descendant:f}),ra(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var p=Nt(),g=Nt(),d=[{type:Ue.ANCESTOR,ancestor:p,descendant:g}];return p.checks=t.checks,t.checks=d,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:Ct.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return At("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===Ue.DIRECTED_EDGE?a.type=Ue.NODE_TARGET:i===Ue.UNDIRECTED_EDGE&&(a.type=Ue.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];Il.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var x1=function(e){for(var t,n,a,i=0;i<Il.length;i++){var o=Il[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,t=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:a,remaining:e}},S1=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},C1=function(e){var t=this,n=t.inputText=e,a=t[0]=Nt();for(t.length=1,n=S1(n);;){var i=x1(n);if(i.expr==null)return At("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(t,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=t[t.length-1];t.currentSubject!=null&&(l.subject=t.currentSubject),l.edgeCount=t.edgeCount,l.compoundCount=t.compoundCount;for(var u=0;u<t.length;u++){var f=t[u];if(f.compoundCount>0&&f.edgeCount>0)return At("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return At("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&At("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},_1=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f==null?"":f},t=function(f){return Qe(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,c){var p=f.type,g=f.value;switch(p){case Ue.GROUP:{var d=e(g);return d.substring(0,d.length-1)}case Ue.DATA_COMPARE:{var b=f.field,x=f.operator;return"["+b+n(e(x))+t(g)+"]"}case Ue.DATA_BOOL:{var w=f.operator,C=f.field;return"["+e(w)+C+"]"}case Ue.DATA_EXIST:{var m=f.field;return"["+m+"]"}case Ue.META_COMPARE:{var S=f.operator,P=f.field;return"[["+P+n(e(S))+t(g)+"]]"}case Ue.STATE:return g;case Ue.ID:return"#"+g;case Ue.CLASS:return"."+g;case Ue.PARENT:case Ue.CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case Ue.ANCESTOR:case Ue.DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case Ue.COMPOUND_SPLIT:{var D=i(f.left,c),v=i(f.subject,c),E=i(f.right,c);return D+(D.length>0?" ":"")+v+E}case Ue.TRUE:return""}},i=function(f,c){return f.checks.reduce(function(p,g,d){return p+(c===f&&d===0?"$":"")+a(g,c)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},E1={parse:C1,toString:_1},Dd=function(e,t,n){var a,i=Qe(e),o=Be(e),s=Qe(n),l,u,f=!1,c=!1,p=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),f=!0),(i||s||f)&&(l=!i&&!o?"":""+e,u=""+n),f&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),t){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":p=!0,a=e>n;break;case">=":p=!0,a=e>=n;break;case"<":p=!0,a=e<n;break;case"<=":p=!0,a=e<=n;break;default:a=!1;break}return c&&(e!=null||!p)&&(a=!a),a},T1=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},P1=function(e){return e!==void 0},gf=function(e,t){return e.data(t)},k1=function(e,t){return e[t]()},rr=[],Ut=function(e,t){return e.checks.every(function(n){return rr[n.type](n,t)})};rr[Ue.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};rr[Ue.STATE]=function(r,e){var t=r.value;return b1(t,e)};rr[Ue.ID]=function(r,e){var t=r.value;return e.id()===t};rr[Ue.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};rr[Ue.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return Dd(k1(e,t),n,a)};rr[Ue.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return Dd(gf(e,t),n,a)};rr[Ue.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return T1(gf(e,t),n)};rr[Ue.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,P1(gf(e,t))};rr[Ue.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return Ut(t,a)&&Ut(n,i)||Ut(n,a)&&Ut(t,i)};rr[Ue.NODE_NEIGHBOR]=function(r,e){return Ut(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Ut(r.neighbor,t)})};rr[Ue.DIRECTED_EDGE]=function(r,e){return Ut(r.source,e.source())&&Ut(r.target,e.target())};rr[Ue.NODE_SOURCE]=function(r,e){return Ut(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Ut(r.target,t)})};rr[Ue.NODE_TARGET]=function(r,e){return Ut(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Ut(r.source,t)})};rr[Ue.CHILD]=function(r,e){return Ut(r.child,e)&&Ut(r.parent,e.parent())};rr[Ue.PARENT]=function(r,e){return Ut(r.parent,e)&&e.children().some(function(t){return Ut(r.child,t)})};rr[Ue.DESCENDANT]=function(r,e){return Ut(r.descendant,e)&&e.ancestors().some(function(t){return Ut(r.ancestor,t)})};rr[Ue.ANCESTOR]=function(r,e){return Ut(r.ancestor,e)&&e.descendants().some(function(t){return Ut(r.descendant,t)})};rr[Ue.COMPOUND_SPLIT]=function(r,e){return Ut(r.subject,e)&&Ut(r.left,e)&&Ut(r.right,e)};rr[Ue.TRUE]=function(){return!0};rr[Ue.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};rr[Ue.FILTER]=function(r,e){var t=r.value;return t(e)};var A1=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Ue.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var s=t[o];if(Ut(s,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},D1=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(Ut(a,e))return!0}return!1},M1={matches:D1,filter:A1},la=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Qe(e)&&e.match(/^\s*$/)||(Kr(e)?this.addQuery({checks:[{type:Ue.COLLECTION,value:e.collection()}]}):Zt(e)?this.addQuery({checks:[{type:Ue.FILTER,value:e}]}):Qe(e)?this.parse(e)||(this.invalid=!0):er("A selector must be created from a string; found "))},fa=la.prototype;[E1,M1].forEach(function(r){return tt(fa,r)});fa.text=function(){return this.inputText};fa.size=function(){return this.length};fa.eq=function(r){return this[r]};fa.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};fa.addQuery=function(r){this[this.length++]=r};fa.selector=fa.toString;var ia={allAre:function(e){var t=new la(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new la(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ia.allAreNeighbours=ia.allAreNeighbors;ia.has=ia.contains;ia.equal=ia.equals=ia.same;var en=function(e,t){return function(a,i,o,s){var l=a,u=this,f;if(l==null?f="":Kr(l)&&l.length===1&&(f=l.id()),u.length===1&&f){var c=u[0]._private,p=c.traversalCache=c.traversalCache||{},g=p[t]=p[t]||[],d=La(f),b=g[d];return b||(g[d]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},pi={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:en(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function pf(r,e,t,n){for(var a=[],i=new wi,o=r.cy(),s=o.hasCompoundNodes(),l=0;l<r.length;l++){var u=r[l];t?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),s&&n(a,i,f)}return r}function Md(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}pi.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return pf(this,r,e,Md)};function Od(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}pi.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return pf(this,r,e,Od)};function O1(r,e,t){Od(r,e,t),Md(r,e,t)}pi.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return pf(this,r,e,O1)};pi.ancestors=pi.parents;var co,Ld;co=Ld={data:kt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:kt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:kt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:kt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:kt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:kt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};co.attr=co.data;co.removeAttr=co.removeData;var L1=Ld,Bs={};function dl(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=r(a,s))}return n}else return}}tt(Bs,{degree:dl(function(r,e){return e.source().same(e.target())?2:1}),indegree:dl(function(r,e){return e.target().same(r)?1:0}),outdegree:dl(function(r,e){return e.source().same(r)?1:0})});function Ja(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}tt(Bs,{minDegree:Ja("degree",function(r,e){return r<e}),maxDegree:Ja("degree",function(r,e){return r>e}),minIndegree:Ja("indegree",function(r,e){return r<e}),maxIndegree:Ja("indegree",function(r,e){return r>e}),minOutdegree:Ja("outdegree",function(r,e){return r<e}),maxOutdegree:Ja("outdegree",function(r,e){return r>e})});tt(Bs,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var ln,Nd,Id=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},Nc={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Id(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};ln=Nd={position:kt.data(Nc),silentPosition:kt.data(tt({},Nc,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Id(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(_t(e))t?this.silentPosition(e):this.position(e);else if(Zt(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(t?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(_t(e)?(a={x:Be(e.x)?e.x:0,y:Be(e.y)?e.y:0},n=t):Qe(e)&&Be(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,t){return _t(e)?this.shift(e,!0):Qe(e)&&Be(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=_t(e)?e:void 0,l=s!==void 0||t!==void 0&&Qe(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var f=this[u];t!==void 0?f.position(e,(t-o[e])/i):s!==void 0&&f.position(sd(s,i,o))}else{var c=n.position();return s=Ls(c,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=_t(e)?e:void 0,o=i!==void 0||t!==void 0&&Qe(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],f=s?u.parent():null,c=f&&f.length>0,p=c;c&&(f=f[0]);var g=p?f.position():{x:0,y:0};t!==void 0?u.position(e,t+g[e]):i!==void 0&&u.position({x:i.x+g.x,y:i.y+g.y})}else{var d=n.position(),b=s?n.parent():null,x=b&&b.length>0,w=x;x&&(b=b[0]);var C=w?b.position():{x:0,y:0};return i={x:d.x-C.x,y:d.y-C.y},e===void 0?i:i[e]}else if(!o)return;return this}};ln.modelPosition=ln.point=ln.position;ln.modelPositions=ln.points=ln.positions;ln.renderedPoint=ln.renderedPosition;ln.relativePoint=ln.relativePosition;var N1=Nd,hi,da;hi=da={};da.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}};da.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};da.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},c=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),p=s.position;(c.w===0||c.h===0)&&(c={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},c.x1=p.x-c.w/2,c.x2=p.x+c.w/2,c.y1=p.y-c.h/2,c.y2=p.y+c.h/2);function g(k,N,O){var I=0,H=0,G=N+O;return k>0&&G>0&&(I=N/G*k,H=O/G*k),{biasDiff:I,biasComplementDiff:H}}function d(k,N,O,I){if(O.units==="%")switch(I){case"width":return k>0?O.pfValue*k:0;case"height":return N>0?O.pfValue*N:0;case"average":return k>0&&N>0?O.pfValue*(k+N)/2:0;case"min":return k>0&&N>0?k>N?O.pfValue*N:O.pfValue*k:0;case"max":return k>0&&N>0?k>N?O.pfValue*k:O.pfValue*N:0;default:return 0}else return O.units==="px"?O.pfValue:0}var b=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(b=b*100/f.width.val);var x=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(x=x*100/f.width.val);var w=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(w=w*100/f.height.val);var C=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(C=C*100/f.height.val);var m=g(f.width.val-c.w,b,x),S=m.biasDiff,P=m.biasComplementDiff,D=g(f.height.val-c.h,w,C),v=D.biasDiff,E=D.biasComplementDiff;s.autoPadding=d(c.w,c.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(c.w,f.width.val),p.x=(-S+c.x1+c.x2+P)/2,s.autoHeight=Math.max(c.h,f.height.val),p.y=(-v+c.y1+c.y2+E)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var Jr=function(e){return e===1/0||e===-1/0?0:e},sn=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Pa=function(e,t){return t==null?e:sn(e,t.x1,t.y1,t.x2,t.y2)},$i=function(e,t,n){return un(e,t,n)},qo=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=l-o,c.y1=u-o,c.x2=l+o,c.y2=u+o,c.w=c.x2-c.x1,c.h=c.y2-c.y1,rs(c,1),sn(e,c.x1,c.y1,c.x2,c.y2)}}},vl=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,s=t.pstyle(a+"label").strValue;if(s){var l=t.pstyle("text-halign"),u=t.pstyle("text-valign"),f=$i(o,"labelWidth",n),c=$i(o,"labelHeight",n),p=$i(o,"labelX",n),g=$i(o,"labelY",n),d=t.pstyle(a+"text-margin-x").pfValue,b=t.pstyle(a+"text-margin-y").pfValue,x=t.isEdge(),w=t.pstyle(a+"text-rotation"),C=t.pstyle("text-outline-width").pfValue,m=t.pstyle("text-border-width").pfValue,S=m/2,P=t.pstyle("text-background-padding").pfValue,D=2,v=c,E=f,k=E/2,N=v/2,O,I,H,G;if(x)O=p-k,I=p+k,H=g-N,G=g+N;else{switch(l.value){case"left":O=p-E,I=p;break;case"center":O=p-k,I=p+k;break;case"right":O=p,I=p+E;break}switch(u.value){case"top":H=g-v,G=g;break;case"center":H=g-N,G=g+N;break;case"bottom":H=g,G=g+v;break}}O+=d-Math.max(C,S)-P-D,I+=d+Math.max(C,S)+P+D,H+=b-Math.max(C,S)-P-D,G+=b+Math.max(C,S)+P+D;var Y=n||"main",j=i.labelBounds,q=j[Y]=j[Y]||{};q.x1=O,q.y1=H,q.x2=I,q.y2=G,q.w=I-O,q.h=G-H;var X=x&&w.strValue==="autorotate",K=w.pfValue!=null&&w.pfValue!==0;if(X||K){var T=X?$i(i.rstyle,"labelAngle",n):w.pfValue,M=Math.cos(T),L=Math.sin(T),F=(O+I)/2,W=(H+G)/2;if(!x){switch(l.value){case"left":F=I;break;case"right":F=O;break}switch(u.value){case"top":W=G;break;case"bottom":W=H;break}}var Z=function(Le,ke){return Le=Le-F,ke=ke-W,{x:Le*M-ke*L+F,y:Le*L+ke*M+W}},ee=Z(O,H),Q=Z(O,G),oe=Z(I,H),fe=Z(I,G);O=Math.min(ee.x,Q.x,oe.x,fe.x),I=Math.max(ee.x,Q.x,oe.x,fe.x),H=Math.min(ee.y,Q.y,oe.y,fe.y),G=Math.max(ee.y,Q.y,oe.y,fe.y)}var ce=Y+"Rot",Se=j[ce]=j[ce]||{};Se.x1=O,Se.y1=H,Se.x2=I,Se.y2=G,Se.w=I-O,Se.h=G-H,sn(e,O,H,I,G),sn(i.labelBounds.all,O,H,I,G)}return e}},I1=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value;if(n>0&&a>0){var i=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,s=a+i,l=(e.w+s*2)/e.w,u=(e.h+s*2)/e.h,f=0,c=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+s*2.4)/e.w,c=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+s*2.4)/e.w:o==="star"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.6)/e.h,c=-s/3.8):o==="triangle"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.4)/e.h,c=-s/1.4):o==="vee"&&(l=(e.w+s*4.4)/e.w,u=(e.h+s*3.8)/e.h,c=-s*.5);var p=e.h*u-e.h,g=e.w*l-e.w;if(ns(e,[Math.ceil(p/2),Math.ceil(g/2)]),f!=0||c!==0){var d=rm(e,f,c);ld(e,d)}}}},R1=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=qr(),s=e._private,l=e.isNode(),u=e.isEdge(),f,c,p,g,d,b,x=s.rstyle,w=l&&a?e.pstyle("bounds-expansion").pfValue:[0],C=function(_e){return _e.pstyle("display").value!=="none"},m=!a||C(e)&&(!u||C(e.source())&&C(e.target()));if(m){var S=0,P=0;a&&t.includeOverlays&&(S=e.pstyle("overlay-opacity").value,S!==0&&(P=e.pstyle("overlay-padding").value));var D=0,v=0;a&&t.includeUnderlays&&(D=e.pstyle("underlay-opacity").value,D!==0&&(v=e.pstyle("underlay-padding").value));var E=Math.max(P,v),k=0,N=0;if(a&&(k=e.pstyle("width").pfValue,N=k/2),l&&t.includeNodes){var O=e.position();d=O.x,b=O.y;var I=e.outerWidth(),H=I/2,G=e.outerHeight(),Y=G/2;f=d-H,c=d+H,p=b-Y,g=b+Y,sn(o,f,p,c,g),a&&t.includeOutlines&&I1(o,e)}else if(u&&t.includeEdges)if(a&&!i){var j=e.pstyle("curve-style").strValue;if(f=Math.min(x.srcX,x.midX,x.tgtX),c=Math.max(x.srcX,x.midX,x.tgtX),p=Math.min(x.srcY,x.midY,x.tgtY),g=Math.max(x.srcY,x.midY,x.tgtY),f-=N,c+=N,p-=N,g+=N,sn(o,f,p,c,g),j==="haystack"){var q=x.haystackPts;if(q&&q.length===2){if(f=q[0].x,p=q[0].y,c=q[1].x,g=q[1].y,f>c){var X=f;f=c,c=X}if(p>g){var K=p;p=g,g=K}sn(o,f-N,p-N,c+N,g+N)}}else if(j==="bezier"||j==="unbundled-bezier"||j.endsWith("segments")||j.endsWith("taxi")){var T;switch(j){case"bezier":case"unbundled-bezier":T=x.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":T=x.linePts;break}if(T!=null)for(var M=0;M<T.length;M++){var L=T[M];f=L.x-N,c=L.x+N,p=L.y-N,g=L.y+N,sn(o,f,p,c,g)}}}else{var F=e.source(),W=F.position(),Z=e.target(),ee=Z.position();if(f=W.x,c=ee.x,p=W.y,g=ee.y,f>c){var Q=f;f=c,c=Q}if(p>g){var oe=p;p=g,g=oe}f-=N,c+=N,p-=N,g+=N,sn(o,f,p,c,g)}if(a&&t.includeEdges&&u&&(qo(o,e,"mid-source"),qo(o,e,"mid-target"),qo(o,e,"source"),qo(o,e,"target")),a){var fe=e.pstyle("ghost").value==="yes";if(fe){var ce=e.pstyle("ghost-offset-x").pfValue,Se=e.pstyle("ghost-offset-y").pfValue;sn(o,o.x1+ce,o.y1+Se,o.x2+ce,o.y2+Se)}}var De=s.bodyBounds=s.bodyBounds||{};dc(De,o),ns(De,w),rs(De,1),a&&(f=o.x1,c=o.x2,p=o.y1,g=o.y2,sn(o,f-E,p-E,c+E,g+E));var Le=s.overlayBounds=s.overlayBounds||{};dc(Le,o),ns(Le,w),rs(Le,1);var ke=s.labelBounds=s.labelBounds||{};ke.all!=null?tm(ke.all):ke.all=qr(),a&&t.includeLabels&&(t.includeMainLabels&&vl(o,e,null),u&&(t.includeSourceLabels&&vl(o,e,"source"),t.includeTargetLabels&&vl(o,e,"target")))}return o.x1=Jr(o.x1),o.y1=Jr(o.y1),o.x2=Jr(o.x2),o.y2=Jr(o.y2),o.w=Jr(o.x2-o.x1),o.h=Jr(o.y2-o.y1),o.w>0&&o.h>0&&m&&(ns(o,w),rs(o,1)),o},Rd=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Fd=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return Sy([a(t.x),a(t.y),a(n.x),a(n.y)])}else return 0},Ic=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?Rc:Rd(t),s=o===Rc,l=Fd(e),u=n.bbCachePosKey===l,f=t.useCache&&u,c=function(b){return b._private.bbCache==null||b._private.styleDirty},p=!f||c(e)||i&&c(e.source())||c(e.target());if(p?(u||e.recalculateRenderedStyle(f),a=R1(e,ho),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var g=e.isNode();a=qr(),(t.includeNodes&&g||t.includeEdges&&!g)&&(t.includeOverlays?Pa(a,n.overlayBounds):Pa(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?Pa(a,n.labelBounds.all):(t.includeMainLabels&&Pa(a,n.labelBounds.mainRot),t.includeSourceLabels&&Pa(a,n.labelBounds.sourceRot),t.includeTargetLabels&&Pa(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},ho={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},Rc=Rd(ho),Fc=_r(ho);da.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=ho:r=Fc(r),e=Ic(this[0],r);else{e=qr(),r=r||ho;var t=Fc(r),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=Fd(s),f=l.bbCachePosKey===u,c=t.useCache&&f&&!l.styleDirty;s.recalculateRenderedStyle(c)}this.updateCompoundBounds(!r.useCache);for(var p=0;p<n.length;p++){var g=n[p];Pa(e,Ic(g,t))}}return e.x1=Jr(e.x1),e.y1=Jr(e.y1),e.x2=Jr(e.x2),e.y2=Jr(e.y2),e.w=Jr(e.x2-e.x1),e.h=Jr(e.y2-e.y1),e};da.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};da.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),_t(r)){var i=r;r=function(){return i}}var o=function(f,c){return f._private.bbAtOldPos=r(f,c)},s=function(f){return f._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=em(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),l};hi.boundingbox=hi.bb=hi.boundingBox;hi.renderedBoundingbox=hi.renderedBoundingBox;var F1=da,Zi,So;Zi=So={};var Bd=function(e){e.uppercaseName=oc(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=oc(e.outerName),Zi[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},Zi["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},Zi["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},Zi["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};Bd({name:"width"});Bd({name:"height"});So.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};So.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};So.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var B1=So,z1=function(e,t){if(e.isEdge())return t(e)},G1=function(e,t){if(e.isEdge()){var n=e.cy();return Ls(t(e),n.zoom(),n.pan())}},V1=function(e,t){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return Ls(o,i,a)})}},H1=function(e){return e.renderer().getControlPoints(e)},$1=function(e){return e.renderer().getSegmentPoints(e)},U1=function(e){return e.renderer().getSourceEndpoint(e)},q1=function(e){return e.renderer().getTargetEndpoint(e)},W1=function(e){return e.renderer().getEdgeMidpoint(e)},Bc={controlPoints:{get:H1,mult:!0},segmentPoints:{get:$1,mult:!0},sourceEndpoint:{get:U1},targetEndpoint:{get:q1},midpoint:{get:W1}},K1=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},j1=Object.keys(Bc).reduce(function(r,e){var t=Bc[e],n=K1(e);return r[e]=function(){return z1(this,t.get)},t.mult?r[n]=function(){return V1(this,t.get)}:r[n]=function(){return G1(this,t.get)},r},{}),Y1=tt({},N1,F1,B1,j1);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var zd=function(e,t){this.recycle(e,t)};function Ui(){return!1}function Wo(){return!0}zd.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=Ui,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?Wo:Ui):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=Wo;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=Wo;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=Wo,this.stopPropagation()},isDefaultPrevented:Ui,isPropagationStopped:Ui,isImmediatePropagationStopped:Ui};var Gd=/^([^.]+)(\.(?:[^.]+))?$/,X1=".*",Vd={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},zc=Object.keys(Vd),Q1={};function zs(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Q1,e=arguments.length>1?arguments[1]:void 0,t=0;t<zc.length;t++){var n=zc[t];this[n]=r[n]||Vd[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ca=zs.prototype,Hd=function(e,t,n,a,i,o,s){Zt(a)&&(i=a,a=null),s&&(o==null?o=s:o=tt({},o,s));for(var l=zt(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var f=l[u];if(!sa(f)){var c=f.match(Gd);if(c){var p=c[1],g=c[2]?c[2]:null,d=t(e,f,p,g,a,i,o);if(d===!1)break}}}},Gc=function(e,t){return e.addEventFields(e.context,t),new zd(t.type,t)},Z1=function(e,t,n){if(mp(n)){t(e,n);return}else if(_t(n)){t(e,Gc(e,n));return}for(var a=zt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!sa(o)){var s=o.match(Gd);if(s){var l=s[1],u=s[2]?s[2]:null,f=Gc(e,{type:l,namespace:u,target:e.context});t(e,f)}}}};ca.on=ca.addListener=function(r,e,t,n,a){return Hd(this,function(i,o,s,l,u,f,c){Zt(f)&&i.listeners.push({event:o,callback:f,type:s,namespace:l,qualifier:u,conf:c})},r,e,t,n,a),this};ca.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};ca.removeListener=ca.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=Py(this.listeners));for(var i=this.listeners,o=function(u){var f=i[u];Hd(a,function(c,p,g,d,b,x){if((f.type===g||r==="*")&&(!d&&f.namespace!==".*"||f.namespace===d)&&(!b||c.qualifierCompare(f.qualifier,b))&&(!x||f.callback===x))return i.splice(u,1),!1},r,e,t,n)},s=i.length-1;s>=0;s--)o(s);return this};ca.removeAllListeners=function(){return this.removeListener("*")};ca.emit=ca.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,zt(e)||(e=[e]),Z1(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var s=function(f){var c=n[f];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===X1)&&i.eventMatches(i.context,c,o)){var p=[o];e!=null&&Ay(p,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(b){return b!==c}));var g=i.callbackContext(i.context,c,o),d=c.callback.apply(g,p);i.afterEmit(i.context,c,o),d===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var J1={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&bo(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},Ko=function(e){return Qe(e)?new la(e):e},$d={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new zs(J1,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=Ko(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=Ko(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=Ko(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=Ko(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};kt.eventAliasesOn($d);var Ud={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Qe(e)||Kr(e))return new la(e).filter(this);if(Zt(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Qe(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Qe(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var f=s[u];l.has(f)&&n.push(f)}return n},xor:function(e){var t=this._private.cy;Qe(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var f=0;f<l.length;f++){var c=l[f],p=c._private.data.id,g=u.hasElementWithId(p);g||n.push(c)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;Qe(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(f,c,p){for(var g=0;g<f.length;g++){var d=f[g],b=d._private.data.id,x=c.hasElementWithId(b);x?i.merge(d):p.push(d)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Qe(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Qe(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var f=this.length++;this[f]=s,i.set(l,{ele:s,index:f})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Qe(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=t?e.apply(t,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=t?e.apply(t,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},Tt=Ud;Tt.u=Tt["|"]=Tt["+"]=Tt.union=Tt.or=Tt.add;Tt["\\"]=Tt["!"]=Tt["-"]=Tt.difference=Tt.relativeComplement=Tt.subtract=Tt.not;Tt.n=Tt["&"]=Tt["."]=Tt.and=Tt.intersection=Tt.intersect;Tt["^"]=Tt["(+)"]=Tt["(-)"]=Tt.symmetricDifference=Tt.symdiff=Tt.xor;Tt.fnFilter=Tt.filterFn=Tt.stdFilter=Tt.filter;Tt.complement=Tt.abscomp=Tt.absoluteComplement;var ew={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},qd=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?a?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?af:0}var o=i(e)-i(t);if(o!==0)return o;function s(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var l=s(e)-s(t);if(l!==0)return l;var u=e.pstyle("z-index").value-t.pstyle("z-index").value;return u!==0?u:e.poolIndex()-t.poolIndex()},ms={forEach:function(e,t){if(Zt(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!Zt(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(qd)},zDepth:function(){var e=this[0];if(!!e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:af-1}else{var i=t.source,o=t.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};ms.each=ms.forEach;var tw=function(){var e="undefined",t=(typeof Symbol=="undefined"?"undefined":cr(Symbol))!=e&&cr(Symbol.iterator)!=e;t&&(ms[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return Hh({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};tw();var rw=_r({nodeDimensionsIncludeLabels:!1}),is={layoutDimensions:function(e){e=rw(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(P){return!P.isParent()}),i=this.cy(),o=t.eles,s=function(D){return D.id()},l=ao(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(D,v,E){var k={x:v.x1+v.w/2,y:v.y1+v.h/2},N={x:(E.x-k.x)*D,y:(E.y-k.y)*D};return{x:k.x+N.x,y:k.y+N.y}},f=t.spacingFactor&&t.spacingFactor!==1,c=function(){if(!f)return null;for(var D=qr(),v=0;v<a.length;v++){var E=a[v],k=l(E,v);nm(D,k.x,k.y)}return D},p=c(),g=ao(function(P,D){var v=l(P,D);if(f){var E=Math.abs(t.spacingFactor);v=u(E,p,v)}return t.transform!=null&&(v=t.transform(P,v)),v},s);if(t.animate){for(var d=0;d<a.length;d++){var b=a[d],x=g(b,d),w=t.animateFilter==null||t.animateFilter(b,d);if(w){var C=b.animation({position:x,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(C)}else b.position(x)}if(t.fit){var m=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(m)}else if(t.zoom!==void 0&&t.pan!==void 0){var S=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(S)}e.animations.forEach(function(P){return P.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),xi.all(e.animations.map(function(P){return P.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(g),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(tt({},e,{eles:this}))}};is.createLayout=is.makeLayout=is.layout;function Wd(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function Gs(r,e){return r=La(r),function(n){return Wd(r,e,n)}}function Vs(r,e){r=La(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Wd(r,t,a)}}var Sr={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(!!a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i!=null?i:t?a.style().getDefaultProperty(e):null}},numericStyle:function(e){var t=this[0];if(!!t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(!!t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(_t(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Qe(e))if(t===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function gl(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function yf(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||gl(i,n);var l=s.source,u=s.target;return t(l)&&(!o||gl(l,t))&&(l===u||t(u)&&(!o||gl(u,t)))}}}var Ei=Gs("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Sr.takesUpSpace=Vs("takesUpSpace",yf({ok:Ei}));var nw=Gs("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Ei(r)}),aw=Gs("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Ei(r)});Sr.interactive=Vs("interactive",yf({ok:nw,parentOk:aw,edgeOkViaNode:Ei}));Sr.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var iw=Gs("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Ei(r)}),ow=Ei;Sr.visible=Vs("visible",yf({ok:iw,edgeOkViaNode:ow}));Sr.hidden=function(){var r=this[0];if(r)return!r.visible()};Sr.isBundledBezier=Vs("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Sr.bypass=Sr.css=Sr.style;Sr.renderedCss=Sr.renderedStyle;Sr.removeBypass=Sr.removeCss=Sr.removeStyle;Sr.pstyle=Sr.parsedStyle;var oa={};function Vc(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&Zt(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&zt(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!r.ableField||l._private[r.ableField],f=l._private[r.field]!=r.value;if(r.overrideAble){var c=r.overrideAble(l);if(c!==void 0&&(u=c,!c))return this}u&&(l._private[r.field]=r.value,f&&t.push(l))}var p=this.spawn(t);p.updateStyle(),p.emit(r.event),o&&p.emit(o)}return this}}function Ti(r){oa[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},oa[r.on]=Vc({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),oa[r.off]=Vc({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}Ti({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Ti({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Ti({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Ti({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});oa.deselect=oa.unselect;oa.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};Ti({field:"active",on:"activate",off:"unactivate"});Ti({field:"pannable",on:"panify",off:"unpanify"});oa.inactive=function(){var r=this[0];if(r)return!r._private.active};var Mr={},Hc=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(!!s.isNode()){for(var l=!1,u=s.connectedEdges(),f=0;f<u.length;f++){var c=u[f],p=c.source(),g=c.target();if(e.noIncomingEdges&&g===s&&p!==s||e.noOutgoingEdges&&p===s&&g!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},$c=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(!!o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],f=u.source(),c=u.target();e.outgoing&&f===o?(a.push(u),a.push(c)):e.incoming&&c===o&&(a.push(u),a.push(f))}}return this.spawn(a,!0).filter(t)}},Uc=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],f=u.id();i[f]||(i[f]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(t)}};Mr.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};tt(Mr,{roots:Hc({noIncomingEdges:!0}),leaves:Hc({noOutgoingEdges:!0}),outgoers:en($c({outgoing:!0}),"outgoers"),successors:Uc({outgoing:!0}),incomers:en($c({incoming:!0}),"incomers"),predecessors:Uc({incoming:!0})});tt(Mr,{neighborhood:en(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),f=a===l?u:l;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Mr.neighbourhood=Mr.neighborhood;Mr.closedNeighbourhood=Mr.closedNeighborhood;Mr.openNeighbourhood=Mr.openNeighborhood;tt(Mr,{source:en(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:en(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:qc({attr:"source"}),targets:qc({attr:"target"})});function qc(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}tt(Mr,{edgesWith:en(Wc(),"edgesWith"),edgesTo:en(Wc({thisIsSrc:!0}),"edgesTo")});function Wc(r){return function(t){var n=[],a=this._private.cy,i=r||{};Qe(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,l=0;l<s.length;l++){var u=s[l],f=u._private.data,c=this.hasElementWithId(f.source)&&t.hasElementWithId(f.target),p=t.hasElementWithId(f.source)&&this.hasElementWithId(f.target),g=c||p;!g||(i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!p)||n.push(u)}return this.spawn(n,!0)}}tt(Mr,{connectedEdges:en(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(!!a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:en(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];!a.isEdge()||(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:en(Kc(),"parallelEdges"),codirectedEdges:en(Kc({codirected:!0}),"codirectedEdges")});function Kc(r){var e={codirected:!1};return r=tt({},e,r),function(n){for(var a=[],i=this.edges(),o=r,s=0;s<i.length;s++)for(var l=i[s],u=l._private,f=u.source,c=f._private.data.id,p=u.data.target,g=f._private.edges,d=0;d<g.length;d++){var b=g[d],x=b._private.data,w=x.target,C=x.source,m=w===p&&C===c,S=c===w&&p===C;(o.codirected&&m||!o.codirected&&(m||S))&&a.push(b)}return this.spawn(a,!0).filter(n)}}tt(Mr,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return t.spawn();var l=function(){var f=n.collection();o.push(f);var c=i[0];s(c,f),t.bfs({directed:!1,roots:c,visit:function(g){return s(g,f)}}),f.forEach(function(p){p.connectedEdges().forEach(function(g){t.has(g)&&f.has(g.source())&&f.has(g.target())&&f.merge(g)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Mr.componentsOf=Mr.components;var Cr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){er("A collection must have a reference to the core");return}var i=new _n,o=!1;if(!t)t=[];else if(t.length>0&&_t(t[0])&&!bo(t[0])){o=!0;for(var s=[],l=new wi,u=0,f=t.length;u<f;u++){var c=t[u];c.data==null&&(c.data={});var p=c.data;if(p.id==null)p.id=id();else if(e.hasElementWithId(p.id)||l.has(p.id))continue;var g=new Os(e,c,!1);s.push(g),l.add(p.id)}t=s}this.length=0;for(var d=0,b=t.length;d<b;d++){var x=t[d][0];if(x!=null){var w=x._private.data.id;(!n||!i.has(w))&&(n&&i.set(w,{index:this.length,ele:x}),this[this.length]=x,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(C){this.lazyMap=C},rebuildMap:function(){for(var m=this.lazyMap=new _n,S=this.eles,P=0;P<S.length;P++){var D=S[P];m.set(D.id(),{index:P,ele:D})}}},n&&(this._private.map=i),o&&!a&&this.restore()},Ht=Os.prototype=Cr.prototype=Object.create(Array.prototype);Ht.instanceString=function(){return"collection"};Ht.spawn=function(r,e){return new Cr(this.cy(),r,e)};Ht.spawnSelf=function(){return this.spawn(this)};Ht.cy=function(){return this._private.cy};Ht.renderer=function(){return this._private.cy.renderer()};Ht.element=function(){return this[0]};Ht.collection=function(){return qh(this)?this:new Cr(this._private.cy,[this])};Ht.unique=function(){return new Cr(this._private.cy,this,!0)};Ht.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};Ht.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Cr(e)};Ht.$id=Ht.getElementById;Ht.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};Ht.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};Ht.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};Ht.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(_t(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=r.data.source,l=r.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in r.data,f=r.data.parent;u&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}r.position&&e.position(r.position);var c=function(b,x,w){var C=r[b];C!=null&&C!==n[b]&&(C?e[x]():e[w]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var p={data:Cn(n.data),position:Cn(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};p.classes="";var g=0;return n.classes.forEach(function(d){return p.classes+=g++===0?d:" "+d}),p}}};Ht.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};Ht.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new Os(r,a,!1);e.push(i)}return new Cr(r,e)};Ht.copy=Ht.clone;Ht.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],s,l=0,u=t.length;l<u;l++){var f=t[l];e&&!f.removed()||(f.isNode()?i.push(f):o.push(f))}s=i.concat(o);var c,p=function(){s.splice(c,1),c--};for(c=0;c<s.length;c++){var g=s[c],d=g._private,b=d.data;if(g.clearTraversalCache(),!(!e&&!d.removed)){if(b.id===void 0)b.id=id();else if(Be(b.id))b.id=""+b.id;else if(sa(b.id)||!Qe(b.id)){er("Can not create element with invalid string ID `"+b.id+"`"),p();continue}else if(n.hasElementWithId(b.id)){er("Can not create second element with ID `"+b.id+"`"),p();continue}}var x=b.id;if(g.isNode()){var w=d.position;w.x==null&&(w.x=0),w.y==null&&(w.y=0)}if(g.isEdge()){for(var C=g,m=["source","target"],S=m.length,P=!1,D=0;D<S;D++){var v=m[D],E=b[v];Be(E)&&(E=b[v]=""+b[v]),E==null||E===""?(er("Can not create edge `"+x+"` with unspecified "+v),P=!0):n.hasElementWithId(E)||(er("Can not create edge `"+x+"` with nonexistant "+v+" `"+E+"`"),P=!0)}if(P){p();continue}var k=n.getElementById(b.source),N=n.getElementById(b.target);k.same(N)?k._private.edges.push(C):(k._private.edges.push(C),N._private.edges.push(C)),C._private.source=k,C._private.target=N}d.map=new _n,d.map.set(x,{ele:g,index:0}),d.removed=!1,e&&n.addToPool(g)}for(var O=0;O<i.length;O++){var I=i[O],H=I._private.data;Be(H.parent)&&(H.parent=""+H.parent);var G=H.parent,Y=G!=null;if(Y||I._private.parent){var j=I._private.parent?n.collection().merge(I._private.parent):n.getElementById(G);if(j.empty())H.parent=void 0;else if(j[0].removed())At("Node added with missing parent, reference to parent removed"),H.parent=void 0,I._private.parent=null;else{for(var q=!1,X=j;!X.empty();){if(I.same(X)){q=!0,H.parent=void 0;break}X=X.parent()}q||(j[0]._private.children.push(I),I._private.parent=j[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var K=s.length===t.length?t:new Cr(n,s),T=0;T<K.length;T++){var M=K[T];M.isNode()||(M.parallelEdges().clearTraversalCache(),M.source().clearTraversalCache(),M.target().clearTraversalCache())}var L;a.hasCompoundNodes?L=n.collection().merge(K).merge(K.connectedNodes()).merge(K.parent()):L=K,L.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?K.emitAndNotify("add"):e&&K.emit("add")}return t};Ht.removed=function(){var r=this[0];return r&&r._private.removed};Ht.inside=function(){var r=this[0];return r&&!r._private.removed};Ht.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(G){for(var Y=G._private.edges,j=0;j<Y.length;j++)l(Y[j])}function s(G){for(var Y=G._private.children,j=0;j<Y.length;j++)l(Y[j])}function l(G){var Y=a[G.id()];e&&G.removed()||Y||(a[G.id()]=!0,G.isNode()?(n.push(G),o(G),s(G)):n.unshift(G))}for(var u=0,f=t.length;u<f;u++){var c=t[u];l(c)}function p(G,Y){var j=G._private.edges;ua(j,Y),G.clearTraversalCache()}function g(G){G.clearTraversalCache()}var d=[];d.ids={};function b(G,Y){Y=Y[0],G=G[0];var j=G._private.children,q=G.id();ua(j,Y),Y._private.parent=null,d.ids[q]||(d.ids[q]=!0,d.push(G))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var x=0;x<n.length;x++){var w=n[x];if(w.isEdge()){var C=w.source()[0],m=w.target()[0];p(C,w),p(m,w);for(var S=w.parallelEdges(),P=0;P<S.length;P++){var D=S[P];g(D),D.isBundledBezier()&&D.dirtyBoundingBoxCache()}}else{var v=w.parent();v.length!==0&&b(v,w)}e&&(w._private.removed=!0)}var E=i._private.elements;i._private.hasCompoundNodes=!1;for(var k=0;k<E.length;k++){var N=E[k];if(N.isParent()){i._private.hasCompoundNodes=!0;break}}var O=new Cr(this.cy(),n);O.size()>0&&(r?O.emitAndNotify("remove"):e&&O.emit("remove"));for(var I=0;I<d.length;I++){var H=d[I];(!e||!H.removed())&&H.updateStyle()}return O};Ht.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(d){return d==null?d:""+d};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),s=i(r.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var g=0;g<t.length;g++){var d=t[g],b=d._private.data;d.isEdge()&&(l&&(b.source=o),u&&(b.target=s))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var f=i(r.parent),c=f===null||e.hasElementWithId(f);if(c){var p=f===null?void 0:f;e.batch(function(){var g=t.remove(n,a);g.emitAndNotify("moveout");for(var d=0;d<t.length;d++){var b=t[d],x=b._private.data;b.isNode()&&(x.parent=p)}g.restore(n,a)}),t.emitAndNotify("move")}}return this};[md,y1,as,ia,pi,L1,Bs,Y1,$d,Ud,ew,ms,is,Sr,oa,Mr].forEach(function(r){tt(Ht,r)});var sw={add:function(e){var t,n=this;if(Kr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}t=new Cr(n,i)}}else if(zt(e)){var l=e;t=new Cr(n,l)}else if(_t(e)&&(zt(e.nodes)||zt(e.edges))){for(var u=e,f=[],c=["nodes","edges"],p=0,g=c.length;p<g;p++){var d=c[p],b=u[d];if(zt(b))for(var x=0,w=b.length;x<w;x++){var C=tt({group:d},b[x]);f.push(C)}}t=new Cr(n,f)}else{var m=e;t=new Os(n,m).collection()}return t},remove:function(e){if(!Kr(e)){if(Qe(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function uw(r,e,t,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),f=typeof Float32Array!="undefined";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var p=f?new Float32Array(l):new Array(l);function g(N,O){return 1-3*O+3*N}function d(N,O){return 3*O-6*N}function b(N){return 3*N}function x(N,O,I){return((g(O,I)*N+d(O,I))*N+b(O))*N}function w(N,O,I){return 3*g(O,I)*N*N+2*d(O,I)*N+b(O)}function C(N,O){for(var I=0;I<a;++I){var H=w(O,r,t);if(H===0)return O;var G=x(O,r,t)-N;O-=G/H}return O}function m(){for(var N=0;N<l;++N)p[N]=x(N*u,r,t)}function S(N,O,I){var H,G,Y=0;do G=O+(I-O)/2,H=x(G,r,t)-N,H>0?I=G:O=G;while(Math.abs(H)>o&&++Y<s);return G}function P(N){for(var O=0,I=1,H=l-1;I!==H&&p[I]<=N;++I)O+=u;--I;var G=(N-p[I])/(p[I+1]-p[I]),Y=O+G*u,j=w(Y,r,t);return j>=i?C(N,Y):j===0?Y:S(N,O,O+u)}var D=!1;function v(){D=!0,(r!==e||t!==n)&&m()}var E=function(O){return D||v(),r===e&&t===n?O:O===0?0:O===1?1:x(P(O),e,n)};E.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var k="generateBezier("+[r,e,t,n]+")";return E.toString=function(){return k},E}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var lw=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),f=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+f*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,f=1/1e4,c=16/1e3,p,g,d;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,p=o!==null,p?(u=n(a,i),g=u/o*c):g=c;d=t(d||s,g),l.push(1+d.x),u+=16,Math.abs(d.x)>f&&Math.abs(d.v)>f;);return p?function(b){return l[b*(l.length-1)|0]}:u}}(),Vt=function(e,t,n,a){var i=uw(e,t,n,a);return function(o,s,l){return o+(s-o)*i(l)}},os={linear:function(e,t,n){return e+(t-e)*n},ease:Vt(.25,.1,.25,1),"ease-in":Vt(.42,0,1,1),"ease-out":Vt(0,0,.58,1),"ease-in-out":Vt(.42,0,.58,1),"ease-in-sine":Vt(.47,0,.745,.715),"ease-out-sine":Vt(.39,.575,.565,1),"ease-in-out-sine":Vt(.445,.05,.55,.95),"ease-in-quad":Vt(.55,.085,.68,.53),"ease-out-quad":Vt(.25,.46,.45,.94),"ease-in-out-quad":Vt(.455,.03,.515,.955),"ease-in-cubic":Vt(.55,.055,.675,.19),"ease-out-cubic":Vt(.215,.61,.355,1),"ease-in-out-cubic":Vt(.645,.045,.355,1),"ease-in-quart":Vt(.895,.03,.685,.22),"ease-out-quart":Vt(.165,.84,.44,1),"ease-in-out-quart":Vt(.77,0,.175,1),"ease-in-quint":Vt(.755,.05,.855,.06),"ease-out-quint":Vt(.23,1,.32,1),"ease-in-out-quint":Vt(.86,0,.07,1),"ease-in-expo":Vt(.95,.05,.795,.035),"ease-out-expo":Vt(.19,1,.22,1),"ease-in-out-expo":Vt(1,0,0,1),"ease-in-circ":Vt(.6,.04,.98,.335),"ease-out-circ":Vt(.075,.82,.165,1),"ease-in-out-circ":Vt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return os.linear;var a=lw(e,t,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":Vt};function jc(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function Yc(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function ei(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=Yc(r,a),s=Yc(e,a);if(Be(o)&&Be(s))return jc(i,o,s,t,n);if(zt(o)&&zt(s)){for(var l=[],u=0;u<s.length;u++){var f=o[u],c=s[u];if(f!=null&&c!=null){var p=jc(i,f,c,t,n);l.push(p)}else l.push(c)}return l}}function fw(r,e,t,n){var a=!n,i=r._private,o=e._private,s=o.easing,l=o.startTime,u=n?r:r.cy(),f=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=os.linear;else{var c;if(Qe(s)){var p=f.parse("transition-timing-function",s);c=p.value}else c=s;var g,d;Qe(c)?(g=c,d=[]):(g=c[1],d=c.slice(2).map(function(K){return+K})),d.length>0?(g==="spring"&&d.push(o.duration),o.easingImpl=os[g].apply(null,d)):o.easingImpl=os[g]}var b=o.easingImpl,x;if(o.duration===0?x=1:x=(t-l)/o.duration,o.applying&&(x=o.progress),x<0?x=0:x>1&&(x=1),o.delay==null){var w=o.startPosition,C=o.position;if(C&&a&&!r.locked()){var m={};qi(w.x,C.x)&&(m.x=ei(w.x,C.x,x,b)),qi(w.y,C.y)&&(m.y=ei(w.y,C.y,x,b)),r.position(m)}var S=o.startPan,P=o.pan,D=i.pan,v=P!=null&&n;v&&(qi(S.x,P.x)&&(D.x=ei(S.x,P.x,x,b)),qi(S.y,P.y)&&(D.y=ei(S.y,P.y,x,b)),r.emit("pan"));var E=o.startZoom,k=o.zoom,N=k!=null&&n;N&&(qi(E,k)&&(i.zoom=uo(i.minZoom,ei(E,k,x,b),i.maxZoom)),r.emit("zoom")),(v||N)&&r.emit("viewport");var O=o.style;if(O&&O.length>0&&a){for(var I=0;I<O.length;I++){var H=O[I],G=H.name,Y=H,j=o.startStyle[G],q=f.properties[j.name],X=ei(j,Y,x,b,q);f.overrideBypass(r,G,X)}r.emit("style")}}return o.progress=x,x}function qi(r,e){return r==null||e==null?!1:Be(r)&&Be(e)?!0:!!(r&&e)}function cw(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function Xc(r,e){var t=e._private.aniEles,n=[];function a(f,c){var p=f._private,g=p.animation.current,d=p.animation.queue,b=!1;if(g.length===0){var x=d.shift();x&&g.push(x)}for(var w=function(D){for(var v=D.length-1;v>=0;v--){var E=D[v];E()}D.splice(0,D.length)},C=g.length-1;C>=0;C--){var m=g[C],S=m._private;if(S.stopped){g.splice(C,1),S.hooked=!1,S.playing=!1,S.started=!1,w(S.frames);continue}!S.playing&&!S.applying||(S.playing&&S.applying&&(S.applying=!1),S.started||cw(f,m,r),fw(f,m,r,c),S.applying&&(S.applying=!1),w(S.frames),S.step!=null&&S.step(r),m.completed()&&(g.splice(C,1),S.hooked=!1,S.playing=!1,S.started=!1,w(S.completes)),b=!0)}return!c&&g.length===0&&d.length===0&&n.push(f),b}for(var i=!1,o=0;o<t.length;o++){var s=t[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var hw={animate:kt.animate(),animation:kt.animation(),animated:kt.animated(),clearQueue:kt.clearQueue(),delay:kt.delay(),delayAnimation:kt.delayAnimation(),stop:kt.stop(),addToAnimationPool:function(e){var t=this;!t.styleEnabled()||t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){!e._private.animationsRunning||ds(function(i){Xc(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Xc(o,e)},n.beforeRenderPriorities.animations):t()}},dw={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&bo(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},jo=function(e){return Qe(e)?new la(e):e},Kd={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new zs(dw,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,jo(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,jo(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,jo(t),n),this},once:function(e,t,n){return this.emitter().one(e,jo(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};kt.eventAliasesOn(Kd);var Rl={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};Rl.jpeg=Rl.jpg;var ss={layout:function(e){var t=this;if(e==null){er("Layout options must be specified to make a layout");return}if(e.name==null){er("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){er("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Qe(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(tt({},e,{cy:t,eles:i}));return o}};ss.createLayout=ss.makeLayout=ss.layout;var vw={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(!!n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=t.getElementById(i);s.data(o)}})}},gw=_r({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),Fl={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){er("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&At("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=gw(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};Fl.invalidateDimensions=Fl.resize;var us={collection:function(e,t){return Qe(e)?this.$(e):Kr(e)?e.collection():zt(e)?(t||(t={}),new Cr(this,e,t.unique,t.removed)):new Cr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};us.elements=us.filter=us.$;var Lr={},to="t",pw="f";Lr.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var f=e.updateStyleHints(o);f&&a.push(o)}}return a};Lr.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<t.length;l++){var u=t[l],f=r[l]===to,c=e[l]===to,p=f!==c,g=u.mappedProperties.length>0;if(p||c&&g){var d=void 0;p&&g||p?d=u.properties:g&&(d=u.mappedProperties);for(var b=0;b<d.length;b++){for(var x=d[b],w=x.name,C=!1,m=l+1;m<t.length;m++){var S=t[m],P=e[m]===to;if(!!P&&(C=S.properties[x.name]!=null,C))break}!s[w]&&!C&&(s[w]=!0,o.push(w))}}}return n[a]=o,o};Lr.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(r);s?t+=to:t+=pw}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};Lr.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],s=e[i]===to;if(!!s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a};Lr.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],f=t.pstyle(l);if(!u)if(f)f.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(f!==u){if(u.mapped===o.fn&&f!=null&&f.mapping!=null&&f.mapping.value===u.value){var c=f.mapping,p=c.fnValue=u.value(t);if(p===c.prevFnValue)continue}var g=i[l]={prev:f};n.applyParsedProperty(t,u),g.next=t.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}};Lr.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(Se,De,Le){return t.getPropertiesHash(Se,De,Le)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",l=r._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var f=a[u];e.styleKeys[f]=[ii,Xi]}for(var c=function(Se,De){return e.styleKeys[De][0]=io(Se,e.styleKeys[De][0])},p=function(Se,De){return e.styleKeys[De][1]=oo(Se,e.styleKeys[De][1])},g=function(Se,De){c(Se,De),p(Se,De)},d=function(Se,De){for(var Le=0;Le<Se.length;Le++){var ke=Se.charCodeAt(Le);c(ke,De),p(ke,De)}},b=2e9,x=function(Se){return-128<Se&&Se<128&&Math.floor(Se)!==Se?b-(Se*1024|0):Se},w=0;w<n.length;w++){var C=n[w],m=l[C];if(m!=null){var S=this.properties[C],P=S.type,D=S.groupKey,v=void 0;S.hashOverride!=null?v=S.hashOverride(r,m):m.pfValue!=null&&(v=m.pfValue);var E=S.enums==null?m.value:null,k=v!=null,N=E!=null,O=k||N,I=m.units;if(P.number&&O&&!P.multiple){var H=k?v:E;g(x(H),D),!k&&I!=null&&d(I,D)}else d(m.strValue,D)}}for(var G=[ii,Xi],Y=0;Y<a.length;Y++){var j=a[Y],q=e.styleKeys[j];G[0]=io(q[0],G[0]),G[1]=oo(q[1],G[1])}e.styleKey=xy(G[0],G[1]);var X=e.styleKeys;e.labelDimsKey=ta(X.labelDimensions);var K=i(r,["label"],X.labelDimensions);if(e.labelKey=ta(K),e.labelStyleKey=ta(zo(X.commonLabel,K)),!s){var T=i(r,["source-label"],X.labelDimensions);e.sourceLabelKey=ta(T),e.sourceLabelStyleKey=ta(zo(X.commonLabel,T));var M=i(r,["target-label"],X.labelDimensions);e.targetLabelKey=ta(M),e.targetLabelStyleKey=ta(zo(X.commonLabel,M))}if(s){var L=e.styleKeys,F=L.nodeBody,W=L.nodeBorder,Z=L.nodeOutline,ee=L.backgroundImage,Q=L.compound,oe=L.pie,fe=[F,W,Z,ee,Q,oe].filter(function(ce){return ce!=null}).reduce(zo,[ii,Xi]);e.nodeKey=ta(fe),e.hasPie=oe!=null&&oe[0]!==ii&&oe[1]!==Xi}return o!==e.styleKey};Lr.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Lr.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,s=t.properties[n.name].type,l=n.bypass,u=a[n.name],f=u&&u.bypass,c=r._private,p="mapping",g=function(F){return F==null?null:F.pfValue!=null?F.pfValue:F.value},d=function(){var F=g(u),W=g(n);t.checkTriggers(r,n.name,F,W)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,d(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,d(),!0):!1:(d(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,d(),!0):!1:(d(),!0);var b=function(){At("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var x=n.field.split("."),w=c.data,C=0;C<x.length&&w;C++){var m=x[C];w=w[m]}if(w==null)return b(),!1;var S;if(Be(w)){var P=n.fieldMax-n.fieldMin;P===0?S=0:S=(w-n.fieldMin)/P}else return At("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+w+"` for `"+r.id()+"` is non-numeric)"),!1;if(S<0?S=0:S>1&&(S=1),s.color){var D=n.valueMin[0],v=n.valueMax[0],E=n.valueMin[1],k=n.valueMax[1],N=n.valueMin[2],O=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],H=n.valueMax[3]==null?1:n.valueMax[3],G=[Math.round(D+(v-D)*S),Math.round(E+(k-E)*S),Math.round(N+(O-N)*S),Math.round(I+(H-I)*S)];i={bypass:n.bypass,name:n.name,value:G,strValue:"rgb("+G[0]+", "+G[1]+", "+G[2]+")"}}else if(s.number){var Y=n.valueMin+(n.valueMax-n.valueMin)*S;i=this.parse(n.name,Y,n.bypass,p)}else return!1;if(!i)return b(),!1;i.mapping=n,n=i;break}case o.data:{for(var j=n.field.split("."),q=c.data,X=0;X<j.length&&q;X++){var K=j[X];q=q[K]}if(q!=null&&(i=this.parse(n.name,q,n.bypass,p)),!i)return b(),!1;i.mapping=n,n=i;break}case o.fn:{var T=n.value,M=n.fnValue!=null?n.fnValue:T(r);if(n.prevFnValue=M,M==null)return At("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,M,n.bypass,p),!i)return At("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=Cn(n),n=i;break}case void 0:break;default:return!1}return l?(f?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):f?u.bypassed=n:a[n.name]=n,d(),!0};Lr.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};Lr.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};Lr.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var f=a[u],c=r.pstyle(f),p=e[f];if(!!p){var g=p.prev,d=g,b=p.next!=null?p.next:c,x=!1,w=void 0,C=1e-6;!d||(Be(d.pfValue)&&Be(b.pfValue)?(x=b.pfValue-d.pfValue,w=d.pfValue+C*x):Be(d.value)&&Be(b.value)?(x=b.value-d.value,w=d.value+C*x):zt(d.value)&&zt(b.value)&&(x=d.value[0]!==b.value[0]||d.value[1]!==b.value[1]||d.value[2]!==b.value[2],w=d.strValue),x&&(s[f]=b.strValue,this.applyBypass(r,f,w),l=!0))}}if(!l)return;n.transitioning=!0,new xi(function(m){o>0?r.delayAnimation(o).play().promise().then(m):m()}).then(function(){return r.animation({style:s,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};Lr.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(t,n)&&i(o)};Lr.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};Lr.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(t==="bezier"||n==="bezier")&&r.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()}),a.triggersBoundsOfConnectedEdges&&e==="display"&&(t==="none"||n==="none")&&r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Lr.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var Co={};Co.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,f=this.parse(u,t,!0);f&&i.push(f)}}else if(Qe(e)){var c=this.parse(e,t,!0);c&&i.push(c)}else if(_t(e)){var p=e;n=t;for(var g=Object.keys(p),d=0;d<g.length;d++){var b=g[d],x=p[b];if(x===void 0&&(x=p[As(b)]),x!==void 0){var w=this.parse(b,x,!0);w&&i.push(w)}}}else return!1;if(i.length===0)return!1;for(var C=!1,m=0;m<r.length;m++){for(var S=r[m],P={},D=void 0,v=0;v<i.length;v++){var E=i[v];if(n){var k=S.pstyle(E.name);D=P[E.name]={prev:k}}C=this.applyParsedProperty(S,Cn(E))||C,n&&(D.next=S.pstyle(E.name))}C&&this.updateStyleHints(S),n&&this.updateTransitions(S,P,o)}return C};Co.overrideBypass=function(r,e,t){e=nf(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),s?i.strValue="rgb("+t.join(",")+")":l?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,u,t)}};Co.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Co.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],f=i.pstyle(u.name);if(!(!f||!f.bypass)){var c="",p=this.parse(l,c,!0),g=o[u.name]={prev:f};this.applyParsedProperty(i,p),g.next=i.pstyle(u.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var mf={};mf.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};mf.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Tn={};Tn.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Tn.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[As(i.name)]=o)}return n}};Tn.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a!=null?a:r.cy().style().getDefaultProperty(e)[t][0]};Tn.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(t&&i.number&&s!=null&&Be(s)){var f=r.cy().zoom(),c=function(x){return x*f},p=function(x,w){return c(x)+w},g=zt(s),d=g?l.every(function(b){return b!=null}):l!=null;return d?g?s.map(function(b,x){return p(b,l[x])}).join(" "):p(s,l):g?s.map(function(b){return Qe(b)?b:""+c(b)}).join(" "):""+c(s)}else if(u!=null)return u}return null}};Tn.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(_t(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t};Tn.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[nf(s)],f=this.parse(u.name,l);f&&t.push(f)}return t};Tn.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=io(s,n[0]),n[1]=oo(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=io(s,n[0]),n[1]=oo(s,n[1]);return n};Tn.getPropertiesHash=Tn.getNonDefaultPropertiesHash;var Hs={};Hs.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e};Hs.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};Hs.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var bf={};bf.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){At("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var p=new la(c);if(p.invalid){At("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();continue}}var g=f[2],d=!1;i=g;for(var b=[];;){var x=i.match(/^\s*$/);if(x)break;var w=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!w){At("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),d=!0;break}o=w[0];var C=w[1],m=w[2],S=e.properties[C];if(!S){At("Skipping property: Invalid property name in: "+o),l();continue}var P=t.parse(C,m);if(!P){At("Skipping property: Invalid property definition in: "+o),l();continue}b.push({name:C,val:m}),l()}if(d){s();break}t.selector(c);for(var D=0;D<b.length;D++){var v=b[D];t.css(v.name,v.val)}s()}return t};bf.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var xr={};(function(){var r=fr,e=_p,t=Tp,n=Pp,a=kp,i=function(fe){return"^"+fe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(fe){var ce=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+fe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+ce+")\\s*\\,\\s*("+ce+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];xr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(fe,ce){switch(fe.length){case 2:return ce[0]!=="deg"&&ce[0]!=="rad"&&ce[1]!=="deg"&&ce[1]!=="rad";case 1:return Qe(fe[0])||ce[0]==="deg"||ce[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(fe){var ce=fe.length;return ce===1||ce===2||ce===4}}};var l={zeroNonZero:function(fe,ce){return(fe==null||ce==null)&&fe!==ce||fe==0&&ce!=0?!0:fe!=0&&ce==0},any:function(fe,ce){return fe!=ce},emptyNonEmpty:function(fe,ce){var Se=sa(fe),De=sa(ce);return Se&&!De||!Se&&De}},u=xr.types,f=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],c=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],p=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],g=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],d=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],b=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],x=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],w=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],C=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],m=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],S=function(fe,ce){return ce.value==="label"?-fe.poolIndex():ce.pfValue},P=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:S},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:S},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],D=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],v=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],E=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],k=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],N=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],O=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],I=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],H=[];xr.pieBackgroundN=16,H.push({name:"pie-size",type:u.sizeMaybePercent});for(var G=1;G<=xr.pieBackgroundN;G++)H.push({name:"pie-"+G+"-background-color",type:u.color}),H.push({name:"pie-"+G+"-background-size",type:u.percent}),H.push({name:"pie-"+G+"-background-opacity",type:u.zeroOneNumber});var Y=[],j=xr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(oe){j.forEach(function(fe){var ce=fe+"-"+oe.name,Se=oe.type,De=oe.triggersBounds;Y.push({name:ce,type:Se,triggersBounds:De})})},{});var q=xr.properties=[].concat(b,m,x,w,C,O,d,g,f,c,p,P,D,v,E,H,k,N,Y,I),X=xr.propertyGroups={behavior:b,transition:m,visibility:x,overlay:w,underlay:C,ghost:O,commonLabel:d,labelDimensions:g,mainLabel:f,sourceLabel:c,targetLabel:p,nodeBody:P,nodeBorder:D,nodeOutline:v,backgroundImage:E,pie:H,compound:k,edgeLine:N,edgeArrow:Y,core:I},K=xr.propertyGroupNames={},T=xr.propertyGroupKeys=Object.keys(X);T.forEach(function(oe){K[oe]=X[oe].map(function(fe){return fe.name}),X[oe].forEach(function(fe){return fe.groupKey=oe})});var M=xr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];xr.propertyNames=q.map(function(oe){return oe.name});for(var L=0;L<q.length;L++){var F=q[L];q[F.name]=F}for(var W=0;W<M.length;W++){var Z=M[W],ee=q[Z.pointsTo],Q={name:Z.name,alias:!0,pointsTo:ee};q.push(Q),q[Z.name]=Q}})();xr.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};xr.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=tt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var f=1;f<=xr.pieBackgroundN;f++){var c=u.name.replace("{{i}}",f),p=u.value;l[c]=p}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return xr.arrowPrefixes.forEach(function(f){var c=f+"-"+u.name,p=u.value;l[c]=p}),l},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);t[i]=s}}return r.defaultProperties=t,r.defaultProperties};xr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var $s={};$s.parse=function(r,e,t,n){var a=this;if(Zt(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,l=rd(r,s,o,i),u=a.propCache=a.propCache||[],f;return(f=u[l])||(f=u[l]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(f=Cn(f),f&&(f.value=Cn(f.value))),f};$s.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&At("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&At("The style value of `label` is deprecated for `"+a.name+"`"),a};$s.parseImpl=function(r,e,t,n){var a=this;r=nf(r);var i=a.properties[r],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var l=Qe(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(Zt(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var f,c;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(s.data.regex).exec(e))){if(t)return!1;var p=s.data;return{name:r,value:f,strValue:""+e,mapped:p,field:f[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(s.mapData.regex).exec(e))){if(t||u.multiple)return!1;var g=s.mapData;if(!(u.color||u.number))return!1;var d=this.parse(r,c[4]);if(!d||d.mapped)return!1;var b=this.parse(r,c[5]);if(!b||b.mapped)return!1;if(d.pfValue===b.pfValue||d.strValue===b.strValue)return At("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+d.strValue+"`"),this.parse(r,d.strValue);if(u.color){var x=d.value,w=b.value,C=x[0]===w[0]&&x[1]===w[1]&&x[2]===w[2]&&(x[3]===w[3]||(x[3]==null||x[3]===1)&&(w[3]==null||w[3]===1));if(C)return!1}return{name:r,value:c,strValue:""+e,mapped:g,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:d.value,valueMax:b.value,bypass:t}}}if(u.multiple&&n!=="multiple"){var m;if(l?m=e.split(/\s+/):zt(e)?m=e:m=[e],u.evenMultiple&&m.length%2!==0)return null;for(var S=[],P=[],D=[],v="",E=!1,k=0;k<m.length;k++){var N=a.parse(r,m[k],t,"multiple");E=E||Qe(N.value),S.push(N.value),D.push(N.pfValue!=null?N.pfValue:N.value),P.push(N.units),v+=(k>0?" ":"")+N.strValue}return u.validate&&!u.validate(S,P)?null:u.singleEnum&&E?S.length===1&&Qe(S[0])?{name:r,value:S[0],strValue:S[0],bypass:t}:null:{name:r,value:S,pfValue:D,strValue:v,bypass:t,units:P}}var O=function(){for(var fe=0;fe<u.enums.length;fe++){var ce=u.enums[fe];if(ce===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(u.number){var I,H="px";if(u.units&&(I=u.units),u.implicitUnits&&(H=u.implicitUnits),!u.unitless)if(l){var G="px|em"+(u.allowPercent?"|\\%":"");I&&(G=I);var Y=e.match("^("+fr+")("+G+")?$");Y&&(e=Y[1],I=Y[2]||H)}else(!I||u.implicitUnits)&&(I=H);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,O();if(u.integer&&!yp(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var j={name:r,value:e,strValue:""+e+(I||""),units:I,bypass:t};return u.unitless||I!=="px"&&I!=="em"?j.pfValue=e:j.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(j.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(j.pfValue=I==="rad"?e:Qy(e)),I==="%"&&(j.pfValue=e/100),j}else if(u.propList){var q=[],X=""+e;if(X!=="none"){for(var K=X.split(/\s*,\s*|\s+/),T=0;T<K.length;T++){var M=K[T].trim();a.properties[M]?q.push(M):At("`"+M+"` is not a valid property name")}if(q.length===0)return null}return{name:r,value:q,strValue:q.length===0?"none":q.join(" "),bypass:t}}else if(u.color){var L=Np(e);return L?{name:r,value:L,pfValue:L,strValue:"rgb("+L[0]+","+L[1]+","+L[2]+")",bypass:t}:null}else if(u.regex||u.regexes){if(u.enums){var F=O();if(F)return F}for(var W=u.regexes?u.regexes:[u.regex],Z=0;Z<W.length;Z++){var ee=new RegExp(W[Z]),Q=ee.exec(e);if(Q)return{name:r,value:u.singleRegexMatchValue?Q[1]:Q,strValue:""+e,bypass:t}}return null}else return u.string?{name:r,value:""+e,strValue:""+e,bypass:t}:u.enums?O():null};var Dr=function r(e){if(!(this instanceof r))return new r(e);if(!rf(e)){er("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Or=Dr.prototype;Or.instanceString=function(){return"style"};Or.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Or.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Or.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Or.selector=function(r){var e=r==="core"?null:new la(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Or.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[As(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Or.style=Or.css;Or.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};Or.append=function(r){return Wh(r)?r.appendToStyle(this):zt(r)?this.appendFromJson(r):Qe(r)&&this.appendFromString(r),this};Dr.fromJson=function(r,e){var t=new Dr(r);return t.fromJson(e),t};Dr.fromString=function(r,e){return new Dr(r).fromString(e)};[Lr,Co,mf,Tn,Hs,bf,xr,$s].forEach(function(r){tt(Or,r)});Dr.types=Or.types;Dr.properties=Or.properties;Dr.propertyGroups=Or.propertyGroups;Dr.propertyGroupNames=Or.propertyGroupNames;Dr.propertyGroupKeys=Or.propertyGroupKeys;var yw={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Wh(e)?t.style=e.generateStyle(this):zt(e)?t.style=Dr.fromJson(this,e):Qe(e)?t.style=Dr.fromString(this,e):t.style=Dr(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},mw="single",Fa={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=mw),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return t;case 1:if(Qe(e[0]))return n=e[0],t[n];if(_t(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,Be(o)&&(t.x=o),Be(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&Be(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:_t(e)&&(s=n[0],l=s.x,u=s.y,Be(l)&&(a.x+=l),Be(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&Be(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Be(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Qe(e)){var a=e;e=this.$(a)}else if(wp(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Kr(e)||(e=this.mutableElements());if(!(Kr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(t=Be(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*t)/n.w,(s-2*t)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return Be(e)&&Be(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Be(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Be(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,s=!1;if(t.zoomingEnabled||(s=!0),Be(e)?o=e:_t(e)&&(o=e.level,e.position!=null?i=Ls(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!Be(o)||o===a||i!=null&&(!Be(i.x)||!Be(i.y)))return null;if(i!=null){var l=n,u=a,f=o,c={x:-f/u*(i.x-l.x)+i.x,y:-f/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(Be(e.zoom)||(n=!1),_t(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;Be(u.x)&&(t.pan.x=u.x,s=!1),Be(u.y)&&(t.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(!!this._private.panningEnabled){if(Qe(e)){var n=e;e=this.mutableElements().filter(n)}else Kr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var a=n.window().getComputedStyle(t),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Fa.centre=Fa.center;Fa.autolockNodes=Fa.autolock;Fa.autoungrabifyNodes=Fa.autoungrabify;var vo={data:kt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:kt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:kt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:kt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};vo.attr=vo.data;vo.removeAttr=vo.removeData;var go=function(e){var t=this;e=tt({},e);var n=e.container;n&&!hs(n)&&hs(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=lr!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=tt({name:o?"grid":"null"},s.layout),s.renderer=tt({name:o?"canvas":"null"},s.renderer);var l=function(d,b,x){return b!==void 0?b:x!==void 0?x:d},u=this._private={container:n,ready:!1,options:s,elements:new Cr(this),listeners:[],aniEles:new Cr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Be(s.zoom)?s.zoom:1,pan:{x:_t(s.pan)&&Be(s.pan.x)?s.pan.x:0,y:_t(s.pan)&&Be(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function(d,b){var x=d.some(xp);if(x)return xi.all(d).then(b);b(d)};u.styleEnabled&&t.setStyle([]);var c=tt({},s,s.renderer);t.initRenderer(c);var p=function(d,b,x){t.notifications(!1);var w=t.mutableElements();w.length>0&&w.remove(),d!=null&&(_t(d)||zt(d))&&t.add(d),t.one("layoutready",function(m){t.notifications(!0),t.emit(m),t.one("load",b),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",x),t.emit("done")});var C=tt({},t._private.options.layout);C.eles=t.elements(),t.layout(C).run()};f([s.style,s.elements],function(g){var d=g[0],b=g[1];u.styleEnabled&&t.style().append(d),p(b,function(){t.startAnimationLoop(),u.ready=!0,Zt(s.ready)&&t.on("ready",s.ready);for(var x=0;x<i.length;x++){var w=i[x];t.on("ready",w)}a&&(a.readies=[]),t.emit("ready")},s.done)})},bs=go.prototype;tt(bs,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return lr;var t=this._private.container.ownerDocument;return t===void 0||t==null?lr:t.defaultView||lr},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!hs(e)&&hs(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(tt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Cn(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(S){return t.getElementById(S.id())};if(_t(e)){if(t.startBatch(),e.elements){var o={},s=function(S,P){for(var D=[],v=[],E=0;E<S.length;E++){var k=S[E];if(!k.data.id){At("cy.json() cannot handle elements without an ID attribute");continue}var N=""+k.data.id,O=t.getElementById(N);o[N]=!0,O.length!==0?v.push({ele:O,json:k}):(P&&(k.group=P),D.push(k))}t.add(D);for(var I=0;I<v.length;I++){var H=v[I],G=H.ele,Y=H.json;G.json(Y)}};if(zt(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var f=l[u],c=e.elements[f];zt(c)&&s(c,f)}var p=t.collection();a.filter(function(m){return!o[m.id()]}).forEach(function(m){m.isParent()?p.merge(m):m.remove()}),p.forEach(function(m){return m.children().move({parent:null})}),p.forEach(function(m){return i(m).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],d=0;d<g.length;d++){var b=g[d];e[b]!=null&&t[b](e[b])}return t.endBatch(),this}else{var x=!!e,w={};x?w.elements=this.elements().map(function(m){return m.json()}):(w.elements={},a.forEach(function(m){var S=m.group();w.elements[S]||(w.elements[S]=[]),w.elements[S].push(m.json())})),this._private.styleEnabled&&(w.style=t.style().json()),w.data=Cn(t.data());var C=n.options;return w.zoomingEnabled=n.zoomingEnabled,w.userZoomingEnabled=n.userZoomingEnabled,w.zoom=n.zoom,w.minZoom=n.minZoom,w.maxZoom=n.maxZoom,w.panningEnabled=n.panningEnabled,w.userPanningEnabled=n.userPanningEnabled,w.pan=Cn(n.pan),w.boxSelectionEnabled=n.boxSelectionEnabled,w.renderer=Cn(C.renderer),w.hideEdgesOnViewport=C.hideEdgesOnViewport,w.textureOnViewport=C.textureOnViewport,w.wheelSensitivity=C.wheelSensitivity,w.motionBlur=C.motionBlur,w.multiClickDebounceTime=C.multiClickDebounceTime,w}}});bs.$id=bs.getElementById;[sw,hw,Kd,Rl,ss,vw,Fl,us,yw,Fa,vo].forEach(function(r){tt(bs,r)});var bw={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},ww={maximal:!1,acyclic:!1},ti=function(e){return e.scratch("breadthfirst")},Qc=function(e,t){return e.scratch("breadthfirst",t)};function jd(r){this.options=tt({},bw,ww,r)}jd.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().filter(function(ke){return!ke.isParent()}),i=n,o=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,l=qr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),u;if(Kr(e.roots))u=e.roots;else if(zt(e.roots)){for(var f=[],c=0;c<e.roots.length;c++){var p=e.roots[c],g=t.getElementById(p);f.push(g)}u=t.collection(f)}else if(Qe(e.roots))u=t.$(e.roots);else if(o)u=a.roots();else{var d=n.components();u=t.collection();for(var b=function(me){var _e=d[me],we=_e.maxDegree(!1),xe=_e.filter(function(Ne){return Ne.degree(!1)===we});u=u.add(xe)},x=0;x<d.length;x++)b(x)}var w=[],C={},m=function(me,_e){w[_e]==null&&(w[_e]=[]);var we=w[_e].length;w[_e].push(me),Qc(me,{index:we,depth:_e})},S=function(me,_e){var we=ti(me),xe=we.depth,Ne=we.index;w[xe][Ne]=null,m(me,_e)};i.bfs({roots:u,directed:e.directed,visit:function(me,_e,we,xe,Ne){var qe=me[0],at=qe.id();m(qe,Ne),C[at]=!0}});for(var P=[],D=0;D<a.length;D++){var v=a[D];C[v.id()]||P.push(v)}var E=function(me){for(var _e=w[me],we=0;we<_e.length;we++){var xe=_e[we];if(xe==null){_e.splice(we,1),we--;continue}Qc(xe,{depth:me,index:we})}},k=function(){for(var me=0;me<w.length;me++)E(me)},N=function(me,_e){for(var we=ti(me),xe=me.incomers().filter(function(z){return z.isNode()&&n.has(z)}),Ne=-1,qe=me.id(),at=0;at<xe.length;at++){var We=xe[at],Re=ti(We);Ne=Math.max(Ne,Re.depth)}if(we.depth<=Ne){if(!e.acyclic&&_e[qe])return null;var ge=Ne+1;return S(me,ge),_e[qe]=ge,!0}return!1};if(o&&s){var O=[],I={},H=function(me){return O.push(me)},G=function(){return O.shift()};for(a.forEach(function(ke){return O.push(ke)});O.length>0;){var Y=G(),j=N(Y,I);if(j)Y.outgoers().filter(function(ke){return ke.isNode()&&n.has(ke)}).forEach(H);else if(j===null){At("Detected double maximal shift for node `"+Y.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var q=0;if(e.avoidOverlap)for(var X=0;X<a.length;X++){var K=a[X],T=K.layoutDimensions(e),M=T.w,L=T.h;q=Math.max(q,M,L)}var F={},W=function(me){if(F[me.id()])return F[me.id()];for(var _e=ti(me).depth,we=me.neighborhood(),xe=0,Ne=0,qe=0;qe<we.length;qe++){var at=we[qe];if(!(at.isEdge()||at.isParent()||!a.has(at))){var We=ti(at);if(We!=null){var Re=We.index,ge=We.depth;if(!(Re==null||ge==null)){var z=w[ge].length;ge<_e&&(xe+=Re/z,Ne++)}}}}return Ne=Math.max(1,Ne),xe=xe/Ne,Ne===0&&(xe=0),F[me.id()]=xe,xe},Z=function(me,_e){var we=W(me),xe=W(_e),Ne=we-xe;return Ne===0?jh(me.id(),_e.id()):Ne};e.depthSort!==void 0&&(Z=e.depthSort);for(var ee=0;ee<w.length;ee++)w[ee].sort(Z),E(ee);for(var Q=[],oe=0;oe<P.length;oe++)Q.push(P[oe]);w.unshift(Q),k();for(var fe=0,ce=0;ce<w.length;ce++)fe=Math.max(w[ce].length,fe);var Se={x:l.x1+l.w/2,y:l.x1+l.h/2},De=w.reduce(function(ke,me){return Math.max(ke,me.length)},0),Le=function(me){var _e=ti(me),we=_e.depth,xe=_e.index,Ne=w[we].length,qe=Math.max(l.w/((e.grid?De:Ne)+1),q),at=Math.max(l.h/(w.length+1),q),We=Math.min(l.w/2/w.length,l.h/2/w.length);if(We=Math.max(We,q),e.circle){var ge=We*we+We-(w.length>0&&w[0].length<=3?We/2:0),z=2*Math.PI/w[we].length*xe;return we===0&&w[0].length===1&&(ge=1),{x:Se.x+ge*Math.cos(z),y:Se.y+ge*Math.sin(z)}}else{var Re={x:Se.x+(xe+1-(Ne+1)/2)*qe,y:(we+1)*at};return Re}};return n.nodes().layoutPositions(this,e,Le),this};var xw={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Yd(r){this.options=tt({},xw,r)}Yd.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=qr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),f,c=0,p=0;p<i.length;p++){var g=i[p],d=g.layoutDimensions(e),b=d.w,x=d.h;c=Math.max(c,b,x)}if(Be(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(o.h,o.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var w=Math.cos(u)-Math.cos(0),C=Math.sin(u)-Math.sin(0),m=Math.sqrt(c*c/(w*w+C*C));f=Math.max(m,f)}var S=function(D,v){var E=e.startAngle+v*u*(a?1:-1),k=f*Math.cos(E),N=f*Math.sin(E),O={x:s.x+k,y:s.y+N};return O};return n.nodes().layoutPositions(this,e,S),this};var Sw={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Xd(r){this.options=tt({},Sw,r)}Xd.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=qr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,f=0;f<i.length;f++){var c=i[f],p=void 0;p=e.concentric(c),l.push({value:p,node:c}),c._private.scratch.concentric=p}i.updateStyle();for(var g=0;g<i.length;g++){var d=i[g],b=d.layoutDimensions(e);u=Math.max(u,b.w,b.h)}l.sort(function(ke,me){return me.value-ke.value});for(var x=e.levelWidth(i),w=[[]],C=w[0],m=0;m<l.length;m++){var S=l[m];if(C.length>0){var P=Math.abs(C[0].value-S.value);P>=x&&(C=[],w.push(C))}C.push(S)}var D=u+e.minNodeSpacing;if(!e.avoidOverlap){var v=w.length>0&&w[0].length>1,E=Math.min(o.w,o.h)/2-D,k=E/(w.length+v?1:0);D=Math.min(D,k)}for(var N=0,O=0;O<w.length;O++){var I=w[O],H=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,G=I.dTheta=H/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var Y=Math.cos(G)-Math.cos(0),j=Math.sin(G)-Math.sin(0),q=Math.sqrt(D*D/(Y*Y+j*j));N=Math.max(q,N)}I.r=N,N+=D}if(e.equidistant){for(var X=0,K=0,T=0;T<w.length;T++){var M=w[T],L=M.r-K;X=Math.max(X,L)}K=0;for(var F=0;F<w.length;F++){var W=w[F];F===0&&(K=W.r),W.r=K,K+=X}}for(var Z={},ee=0;ee<w.length;ee++)for(var Q=w[ee],oe=Q.dTheta,fe=Q.r,ce=0;ce<Q.length;ce++){var Se=Q[ce],De=e.startAngle+(t?1:-1)*oe*ce,Le={x:s.x+fe*Math.cos(De),y:s.y+fe*Math.sin(De)};Z[Se.node.id()]=Le}return a.nodes().layoutPositions(this,e,function(ke){var me=ke.id();return Z[me]}),this};var pl,Cw={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function Us(r){this.options=tt({},Cw,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(u){return u.data("id")===i}),l=e.some(function(u){return u.data("id")===o});return!s||!l});this.options.eles=this.options.eles.not(n)}Us.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?pl=!0:pl=!1;var n=_w(e,t,r);pl&&Pw(n),r.randomize&&kw(n);var a=zn(),i=function(){Aw(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(p){return!(t.stopped||p>=r.numIter||(Dw(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var p=r.eles.nodes(),g=Qd(n,r,p);p.layoutPositions(t,r,g)}},l=0,u=!0;if(r.animate===!0){var f=function c(){for(var p=0;u&&p<r.refresh;)u=o(l),l++,p++;if(!u)Jc(n,r),s();else{var g=zn();g-a>=r.animationThreshold&&i(),ds(c)}};f()}else{for(;u;)u=o(l),l++;Jc(n,r),s()}return this};Us.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};Us.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var _w=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=qr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),u={},f=0;f<l.length;f++)for(var c=l[f],p=0;p<c.length;p++){var g=c[p];u[g.id()]=f}for(var f=0;f<s.nodeSize;f++){var d=i[f],b=d.layoutDimensions(n),x={};x.isLocked=d.locked(),x.id=d.data("id"),x.parentId=d.data("parent"),x.cmptId=u[d.id()],x.children=[],x.positionX=d.position("x"),x.positionY=d.position("y"),x.offsetX=0,x.offsetY=0,x.height=b.w,x.width=b.h,x.maxX=x.positionX+x.width/2,x.minX=x.positionX-x.width/2,x.maxY=x.positionY+x.height/2,x.minY=x.positionY-x.height/2,x.padLeft=parseFloat(d.style("padding")),x.padRight=parseFloat(d.style("padding")),x.padTop=parseFloat(d.style("padding")),x.padBottom=parseFloat(d.style("padding")),x.nodeRepulsion=Zt(n.nodeRepulsion)?n.nodeRepulsion(d):n.nodeRepulsion,s.layoutNodes.push(x),s.idToIndex[x.id]=f}for(var w=[],C=0,m=-1,S=[],f=0;f<s.nodeSize;f++){var d=s.layoutNodes[f],P=d.parentId;P!=null?s.layoutNodes[s.idToIndex[P]].children.push(d.id):(w[++m]=d.id,S.push(d.id))}for(s.graphSet.push(S);C<=m;){var D=w[C++],v=s.idToIndex[D],g=s.layoutNodes[v],E=g.children;if(E.length>0){s.graphSet.push(E);for(var f=0;f<E.length;f++)w[++m]=E[f]}}for(var f=0;f<s.graphSet.length;f++)for(var k=s.graphSet[f],p=0;p<k.length;p++){var N=s.idToIndex[k[p]];s.indexToGraph[N]=f}for(var f=0;f<s.edgeSize;f++){var O=a[f],I={};I.id=O.data("id"),I.sourceId=O.data("source"),I.targetId=O.data("target");var H=Zt(n.idealEdgeLength)?n.idealEdgeLength(O):n.idealEdgeLength,G=Zt(n.edgeElasticity)?n.edgeElasticity(O):n.edgeElasticity,Y=s.idToIndex[I.sourceId],j=s.idToIndex[I.targetId],q=s.indexToGraph[Y],X=s.indexToGraph[j];if(q!=X){for(var K=Ew(I.sourceId,I.targetId,s),T=s.graphSet[K],M=0,x=s.layoutNodes[Y];T.indexOf(x.id)===-1;)x=s.layoutNodes[s.idToIndex[x.parentId]],M++;for(x=s.layoutNodes[j];T.indexOf(x.id)===-1;)x=s.layoutNodes[s.idToIndex[x.parentId]],M++;H*=M*n.nestingFactor}I.idealLength=H,I.elasticity=G,s.layoutEdges.push(I)}return s},Ew=function(e,t,n){var a=Tw(e,t,0,n);return 2>a.count?0:a.graph},Tw=function r(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],f=a.layoutNodes[u].children;if(f.length!==0){var c=a.indexToGraph[a.idToIndex[f[0]]],p=r(e,t,c,a);if(p.count!==0)if(p.count===1){if(o++,o===2)break}else return p}}return{count:o,graph:n}},Pw,kw=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},Qd=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var u=(l.positionX-i.x1)/i.w,f=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+f*a.h}}else return{x:l.positionX,y:l.positionY}}},Aw=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=Qd(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},Dw=function(e,t,n){Mw(e,t),Nw(e),Iw(e,t),Rw(e),Fw(e)},Mw=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];Ow(s,u,e,t)}},Zc=function(e){return-e+2*e*Math.random()},Ow=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var s=t.positionX-e.positionX,l=t.positionY-e.positionY,u=1;s===0&&l===0&&(s=Zc(u),l=Zc(u));var f=Lw(e,t,s,l);if(f>0)var c=a.nodeOverlap*f,p=Math.sqrt(s*s+l*l),g=c*s/p,d=c*l/p;else var b=ws(e,s,l),x=ws(t,-1*s,-1*l),w=x.x-b.x,C=x.y-b.y,m=w*w+C*C,p=Math.sqrt(m),c=(e.nodeRepulsion+t.nodeRepulsion)/m,g=c*w/p,d=c*C/p;e.isLocked||(e.offsetX-=g,e.offsetY-=d),t.isLocked||(t.offsetX+=g,t.offsetY+=d)}},Lw=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},ws=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/t,u=o/s,f={};return t===0&&0<n||t===0&&0>n?(f.x=a,f.y=i+o/2,f):0<t&&-1*u<=l&&l<=u?(f.x=a+s/2,f.y=i+s*n/2/t,f):0>t&&-1*u<=l&&l<=u?(f.x=a-s/2,f.y=i-s*n/2/t,f):0<n&&(l<=-1*u||l>=u)?(f.x=a+o*t/2/n,f.y=i+o/2,f):(0>n&&(l<=-1*u||l>=u)&&(f.x=a-o*t/2/n,f.y=i-o/2),f)},Nw=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,f=l.positionY-o.positionY;if(!(u===0&&f===0)){var c=ws(o,u,f),p=ws(l,-1*u,-1*f),g=p.x-c.x,d=p.y-c.y,b=Math.sqrt(g*g+d*d),x=Math.pow(a.idealLength-b,2)/a.elasticity;if(b!==0)var w=x*g/b,C=x*d/b;else var w=0,C=0;o.isLocked||(o.offsetX+=w,o.offsetY+=C),l.isLocked||(l.offsetX-=w,l.offsetY-=C)}}},Iw=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[u.parentId]],s=f.positionX,l=f.positionY;for(var c=0;c<o;c++){var p=e.layoutNodes[e.idToIndex[i[c]]];if(!p.isLocked){var g=s-p.positionX,d=l-p.positionY,b=Math.sqrt(g*g+d*d);if(b>n){var x=t.gravity*g/b,w=t.gravity*d/b;p.offsetX+=x,p.offsetY+=w}}}}},Rw=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var f=l.offsetX,c=l.offsetY,p=0;p<u.length;p++){var g=e.layoutNodes[e.idToIndex[u[p]]];g.offsetX+=f,g.offsetY+=c,n[++i]=u[p]}l.offsetX=0,l.offsetY=0}}},Fw=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=Bw(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,zw(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},Bw=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},zw=function r(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return r(a,t)}},Jc=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var f=a[i];if(!!f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var p=f[c];f.x1=Math.min(f.x1,p.positionX-p.width/2),f.x2=Math.max(f.x2,p.positionX+p.width/2),f.y1=Math.min(f.y1,p.positionY-p.height/2),f.y2=Math.max(f.y2,p.positionY+p.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,u+=f.w*f.h}}a.sort(function(C,m){return m.w*m.h-C.w*C.h});for(var g=0,d=0,b=0,x=0,w=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(!!f){for(var c=0;c<f.length;c++){var p=f[c];p.isLocked||(p.positionX+=g-f.x1,p.positionY+=d-f.y1)}g+=f.w+t.componentSpacing,b+=f.w+t.componentSpacing,x=Math.max(x,f.h),b>w&&(d+=x+t.componentSpacing,g=0,b=0,x=0)}}},Gw={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Zd(r){this.options=tt({},Gw,r)}Zd.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=qr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(F){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),f=function(W){if(W==null)return Math.min(l,u);var Z=Math.min(l,u);Z==l?l=W:u=W},c=function(W){if(W==null)return Math.max(l,u);var Z=Math.max(l,u);Z==l?l=W:u=W},p=e.rows,g=e.cols!=null?e.cols:e.columns;if(p!=null&&g!=null)l=p,u=g;else if(p!=null&&g==null)l=p,u=Math.ceil(o/l);else if(p==null&&g!=null)u=g,l=Math.ceil(o/u);else if(u*l>o){var d=f(),b=c();(d-1)*b>=o?f(d-1):(b-1)*d>=o&&c(b-1)}else for(;u*l<o;){var x=f(),w=c();(w+1)*x>=o?c(w+1):f(x+1)}var C=i.w/u,m=i.h/l;if(e.condense&&(C=0,m=0),e.avoidOverlap)for(var S=0;S<a.length;S++){var P=a[S],D=P._private.position;(D.x==null||D.y==null)&&(D.x=0,D.y=0);var v=P.layoutDimensions(e),E=e.avoidOverlapPadding,k=v.w+E,N=v.h+E;C=Math.max(C,k),m=Math.max(m,N)}for(var O={},I=function(W,Z){return!!O["c-"+W+"-"+Z]},H=function(W,Z){O["c-"+W+"-"+Z]=!0},G=0,Y=0,j=function(){Y++,Y>=u&&(Y=0,G++)},q={},X=0;X<a.length;X++){var K=a[X],T=e.position(K);if(T&&(T.row!==void 0||T.col!==void 0)){var M={row:T.row,col:T.col};if(M.col===void 0)for(M.col=0;I(M.row,M.col);)M.col++;else if(M.row===void 0)for(M.row=0;I(M.row,M.col);)M.row++;q[K.id()]=M,H(M.row,M.col)}}var L=function(W,Z){var ee,Q;if(W.locked()||W.isParent())return!1;var oe=q[W.id()];if(oe)ee=oe.col*C+C/2+i.x1,Q=oe.row*m+m/2+i.y1;else{for(;I(G,Y);)j();ee=Y*C+C/2+i.x1,Q=G*m+m/2+i.y1,H(G,Y),j()}return{x:ee,y:Q}};a.layoutPositions(this,e,L)}return this};var Vw={ready:function(){},stop:function(){}};function wf(r){this.options=tt({},Vw,r)}wf.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};wf.prototype.stop=function(){return this};var Hw={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Jd(r){this.options=tt({},Hw,r)}Jd.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=Zt(r.positions);function a(i){if(r.positions==null)return Wy(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o==null?null:o}return t.layoutPositions(this,r,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var $w={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function ev(r){this.options=tt({},$w,r)}ev.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=qr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var Uw=[{name:"breadthfirst",impl:jd},{name:"circle",impl:Yd},{name:"concentric",impl:Xd},{name:"cose",impl:Us},{name:"grid",impl:Zd},{name:"null",impl:wf},{name:"preset",impl:Jd},{name:"random",impl:ev}];function tv(r){this.options=r,this.notifications=0}var eh=function(){},th=function(){throw new Error("A headless instance can not render images")};tv.prototype={recalculateRenderedStyle:eh,notify:function(){this.notifications++},init:eh,isHeadless:function(){return!0},png:th,jpg:th};var xf={};xf.arrowShapeWidth=.3;xf.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(u,f,c,p,g,d,b){var x=g.x-c/2-b,w=g.x+c/2+b,C=g.y-c/2-b,m=g.y+c/2+b,S=x<=u&&u<=w&&C<=f&&f<=m;return S},n=function(u,f,c,p,g){var d=u*Math.cos(p)-f*Math.sin(p),b=u*Math.sin(p)+f*Math.cos(p),x=d*c,w=b*c,C=x+g.x,m=w+g.y;return{x:C,y:m}},a=function(u,f,c,p){for(var g=[],d=0;d<u.length;d+=2){var b=u[d],x=u[d+1];g.push(n(b,x,f,c,p))}return g},i=function(u){for(var f=[],c=0;c<u.length;c++){var p=u[c];f.push(p.x,p.y)}return f},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,f){Qe(f)&&(f=r[f]),r[u]=tt({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(p,g,d,b,x,w){var C=i(a(this.points,d+2*w,b,x)),m=Ur(p,g,C);return m},roughCollide:t,draw:function(p,g,d,b){var x=a(this.points,g,d,b);e.arrowShapeImpl("polygon")(p,x)},spacing:function(p){return 0},gap:o},f)};s("none",{collide:vs,roughCollide:vs,draw:of,spacing:cc,gap:cc}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(u,f,c,p,g){var d=a(this.points,f,c,p),b=this.controlPoint,x=n(b[0],b[1],f,c,p);e.arrowShapeImpl(this.name)(u,d,x)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,f,c,p,g,d,b){var x=i(a(this.points,c+2*b,p,g)),w=i(a(this.pointsTee,c+2*b,p,g)),C=Ur(u,f,x)||Ur(u,f,w);return C},draw:function(u,f,c,p,g){var d=a(this.points,f,c,p),b=a(this.pointsTee,f,c,p);e.arrowShapeImpl(this.name)(u,d,b)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,f,c,p,g,d,b){var x=g,w=Math.pow(x.x-u,2)+Math.pow(x.y-f,2)<=Math.pow((c+2*b)*this.radius,2),C=i(a(this.points,c+2*b,p,g));return Ur(u,f,C)||w},draw:function(u,f,c,p,g){var d=a(this.pointsTr,f,c,p);e.arrowShapeImpl(this.name)(u,d,p.x,p.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,f){var c=this.baseCrossLinePts.slice(),p=f/u,g=3,d=5;return c[g]=c[g]-p,c[d]=c[d]-p,c},collide:function(u,f,c,p,g,d,b){var x=i(a(this.points,c+2*b,p,g)),w=i(a(this.crossLinePts(c,d),c+2*b,p,g)),C=Ur(u,f,x)||Ur(u,f,w);return C},draw:function(u,f,c,p,g){var d=a(this.points,f,c,p),b=a(this.crossLinePts(f,g),f,c,p);e.arrowShapeImpl(this.name)(u,d,b)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,f,c,p,g,d,b){var x=g,w=Math.pow(x.x-u,2)+Math.pow(x.y-f,2)<=Math.pow((c+2*b)*this.radius,2);return w},draw:function(u,f,c,p,g){e.arrowShapeImpl(this.name)(u,p.x,p.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Ga={};Ga.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=t.pan(),l=t.zoom(),u=((r-a)/o-s.x)/l,f=((e-i)/o-s.y)/l;return[u,f]};Ga.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(w){return parseFloat(t.getPropertyValue(w))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,l=a.left+a.right,u=a.top+a.bottom,f=i.left+i.right,c=e.width/(o+f),p=o-l,g=s-u,d=e.left+a.left+i.left,b=e.top+a.top+i.top;return this.containerBB=[d,b,p,g,c]};Ga.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ga.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Ga.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),f=(n?24:8)/l,c=(n?8:2)/l,p=(n?8:2)/l,g=1/0,d,b;t&&(o=o.interactive);function x(v,E){if(v.isNode()){if(b)return;b=v,s.push(v)}if(v.isEdge()&&(E==null||E<g))if(d){if(d.pstyle("z-compound-depth").value===v.pstyle("z-compound-depth").value&&d.pstyle("z-compound-depth").value===v.pstyle("z-compound-depth").value){for(var k=0;k<s.length;k++)if(s[k].isEdge()){s[k]=v,d=v,g=E!=null?E:g;break}}}else s.push(v),d=v,g=E!=null?E:g}function w(v){var E=v.outerWidth()+2*c,k=v.outerHeight()+2*c,N=E/2,O=k/2,I=v.position(),H=v.pstyle("corner-radius").value==="auto"?"auto":v.pstyle("corner-radius").pfValue,G=v._private.rscratch;if(I.x-N<=r&&r<=I.x+N&&I.y-O<=e&&e<=I.y+O){var Y=i.nodeShapes[a.getNodeShape(v)];if(Y.checkPoint(r,e,0,E,k,I.x,I.y,H,G))return x(v,0),!0}}function C(v){var E=v._private,k=E.rscratch,N=v.pstyle("width").pfValue,O=v.pstyle("arrow-scale").value,I=N/2+f,H=I*I,G=I*2,X=E.source,K=E.target,Y;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var j=k.allpts,q=0;q+3<j.length;q+=2)if(im(r,e,j[q],j[q+1],j[q+2],j[q+3],G)&&H>(Y=fm(r,e,j[q],j[q+1],j[q+2],j[q+3])))return x(v,Y),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var j=k.allpts,q=0;q+5<k.allpts.length;q+=4)if(om(r,e,j[q],j[q+1],j[q+2],j[q+3],j[q+4],j[q+5],G)&&H>(Y=lm(r,e,j[q],j[q+1],j[q+2],j[q+3],j[q+4],j[q+5])))return x(v,Y),!0}for(var X=X||E.source,K=K||E.target,T=a.getArrowWidth(N,O),M=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],q=0;q<M.length;q++){var L=M[q],F=i.arrowShapes[v.pstyle(L.name+"-arrow-shape").value],W=v.pstyle("width").pfValue;if(F.roughCollide(r,e,T,L.angle,{x:L.x,y:L.y},W,f)&&F.collide(r,e,T,L.angle,{x:L.x,y:L.y},W,f))return x(v),!0}u&&s.length>0&&(w(X),w(K))}function m(v,E,k){return un(v,E,k)}function S(v,E){var k=v._private,N=p,O;E?O=E+"-":O="",v.boundingBox();var I=k.labelBounds[E||"main"],H=v.pstyle(O+"label").value,G=v.pstyle("text-events").strValue==="yes";if(!(!G||!H)){var Y=m(k.rscratch,"labelX",E),j=m(k.rscratch,"labelY",E),q=m(k.rscratch,"labelAngle",E),X=v.pstyle(O+"text-margin-x").pfValue,K=v.pstyle(O+"text-margin-y").pfValue,T=I.x1-N-X,M=I.x2+N-X,L=I.y1-N-K,F=I.y2+N-K;if(q){var W=Math.cos(q),Z=Math.sin(q),ee=function(Le,ke){return Le=Le-Y,ke=ke-j,{x:Le*W-ke*Z+Y,y:Le*Z+ke*W+j}},Q=ee(T,L),oe=ee(T,F),fe=ee(M,L),ce=ee(M,F),Se=[Q.x+X,Q.y+K,fe.x+X,fe.y+K,ce.x+X,ce.y+K,oe.x+X,oe.y+K];if(Ur(r,e,Se))return x(v),!0}else if(vi(I,r,e))return x(v),!0}}for(var P=o.length-1;P>=0;P--){var D=o[P];D.isNode()?w(D)||S(D):C(D)||S(D)||S(D,"source")||S(D,"target")}return s};Ga.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(r,t),s=Math.max(r,t),l=Math.min(e,n),u=Math.max(e,n);r=o,t=s,e=l,n=u;for(var f=qr({x1:r,y1:e,x2:t,y2:n}),c=0;c<a.length;c++){var p=a[c];if(p.isNode()){var g=p,d=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});lf(f,d)&&!fd(d,f)&&i.push(g)}else{var b=p,x=b._private,w=x.rscratch;if(w.startX!=null&&w.startY!=null&&!vi(f,w.startX,w.startY)||w.endX!=null&&w.endY!=null&&!vi(f,w.endX,w.endY))continue;if(w.edgeType==="bezier"||w.edgeType==="multibezier"||w.edgeType==="self"||w.edgeType==="compound"||w.edgeType==="segments"||w.edgeType==="haystack"){for(var C=x.rstyle.bezierPts||x.rstyle.linePts||x.rstyle.haystackPts,m=!0,S=0;S<C.length;S++)if(!am(f,C[S])){m=!1;break}m&&i.push(b)}else(w.edgeType==="haystack"||w.edgeType==="straight")&&i.push(b)}}return i};var xs={};xs.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,f,c,p,g,w,C;if(t?(f=e.haystackPts[0],c=e.haystackPts[1],p=e.haystackPts[2],g=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,p=e.arrowEndX,g=e.arrowEndY),w=e.midX,C=e.midY,i)l=f-e.segpts[0],u=c-e.segpts[1];else if(a||o||s||n){var d=e.allpts,b=yr(d[0],d[2],d[4],.1),x=yr(d[1],d[3],d[5],.1);l=f-b,u=c-x}else l=f-w,u=c-C;e.srcArrowAngle=Go(l,u);var w=e.midX,C=e.midY;if(t&&(w=(f+p)/2,C=(c+g)/2),l=p-f,u=g-c,i){var d=e.allpts;if(d.length/2%2===0){var m=d.length/2,S=m-2;l=d[m]-d[S],u=d[m+1]-d[S+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var m=d.length/2-1,S=m-2;l=d[m]-d[S],u=d[m+1]-d[S+1]}}else if(a||o||s){var d=e.allpts,P=e.ctrlpts,D,v,E,k;if(P.length/2%2===0){var N=d.length/2-1,O=N+2,I=O+2;D=yr(d[N],d[O],d[I],0),v=yr(d[N+1],d[O+1],d[I+1],0),E=yr(d[N],d[O],d[I],1e-4),k=yr(d[N+1],d[O+1],d[I+1],1e-4)}else{var O=d.length/2-1,N=O-2,I=O+2;D=yr(d[N],d[O],d[I],.4999),v=yr(d[N+1],d[O+1],d[I+1],.4999),E=yr(d[N],d[O],d[I],.5),k=yr(d[N+1],d[O+1],d[I+1],.5)}l=E-D,u=k-v}if(e.midtgtArrowAngle=Go(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var d=e.allpts;if(d.length/2%2!==0){if(!e.isRound){var m=d.length/2-1,H=m+2;l=-(d[H]-d[m]),u=-(d[H+1]-d[m+1])}}}if(e.midsrcArrowAngle=Go(l,u),i)l=p-e.segpts[e.segpts.length-2],u=g-e.segpts[e.segpts.length-1];else if(a||o||s||n){var d=e.allpts,G=d.length,b=yr(d[G-6],d[G-4],d[G-2],.9),x=yr(d[G-5],d[G-3],d[G-1],.9);l=p-b,u=g-x}else l=p-w,u=g-C;e.tgtArrowAngle=Go(l,u)};xs.getArrowWidth=xs.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var Bl,zl,Sn={},Zr={},rh,nh,Da,ls,In,Ea,ka,wn,ri,Yo,rv,nv,Gl,Vl,ah,ih=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},qw=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},Ww=function(e,t,n,a,i){if(e!==ah?ih(t,e,Sn):qw(Zr,Sn),ih(t,n,Zr),rh=Sn.nx*Zr.ny-Sn.ny*Zr.nx,nh=Sn.nx*Zr.nx-Sn.ny*-Zr.ny,In=Math.asin(Math.max(-1,Math.min(1,rh))),Math.abs(In)<1e-6){Bl=t.x,zl=t.y,ka=ri=0;return}Da=1,ls=!1,nh<0?In<0?In=Math.PI+In:(In=Math.PI-In,Da=-1,ls=!0):In>0&&(Da=-1,ls=!0),t.radius!==void 0?ri=t.radius:ri=a,Ea=In/2,Yo=Math.min(Sn.len/2,Zr.len/2),i?(wn=Math.abs(Math.cos(Ea)*ri/Math.sin(Ea)),wn>Yo?(wn=Yo,ka=Math.abs(wn*Math.sin(Ea)/Math.cos(Ea))):ka=ri):(wn=Math.min(Yo,ri),ka=Math.abs(wn*Math.sin(Ea)/Math.cos(Ea))),Gl=t.x+Zr.nx*wn,Vl=t.y+Zr.ny*wn,Bl=Gl-Zr.ny*ka*Da,zl=Vl+Zr.nx*ka*Da,rv=t.x+Sn.nx*wn,nv=t.y+Sn.ny*wn,ah=t};function av(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Sf(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(Ww(r,e,t,n,a),{cx:Bl,cy:zl,radius:ka,startX:rv,startY:nv,stopX:Gl,stopY:Vl,startAngle:Sn.ang+Math.PI/2*Da,endAngle:Zr.ang-Math.PI/2*Da,counterClockwise:ls})}var Nr={};Nr.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),l=o.units!=null&&s.units!=null,u=function(P,D,v,E){var k=E-D,N=v-P,O=Math.sqrt(N*N+k*k);return{x:-k/O,y:N/O}},f=r.pstyle("edge-distances").value;switch(f){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(l){var c=this.manualEndptToPx(r.source()[0],o),p=on(c,2),g=p[0],d=p[1],b=this.manualEndptToPx(r.target()[0],s),x=on(b,2),w=x[0],C=x[1],m={x1:g,y1:d,x2:w,y2:C};a=u(g,d,w,C),i=m}else At("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Nr.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),f=o.width(),c=s.width(),p=o.height(),g=s.height(),d=t.pstyle("haystack-radius").value,b=d/2;a.haystackPts=a.allpts=[a.source.x*f*b+l.x,a.source.y*p*b+l.y,a.target.x*c*b+u.x,a.target.y*g*b+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Nr.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var f=0;f<s;f++){var c=n.pfValue[f],p=a.pfValue[f],g=1-c,d=c,b=this.findMidptPtsEtc(r,e),x=b.midptPts,w=b.vectorNormInverse,C={x:x.x1*g+x.x2*d,y:x.y1*g+x.y2*d};t.segpts.push(C.x+w.x*p,C.y+w.y*p),t.radii.push(i.pfValue[f]!==void 0?i.pfValue[f]:l),t.isArcRadius.push((o.pfValue[f]!==void 0?o.pfValue[f]:u)==="arc-radius")}};Nr.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=r.pstyle("loop-direction").pfValue,f=r.pstyle("loop-sweep").pfValue,c=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=t,g=c;n&&(p=0,g=l);var d=u-Math.PI/2,b=d-f/2,x=d+f/2,w=String(u+"_"+f);p=i[w]===void 0?i[w]=0:++i[w],a.ctrlpts=[o.x+Math.cos(b)*1.4*g*(p/3+1),o.y+Math.sin(b)*1.4*g*(p/3+1),o.x+Math.cos(x)*1.4*g*(p/3+1),o.y+Math.sin(x)*1.4*g*(p/3+1)]};Nr.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,f=e.tgtH,c=r.pstyle("control-point-step-size").pfValue,p=r.pstyle("control-point-distances"),g=p?p.pfValue[0]:void 0,d=t,b=c;n&&(d=0,b=g);var x=50,w={x:i.x-s/2,y:i.y-l/2},C={x:o.x-u/2,y:o.y-f/2},m={x:Math.min(w.x,C.x),y:Math.min(w.y,C.y)},S=.5,P=Math.max(S,Math.log(s*.01)),D=Math.max(S,Math.log(u*.01));a.ctrlpts=[m.x,m.y-(1+Math.pow(x,1.12)/100)*b*(d/3+1)*P,m.x-(1+Math.pow(x,1.12)/100)*b*(d/3+1)*D,m.y]};Nr.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Nr.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),l=r.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,f=s?s.pfValue[0]:void 0,c=l.value[0],p=n;i.edgeType=p?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<u;g++){var d=(.5-e.eles.length/2+t)*o*(a?-1:1),b=void 0,x=ud(d);p&&(f=s?s.pfValue[g]:o,c=l.value[g]),n?b=f:b=f!==void 0?x*f:void 0;var w=b!==void 0?b:d,C=1-c,m=c,S=this.findMidptPtsEtc(r,e),P=S.midptPts,D=S.vectorNormInverse,v={x:P.x1*C+P.x2*m,y:P.y1*C+P.y2*m};i.ctrlpts.push(v.x+D.x*w,v.y+D.y*w)}};Nr.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",f=e.posPts,c=e.srcW,p=e.srcH,g=e.tgtW,d=e.tgtH,b=r.pstyle("edge-distances").value,x=b!=="node-position",w=r.pstyle("taxi-direction").value,C=w,m=r.pstyle("taxi-turn"),S=m.units==="%",P=m.pfValue,D=P<0,v=r.pstyle("taxi-turn-min-distance").pfValue,E=x?(c+g)/2:0,k=x?(p+d)/2:0,N=f.x2-f.x1,O=f.y2-f.y1,I=function(Fe,ze){return Fe>0?Math.max(Fe-ze,0):Math.min(Fe+ze,0)},H=I(N,E),G=I(O,k),Y=!1;C===u?w=Math.abs(H)>Math.abs(G)?a:n:C===l||C===s?(w=n,Y=!0):(C===i||C===o)&&(w=a,Y=!0);var j=w===n,q=j?G:H,X=j?O:N,K=ud(X),T=!1;!(Y&&(S||D))&&(C===s&&X<0||C===l&&X>0||C===i&&X>0||C===o&&X<0)&&(K*=-1,q=K*Math.abs(q),T=!0);var M;if(S){var L=P<0?1+P:P;M=L*q}else{var F=P<0?q:0;M=F+P*K}var W=function(Fe){return Math.abs(Fe)<v||Math.abs(Fe)>=Math.abs(q)},Z=W(M),ee=W(Math.abs(q)-Math.abs(M)),Q=Z||ee;if(Q&&!T)if(j){var oe=Math.abs(X)<=p/2,fe=Math.abs(N)<=g/2;if(oe){var ce=(f.x1+f.x2)/2,Se=f.y1,De=f.y2;t.segpts=[ce,Se,ce,De]}else if(fe){var Le=(f.y1+f.y2)/2,ke=f.x1,me=f.x2;t.segpts=[ke,Le,me,Le]}else t.segpts=[f.x1,f.y2]}else{var _e=Math.abs(X)<=c/2,we=Math.abs(O)<=d/2;if(_e){var xe=(f.y1+f.y2)/2,Ne=f.x1,qe=f.x2;t.segpts=[Ne,xe,qe,xe]}else if(we){var at=(f.x1+f.x2)/2,We=f.y1,Re=f.y2;t.segpts=[at,We,at,Re]}else t.segpts=[f.x2,f.y1]}else if(j){var ge=f.y1+M+(x?p/2*K:0),z=f.x1,V=f.x2;t.segpts=[z,ge,V,ge]}else{var ne=f.x1+M+(x?c/2*K:0),te=f.y1,ie=f.y2;t.segpts=[ne,te,ne,ie]}if(t.isRound){var ve=r.pstyle("taxi-radius").value,ue=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(ve),t.isArcRadius=new Array(t.segpts.length/2).fill(ue)}};Nr.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,f=e.tgtShape,c=e.srcCornerRadius,p=e.tgtCornerRadius,g=e.srcRs,d=e.tgtRs,b=!Be(t.startX)||!Be(t.startY),x=!Be(t.arrowStartX)||!Be(t.arrowStartY),w=!Be(t.endX)||!Be(t.endY),C=!Be(t.arrowEndX)||!Be(t.arrowEndY),m=3,S=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,P=m*S,D=Na({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),v=D<P,E=Na({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),k=E<P,N=!1;if(b||x||v){N=!0;var O={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},I=Math.sqrt(O.x*O.x+O.y*O.y),H={x:O.x/I,y:O.y/I},G=Math.max(i,o),Y={x:t.ctrlpts[0]+H.x*2*G,y:t.ctrlpts[1]+H.y*2*G},j=u.intersectLine(n.x,n.y,i,o,Y.x,Y.y,0,c,g);v?(t.ctrlpts[0]=t.ctrlpts[0]+H.x*(P-D),t.ctrlpts[1]=t.ctrlpts[1]+H.y*(P-D)):(t.ctrlpts[0]=j[0]+H.x*P,t.ctrlpts[1]=j[1]+H.y*P)}if(w||C||k){N=!0;var q={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},X=Math.sqrt(q.x*q.x+q.y*q.y),K={x:q.x/X,y:q.y/X},T=Math.max(i,o),M={x:t.ctrlpts[0]+K.x*2*T,y:t.ctrlpts[1]+K.y*2*T},L=f.intersectLine(a.x,a.y,s,l,M.x,M.y,0,p,d);k?(t.ctrlpts[0]=t.ctrlpts[0]+K.x*(P-E),t.ctrlpts[1]=t.ctrlpts[1]+K.y*(P-E)):(t.ctrlpts[0]=L[0]+K.x*P,t.ctrlpts[1]=L[1]+K.y*P)}N&&this.findEndpoints(r)}};Nr.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=yr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=yr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(Sf({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var f=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[f],e.midY=e.segpts[f+1];else{var c={x:e.segpts[f],y:e.segpts[f+1]},p=e.roundCorners[f/2],g=[c.x-p.cx,c.y-p.cy],d=p.radius/Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2));g=g.map(function(b){return b*d}),e.midX=p.cx+g[0],e.midY=p.cy+g[1],e.midVector=g}}}};Nr.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Be(e.startX)&&Be(e.startY)&&Be(e.endX)&&Be(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,At("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Nr.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i={map:new _n,get:function(v){var E=this.map.get(v[0]);return E!=null?E.get(v[1]):null},set:function(v,E){var k=this.map.get(v[0]);k==null&&(k=new _n,this.map.set(v[0],k)),k.set(v[1],E)}},o=[],s=[],l=0;l<r.length;l++){var u=r[l],f=u._private,c=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(c==="haystack"){s.push(u);continue}var p=c==="unbundled-bezier"||c.endsWith("segments")||c==="straight"||c==="straight-triangle"||c.endsWith("taxi"),g=c==="unbundled-bezier"||c==="bezier",d=f.source,b=f.target,x=d.poolIndex(),w=b.poolIndex(),C=[x,w].sort(),m=i.get(C);m==null&&(m={eles:[]},i.set(C,m),o.push(C)),m.eles.push(u),p&&(m.hasUnbundled=!0),g&&(m.hasBezier=!0)}}for(var S=function(v){var E=o[v],k=i.get(E),N=void 0;if(!k.hasUnbundled){var O=k.eles[0].parallelEdges().filter(function(ne){return ne.isBundledBezier()});sf(k.eles),O.forEach(function(ne){return k.eles.push(ne)}),k.eles.sort(function(ne,te){return ne.poolIndex()-te.poolIndex()})}var I=k.eles[0],H=I.source(),G=I.target();if(H.poolIndex()>G.poolIndex()){var Y=H;H=G,G=Y}var j=k.srcPos=H.position(),q=k.tgtPos=G.position(),X=k.srcW=H.outerWidth(),K=k.srcH=H.outerHeight(),T=k.tgtW=G.outerWidth(),M=k.tgtH=G.outerHeight(),L=k.srcShape=t.nodeShapes[e.getNodeShape(H)],F=k.tgtShape=t.nodeShapes[e.getNodeShape(G)],W=k.srcCornerRadius=H.pstyle("corner-radius").value==="auto"?"auto":H.pstyle("corner-radius").pfValue,Z=k.tgtCornerRadius=G.pstyle("corner-radius").value==="auto"?"auto":G.pstyle("corner-radius").pfValue,ee=k.tgtRs=G._private.rscratch,Q=k.srcRs=H._private.rscratch;k.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var oe=0;oe<k.eles.length;oe++){var fe=k.eles[oe],ce=fe[0]._private.rscratch,Se=fe.pstyle("curve-style").value,De=Se==="unbundled-bezier"||Se.endsWith("segments")||Se.endsWith("taxi"),Le=!H.same(fe.source());if(!k.calculatedIntersection&&H!==G&&(k.hasBezier||k.hasUnbundled)){k.calculatedIntersection=!0;var ke=L.intersectLine(j.x,j.y,X,K,q.x,q.y,0,W,Q),me=k.srcIntn=ke,_e=F.intersectLine(q.x,q.y,T,M,j.x,j.y,0,Z,ee),we=k.tgtIntn=_e,xe=k.intersectionPts={x1:ke[0],x2:_e[0],y1:ke[1],y2:_e[1]},Ne=k.posPts={x1:j.x,x2:q.x,y1:j.y,y2:q.y},qe=_e[1]-ke[1],at=_e[0]-ke[0],We=Math.sqrt(at*at+qe*qe),Re=k.vector={x:at,y:qe},ge=k.vectorNorm={x:Re.x/We,y:Re.y/We},z={x:-ge.y,y:ge.x};k.nodesOverlap=!Be(We)||F.checkPoint(ke[0],ke[1],0,T,M,q.x,q.y,Z,ee)||L.checkPoint(_e[0],_e[1],0,X,K,j.x,j.y,W,Q),k.vectorNormInverse=z,N={nodesOverlap:k.nodesOverlap,dirCounts:k.dirCounts,calculatedIntersection:!0,hasBezier:k.hasBezier,hasUnbundled:k.hasUnbundled,eles:k.eles,srcPos:q,tgtPos:j,srcW:T,srcH:M,tgtW:X,tgtH:K,srcIntn:we,tgtIntn:me,srcShape:F,tgtShape:L,posPts:{x1:Ne.x2,y1:Ne.y2,x2:Ne.x1,y2:Ne.y1},intersectionPts:{x1:xe.x2,y1:xe.y2,x2:xe.x1,y2:xe.y1},vector:{x:-Re.x,y:-Re.y},vectorNorm:{x:-ge.x,y:-ge.y},vectorNormInverse:{x:-z.x,y:-z.y}}}var V=Le?N:k;ce.nodesOverlap=V.nodesOverlap,ce.srcIntn=V.srcIntn,ce.tgtIntn=V.tgtIntn,ce.isRound=Se.startsWith("round"),a&&(H.isParent()||H.isChild()||G.isParent()||G.isChild())&&(H.parents().anySame(G)||G.parents().anySame(H)||H.same(G)&&H.isParent())?e.findCompoundLoopPoints(fe,V,oe,De):H===G?e.findLoopPoints(fe,V,oe,De):Se.endsWith("segments")?e.findSegmentsPoints(fe,V):Se.endsWith("taxi")?e.findTaxiPoints(fe,V):Se==="straight"||!De&&k.eles.length%2===1&&oe===Math.floor(k.eles.length/2)?e.findStraightEdgePoints(fe):e.findBezierPoints(fe,V,oe,De,Le),e.findEndpoints(fe),e.tryToCorrectInvalidPoints(fe,V),e.checkForInvalidEdgeWarning(fe),e.storeAllpts(fe),e.storeEdgeProjections(fe),e.calculateArrowAngles(fe),e.recalculateEdgeLabelProjections(fe),e.calculateLabelAngles(fe)}},P=0;P<o.length;P++)S(P);this.findHaystackPoints(s)}};function iv(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}Nr.getSegmentPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="segments")return this.recalculateRenderedStyle(r),iv(e.segpts)};Nr.getControlPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return this.recalculateRenderedStyle(r),iv(e.ctrlpts)};Nr.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var _o={};_o.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(a,i),f=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,f[0],f[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};_o.findEndpoints=function(r){var e=this,t,n=r.source()[0],a=r.target()[0],i=n.position(),o=a.position(),s=r.pstyle("target-arrow-shape").value,l=r.pstyle("source-arrow-shape").value,u=r.pstyle("target-distance-from-node").pfValue,f=r.pstyle("source-distance-from-node").pfValue,c=n._private.rscratch,p=a._private.rscratch,g=r.pstyle("curve-style").value,d=r._private.rscratch,b=d.edgeType,x=g==="taxi",w=b==="self"||b==="compound",C=b==="bezier"||b==="multibezier"||w,m=b!=="bezier",S=b==="straight"||b==="segments",P=b==="segments",D=C||m||S,v=w||x,E=r.pstyle("source-endpoint"),k=v?"outside-to-node":E.value,N=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,O=r.pstyle("target-endpoint"),I=v?"outside-to-node":O.value,H=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;d.srcManEndpt=E,d.tgtManEndpt=O;var G,Y,j,q;if(C){var X=[d.ctrlpts[0],d.ctrlpts[1]],K=m?[d.ctrlpts[d.ctrlpts.length-2],d.ctrlpts[d.ctrlpts.length-1]]:X;G=K,Y=X}else if(S){var T=P?d.segpts.slice(0,2):[o.x,o.y],M=P?d.segpts.slice(d.segpts.length-2):[i.x,i.y];G=M,Y=T}if(I==="inside-to-node")t=[o.x,o.y];else if(O.units)t=this.manualEndptToPx(a,O);else if(I==="outside-to-line")t=d.tgtIntn;else if(I==="outside-to-node"||I==="outside-to-node-or-label"?j=G:(I==="outside-to-line"||I==="outside-to-line-or-label")&&(j=[i.x,i.y]),t=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),j[0],j[1],0,H,p),I==="outside-to-node-or-label"||I==="outside-to-line-or-label"){var L=a._private.rscratch,F=L.labelWidth,W=L.labelHeight,Z=L.labelX,ee=L.labelY,Q=F/2,oe=W/2,fe=a.pstyle("text-valign").value;fe==="top"?ee-=oe:fe==="bottom"&&(ee+=oe);var ce=a.pstyle("text-halign").value;ce==="left"?Z-=Q:ce==="right"&&(Z+=Q);var Se=lo(j[0],j[1],[Z-Q,ee-oe,Z+Q,ee-oe,Z+Q,ee+oe,Z-Q,ee+oe],o.x,o.y);if(Se.length>0){var De=i,Le=Ta(De,oi(t)),ke=Ta(De,oi(Se)),me=Le;if(ke<Le&&(t=Se,me=ke),Se.length>2){var _e=Ta(De,{x:Se[2],y:Se[3]});_e<me&&(t=[Se[2],Se[3]])}}}var we=Vo(t,G,e.arrowShapes[s].spacing(r)+u),xe=Vo(t,G,e.arrowShapes[s].gap(r)+u);if(d.endX=xe[0],d.endY=xe[1],d.arrowEndX=we[0],d.arrowEndY=we[1],k==="inside-to-node")t=[i.x,i.y];else if(E.units)t=this.manualEndptToPx(n,E);else if(k==="outside-to-line")t=d.srcIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?q=Y:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(q=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),q[0],q[1],0,N,c),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var Ne=n._private.rscratch,qe=Ne.labelWidth,at=Ne.labelHeight,We=Ne.labelX,Re=Ne.labelY,ge=qe/2,z=at/2,V=n.pstyle("text-valign").value;V==="top"?Re-=z:V==="bottom"&&(Re+=z);var ne=n.pstyle("text-halign").value;ne==="left"?We-=ge:ne==="right"&&(We+=ge);var te=lo(q[0],q[1],[We-ge,Re-z,We+ge,Re-z,We+ge,Re+z,We-ge,Re+z],i.x,i.y);if(te.length>0){var ie=o,ve=Ta(ie,oi(t)),ue=Ta(ie,oi(te)),Ce=ve;if(ue<ve&&(t=[te[0],te[1]],Ce=ue),te.length>2){var Fe=Ta(ie,{x:te[2],y:te[3]});Fe<Ce&&(t=[te[2],te[3]])}}}var ze=Vo(t,Y,e.arrowShapes[l].spacing(r)+f),Oe=Vo(t,Y,e.arrowShapes[l].gap(r)+f);d.startX=Oe[0],d.startY=Oe[1],d.arrowStartX=ze[0],d.arrowStartY=ze[1],D&&(!Be(d.startX)||!Be(d.startY)||!Be(d.endX)||!Be(d.endY)?d.badLine=!0:d.badLine=!1)};_o.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};_o.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Cf={};function Kw(r,e,t){for(var n=function(u,f,c,p){return yr(u,f,c,p)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}Cf.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)Kw(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};Cf.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Pn={};Pn.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!sa(e)){var t,n,a=r._private,i=r.width(),o=r.height(),s=r.padding(),l=r.position(),u=r.pstyle("text-halign").strValue,f=r.pstyle("text-valign").strValue,c=a.rscratch,p=a.rstyle;switch(u){case"left":t=l.x-i/2-s;break;case"right":t=l.x+i/2+s;break;default:t=l.x}switch(f){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}c.labelX=t,c.labelY=n,p.labelX=t,p.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var ov=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},sv=function(e,t){var n=t.x-e.x,a=t.y-e.y;return ov(n,a)},jw=function(e,t,n,a){var i=uo(0,a-.001,1),o=uo(0,a+.001,1),s=li(e,t,n,i),l=li(e,t,n,o);return sv(s,l)};Pn.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(!!(i.mid||i.source||i.target)){e={x:n.midX,y:n.midY};var o=function(c,p,g){na(t.rscratch,c,p,g),na(t.rstyle,c,p,g)};o("labelX",null,e.x),o("labelY",null,e.y);var s=ov(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function f(){if(f.cache)return f.cache;for(var c=[],p=0;p+5<n.allpts.length;p+=4){var g={x:n.allpts[p],y:n.allpts[p+1]},d={x:n.allpts[p+2],y:n.allpts[p+3]},b={x:n.allpts[p+4],y:n.allpts[p+5]};c.push({p0:g,p1:d,p2:b,startDist:0,length:0,segments:[]})}var x=t.rstyle.bezierPts,w=a.bezierProjPcts.length;function C(v,E,k,N,O){var I=Na(E,k),H=v.segments[v.segments.length-1],G={p0:E,p1:k,t0:N,t1:O,startDist:H?H.startDist+H.length:0,length:I};v.segments.push(G),v.length+=I}for(var m=0;m<c.length;m++){var S=c[m],P=c[m-1];P&&(S.startDist=P.startDist+P.length),C(S,S.p0,x[m*w],0,a.bezierProjPcts[0]);for(var D=0;D<w-1;D++)C(S,x[m*w+D],x[m*w+D+1],a.bezierProjPcts[D],a.bezierProjPcts[D+1]);C(S,x[m*w+w-1],S.p2,a.bezierProjPcts[w-1],1)}return f.cache=c},u=function(c){var p,g=c==="source";if(!!i[c]){var d=r.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var b=l(),x,w=0,C=0,m=0;m<b.length;m++){for(var S=b[g?m:b.length-1-m],P=0;P<S.segments.length;P++){var D=S.segments[g?P:S.segments.length-1-P],v=m===b.length-1&&P===S.segments.length-1;if(w=C,C+=D.length,C>=d||v){x={cp:S,segment:D};break}}if(x)break}var E=x.cp,k=x.segment,N=(d-w)/k.length,O=k.t1-k.t0,I=g?k.t0+O*N:k.t1-O*N;I=uo(0,I,1),e=li(E.p0,E.p1,E.p2,I),p=jw(E.p0,E.p1,E.p2,I);break}case"straight":case"segments":case"haystack":{for(var H=0,G,Y,j,q,X=n.allpts.length,K=0;K+3<X&&(g?(j={x:n.allpts[K],y:n.allpts[K+1]},q={x:n.allpts[K+2],y:n.allpts[K+3]}):(j={x:n.allpts[X-2-K],y:n.allpts[X-1-K]},q={x:n.allpts[X-4-K],y:n.allpts[X-3-K]}),G=Na(j,q),Y=H,H+=G,!(H>=d));K+=2);var T=d-Y,M=T/G;M=uo(0,M,1),e=Jy(j,q,M),p=sv(j,q);break}}o("labelX",c,e.x),o("labelY",c,e.y),o("labelAutoAngle",c,p)}};u("source"),u("target"),this.applyLabelDimensions(r)}};Pn.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Pn.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=this.calculateLabelDimensions(r,n),i=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,s=un(t.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=a.height/l,f=u*i,c=a.width,p=a.height+(l-1)*(i-1)*u;na(t.rstyle,"labelWidth",e,c),na(t.rscratch,"labelWidth",e,c),na(t.rstyle,"labelHeight",e,p),na(t.rscratch,"labelHeight",e,p),na(t.rscratch,"labelLineHeight",e,f)};Pn.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(T,M){return M?(na(t.rscratch,T,e,M),M):un(t.rscratch,T,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="\u200B",f=a.split(`
`),c=r.pstyle("text-max-width").pfValue,p=r.pstyle("text-overflow-wrap").value,g=p==="anywhere",d=[],b=/[\s\u200b]+/,x=g?"":" ",w=0;w<f.length;w++){var C=f[w],m=this.calculateLabelDimensions(r,C),S=m.width;if(g){var P=C.split("").join(u);C=P}if(S>c){for(var D=C.split(b),v="",E=0;E<D.length;E++){var k=D[E],N=v.length===0?k:v+x+k,O=this.calculateLabelDimensions(r,N),I=O.width;I<=c?v+=k+x:(v&&d.push(v),v=k+x)}v.match(/^[\s\u200b]+$/)||d.push(v)}else d.push(C)}o("labelWrapCachedLines",d),a=o("labelWrapCachedText",d.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var H=r.pstyle("text-max-width").pfValue,G="",Y="\u2026",j=!1;if(this.calculateLabelDimensions(r,a).width<H)return a;for(var q=0;q<a.length;q++){var X=this.calculateLabelDimensions(r,G+a[q]+Y).width;if(X>H)break;G+=a[q],q===a.length-1&&(j=!0)}return j||(G+=Y),G}return a};Pn.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Pn.calculateLabelDimensions=function(r,e){var t=this,n=La(e,r._private.labelDimsKey),a=t.labelDimCache||(t.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=r.pstyle("font-style").strValue,l=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,p=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=document.createElement("canvas"),p=this.labelCalcCanvasContext=c.getContext("2d");var g=c.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}p.font="".concat(s," ").concat(f," ").concat(l,"px ").concat(u);for(var d=0,b=0,x=e.split(`
`),w=0;w<x.length;w++){var C=x[w],m=p.measureText(C),S=Math.ceil(m.width),P=l;d=Math.max(S,d),b+=P}return d+=o,b+=o,a[n]={width:d,height:b}};Pn.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Pn.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var uv={},oh=28,sh=!1;uv.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<oh||r.height()<oh))return sh||(At("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),sh=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var qs={};qs.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],f=u._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],f=u._private.rstyle;u.isNode()&&!f.cleanConnected&&(n(u.connectedEdges()),f.cleanConnected=!0)}if(s)for(var c=0;c<s.length;c++){var p=s[c];p(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};qs.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};qs.recalculateRenderedStyle=function(r,e){var t=function(S){return S._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],s=o._private,l=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var f=a[u],c=f._private,p=c.rstyle,g=f.position();this.recalculateNodeLabelProjection(f),p.nodeX=g.x,p.nodeY=g.y,p.nodeW=f.pstyle("width").pfValue,p.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var d=0;d<n.length;d++){var b=n[d],x=b._private,w=x.rstyle,C=x.rscratch;w.srcX=C.arrowStartX,w.srcY=C.arrowStartY,w.tgtX=C.arrowEndX,w.tgtY=C.arrowEndY,w.midX=C.midX,w.midY=C.midY,w.labelAngle=C.labelAngle,w.sourceLabelAngle=C.sourceLabelAngle,w.targetLabelAngle=C.targetLabelAngle}}};var Ws={};Ws.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(!!r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};Ws.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};Ws.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(qd),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var lv={};[Ga,xs,Nr,_o,Cf,Pn,uv,qs,Ws].forEach(function(r){tt(lv,r)});var fv={};fv.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",l=r.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var Pi={};Pi.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(r);return i.on.apply(i,a)};Pi.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||bp(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(l,u,f){var c=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(c[2]={capture:f!=null?f:!1,passive:!1,once:!1}),e.bindings.push({target:r,args:c}),(r.addEventListener||r.on).apply(r,c),this};return{on:o,addEventListener:o,addListener:o,bind:o}};Pi.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};Pi.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};Pi.load=function(){var r=this,e=r.cy.window(),t=function(z){return z.selected()},n=function(z,V,ne,te){z==null&&(z=r.cy);for(var ie=0;ie<V.length;ie++){var ve=V[ie];z.emit({originalEvent:ne,type:ve,position:te})}},a=function(z){return z.shiftKey||z.metaKey||z.ctrlKey},i=function(z,V){var ne=!0;if(r.cy.hasCompoundNodes()&&z&&z.pannable())for(var te=0;V&&te<V.length;te++){var z=V[te];if(z.isNode()&&z.isParent()&&!z.pannable()){ne=!1;break}}else ne=!0;return ne},o=function(z){z[0]._private.grabbed=!0},s=function(z){z[0]._private.grabbed=!1},l=function(z){z[0]._private.rscratch.inDragLayer=!0},u=function(z){z[0]._private.rscratch.inDragLayer=!1},f=function(z){z[0]._private.rscratch.isGrabTarget=!0},c=function(z){z[0]._private.rscratch.isGrabTarget=!1},p=function(z,V){var ne=V.addToList,te=ne.has(z);!te&&z.grabbable()&&!z.locked()&&(ne.merge(z),o(z))},g=function(z,V){if(!!z.cy().hasCompoundNodes()&&!(V.inDragLayer==null&&V.addToList==null)){var ne=z.descendants();V.inDragLayer&&(ne.forEach(l),ne.connectedEdges().forEach(l)),V.addToList&&p(ne,V)}},d=function(z,V){V=V||{};var ne=z.cy().hasCompoundNodes();V.inDragLayer&&(z.forEach(l),z.neighborhood().stdFilter(function(te){return!ne||te.isEdge()}).forEach(l)),V.addToList&&z.forEach(function(te){p(te,V)}),g(z,V),w(z,{inDragLayer:V.inDragLayer}),r.updateCachedGrabbedEles()},b=d,x=function(z){!z||(r.getCachedZSortedEles().forEach(function(V){s(V),u(V),c(V)}),r.updateCachedGrabbedEles())},w=function(z,V){if(!(V.inDragLayer==null&&V.addToList==null)&&!!z.cy().hasCompoundNodes()){var ne=z.ancestors().orphans();if(!ne.same(z)){var te=ne.descendants().spawnSelf().merge(ne).unmerge(z).unmerge(z.descendants()),ie=te.connectedEdges();V.inDragLayer&&(ie.forEach(l),te.forEach(l)),V.addToList&&te.forEach(function(ve){p(ve,V)})}}},C=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},m=typeof MutationObserver!="undefined",S=typeof ResizeObserver!="undefined";m?(r.removeObserver=new MutationObserver(function(ge){for(var z=0;z<ge.length;z++){var V=ge[z],ne=V.removedNodes;if(ne)for(var te=0;te<ne.length;te++){var ie=ne[te];if(ie===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(ge){r.destroy()});var P=Ms(function(){r.cy.resize()},100);m&&(r.styleObserver=new MutationObserver(P),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",P),S&&(r.resizeObserver=new ResizeObserver(P),r.resizeObserver.observe(r.container));var D=function(z,V){for(;z!=null;)V(z),z=z.parentNode},v=function(){r.invalidateContainerClientCoordsCache()};D(r.container,function(ge){r.registerBinding(ge,"transitionend",v),r.registerBinding(ge,"animationend",v),r.registerBinding(ge,"scroll",v)}),r.registerBinding(r.container,"contextmenu",function(ge){ge.preventDefault()});var E=function(){return r.selection[4]!==0},k=function(z){for(var V=r.findContainerClientCoords(),ne=V[0],te=V[1],ie=V[2],ve=V[3],ue=z.touches?z.touches:[z],Ce=!1,Fe=0;Fe<ue.length;Fe++){var ze=ue[Fe];if(ne<=ze.clientX&&ze.clientX<=ne+ie&&te<=ze.clientY&&ze.clientY<=te+ve){Ce=!0;break}}if(!Ce)return!1;for(var Oe=r.container,Je=z.target,Ge=Je.parentNode,$e=!1;Ge;){if(Ge===Oe){$e=!0;break}Ge=Ge.parentNode}return!!$e};r.registerBinding(r.container,"mousedown",function(z){if(!!k(z)){z.preventDefault(),C(),r.hoverData.capture=!0,r.hoverData.which=z.which;var V=r.cy,ne=[z.clientX,z.clientY],te=r.projectIntoViewport(ne[0],ne[1]),ie=r.selection,ve=r.findNearestElements(te[0],te[1],!0,!1),ue=ve[0],Ce=r.dragData.possibleDragElements;r.hoverData.mdownPos=te,r.hoverData.mdownGPos=ne;var Fe=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var lt=r.hoverData.down;lt?lt.emit({originalEvent:z,type:"taphold",position:{x:te[0],y:te[1]}}):V.emit({originalEvent:z,type:"taphold",position:{x:te[0],y:te[1]}})}},r.tapholdDuration)};if(z.which==3){r.hoverData.cxtStarted=!0;var ze={originalEvent:z,type:"cxttapstart",position:{x:te[0],y:te[1]}};ue?(ue.activate(),ue.emit(ze),r.hoverData.down=ue):V.emit(ze),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(z.which==1){ue&&ue.activate();{if(ue!=null&&r.nodeIsGrabbable(ue)){var Oe=function(lt){return{originalEvent:z,type:lt,position:{x:te[0],y:te[1]}}},Je=function(lt){lt.emit(Oe("grab"))};if(f(ue),!ue.selected())Ce=r.dragData.possibleDragElements=V.collection(),b(ue,{addToList:Ce}),ue.emit(Oe("grabon")).emit(Oe("grab"));else{Ce=r.dragData.possibleDragElements=V.collection();var Ge=V.$(function($e){return $e.isNode()&&$e.selected()&&r.nodeIsGrabbable($e)});d(Ge,{addToList:Ce}),ue.emit(Oe("grabon")),Ge.forEach(Je)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=ue,r.hoverData.downs=ve,r.hoverData.downTime=new Date().getTime()}n(ue,["mousedown","tapstart","vmousedown"],z,{x:te[0],y:te[1]}),ue==null?(ie[4]=1,r.data.bgActivePosistion={x:te[0],y:te[1]},r.redrawHint("select",!0),r.redraw()):ue.pannable()&&(ie[4]=1),Fe()}ie[0]=ie[2]=te[0],ie[1]=ie[3]=te[1]}},!1),r.registerBinding(e,"mousemove",function(z){var V=r.hoverData.capture;if(!(!V&&!k(z))){var ne=!1,te=r.cy,ie=te.zoom(),ve=[z.clientX,z.clientY],ue=r.projectIntoViewport(ve[0],ve[1]),Ce=r.hoverData.mdownPos,Fe=r.hoverData.mdownGPos,ze=r.selection,Oe=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Oe=r.findNearestElement(ue[0],ue[1],!0,!1));var Je=r.hoverData.last,Ge=r.hoverData.down,$e=[ue[0]-ze[2],ue[1]-ze[3]],lt=r.dragData.possibleDragElements,ht;if(Fe){var Ot=ve[0]-Fe[0],dt=Ot*Ot,Dt=ve[1]-Fe[1],Ft=Dt*Dt,vt=dt+Ft;r.hoverData.isOverThresholdDrag=ht=vt>=r.desktopTapThreshold2}var st=a(z);ht&&(r.hoverData.tapholdCancelled=!0);var jt=function(){var Ae=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Ae.length===0?(Ae.push($e[0]),Ae.push($e[1])):(Ae[0]+=$e[0],Ae[1]+=$e[1])};ne=!0,n(Oe,["mousemove","vmousemove","tapdrag"],z,{x:ue[0],y:ue[1]});var vr=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||te.emit({originalEvent:z,type:"boxstart",position:{x:ue[0],y:ue[1]}}),ze[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(ht){var ir={originalEvent:z,type:"cxtdrag",position:{x:ue[0],y:ue[1]}};Ge?Ge.emit(ir):te.emit(ir),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Oe!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:z,type:"cxtdragout",position:{x:ue[0],y:ue[1]}}),r.hoverData.cxtOver=Oe,Oe&&Oe.emit({originalEvent:z,type:"cxtdragover",position:{x:ue[0],y:ue[1]}}))}}else if(r.hoverData.dragging){if(ne=!0,te.panningEnabled()&&te.userPanningEnabled()){var mr;if(r.hoverData.justStartedPan){var qt=r.hoverData.mdownPos;mr={x:(ue[0]-qt[0])*ie,y:(ue[1]-qt[1])*ie},r.hoverData.justStartedPan=!1}else mr={x:$e[0]*ie,y:$e[1]*ie};te.panBy(mr),te.emit("dragpan"),r.hoverData.dragged=!0}ue=r.projectIntoViewport(z.clientX,z.clientY)}else if(ze[4]==1&&(Ge==null||Ge.pannable())){if(ht){if(!r.hoverData.dragging&&te.boxSelectionEnabled()&&(st||!te.panningEnabled()||!te.userPanningEnabled()))vr();else if(!r.hoverData.selecting&&te.panningEnabled()&&te.userPanningEnabled()){var Yt=i(Ge,r.hoverData.downs);Yt&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,ze[4]=0,r.data.bgActivePosistion=oi(Ce),r.redrawHint("select",!0),r.redraw())}Ge&&Ge.pannable()&&Ge.active()&&Ge.unactivate()}}else{if(Ge&&Ge.pannable()&&Ge.active()&&Ge.unactivate(),(!Ge||!Ge.grabbed())&&Oe!=Je&&(Je&&n(Je,["mouseout","tapdragout"],z,{x:ue[0],y:ue[1]}),Oe&&n(Oe,["mouseover","tapdragover"],z,{x:ue[0],y:ue[1]}),r.hoverData.last=Oe),Ge)if(ht){if(te.boxSelectionEnabled()&&st)Ge&&Ge.grabbed()&&(x(lt),Ge.emit("freeon"),lt.emit("free"),r.dragData.didDrag&&(Ge.emit("dragfreeon"),lt.emit("dragfree"))),vr();else if(Ge&&Ge.grabbed()&&r.nodeIsDraggable(Ge)){var Bt=!r.dragData.didDrag;Bt&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||d(lt,{inDragLayer:!0});var Pt={x:0,y:0};if(Be($e[0])&&Be($e[1])&&(Pt.x+=$e[0],Pt.y+=$e[1],Bt)){var Pe=r.hoverData.dragDelta;Pe&&Be(Pe[0])&&Be(Pe[1])&&(Pt.x+=Pe[0],Pt.y+=Pe[1])}r.hoverData.draggingEles=!0,lt.silentShift(Pt).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else jt();ne=!0}if(ze[2]=ue[0],ze[3]=ue[1],ne)return z.stopPropagation&&z.stopPropagation(),z.preventDefault&&z.preventDefault(),!1}},!1);var N,O,I;r.registerBinding(e,"mouseup",function(z){var V=r.hoverData.capture;if(!!V){r.hoverData.capture=!1;var ne=r.cy,te=r.projectIntoViewport(z.clientX,z.clientY),ie=r.selection,ve=r.findNearestElement(te[0],te[1],!0,!1),ue=r.dragData.possibleDragElements,Ce=r.hoverData.down,Fe=a(z);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Ce&&Ce.unactivate(),r.hoverData.which===3){var ze={originalEvent:z,type:"cxttapend",position:{x:te[0],y:te[1]}};if(Ce?Ce.emit(ze):ne.emit(ze),!r.hoverData.cxtDragged){var Oe={originalEvent:z,type:"cxttap",position:{x:te[0],y:te[1]}};Ce?Ce.emit(Oe):ne.emit(Oe)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(n(ve,["mouseup","tapend","vmouseup"],z,{x:te[0],y:te[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(n(Ce,["click","tap","vclick"],z,{x:te[0],y:te[1]}),O=!1,z.timeStamp-I<=ne.multiClickDebounceTime()?(N&&clearTimeout(N),O=!0,I=null,n(Ce,["dblclick","dbltap","vdblclick"],z,{x:te[0],y:te[1]})):(N=setTimeout(function(){O||n(Ce,["oneclick","onetap","voneclick"],z,{x:te[0],y:te[1]})},ne.multiClickDebounceTime()),I=z.timeStamp)),Ce==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(z)&&(ne.$(t).unselect(["tapunselect"]),ue.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=ue=ne.collection()),ve==Ce&&!r.dragData.didDrag&&!r.hoverData.selecting&&ve!=null&&ve._private.selectable&&(r.hoverData.dragging||(ne.selectionType()==="additive"||Fe?ve.selected()?ve.unselect(["tapunselect"]):ve.select(["tapselect"]):Fe||(ne.$(t).unmerge(ve).unselect(["tapunselect"]),ve.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var Je=ne.collection(r.getAllInBox(ie[0],ie[1],ie[2],ie[3]));r.redrawHint("select",!0),Je.length>0&&r.redrawHint("eles",!0),ne.emit({type:"boxend",originalEvent:z,position:{x:te[0],y:te[1]}});var Ge=function(ht){return ht.selectable()&&!ht.selected()};ne.selectionType()==="additive"||Fe||ne.$(t).unmerge(Je).unselect(),Je.emit("box").stdFilter(Ge).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ie[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var $e=Ce&&Ce.grabbed();x(ue),$e&&(Ce.emit("freeon"),ue.emit("free"),r.dragData.didDrag&&(Ce.emit("dragfreeon"),ue.emit("dragfree")))}}ie[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var H=function(z){if(!r.scrollingPage){var V=r.cy,ne=V.zoom(),te=V.pan(),ie=r.projectIntoViewport(z.clientX,z.clientY),ve=[ie[0]*ne+te.x,ie[1]*ne+te.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||E()){z.preventDefault();return}if(V.panningEnabled()&&V.userPanningEnabled()&&V.zoomingEnabled()&&V.userZoomingEnabled()){z.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var ue;z.deltaY!=null?ue=z.deltaY/-250:z.wheelDeltaY!=null?ue=z.wheelDeltaY/1e3:ue=z.wheelDelta/1e3,ue=ue*r.wheelSensitivity;var Ce=z.deltaMode===1;Ce&&(ue*=33);var Fe=V.zoom()*Math.pow(10,ue);z.type==="gesturechange"&&(Fe=r.gestureStartZoom*z.scale),V.zoom({level:Fe,renderedPosition:{x:ve[0],y:ve[1]}}),V.emit(z.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",H,!0),r.registerBinding(e,"scroll",function(z){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(z){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||z.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(ge){r.hasTouchStarted||H(ge)},!0),r.registerBinding(r.container,"mouseout",function(z){var V=r.projectIntoViewport(z.clientX,z.clientY);r.cy.emit({originalEvent:z,type:"mouseout",position:{x:V[0],y:V[1]}})},!1),r.registerBinding(r.container,"mouseover",function(z){var V=r.projectIntoViewport(z.clientX,z.clientY);r.cy.emit({originalEvent:z,type:"mouseover",position:{x:V[0],y:V[1]}})},!1);var G,Y,j,q,X,K,T,M,L,F,W,Z,ee,Q=function(z,V,ne,te){return Math.sqrt((ne-z)*(ne-z)+(te-V)*(te-V))},oe=function(z,V,ne,te){return(ne-z)*(ne-z)+(te-V)*(te-V)},fe;r.registerBinding(r.container,"touchstart",fe=function(z){if(r.hasTouchStarted=!0,!!k(z)){C(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var V=r.cy,ne=r.touchData.now,te=r.touchData.earlier;if(z.touches[0]){var ie=r.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);ne[0]=ie[0],ne[1]=ie[1]}if(z.touches[1]){var ie=r.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY);ne[2]=ie[0],ne[3]=ie[1]}if(z.touches[2]){var ie=r.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY);ne[4]=ie[0],ne[5]=ie[1]}if(z.touches[1]){r.touchData.singleTouchMoved=!0,x(r.dragData.touchDragEles);var ve=r.findContainerClientCoords();L=ve[0],F=ve[1],W=ve[2],Z=ve[3],G=z.touches[0].clientX-L,Y=z.touches[0].clientY-F,j=z.touches[1].clientX-L,q=z.touches[1].clientY-F,ee=0<=G&&G<=W&&0<=j&&j<=W&&0<=Y&&Y<=Z&&0<=q&&q<=Z;var ue=V.pan(),Ce=V.zoom();X=Q(G,Y,j,q),K=oe(G,Y,j,q),T=[(G+j)/2,(Y+q)/2],M=[(T[0]-ue.x)/Ce,(T[1]-ue.y)/Ce];var Fe=200,ze=Fe*Fe;if(K<ze&&!z.touches[2]){var Oe=r.findNearestElement(ne[0],ne[1],!0,!0),Je=r.findNearestElement(ne[2],ne[3],!0,!0);Oe&&Oe.isNode()?(Oe.activate().emit({originalEvent:z,type:"cxttapstart",position:{x:ne[0],y:ne[1]}}),r.touchData.start=Oe):Je&&Je.isNode()?(Je.activate().emit({originalEvent:z,type:"cxttapstart",position:{x:ne[0],y:ne[1]}}),r.touchData.start=Je):V.emit({originalEvent:z,type:"cxttapstart",position:{x:ne[0],y:ne[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(z.touches[2])V.boxSelectionEnabled()&&z.preventDefault();else if(!z.touches[1]){if(z.touches[0]){var Ge=r.findNearestElements(ne[0],ne[1],!0,!0),$e=Ge[0];if($e!=null&&($e.activate(),r.touchData.start=$e,r.touchData.starts=Ge,r.nodeIsGrabbable($e))){var lt=r.dragData.touchDragEles=V.collection(),ht=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),$e.selected()?(ht=V.$(function(vt){return vt.selected()&&r.nodeIsGrabbable(vt)}),d(ht,{addToList:lt})):b($e,{addToList:lt}),f($e);var Ot=function(st){return{originalEvent:z,type:st,position:{x:ne[0],y:ne[1]}}};$e.emit(Ot("grabon")),ht?ht.forEach(function(vt){vt.emit(Ot("grab"))}):$e.emit(Ot("grab"))}n($e,["touchstart","tapstart","vmousedown"],z,{x:ne[0],y:ne[1]}),$e==null&&(r.data.bgActivePosistion={x:ie[0],y:ie[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&n(r.touchData.start,["taphold"],z,{x:ne[0],y:ne[1]})},r.tapholdDuration)}}if(z.touches.length>=1){for(var dt=r.touchData.startPosition=[null,null,null,null,null,null],Dt=0;Dt<ne.length;Dt++)dt[Dt]=te[Dt]=ne[Dt];var Ft=z.touches[0];r.touchData.startGPosition=[Ft.clientX,Ft.clientY]}}},!1);var ce;r.registerBinding(window,"touchmove",ce=function(z){var V=r.touchData.capture;if(!(!V&&!k(z))){var ne=r.selection,te=r.cy,ie=r.touchData.now,ve=r.touchData.earlier,ue=te.zoom();if(z.touches[0]){var Ce=r.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);ie[0]=Ce[0],ie[1]=Ce[1]}if(z.touches[1]){var Ce=r.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY);ie[2]=Ce[0],ie[3]=Ce[1]}if(z.touches[2]){var Ce=r.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY);ie[4]=Ce[0],ie[5]=Ce[1]}var Fe=r.touchData.startGPosition,ze;if(V&&z.touches[0]&&Fe){for(var Oe=[],Je=0;Je<ie.length;Je++)Oe[Je]=ie[Je]-ve[Je];var Ge=z.touches[0].clientX-Fe[0],$e=Ge*Ge,lt=z.touches[0].clientY-Fe[1],ht=lt*lt,Ot=$e+ht;ze=Ot>=r.touchTapThreshold2}if(V&&r.touchData.cxt){z.preventDefault();var dt=z.touches[0].clientX-L,Dt=z.touches[0].clientY-F,Ft=z.touches[1].clientX-L,vt=z.touches[1].clientY-F,st=oe(dt,Dt,Ft,vt),jt=st/K,vr=150,ir=vr*vr,mr=1.5,qt=mr*mr;if(jt>=qt||st>=ir){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Yt={originalEvent:z,type:"cxttapend",position:{x:ie[0],y:ie[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(Yt),r.touchData.start=null):te.emit(Yt)}}if(V&&r.touchData.cxt){var Yt={originalEvent:z,type:"cxtdrag",position:{x:ie[0],y:ie[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Yt):te.emit(Yt),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Bt=r.findNearestElement(ie[0],ie[1],!0,!0);(!r.touchData.cxtOver||Bt!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:z,type:"cxtdragout",position:{x:ie[0],y:ie[1]}}),r.touchData.cxtOver=Bt,Bt&&Bt.emit({originalEvent:z,type:"cxtdragover",position:{x:ie[0],y:ie[1]}}))}else if(V&&z.touches[2]&&te.boxSelectionEnabled())z.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||te.emit({originalEvent:z,type:"boxstart",position:{x:ie[0],y:ie[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,ne[4]=1,!ne||ne.length===0||ne[0]===void 0?(ne[0]=(ie[0]+ie[2]+ie[4])/3,ne[1]=(ie[1]+ie[3]+ie[5])/3,ne[2]=(ie[0]+ie[2]+ie[4])/3+1,ne[3]=(ie[1]+ie[3]+ie[5])/3+1):(ne[2]=(ie[0]+ie[2]+ie[4])/3,ne[3]=(ie[1]+ie[3]+ie[5])/3),r.redrawHint("select",!0),r.redraw();else if(V&&z.touches[1]&&!r.touchData.didSelect&&te.zoomingEnabled()&&te.panningEnabled()&&te.userZoomingEnabled()&&te.userPanningEnabled()){z.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Pt=r.dragData.touchDragEles;if(Pt){r.redrawHint("drag",!0);for(var Pe=0;Pe<Pt.length;Pe++){var pe=Pt[Pe]._private;pe.grabbed=!1,pe.rscratch.inDragLayer=!1}}var Ae=r.touchData.start,dt=z.touches[0].clientX-L,Dt=z.touches[0].clientY-F,Ft=z.touches[1].clientX-L,vt=z.touches[1].clientY-F,Ke=Q(dt,Dt,Ft,vt),rt=Ke/X;if(ee){var Ze=dt-G,xt=Dt-Y,Xt=Ft-j,Wt=vt-q,$t=(Ze+Xt)/2,gt=(xt+Wt)/2,Qt=te.zoom(),zr=Qt*rt,br=te.pan(),Gr=M[0]*Qt+br.x,Vr=M[1]*Qt+br.y,tn={x:-zr/Qt*(Gr-br.x-$t)+Gr,y:-zr/Qt*(Vr-br.y-gt)+Vr};if(Ae&&Ae.active()){var Pt=r.dragData.touchDragEles;x(Pt),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Ae.unactivate().emit("freeon"),Pt.emit("free"),r.dragData.didDrag&&(Ae.emit("dragfreeon"),Pt.emit("dragfree"))}te.viewport({zoom:zr,pan:tn,cancelOnFailedZoom:!0}),te.emit("pinchzoom"),X=Ke,G=dt,Y=Dt,j=Ft,q=vt,r.pinching=!0}if(z.touches[0]){var Ce=r.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);ie[0]=Ce[0],ie[1]=Ce[1]}if(z.touches[1]){var Ce=r.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY);ie[2]=Ce[0],ie[3]=Ce[1]}if(z.touches[2]){var Ce=r.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY);ie[4]=Ce[0],ie[5]=Ce[1]}}else if(z.touches[0]&&!r.touchData.didSelect){var sr=r.touchData.start,dn=r.touchData.last,Bt;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Bt=r.findNearestElement(ie[0],ie[1],!0,!0)),V&&sr!=null&&z.preventDefault(),V&&sr!=null&&r.nodeIsDraggable(sr))if(ze){var Pt=r.dragData.touchDragEles,Ir=!r.dragData.didDrag;Ir&&d(Pt,{inDragLayer:!0}),r.dragData.didDrag=!0;var Tr={x:0,y:0};if(Be(Oe[0])&&Be(Oe[1])&&(Tr.x+=Oe[0],Tr.y+=Oe[1],Ir)){r.redrawHint("eles",!0);var Lt=r.touchData.dragDelta;Lt&&Be(Lt[0])&&Be(Lt[1])&&(Tr.x+=Lt[0],Tr.y+=Lt[1])}r.hoverData.draggingEles=!0,Pt.silentShift(Tr).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==ve[0]&&r.touchData.startPosition[1]==ve[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Lt=r.touchData.dragDelta=r.touchData.dragDelta||[];Lt.length===0?(Lt.push(Oe[0]),Lt.push(Oe[1])):(Lt[0]+=Oe[0],Lt[1]+=Oe[1])}if(n(sr||Bt,["touchmove","tapdrag","vmousemove"],z,{x:ie[0],y:ie[1]}),(!sr||!sr.grabbed())&&Bt!=dn&&(dn&&dn.emit({originalEvent:z,type:"tapdragout",position:{x:ie[0],y:ie[1]}}),Bt&&Bt.emit({originalEvent:z,type:"tapdragover",position:{x:ie[0],y:ie[1]}})),r.touchData.last=Bt,V)for(var Pe=0;Pe<ie.length;Pe++)ie[Pe]&&r.touchData.startPosition[Pe]&&ze&&(r.touchData.singleTouchMoved=!0);if(V&&(sr==null||sr.pannable())&&te.panningEnabled()&&te.userPanningEnabled()){var Yr=i(sr,r.touchData.starts);Yr&&(z.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=oi(r.touchData.startPosition)),r.swipePanning?(te.panBy({x:Oe[0]*ue,y:Oe[1]*ue}),te.emit("dragpan")):ze&&(r.swipePanning=!0,te.panBy({x:Ge*ue,y:lt*ue}),te.emit("dragpan"),sr&&(sr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Ce=r.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);ie[0]=Ce[0],ie[1]=Ce[1]}}for(var Je=0;Je<ie.length;Je++)ve[Je]=ie[Je];V&&z.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var Se;r.registerBinding(e,"touchcancel",Se=function(z){var V=r.touchData.start;r.touchData.capture=!1,V&&V.unactivate()});var De,Le,ke,me;if(r.registerBinding(e,"touchend",De=function(z){var V=r.touchData.start,ne=r.touchData.capture;if(ne)z.touches.length===0&&(r.touchData.capture=!1),z.preventDefault();else return;var te=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ie=r.cy,ve=ie.zoom(),ue=r.touchData.now,Ce=r.touchData.earlier;if(z.touches[0]){var Fe=r.projectIntoViewport(z.touches[0].clientX,z.touches[0].clientY);ue[0]=Fe[0],ue[1]=Fe[1]}if(z.touches[1]){var Fe=r.projectIntoViewport(z.touches[1].clientX,z.touches[1].clientY);ue[2]=Fe[0],ue[3]=Fe[1]}if(z.touches[2]){var Fe=r.projectIntoViewport(z.touches[2].clientX,z.touches[2].clientY);ue[4]=Fe[0],ue[5]=Fe[1]}V&&V.unactivate();var ze;if(r.touchData.cxt){if(ze={originalEvent:z,type:"cxttapend",position:{x:ue[0],y:ue[1]}},V?V.emit(ze):ie.emit(ze),!r.touchData.cxtDragged){var Oe={originalEvent:z,type:"cxttap",position:{x:ue[0],y:ue[1]}};V?V.emit(Oe):ie.emit(Oe)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!z.touches[2]&&ie.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var Je=ie.collection(r.getAllInBox(te[0],te[1],te[2],te[3]));te[0]=void 0,te[1]=void 0,te[2]=void 0,te[3]=void 0,te[4]=0,r.redrawHint("select",!0),ie.emit({type:"boxend",originalEvent:z,position:{x:ue[0],y:ue[1]}});var Ge=function(ir){return ir.selectable()&&!ir.selected()};Je.emit("box").stdFilter(Ge).select().emit("boxselect"),Je.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(V!=null&&V.unactivate(),z.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!z.touches[1]){if(!z.touches[0]){if(!z.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var $e=r.dragData.touchDragEles;if(V!=null){var lt=V._private.grabbed;x($e),r.redrawHint("drag",!0),r.redrawHint("eles",!0),lt&&(V.emit("freeon"),$e.emit("free"),r.dragData.didDrag&&(V.emit("dragfreeon"),$e.emit("dragfree"))),n(V,["touchend","tapend","vmouseup","tapdragout"],z,{x:ue[0],y:ue[1]}),V.unactivate(),r.touchData.start=null}else{var ht=r.findNearestElement(ue[0],ue[1],!0,!0);n(ht,["touchend","tapend","vmouseup","tapdragout"],z,{x:ue[0],y:ue[1]})}var Ot=r.touchData.startPosition[0]-ue[0],dt=Ot*Ot,Dt=r.touchData.startPosition[1]-ue[1],Ft=Dt*Dt,vt=dt+Ft,st=vt*ve*ve;r.touchData.singleTouchMoved||(V||ie.$(":selected").unselect(["tapunselect"]),n(V,["tap","vclick"],z,{x:ue[0],y:ue[1]}),Le=!1,z.timeStamp-me<=ie.multiClickDebounceTime()?(ke&&clearTimeout(ke),Le=!0,me=null,n(V,["dbltap","vdblclick"],z,{x:ue[0],y:ue[1]})):(ke=setTimeout(function(){Le||n(V,["onetap","voneclick"],z,{x:ue[0],y:ue[1]})},ie.multiClickDebounceTime()),me=z.timeStamp)),V!=null&&!r.dragData.didDrag&&V._private.selectable&&st<r.touchTapThreshold2&&!r.pinching&&(ie.selectionType()==="single"?(ie.$(t).unmerge(V).unselect(["tapunselect"]),V.select(["tapselect"])):V.selected()?V.unselect(["tapunselect"]):V.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var jt=0;jt<ue.length;jt++)Ce[jt]=ue[jt];r.dragData.didDrag=!1,z.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),z.touches.length<2&&(z.touches.length===1&&(r.touchData.startGPosition=[z.touches[0].clientX,z.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent=="undefined"){var _e=[],we=function(z){return{clientX:z.clientX,clientY:z.clientY,force:1,identifier:z.pointerId,pageX:z.pageX,pageY:z.pageY,radiusX:z.width/2,radiusY:z.height/2,screenX:z.screenX,screenY:z.screenY,target:z.target}},xe=function(z){return{event:z,touch:we(z)}},Ne=function(z){_e.push(xe(z))},qe=function(z){for(var V=0;V<_e.length;V++){var ne=_e[V];if(ne.event.pointerId===z.pointerId){_e.splice(V,1);return}}},at=function(z){var V=_e.filter(function(ne){return ne.event.pointerId===z.pointerId})[0];V.event=z,V.touch=we(z)},We=function(z){z.touches=_e.map(function(V){return V.touch})},Re=function(z){return z.pointerType==="mouse"||z.pointerType===4};r.registerBinding(r.container,"pointerdown",function(ge){Re(ge)||(ge.preventDefault(),Ne(ge),We(ge),fe(ge))}),r.registerBinding(r.container,"pointerup",function(ge){Re(ge)||(qe(ge),We(ge),De(ge))}),r.registerBinding(r.container,"pointercancel",function(ge){Re(ge)||(qe(ge),We(ge),Se(ge))}),r.registerBinding(r.container,"pointermove",function(ge){Re(ge)||(ge.preventDefault(),at(ge),We(ge),ce(ge))})}};var Hn={};Hn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,s,l){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u,f){return lo(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u,f){return Gn(n,a,this.points,l,u,o,s,[0,-1],i)}}};Hn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s,l){return hm(i,o,e,t,n/2+s,a/2+s)},checkPoint:function(e,t,n,a,i,o,s,l){return Ma(e,t,a,i,o,s,n)}}};Hn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,o,s,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===a)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=a;var f=i/2,c=o/2;s=s==="auto"?dd(i,o):s;for(var p=new Array(e.length/2),g=0;g<e.length/2;g++)p[g]={x:n+f*e[g*2],y:a+c*e[g*2+1]};var d,b,x,w,C=p.length;for(b=p[C-1],d=0;d<C;d++)x=p[d%C],w=p[(d+1)%C],l[u][d]=Sf(b,x,w,s),b=x,x=w;return l[u]},draw:function(n,a,i,o,s,l,u){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,l,u,"drawCorners"))},intersectLine:function(n,a,i,o,s,l,u,f,c){return dm(s,l,this.points,n,a,i,o,u,this.getOrCreateCorners(n,a,i,o,f,c,"corners"))},checkPoint:function(n,a,i,o,s,l,u,f,c){return cm(n,a,this.points,l,u,o,s,this.getOrCreateCorners(l,u,o,s,f,c,"corners"))}}};Hn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Fr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,s,l){return cd(i,o,e,t,n,a,s,l)},checkPoint:function(e,t,n,a,i,o,s,l){var u=a/2,f=i/2;l=l==="auto"?Ia(a,i):l,l=Math.min(u,f,l);var c=l*2;return!!(Gn(e,t,this.points,o,s,a,i-c,[0,-1],n)||Gn(e,t,this.points,o,s,a-c,i,[0,-1],n)||Ma(e,t,c,c,o-u+l,s-f+l,n)||Ma(e,t,c,c,o+u-l,s-f+l,n)||Ma(e,t,c,c,o+u-l,s+f-l,n)||Ma(e,t,c,c,o-u+l,s+f-l,n))}}};Hn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:ff(),points:Fr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,o)},generateCutTrianglePts:function(e,t,n,a,i){var o=i==="auto"?this.cornerLength:i,s=t/2,l=e/2,u=n-l,f=n+l,c=a-s,p=a+s;return{topLeft:[u,c+o,u+o,c,u+o,c+o],topRight:[f-o,c,f,c+o,f-o,c+o],bottomRight:[f,p-o,f-o,p,f-o,p-o],bottomLeft:[u+o,p,u,p-o,u+o,p-o]}},intersectLine:function(e,t,n,a,i,o,s,l){var u=this.generateCutTrianglePts(n+2*s,a+2*s,e,t,l),f=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return lo(i,o,f,e,t)},checkPoint:function(e,t,n,a,i,o,s,l){var u=l==="auto"?this.cornerLength:l;if(Gn(e,t,this.points,o,s,a,i-2*u,[0,-1],n)||Gn(e,t,this.points,o,s,a-2*u,i,[0,-1],n))return!0;var f=this.generateCutTrianglePts(a,i,o,s);return Ur(e,t,f.topLeft)||Ur(e,t,f.topRight)||Ur(e,t,f.bottomRight)||Ur(e,t,f.bottomLeft)}}};Hn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Fr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s,l){var u=.15,f=.5,c=.85,p=this.generateBarrelBezierPts(n+2*s,a+2*s,e,t),g=function(x){var w=li({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},u),C=li({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},f),m=li({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},c);return[x[0],x[1],w.x,w.y,C.x,C.y,m.x,m.y,x[4],x[5]]},d=[].concat(g(p.topLeft),g(p.topRight),g(p.bottomRight),g(p.bottomLeft));return lo(i,o,d,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,s=n-o,l=n+o,u=a-i,f=a+i,c=Ml(e,t),p=c.heightOffset,g=c.widthOffset,d=c.ctrlPtOffsetPct*e,b={topLeft:[s,u+p,s+d,u,s+g,u],topRight:[l-g,u,l-d,u,l,u+p],bottomRight:[l,f-p,l-d,f,l-g,f],bottomLeft:[s+g,f,s+d,f,s,f-p]};return b.topLeft.isTop=!0,b.topRight.isTop=!0,b.bottomLeft.isBottom=!0,b.bottomRight.isBottom=!0,b},checkPoint:function(e,t,n,a,i,o,s,l){var u=Ml(a,i),f=u.heightOffset,c=u.widthOffset;if(Gn(e,t,this.points,o,s,a,i-2*f,[0,-1],n)||Gn(e,t,this.points,o,s,a-2*c,i,[0,-1],n))return!0;for(var p=this.generateBarrelBezierPts(a,i,o,s),g=function(E,k,N){var O=N[4],I=N[2],H=N[0],G=N[5],Y=N[1],j=Math.min(O,H),q=Math.max(O,H),X=Math.min(G,Y),K=Math.max(G,Y);if(j<=E&&E<=q&&X<=k&&k<=K){var T=vm(O,I,H),M=sm(T[0],T[1],T[2],E),L=M.filter(function(F){return 0<=F&&F<=1});if(L.length>0)return L[0]}return null},d=Object.keys(p),b=0;b<d.length;b++){var x=d[b],w=p[x],C=g(e,t,w);if(C!=null){var m=w[5],S=w[3],P=w[1],D=yr(m,S,P,C);if(w.isTop&&D<=t||w.isBottom&&t<=D)return!0}}return!1}}};Hn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Fr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,s,l){var u=e-(n/2+s),f=t-(a/2+s),c=f,p=e+(n/2+s),g=aa(i,o,e,t,u,f,p,c,!1);return g.length>0?g:cd(i,o,e,t,n,a,s,l)},checkPoint:function(e,t,n,a,i,o,s,l){l=l==="auto"?Ia(a,i):l;var u=2*l;if(Gn(e,t,this.points,o,s,a,i-u,[0,-1],n)||Gn(e,t,this.points,o,s,a-u,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n,p=[o-f,s-c,o-f,s,o+f,s,o+f,s-c];return!!(Ur(e,t,p)||Ma(e,t,u,u,o+a/2-l,s+i/2-l,n)||Ma(e,t,u,u,o-a/2+l,s+i/2-l,n))}}};Hn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Fr(3,0)),this.generateRoundPolygon("round-triangle",Fr(3,0)),this.generatePolygon("rectangle",Fr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Fr(5,0)),this.generateRoundPolygon("round-pentagon",Fr(5,0)),this.generatePolygon("hexagon",Fr(6,0)),this.generateRoundPolygon("round-hexagon",Fr(6,0)),this.generatePolygon("heptagon",Fr(7,0)),this.generateRoundPolygon("round-heptagon",Fr(7,0)),this.generatePolygon("octagon",Fr(8,0)),this.generateRoundPolygon("round-octagon",Fr(8,0));var n=new Array(20);{var a=Dl(5,0),i=Dl(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=hd(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}r.makePolygon=function(u){var f=u.join("$"),c="polygon-"+f,p;return(p=this[c])?p:e.generatePolygon(c,u)}};var Eo={};Eo.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};Eo.redraw=function(r){r=r||od();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};Eo.beforeRender=function(r,e){if(!this.destroyed){e==null&&er("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var uh=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};Eo.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){uh(r,!0,a);var i=zn();r.render(r.renderOptions);var o=r.lastDrawTime=zn();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-i;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else uh(r,!1,a);r.skipFrame=!1,ds(n)}};ds(t)}};var Yw=function(e){this.init(e)},cv=Yw,ki=cv.prototype;ki.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];ki.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=a.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!l){var u=a.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",i.insertBefore(u,i.children[0])}var f=n.getComputedStyle(t),c=f.getPropertyValue("position");c==="static"&&At("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Be(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};ki.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};ki.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};ki.isHeadless=function(){return!1};[xf,lv,fv,Pi,Hn,Eo].forEach(function(r){tt(ki,r)});var yl=1e3/60,hv={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Ms(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,f){var c=zn(),p=a.averageRedrawTime,g=a.lastRedrawTime,d=[],b=a.cy.extent(),x=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var w=zn(),C=w-c,m=w-f;if(g<yl){var S=yl-(u?p:0);if(m>=e.deqFastCost*S)break}else if(u){if(C>=e.deqCost*g||C>=e.deqAvgCost*p)break}else if(m>=e.deqNoDrawCost*yl)break;var P=e.deq(n,x,b);if(P.length>0)for(var D=0;D<P.length;D++)d.push(P[D]);else break}d.length>0&&(e.onDeqd(n,d),!u&&e.shouldRedraw(n,d,x,b)&&i())},s=e.priority||of;a.beforeRender(o,s(n))}}}},Xw=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vs;ef(this,r),this.idsByKey=new _n,this.keyForId=new _n,this.cachesByLvl=new _n,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return tf(r,[{key:"getIdsFor",value:function(t){t==null&&er("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new wi,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new _n,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),r}(),lh=25,Xo=50,fs=-4,Hl=3,Qw=7.99,Zw=8,Jw=1024,ex=1024,tx=1024,rx=.2,nx=.8,ax=10,ix=.15,ox=.1,sx=.9,ux=.9,lx=100,fx=1,si={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},cx=_r({getKey:null,doesEleInvalidateKey:vs,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:nd,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Ji=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=cx(t);tt(n,a),n.lookup=new Xw(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},hr=Ji.prototype;hr.reasons=si;hr.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};hr.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};hr.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new xo(function(t,n){return n.reqs-t.reqs});return e};hr.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};hr.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(uf(s*t))),n<fs)n=fs;else if(s>=Qw||n>Hl)return null;var u=Math.pow(2,n),f=e.h*u,c=e.w*u,p=o.eleTextBiggerThanMin(r,u);if(!this.isVisible(r,p))return null;var g=l.get(r,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var d;if(f<=lh?d=lh:f<=Xo?d=Xo:d=Math.ceil(f/Xo)*Xo,f>tx||c>ex)return null;var b=i.getTextureQueue(d),x=b[b.length-2],w=function(){return i.recycleTexture(d,c)||i.addTexture(d,c)};x||(x=b[b.length-1]),x||(x=w()),x.width-x.usedWidth<c&&(x=w());for(var C=function(j){return j&&j.scaledLabelShown===p},m=a&&a===si.dequeue,S=a&&a===si.highQuality,P=a&&a===si.downscale,D,v=n+1;v<=Hl;v++){var E=l.get(r,v);if(E){D=E;break}}var k=D&&D.level===n+1?D:null,N=function(){x.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,x.usedWidth,0,c,f)};if(x.context.setTransform(1,0,0,1,0,0),x.context.clearRect(x.usedWidth,0,c,d),C(k))N();else if(C(D))if(S){for(var O=D.level;O>n;O--)k=i.getElement(r,e,t,O,si.downscale);N()}else return i.queueElement(r,D.level-1),D;else{var I;if(!m&&!S&&!P)for(var H=n-1;H>=fs;H--){var G=l.get(r,H);if(G){I=G;break}}if(C(I))return i.queueElement(r,n),I;x.context.translate(x.usedWidth,0),x.context.scale(u,u),this.drawElement(x.context,r,e,p,!1),x.context.scale(1/u,1/u),x.context.translate(-x.usedWidth,0)}return g={x:x.usedWidth,texture:x,level:n,scale:u,width:c,height:f,scaledLabelShown:p},x.usedWidth+=Math.ceil(c+Zw),x.eleCaches.push(g),l.set(r,n,g),i.checkTextureFullness(x),g};hr.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};hr.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(!!a){for(var i=fs;i<=Hl;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var l=0;l<n.length;l++){var u=n[l],f=u.texture;f.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(r)}};hr.checkTextureUtility=function(r){r.invalidatedWidth>=rx*r.width&&this.retireTexture(r)};hr.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>nx&&r.fullnessChecks>=ax?ua(t,r):r.fullnessChecks++};hr.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;ua(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}sf(i);var l=e.getRetiredTextureQueue(t);l.push(r)};hr.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(Jw,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};hr.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,sf(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),ua(a,o),n.push(o),o}};hr.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(s),a[i]=s}};hr.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<fx&&t.size()>0;o++){var s=t.pop(),l=s.key,u=s.eles[0],f=i.hasCache(u,s.level);if(n[l]=null,f)continue;a.push(s);var c=e.getBoundingBox(u);e.getElement(u,c,r,s.level,si.dequeue)}return a};hr.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=af,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};hr.onDequeue=function(r){this.onDequeues.push(r)};hr.offDequeue=function(r){ua(this.onDequeues,r)};hr.setupDequeueing=hv.setupDequeueing({deqRedrawThreshold:lx,deqCost:ix,deqAvgCost:ox,deqNoDrawCost:sx,deqFastCost:ux,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(lf(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var hx=1,ro=-4,Ss=2,dx=3.99,vx=50,gx=50,px=.15,yx=.1,mx=.9,bx=.9,wx=1,fh=250,xx=4e3*4e3,Sx=!0,dv=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=zn()-2*fh,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=Ms(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},gx),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=fh?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};t.layersQueue=new xo(i),t.setupDequeueing()},Er=dv.prototype,ch=0,Cx=Math.pow(2,53)-1;Er.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:ch=++ch%Cx,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(t,t),s.translate(l,u),o};Er.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(uf(o*e)),t<ro)t=ro;else if(o>=dx||t>Ss)return null}n.validateLayersElesOrdering(t,r);var l=n.layersByLevel,u=Math.pow(2,t),f=l[t]=l[t]||[],c,p=n.levelIsComplete(t,r),g,d=function(){var N=function(Y){if(n.validateLayersElesOrdering(Y,r),n.levelIsComplete(Y,r))return g=l[Y],!0},O=function(Y){if(!g)for(var j=t+Y;ro<=j&&j<=Ss&&!N(j);j+=Y);};O(1),O(-1);for(var I=f.length-1;I>=0;I--){var H=f[I];H.invalid&&ua(f,H)}};if(!p)d();else return f;var b=function(){if(!c){c=qr();for(var N=0;N<r.length;N++)ld(c,r[N].boundingBox())}return c},x=function(N){N=N||{};var O=N.after;b();var I=c.w*u*(c.h*u);if(I>xx)return null;var H=n.makeLayer(c,t);if(O!=null){var G=f.indexOf(O)+1;f.splice(G,0,H)}else(N.insert===void 0||N.insert)&&f.unshift(H);return H};if(n.skipping&&!s)return null;for(var w=null,C=r.length/hx,m=!s,S=0;S<r.length;S++){var P=r[S],D=P._private.rscratch,v=D.imgLayerCaches=D.imgLayerCaches||{},E=v[t];if(E){w=E;continue}if((!w||w.eles.length>=C||!fd(w.bb,P.boundingBox()))&&(w=x({insert:!0,after:w}),!w))return null;g||m?n.queueLayer(w,P):n.drawEleInLayer(w,P,t,e),w.eles.push(P),v[t]=w}return g||(m?null:f)};Er.getEleLevelForLayerLevel=function(r,e){return r};Er.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,Sx),i.setImgSmoothing(o,!0))};Er.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};Er.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(!!t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};Er.updateElementsInLayers=function(r,e){for(var t=this,n=bo(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=ro;u<=Ss;u++){var f=l[u];!f||i&&t.getEleLevelForLayerLevel(f.level)!==i.level||e(f,o,i)}};Er.haveLayers=function(){for(var r=this,e=!1,t=ro;t<=Ss;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Er.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=zn(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};Er.invalidateLayer=function(r){if(this.lastInvalidationTime=zn(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];ua(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Er.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Er.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Er.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Er.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<wx&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Er.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Er.requestRedraw=Ms(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Er.setupDequeueing=hv.setupDequeueing({deqRedrawThreshold:vx,deqCost:px,deqAvgCost:yx,deqNoDrawCost:mx,deqFastCost:bx,deq:function(e,t){return e.dequeue(t)},onDeqd:of,shouldRedraw:nd,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var vv={},hh;function _x(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function Ex(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function dh(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function Tx(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];r.lineTo(l.x,l.y)}r.closePath&&r.closePath()}function Px(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}vv.arrowShapeImpl=function(r){return(hh||(hh={polygon:_x,"triangle-backcurve":Ex,"triangle-tee":dh,"circle-triangle":Tx,"triangle-cross":dh,circle:Px}))[r]};var kn={};kn.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)};kn.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};kn.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};kn.drawCachedElementPortion=function(r,e,t,n,a,i,o,s){var l=this,u=t.getBoundingBox(e);if(!(u.w===0||u.h===0)){var f=t.getElement(e,u,n,a,i);if(f!=null){var c=s(l,e);if(c===0)return;var p=o(l,e),g=u.x1,d=u.y1,b=u.w,x=u.h,w,C,m,S,P;if(p!==0){var D=t.getRotationPoint(e);m=D.x,S=D.y,r.translate(m,S),r.rotate(p),P=l.getImgSmoothing(r),P||l.setImgSmoothing(r,!0);var v=t.getRotationOffset(e);w=v.x,C=v.y}else w=g,C=d;var E;c!==1&&(E=r.globalAlpha,r.globalAlpha=E*c),r.drawImage(f.texture.canvas,f.x,0,f.width,f.height,w,C,b,x),c!==1&&(r.globalAlpha=E),p!==0&&(r.rotate(-p),r.translate(-m,-S),P||l.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var kx=function(){return 0},Ax=function(e,t){return e.getTextAngle(t,null)},Dx=function(e,t){return e.getTextAngle(t,"source")},Mx=function(e,t){return e.getTextAngle(t,"target")},Ox=function(e,t){return t.effectiveOpacity()},ml=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};kn.drawCachedElement=function(r,e,t,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,f=s.slbTxrCache,c=s.tlbTxrCache,p=e.boundingBox(),g=i===!0?l.reasons.highQuality:null;if(!(p.w===0||p.h===0||!e.visible())&&(!n||lf(p,n))){var d=e.isEdge(),b=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,l,t,a,g,kx,Ox),(!d||!b)&&o.drawCachedElementPortion(r,e,u,t,a,g,Ax,ml),d&&!b&&(o.drawCachedElementPortion(r,e,f,t,a,g,Dx,ml),o.drawCachedElementPortion(r,e,c,t,a,g,Mx,ml)),o.drawElementOverlay(r,e)}};kn.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};kn.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}};kn.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];!o.isNode()||a.drawCachedElement(r,o,t,n)}};kn.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||r.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(r,e,t,n)};var $n={};$n.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;t&&(l=t,r.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,p=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,d=e.pstyle("line-cap").value,b=u*f,x=u*f,w=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b;c==="straight-triangle"?(o.eleStrokeStyle(r,e,I),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=g,r.lineCap=d,o.eleStrokeStyle(r,e,I),o.drawEdgePath(e,r,s.allpts,p),r.lineCap="butt")},C=function(){!a||o.drawEdgeOverlay(r,e)},m=function(){!a||o.drawEdgeUnderlay(r,e)},S=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;o.drawArrowheads(r,e,I)},P=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var D=e.pstyle("ghost").value==="yes";if(D){var v=e.pstyle("ghost-offset-x").pfValue,E=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,N=b*k;r.translate(v,E),w(N),S(N),r.translate(-v,-E)}m(),w(),S(),C(),P(),t&&r.translate(l.x1,l.y1)}};var gv=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(!!n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,f=n.pstyle("".concat(e,"-color")).value;t.lineWidth=u,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,f[0],f[1],f[2],a),i.drawEdgePath(n,t,s.allpts,"solid")}}}};$n.drawEdgeOverlay=gv("overlay");$n.drawEdgeUnderlay=gv("underlay");$n.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=r.pstyle("line-dash-pattern").pfValue,f=r.pstyle("line-dash-offset").pfValue;if(l){var c=t.join("$"),p=a.pathCacheKey&&a.pathCacheKey===c;p?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<t.length;g+=4)e.quadraticCurveTo(t[g],t[g+1],t[g+2],t[g+3]);break;case"straight":case"haystack":for(var d=2;d+1<t.length;d+=2)e.lineTo(t[d],t[d+1]);break;case"segments":if(a.isRound){var b=hp(a.roundCorners),x;try{for(b.s();!(x=b.n()).done;){var w=x.value;av(e,w)}}catch(m){b.e(m)}finally{b.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var C=2;C+1<t.length;C+=2)e.lineTo(t[C],t[C+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};$n.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[a]-l[0],t[a+1]-l[1]),e.lineTo(t[a]+l[0],t[a+1]+l[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};$n.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};$n.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(t+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(t+"-arrow-fill").value,c=e.pstyle("width").pfValue,p=e.pstyle(t+"-arrow-width"),g=p.value==="match-line"?c:p.pfValue;p.units==="%"&&(g*=c);var d=e.pstyle("opacity").value;o===void 0&&(o=d);var b=r.globalCompositeOperation;(o!==1||f==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,u,c,l,g,n,a,i),r.globalCompositeOperation=b);var x=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,x[0],x[1],x[2],o),s.colorStrokeStyle(r,x[0],x[1],x[2],o),s.drawArrowShape(e,r,f,c,l,g,n,a,i)}}};$n.drawArrowShape=function(r,e,t,n,a,i,o,s,l){var u=this,f=this.usePaths()&&a!=="triangle-cross",c=!1,p,g=e,d={x:o,y:s},b=r.pstyle("arrow-scale").value,x=this.getArrowWidth(n,b),w=u.arrowShapes[a];if(f){var C=u.arrowPathCache=u.arrowPathCache||[],m=La(a),S=C[m];S!=null?(p=e=S,c=!0):(p=e=new Path2D,C[m]=p)}c||(e.beginPath&&e.beginPath(),f?w.draw(e,1,0,{x:0,y:0},1):w.draw(e,x,l,d,n),e.closePath&&e.closePath()),e=g,f&&(e.translate(o,s),e.rotate(l),e.scale(x,x)),(t==="filled"||t==="both")&&(f?e.fill(p):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(f?x:1),e.lineJoin="miter",f?e.stroke(p):e.stroke()),f&&(e.scale(1/x,1/x),e.rotate(-l),e.translate(-o,-s))};var _f={};_f.safeDrawImage=function(r,e,t,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{r.drawImage(e,t,n,a,i,o,s,l,u)}catch(f){At(f)}};_f.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),s=o.x,l=o.y,u=t.cy().style(),f=u.getIndexedStyle.bind(u),c=f(t,"background-fit","value",n),p=f(t,"background-repeat","value",n),g=t.width(),d=t.height(),b=t.padding()*2,x=g+(f(t,"background-width-relative-to","value",n)==="inner"?0:b),w=d+(f(t,"background-height-relative-to","value",n)==="inner"?0:b),C=t._private.rscratch,m=f(t,"background-clip","value",n),S=m==="node",P=f(t,"background-image-opacity","value",n)*a,D=f(t,"background-image-smoothing","value",n),v=t.pstyle("corner-radius").value;v!=="auto"&&(v=t.pstyle("corner-radius").pfValue);var E=e.width||e.cachedW,k=e.height||e.cachedH;(E==null||k==null)&&(document.body.appendChild(e),E=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var N=E,O=k;if(f(t,"background-width","value",n)!=="auto"&&(f(t,"background-width","units",n)==="%"?N=f(t,"background-width","pfValue",n)*x:N=f(t,"background-width","pfValue",n)),f(t,"background-height","value",n)!=="auto"&&(f(t,"background-height","units",n)==="%"?O=f(t,"background-height","pfValue",n)*w:O=f(t,"background-height","pfValue",n)),!(N===0||O===0)){if(c==="contain"){var I=Math.min(x/N,w/O);N*=I,O*=I}else if(c==="cover"){var I=Math.max(x/N,w/O);N*=I,O*=I}var H=s-x/2,G=f(t,"background-position-x","units",n),Y=f(t,"background-position-x","pfValue",n);G==="%"?H+=(x-N)*Y:H+=Y;var j=f(t,"background-offset-x","units",n),q=f(t,"background-offset-x","pfValue",n);j==="%"?H+=(x-N)*q:H+=q;var X=l-w/2,K=f(t,"background-position-y","units",n),T=f(t,"background-position-y","pfValue",n);K==="%"?X+=(w-O)*T:X+=T;var M=f(t,"background-offset-y","units",n),L=f(t,"background-offset-y","pfValue",n);M==="%"?X+=(w-O)*L:X+=L,C.pathCache&&(H-=s,X-=l,s=0,l=0);var F=r.globalAlpha;r.globalAlpha=P;var W=i.getImgSmoothing(r),Z=!1;if(D==="no"&&W?(i.setImgSmoothing(r,!1),Z=!0):D==="yes"&&!W&&(i.setImgSmoothing(r,!0),Z=!0),p==="no-repeat")S&&(r.save(),C.pathCache?r.clip(C.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,s,l,x,w,v,C),r.clip())),i.safeDrawImage(r,e,0,0,E,k,H,X,N,O),S&&r.restore();else{var ee=r.createPattern(e,p);r.fillStyle=ee,i.nodeShapes[i.getNodeShape(t)].draw(r,s,l,x,w,v,C),r.translate(H,X),r.fill(),r.translate(-H,-X)}r.globalAlpha=F,Z&&i.setImgSmoothing(r,W)}};var Va={};Va.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(uf(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};Va.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);r.textAlign=l,r.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),p=e.pstyle("target-label");if(u||(!f||!f.value)&&(!c||!c.value)&&(!p||!p.value))return;r.textAlign="center",r.textBaseline="bottom"}var g=!t,d;t&&(d=t,r.translate(-d.x1,-d.y1)),a==null?(o.drawText(r,e,null,g,i),e.isEdge()&&(o.drawText(r,e,"source",g,i),o.drawText(r,e,"target",g,i))):o.drawText(r,e,a,g,i),t&&r.translate(d.x1,d.y1)};Va.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Va.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,u[0],u[1],u[2],s),this.colorStrokeStyle(r,f[0],f[1],f[2],l)};function bl(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+i,t),r.lineTo(e+n-i,t),r.quadraticCurveTo(e+n,t,e+n,t+i),r.lineTo(e+n,t+a-i),r.quadraticCurveTo(e+n,t+a,e+n-i,t+a),r.lineTo(e+i,t+a),r.quadraticCurveTo(e,t+a,e,t+a-i),r.lineTo(e,t+i),r.quadraticCurveTo(e,t,e+i,t),r.closePath(),o?r.stroke():r.fill()}Va.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=un(a,"labelAngle",e);return o.strValue==="autorotate"?t=r.isEdge()?s:0:o.strValue==="none"?t=0:t=o.pfValue,t};Va.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var l=un(o,"labelX",t),u=un(o,"labelY",t),f,c,p=this.getLabelText(e,t);if(p!=null&&p!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(r,e,a);var g=t?t+"-":"",d=un(o,"labelWidth",t),b=un(o,"labelHeight",t),x=e.pstyle(g+"text-margin-x").pfValue,w=e.pstyle(g+"text-margin-y").pfValue,C=e.isEdge(),m=e.pstyle("text-halign").value,S=e.pstyle("text-valign").value;C&&(m="center",S="center"),l+=x,u+=w;var P;switch(n?P=this.getTextAngle(e,t):P=0,P!==0&&(f=l,c=u,r.translate(f,c),r.rotate(P),l=0,u=0),S){case"top":break;case"center":u+=b/2;break;case"bottom":u+=b;break}var D=e.pstyle("text-background-opacity").value,v=e.pstyle("text-border-opacity").value,E=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,N=e.pstyle("text-background-shape").strValue,O=N.indexOf("round")===0,I=2;if(D>0||E>0&&v>0){var H=l-k;switch(m){case"left":H-=d;break;case"center":H-=d/2;break}var G=u-b-k,Y=d+2*k,j=b+2*k;if(D>0){var q=r.fillStyle,X=e.pstyle("text-background-color").value;r.fillStyle="rgba("+X[0]+","+X[1]+","+X[2]+","+D*s+")",O?bl(r,H,G,Y,j,I):r.fillRect(H,G,Y,j),r.fillStyle=q}if(E>0&&v>0){var K=r.strokeStyle,T=r.lineWidth,M=e.pstyle("text-border-color").value,L=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+M[0]+","+M[1]+","+M[2]+","+v*s+")",r.lineWidth=E,r.setLineDash)switch(L){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=E/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(O?bl(r,H,G,Y,j,I,"stroke"):r.strokeRect(H,G,Y,j),L==="double"){var F=E/2;O?bl(r,H+F,G+F,Y-F*2,j-F*2,I,"stroke"):r.strokeRect(H+F,G+F,Y-F*2,j-F*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=T,r.strokeStyle=K}}var W=2*e.pstyle("text-outline-width").pfValue;if(W>0&&(r.lineWidth=W),e.pstyle("text-wrap").value==="wrap"){var Z=un(o,"labelWrapCachedLines",t),ee=un(o,"labelLineHeight",t),Q=d/2,oe=this.getLabelJustification(e);switch(oe==="auto"||(m==="left"?oe==="left"?l+=-d:oe==="center"&&(l+=-Q):m==="center"?oe==="left"?l+=-Q:oe==="right"&&(l+=Q):m==="right"&&(oe==="center"?l+=Q:oe==="right"&&(l+=d))),S){case"top":u-=(Z.length-1)*ee;break;case"center":case"bottom":u-=(Z.length-1)*ee;break}for(var fe=0;fe<Z.length;fe++)W>0&&r.strokeText(Z[fe],l,u),r.fillText(Z[fe],l,u),u+=ee}else W>0&&r.strokeText(p,l,u),r.fillText(p,l,u);P!==0&&(r.rotate(-P),r.translate(-f,-c))}}};var Ai={};Ai.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,f=u.rscratch,c=e.position();if(!(!Be(c.x)||!Be(c.y))&&!(i&&!e.visible())){var p=i?e.effectiveOpacity():1,g=o.usePaths(),d,b=!1,x=e.padding();s=e.width()+2*x,l=e.height()+2*x;var w;t&&(w=t,r.translate(-w.x1,-w.y1));for(var C=e.pstyle("background-image"),m=C.value,S=new Array(m.length),P=new Array(m.length),D=0,v=0;v<m.length;v++){var E=m[v],k=S[v]=E!=null&&E!=="none";if(k){var N=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",v);D++,P[v]=o.getCachedImage(E,N,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var O=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,H=e.pstyle("background-opacity").value*p,G=e.pstyle("border-color").value,Y=e.pstyle("border-style").value,j=e.pstyle("border-join").value,q=e.pstyle("border-cap").value,X=e.pstyle("border-position").value,K=e.pstyle("border-dash-pattern").pfValue,T=e.pstyle("border-dash-offset").pfValue,M=e.pstyle("border-opacity").value*p,L=e.pstyle("outline-width").pfValue,F=e.pstyle("outline-color").value,W=e.pstyle("outline-style").value,Z=e.pstyle("outline-opacity").value*p,ee=e.pstyle("outline-offset").value,Q=e.pstyle("corner-radius").value;Q!=="auto"&&(Q=e.pstyle("corner-radius").pfValue);var oe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:H;o.eleFillStyle(r,e,ve)},fe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:M;o.colorStrokeStyle(r,G[0],G[1],G[2],ve)},ce=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z;o.colorStrokeStyle(r,F[0],F[1],F[2],ve)},Se=function(ve,ue,Ce,Fe){var ze=o.nodePathCache=o.nodePathCache||[],Oe=rd(Ce==="polygon"?Ce+","+Fe.join(","):Ce,""+ue,""+ve,""+Q),Je=ze[Oe],Ge,$e=!1;return Je!=null?(Ge=Je,$e=!0,f.pathCache=Ge):(Ge=new Path2D,ze[Oe]=f.pathCache=Ge),{path:Ge,cacheHit:$e}},De=e.pstyle("shape").strValue,Le=e.pstyle("shape-polygon-points").pfValue;if(g){r.translate(c.x,c.y);var ke=Se(s,l,De,Le);d=ke.path,b=ke.cacheHit}var me=function(){if(!b){var ve=c;g&&(ve={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(d||r,ve.x,ve.y,s,l,Q,f)}g?r.fill(d):r.fill()},_e=function(){for(var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Ce=u.backgrounding,Fe=0,ze=0;ze<P.length;ze++){var Oe=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ze);if(ue&&Oe==="over"||!ue&&Oe==="inside"){Fe++;continue}S[ze]&&P[ze].complete&&!P[ze].error&&(Fe++,o.drawInscribedImage(r,P[ze],e,ze,ve))}u.backgrounding=Fe!==D,Ce!==u.backgrounding&&e.updateStyle(!1)},we=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasPie(e)&&(o.drawPie(r,e,ue),ve&&(g||o.nodeShapes[o.getNodeShape(e)].draw(r,c.x,c.y,s,l,Q,f)))},xe=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,ue=(O>0?O:-O)*ve,Ce=O>0?0:255;O!==0&&(o.colorFillStyle(r,Ce,Ce,Ce,ue),g?r.fill(d):r.fill())},Ne=function(){if(I>0){if(r.lineWidth=I,r.lineCap=q,r.lineJoin=j,r.setLineDash)switch(Y){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(K),r.lineDashOffset=T;break;case"solid":case"double":r.setLineDash([]);break}if(X!=="center"){if(r.save(),r.lineWidth*=2,X==="inside")g?r.clip(d):r.clip();else{var ve=new Path2D;ve.rect(-s/2-I,-l/2-I,s+2*I,l+2*I),ve.addPath(d),r.clip(ve,"evenodd")}g?r.stroke(d):r.stroke(),r.restore()}else g?r.stroke(d):r.stroke();if(Y==="double"){r.lineWidth=I/3;var ue=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(d):r.stroke(),r.globalCompositeOperation=ue}r.setLineDash&&r.setLineDash([])}},qe=function(){if(L>0){if(r.lineWidth=L,r.lineCap="butt",r.setLineDash)switch(W){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ve=c;g&&(ve={x:0,y:0});var ue=o.getNodeShape(e),Ce=I;X==="inside"&&(Ce=0),X==="outside"&&(Ce*=2);var Fe=(s+Ce+(L+ee))/s,ze=(l+Ce+(L+ee))/l,Oe=s*Fe,Je=l*ze,Ge=o.nodeShapes[ue].points,$e;if(g){var lt=Se(Oe,Je,ue,Ge);$e=lt.path}if(ue==="ellipse")o.drawEllipsePath($e||r,ve.x,ve.y,Oe,Je);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ue)){var ht=0,Ot=0,dt=0;ue==="round-diamond"?ht=(Ce+ee+L)*1.4:ue==="round-heptagon"?(ht=(Ce+ee+L)*1.075,dt=-(Ce/2+ee+L)/35):ue==="round-hexagon"?ht=(Ce+ee+L)*1.12:ue==="round-pentagon"?(ht=(Ce+ee+L)*1.13,dt=-(Ce/2+ee+L)/15):ue==="round-tag"?(ht=(Ce+ee+L)*1.12,Ot=(Ce/2+L+ee)*.07):ue==="round-triangle"&&(ht=(Ce+ee+L)*(Math.PI/2),dt=-(Ce+ee/2+L)/Math.PI),ht!==0&&(Fe=(s+ht)/s,Oe=s*Fe,["round-hexagon","round-tag"].includes(ue)||(ze=(l+ht)/l,Je=l*ze)),Q=Q==="auto"?dd(Oe,Je):Q;for(var Dt=Oe/2,Ft=Je/2,vt=Q+(Ce+L+ee)/2,st=new Array(Ge.length/2),jt=new Array(Ge.length/2),vr=0;vr<Ge.length/2;vr++)st[vr]={x:ve.x+Ot+Dt*Ge[vr*2],y:ve.y+dt+Ft*Ge[vr*2+1]};var ir,mr,qt,Yt,Bt=st.length;for(mr=st[Bt-1],ir=0;ir<Bt;ir++)qt=st[ir%Bt],Yt=st[(ir+1)%Bt],jt[ir]=Sf(mr,qt,Yt,vt),mr=qt,qt=Yt;o.drawRoundPolygonPath($e||r,ve.x+Ot,ve.y+dt,s*Fe,l*ze,Ge,jt)}else if(["roundrectangle","round-rectangle"].includes(ue))Q=Q==="auto"?Ia(Oe,Je):Q,o.drawRoundRectanglePath($e||r,ve.x,ve.y,Oe,Je,Q+(Ce+L+ee)/2);else if(["cutrectangle","cut-rectangle"].includes(ue))Q=Q==="auto"?ff():Q,o.drawCutRectanglePath($e||r,ve.x,ve.y,Oe,Je,null,Q+(Ce+L+ee)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ue))Q=Q==="auto"?Ia(Oe,Je):Q,o.drawBottomRoundRectanglePath($e||r,ve.x,ve.y,Oe,Je,Q+(Ce+L+ee)/2);else if(ue==="barrel")o.drawBarrelPath($e||r,ve.x,ve.y,Oe,Je);else if(ue.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ue)){var Pt=(Ce+L+ee)/s;Ge=gs(ps(Ge,Pt)),o.drawPolygonPath($e||r,ve.x,ve.y,s,l,Ge)}else{var Pe=(Ce+L+ee)/s;Ge=gs(ps(Ge,-Pe)),o.drawPolygonPath($e||r,ve.x,ve.y,s,l,Ge)}if(g?r.stroke($e):r.stroke(),W==="double"){r.lineWidth=Ce/3;var pe=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke($e):r.stroke(),r.globalCompositeOperation=pe}r.setLineDash&&r.setLineDash([])}},at=function(){a&&o.drawNodeOverlay(r,e,c,s,l)},We=function(){a&&o.drawNodeUnderlay(r,e,c,s,l)},Re=function(){o.drawElementText(r,e,null,n)},ge=e.pstyle("ghost").value==="yes";if(ge){var z=e.pstyle("ghost-offset-x").pfValue,V=e.pstyle("ghost-offset-y").pfValue,ne=e.pstyle("ghost-opacity").value,te=ne*p;r.translate(z,V),ce(),qe(),oe(ne*H),me(),_e(te,!0),fe(ne*M),Ne(),we(O!==0||I!==0),_e(te,!1),xe(te),r.translate(-z,-V)}g&&r.translate(-c.x,-c.y),We(),g&&r.translate(c.x,c.y),ce(),qe(),oe(),me(),_e(p,!0),fe(),Ne(),we(O!==0||I!==0),_e(p,!1),xe(),g&&r.translate(-c.x,-c.y),Re(),at(),t&&r.translate(w.x1,w.y1)}};var pv=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var s=this;if(!!n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value,p=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}s.colorFillStyle(t,f[0],f[1],f[2],u),s.nodeShapes[c].draw(t,a.x,a.y,i+l*2,o+l*2,p),t.fill()}}}};Ai.drawNodeOverlay=pv("overlay");Ai.drawNodeUnderlay=pv("underlay");Ai.hasPie=function(r){return r=r[0],r._private.hasPie};Ai.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),f=Math.min(l,u)/2,c=0,p=this.usePaths();p&&(o=0,s=0),i.units==="%"?f=f*i.pfValue:i.pfValue!==void 0&&(f=i.pfValue/2);for(var g=1;g<=a.pieBackgroundN;g++){var d=e.pstyle("pie-"+g+"-background-size").value,b=e.pstyle("pie-"+g+"-background-color").value,x=e.pstyle("pie-"+g+"-background-opacity").value*t,w=d/100;w+c>1&&(w=1-c);var C=1.5*Math.PI+2*Math.PI*c,m=2*Math.PI*w,S=C+m;d===0||c>=1||c+w>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,f,C,S),r.closePath(),this.colorFillStyle(r,b[0],b[1],b[2],x),r.fill(),c+=w)}};var jr={},Lx=100;jr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};jr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};jr.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,l=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var u=t.sourceEndpoint(),f=t.targetEndpoint(),c=t.midpoint(),p=Na(u,c),g=Na(f,c);i=r.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(p,g))}else{var d=o?{x:0,y:0}:t.position(),b=t.paddedWidth(),x=t.paddedHeight();i=r.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(b,x))}else if(t.isEdge()){var w=t.sourceEndpoint(),C=t.targetEndpoint();i=r.createLinearGradient(w.x,w.y,C.x,C.y)}else{var m=o?{x:0,y:0}:t.position(),S=t.paddedWidth(),P=t.paddedHeight(),D=S/2,v=P/2,E=t.pstyle("background-gradient-direction").value;switch(E){case"to-bottom":i=r.createLinearGradient(m.x,m.y-v,m.x,m.y+v);break;case"to-top":i=r.createLinearGradient(m.x,m.y+v,m.x,m.y-v);break;case"to-left":i=r.createLinearGradient(m.x+D,m.y,m.x-D,m.y);break;case"to-right":i=r.createLinearGradient(m.x-D,m.y,m.x+D,m.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(m.x-D,m.y-v,m.x+D,m.y+v);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(m.x-D,m.y+v,m.x+D,m.y-v);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(m.x+D,m.y-v,m.x-D,m.y+v);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(m.x+D,m.y+v,m.x-D,m.y-v);break}}if(!i)return null;for(var k=l.length===s.length,N=s.length,O=0;O<N;O++)i.addColorStop(k?l[O]:O/(N-1),"rgba("+s[O][0]+","+s[O][1]+","+s[O][2]+","+a+")");return i};jr.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};jr.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};jr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};jr.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};jr.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};jr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};jr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,f;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var c=t.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var p=0;p<e.CANVAS_LAYERS;p++)f=t.canvases[p],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";for(var p=0;p<e.BUFFER_COUNT;p++)f=t.bufferCanvases[p],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,o<=1&&(f=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=l*e.textureMult,f.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}};jr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};jr.render=function(r){r=r||od();var e=r.forcedContext,t=r.drawAllLayers,n=r.drawOnlyNodeLayer,a=r.forcedZoom,i=r.forcedPan,o=this,s=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=o.cy,u=o.data,f=u.canvasNeedsRedraw,c=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),p=r.motionBlur!==void 0?r.motionBlur:o.motionBlur,g=o.motionBlurPxRatio,d=l.hasCompoundNodes(),b=o.hoverData.draggingEles,x=!!(o.hoverData.selecting||o.touchData.selecting);p=p&&!e&&o.motionBlurEnabled&&!x;var w=p;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),p&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(w=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!c&&(f[o.NODE]=!0,f[o.SELECT_BOX]=!0);var C=l.style(),m=l.zoom(),S=a!==void 0?a:m,P=l.pan(),D={x:P.x,y:P.y},v={zoom:m,pan:{x:P.x,y:P.y}},E=o.prevViewport,k=E===void 0||v.zoom!==E.zoom||v.pan.x!==E.pan.x||v.pan.y!==E.pan.y;!k&&!(b&&!d)&&(o.motionBlurPxRatio=1),i&&(D=i),S*=s,D.x*=s,D.y*=s;var N=o.getCachedZSortedEles();function O(ke,me,_e,we,xe){var Ne=ke.globalCompositeOperation;ke.globalCompositeOperation="destination-out",o.colorFillStyle(ke,255,255,255,o.motionBlurTransparency),ke.fillRect(me,_e,we,xe),ke.globalCompositeOperation=Ne}function I(ke,me){var _e,we,xe,Ne;!o.clearingMotionBlur&&(ke===u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||ke===u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(_e={x:P.x*g,y:P.y*g},we=m*g,xe=o.canvasWidth*g,Ne=o.canvasHeight*g):(_e=D,we=S,xe=o.canvasWidth,Ne=o.canvasHeight),ke.setTransform(1,0,0,1,0,0),me==="motionBlur"?O(ke,0,0,xe,Ne):!e&&(me===void 0||me)&&ke.clearRect(0,0,xe,Ne),t||(ke.translate(_e.x,_e.y),ke.scale(we,we)),i&&ke.translate(i.x,i.y),a&&ke.scale(a,a)}if(c||(o.textureDrawLastFrame=!1),c){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var H=o.data.bufferContexts[o.TEXTURE_BUFFER];H.setTransform(1,0,0,1,0,0),H.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:H,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var v=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight};v.mpan={x:(0-v.pan.x)/v.zoom,y:(0-v.pan.y)/v.zoom}}f[o.DRAG]=!1,f[o.NODE]=!1;var G=u.contexts[o.NODE],Y=o.textureCache.texture,v=o.textureCache.viewport;G.setTransform(1,0,0,1,0,0),p?O(G,0,0,v.width,v.height):G.clearRect(0,0,v.width,v.height);var j=C.core("outside-texture-bg-color").value,q=C.core("outside-texture-bg-opacity").value;o.colorFillStyle(G,j[0],j[1],j[2],q),G.fillRect(0,0,v.width,v.height);var m=l.zoom();I(G,!1),G.clearRect(v.mpan.x,v.mpan.y,v.width/v.zoom/s,v.height/v.zoom/s),G.drawImage(Y,v.mpan.x,v.mpan.y,v.width/v.zoom/s,v.height/v.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var X=l.extent(),K=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),T=o.hideEdgesOnViewport&&K,M=[];if(M[o.NODE]=!f[o.NODE]&&p&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,M[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),M[o.DRAG]=!f[o.DRAG]&&p&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,M[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),f[o.NODE]||t||n||M[o.NODE]){var L=p&&!M[o.NODE]&&g!==1,G=e||(L?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),F=p&&!L?"motionBlur":void 0;I(G,F),T?o.drawCachedNodes(G,N.nondrag,s,X):o.drawLayeredElements(G,N.nondrag,s,X),o.debug&&o.drawDebugPoints(G,N.nondrag),!t&&!p&&(f[o.NODE]=!1)}if(!n&&(f[o.DRAG]||t||M[o.DRAG])){var L=p&&!M[o.DRAG]&&g!==1,G=e||(L?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]);I(G,p&&!L?"motionBlur":void 0),T?o.drawCachedNodes(G,N.drag,s,X):o.drawCachedElements(G,N.drag,s,X),o.debug&&o.drawDebugPoints(G,N.drag),!t&&!p&&(f[o.DRAG]=!1)}if(o.showFps||!n&&f[o.SELECT_BOX]&&!t){var G=e||u.contexts[o.SELECT_BOX];if(I(G),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var m=o.cy.zoom(),W=C.core("selection-box-border-width").value/m;G.lineWidth=W,G.fillStyle="rgba("+C.core("selection-box-color").value[0]+","+C.core("selection-box-color").value[1]+","+C.core("selection-box-color").value[2]+","+C.core("selection-box-opacity").value+")",G.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),W>0&&(G.strokeStyle="rgba("+C.core("selection-box-border-color").value[0]+","+C.core("selection-box-border-color").value[1]+","+C.core("selection-box-border-color").value[2]+","+C.core("selection-box-opacity").value+")",G.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){var m=o.cy.zoom(),Z=u.bgActivePosistion;G.fillStyle="rgba("+C.core("active-bg-color").value[0]+","+C.core("active-bg-color").value[1]+","+C.core("active-bg-color").value[2]+","+C.core("active-bg-opacity").value+")",G.beginPath(),G.arc(Z.x,Z.y,C.core("active-bg-size").pfValue/m,0,2*Math.PI),G.fill()}var ee=o.lastRedrawTime;if(o.showFps&&ee){ee=Math.round(ee);var Q=Math.round(1e3/ee);G.setTransform(1,0,0,1,0,0),G.fillStyle="rgba(255, 0, 0, 0.75)",G.strokeStyle="rgba(255, 0, 0, 0.75)",G.lineWidth=1,G.fillText("1 frame = "+ee+" ms = "+Q+" fps",0,20);var oe=60;G.strokeRect(0,30,250,20),G.fillRect(0,30,250*Math.min(Q/oe,1),20)}t||(f[o.SELECT_BOX]=!1)}if(p&&g!==1){var fe=u.contexts[o.NODE],ce=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],Se=u.contexts[o.DRAG],De=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Le=function(me,_e,we){me.setTransform(1,0,0,1,0,0),we||!w?me.clearRect(0,0,o.canvasWidth,o.canvasHeight):O(me,0,0,o.canvasWidth,o.canvasHeight);var xe=g;me.drawImage(_e,0,0,o.canvasWidth*xe,o.canvasHeight*xe,0,0,o.canvasWidth,o.canvasHeight)};(f[o.NODE]||M[o.NODE])&&(Le(fe,ce,M[o.NODE]),f[o.NODE]=!1),(f[o.DRAG]||M[o.DRAG])&&(Le(Se,De,M[o.DRAG]),f[o.DRAG]=!1)}o.prevViewport=v,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),p&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!c,o.mbFrames=0,f[o.NODE]=!0,f[o.DRAG]=!0,o.redraw()},Lx)),e||l.emit("render")};var va={};va.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,s=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+s*i[1]);for(var l=1;l<i.length/2;l++)r.lineTo(e+o*i[l*2],t+s*i[l*2+1]);r.closePath()};va.drawRoundPolygonPath=function(r,e,t,n,a,i,o){o.forEach(function(s){return av(r,s)}),r.closePath()};va.drawRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,s=a/2,l=i==="auto"?Ia(n,a):Math.min(i,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,l),r.arcTo(e+o,t+s,e,t+s,l),r.arcTo(e-o,t+s,e-o,t,l),r.arcTo(e-o,t-s,e,t-s,l),r.lineTo(e,t-s),r.closePath()};va.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,s=a/2,l=i==="auto"?Ia(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,l),r.arcTo(e-o,t+s,e-o,t,l),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};va.drawCutRectanglePath=function(r,e,t,n,a,i,o){var s=n/2,l=a/2,u=o==="auto"?ff():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+u,t-l),r.lineTo(e+s-u,t-l),r.lineTo(e+s,t-l+u),r.lineTo(e+s,t+l-u),r.lineTo(e+s-u,t+l),r.lineTo(e-s+u,t+l),r.lineTo(e-s,t+l-u),r.lineTo(e-s,t-l+u),r.closePath()};va.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=t-o,f=t+o,c=Ml(n,a),p=c.widthOffset,g=c.heightOffset,d=c.ctrlPtOffsetPct*p;r.beginPath&&r.beginPath(),r.moveTo(s,u+g),r.lineTo(s,f-g),r.quadraticCurveTo(s+d,f,s+p,f),r.lineTo(l-p,f),r.quadraticCurveTo(l-d,f,l,f-g),r.lineTo(l,u+g),r.quadraticCurveTo(l-d,u,l-p,u),r.lineTo(s+p,u),r.quadraticCurveTo(s+d,u,s,u+g),r.closePath()};var vh=Math.sin(0),gh=Math.cos(0),$l={},Ul={},yv=Math.PI/40;for(var ni=0*Math.PI;ni<2*Math.PI;ni+=yv)$l[ni]=Math.sin(ni),Ul[ni]=Math.cos(ni);va.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=yv)i=e-s*$l[u]*vh+s*Ul[u]*gh,o=t+l*Ul[u]*vh+l*$l[u]*gh,u===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var To={};To.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};To.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],s=Be(r.maxWidth)||Be(r.maxHeight),l=this.getPixelRatio(),u=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,u=r.scale;else if(s){var f=1/0,c=1/0;Be(r.maxWidth)&&(f=u*r.maxWidth/i),Be(r.maxHeight)&&(c=u*r.maxHeight/o),u=Math.min(f,c),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var p=document.createElement("canvas");p.width=i,p.height=o,p.style.width=i+"px",p.style.height=o+"px";var g=p.getContext("2d");if(i>0&&o>0){g.clearRect(0,0,i,o),g.globalCompositeOperation="source-over";var d=this.getCachedZSortedEles();if(r.full)g.translate(-n.x1*u,-n.y1*u),g.scale(u,u),this.drawElements(g,d),g.scale(1/u,1/u),g.translate(n.x1*u,n.y1*u);else{var b=e.pan(),x={x:b.x*u,y:b.y*u};u*=e.zoom(),g.translate(x.x,x.y),g.scale(u,u),this.drawElements(g,d),g.scale(1/u,1/u),g.translate(-x.x,-x.y)}r.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=r.bg,g.rect(0,0,i,o),g.fill())}return p};function Nx(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function ph(r){var e=r.indexOf(",");return r.substr(e+1)}function mv(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new xi(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return Nx(ph(n()),t);case"base64":return ph(n());case"base64uri":default:return n()}}To.png=function(r){return mv(r,this.bufferCanvasImage(r),"image/png")};To.jpg=function(r){return mv(r,this.bufferCanvasImage(r),"image/jpeg")};var bv={};bv.nodeShapeImpl=function(r,e,t,n,a,i,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,s);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var Ix=wv,Et=wv.prototype;Et.CANVAS_LAYERS=3;Et.SELECT_BOX=0;Et.DRAG=1;Et.NODE=2;Et.BUFFER_COUNT=3;Et.TEXTURE_BUFFER=0;Et.MOTIONBLUR_BUFFER_NODE=1;Et.MOTIONBLUR_BUFFER_DRAG=2;function wv(r){var e=this;e.data={canvases:new Array(Et.CANVAS_LAYERS),contexts:new Array(Et.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Et.CANVAS_LAYERS),bufferCanvases:new Array(Et.BUFFER_COUNT),bufferContexts:new Array(Et.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[t]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=r.cy.container();i.appendChild(e.data.canvasContainer),i.style[t]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Sp()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<Et.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(ee){l.style[ee]=o[ee]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(Et.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Et.NODE].setAttribute("data-id","layer"+Et.NODE+"-node"),e.data.canvases[Et.SELECT_BOX].setAttribute("data-id","layer"+Et.SELECT_BOX+"-selectbox"),e.data.canvases[Et.DRAG].setAttribute("data-id","layer"+Et.DRAG+"-drag");for(var s=0;s<Et.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=qr(),f=function(Q){return{x:(Q.x1+Q.x2)/2,y:(Q.y1+Q.y2)/2}},c=function(Q){return{x:-Q.w/2,y:-Q.h/2}},p=function(Q){var oe=Q[0]._private,fe=oe.oldBackgroundTimestamp===oe.backgroundTimestamp;return!fe},g=function(Q){return Q[0]._private.nodeKey},d=function(Q){return Q[0]._private.labelStyleKey},b=function(Q){return Q[0]._private.sourceLabelStyleKey},x=function(Q){return Q[0]._private.targetLabelStyleKey},w=function(Q,oe,fe,ce,Se){return e.drawElement(Q,oe,fe,!1,!1,Se)},C=function(Q,oe,fe,ce,Se){return e.drawElementText(Q,oe,fe,ce,"main",Se)},m=function(Q,oe,fe,ce,Se){return e.drawElementText(Q,oe,fe,ce,"source",Se)},S=function(Q,oe,fe,ce,Se){return e.drawElementText(Q,oe,fe,ce,"target",Se)},P=function(Q){return Q.boundingBox(),Q[0]._private.bodyBounds},D=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.main||u},v=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.source||u},E=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.target||u},k=function(Q,oe){return oe},N=function(Q){return f(P(Q))},O=function(Q,oe,fe){var ce=Q?Q+"-":"";return{x:oe.x+fe.pstyle(ce+"text-margin-x").pfValue,y:oe.y+fe.pstyle(ce+"text-margin-y").pfValue}},I=function(Q,oe,fe){var ce=Q[0]._private.rscratch;return{x:ce[oe],y:ce[fe]}},H=function(Q){return O("",I(Q,"labelX","labelY"),Q)},G=function(Q){return O("source",I(Q,"sourceLabelX","sourceLabelY"),Q)},Y=function(Q){return O("target",I(Q,"targetLabelX","targetLabelY"),Q)},j=function(Q){return c(P(Q))},q=function(Q){return c(v(Q))},X=function(Q){return c(E(Q))},K=function(Q){var oe=D(Q),fe=c(D(Q));if(Q.isNode()){switch(Q.pstyle("text-halign").value){case"left":fe.x=-oe.w;break;case"right":fe.x=0;break}switch(Q.pstyle("text-valign").value){case"top":fe.y=-oe.h;break;case"bottom":fe.y=0;break}}return fe},T=e.data.eleTxrCache=new Ji(e,{getKey:g,doesEleInvalidateKey:p,drawElement:w,getBoundingBox:P,getRotationPoint:N,getRotationOffset:j,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),M=e.data.lblTxrCache=new Ji(e,{getKey:d,drawElement:C,getBoundingBox:D,getRotationPoint:H,getRotationOffset:K,isVisible:k}),L=e.data.slbTxrCache=new Ji(e,{getKey:b,drawElement:m,getBoundingBox:v,getRotationPoint:G,getRotationOffset:q,isVisible:k}),F=e.data.tlbTxrCache=new Ji(e,{getKey:x,drawElement:S,getBoundingBox:E,getRotationPoint:Y,getRotationOffset:X,isVisible:k}),W=e.data.lyrTxrCache=new dv(e);e.onUpdateEleCalcs(function(Q,oe){T.invalidateElements(oe),M.invalidateElements(oe),L.invalidateElements(oe),F.invalidateElements(oe),W.invalidateElements(oe);for(var fe=0;fe<oe.length;fe++){var ce=oe[fe]._private;ce.oldBackgroundTimestamp=ce.backgroundTimestamp}});var Z=function(Q){for(var oe=0;oe<Q.length;oe++)W.enqueueElementRefinement(Q[oe].ele)};T.onDequeue(Z),M.onDequeue(Z),L.onDequeue(Z),F.onDequeue(Z)}Et.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Et.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Et.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Et.SELECT_BOX]=e;break}};var Rx=typeof Path2D!="undefined";Et.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Et.usePaths=function(){return Rx&&this.pathsEnabled};Et.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Et.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Et.makeOffscreenCanvas=function(r,e){var t;return(typeof OffscreenCanvas=="undefined"?"undefined":cr(OffscreenCanvas))!=="undefined"?t=new OffscreenCanvas(r,e):(t=document.createElement("canvas"),t.width=r,t.height=e),t};[vv,kn,$n,_f,Va,Ai,jr,va,To,bv].forEach(function(r){tt(Et,r)});var Fx=[{name:"null",impl:tv},{name:"base",impl:cv},{name:"canvas",impl:Ix}],Bx=[{type:"layout",extensions:Uw},{type:"renderer",extensions:Fx}],xv={},Sv={};function Cv(r,e,t){var n=t,a=function(E){At("Can not register `"+e+"` for `"+r+"` since `"+E+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(go.prototype[e])return a(e);go.prototype[e]=t}else if(r==="collection"){if(Cr.prototype[e])return a(e);Cr.prototype[e]=t}else if(r==="layout"){for(var i=function(E){this.options=E,t.call(this,E),_t(this._private)||(this._private={}),this._private.cy=E.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var f=t.prototype.stop;o.stop=function(){var v=this.options;if(v&&v.animate){var E=this.animations;if(E)for(var k=0;k<E.length;k++)E[k].stop()}return f?f.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var c=function(E){return E._private.cy},p={addEventFields:function(E,k){k.layout=E,k.cy=c(E),k.target=E},bubble:function(){return!0},parent:function(E){return c(E)}};tt(o,{createEmitter:function(){return this._private.emitter=new zs(p,this),this},emitter:function(){return this._private.emitter},on:function(E,k){return this.emitter().on(E,k),this},one:function(E,k){return this.emitter().one(E,k),this},once:function(E,k){return this.emitter().one(E,k),this},removeListener:function(E,k){return this.emitter().removeListener(E,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(E,k){return this.emitter().emit(E,k),this}}),kt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var g=_v("renderer","base"),d=g.prototype,b=t,x=t.prototype,w=function(){g.apply(this,arguments),b.apply(this,arguments)},C=w.prototype;for(var m in d){var S=d[m],P=x[m]!=null;if(P)return a(m);C[m]=S}for(var D in x)C[D]=x[D];d.clientFunctions.forEach(function(v){C[v]=C[v]||function(){er("Renderer does not implement `renderer."+v+"()` on its prototype")}}),n=w}else if(r==="__proto__"||r==="constructor"||r==="prototype")return er(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return Yh({map:xv,keys:[r,e],value:n})}function _v(r,e){return Xh({map:xv,keys:[r,e]})}function zx(r,e,t,n,a){return Yh({map:Sv,keys:[r,e,t,n],value:a})}function Gx(r,e,t,n){return Xh({map:Sv,keys:[r,e,t,n]})}var ql=function(){if(arguments.length===2)return _v.apply(null,arguments);if(arguments.length===3)return Cv.apply(null,arguments);if(arguments.length===4)return Gx.apply(null,arguments);if(arguments.length===5)return zx.apply(null,arguments);er("Invalid extension access syntax")};go.prototype.extension=ql;Bx.forEach(function(r){r.extensions.forEach(function(e){Cv(r.type,e.name,e.impl)})});var Ev=function r(){if(!(this instanceof r))return new r;this.length=0},Ba=Ev.prototype;Ba.instanceString=function(){return"stylesheet"};Ba.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};Ba.css=function(r,e){var t=this.length-1;if(Qe(r))this[t].properties.push({name:r,value:e});else if(_t(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=Dr.properties[o]||Dr.properties[As(o)];if(l!=null){var u=l.name,f=s;this[t].properties.push({name:u,value:f})}}}return this};Ba.style=Ba.css;Ba.generateStyle=function(r){var e=new Dr(r);return this.appendToStyle(e)};Ba.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var Vx="3.29.2",En=function(e){if(e===void 0&&(e={}),_t(e))return new go(e);if(Qe(e))return ql.apply(ql,arguments)};En.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(En),r.apply(null,e),this};En.warnings=function(r){return ad(r)};En.version=Vx;En.stylesheet=En.Stylesheet=Ev;var Xe=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Hx(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var Tv={exports:{}};(function(r){(function(){var e=function(o,s){if(typeof s!="function")throw new TypeError("predicate must be a function");for(var l=o.length>>>0,u=arguments[1],f,c=0;c<l;c++)if(f=o[c],s.call(u,f,c,o))return f},t=function(){function o(s,l){var u=s.node,f=s.position,c=f===void 0?null:f,p=s.data,g=p===void 0?null:p;this.updateParams(l),this._node=u,this.initStyles(l.cssClass),g&&this.updateData(g),c&&this.updatePosition(c)}return o.prototype.updateParams=function(s){var l=s.tpl,u=l===void 0?function(){return""}:l;s.cssClass;var f=s.halign,c=f===void 0?"center":f,p=s.valign,g=p===void 0?"center":p,d=s.halignBox,b=d===void 0?"center":d,x=s.valignBox,w=x===void 0?"center":x,C={top:-.5,left:-.5,center:0,right:.5,bottom:.5};this._align=[C[c],C[g],100*(C[b]-.5),100*(C[w]-.5)],this.tpl=u},o.prototype.updateData=function(s){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);for(var l=new DOMParser().parseFromString(this.tpl(s),"text/html").body.children,u=0;u<l.length;++u){var f=l[u];this._node.appendChild(f)}},o.prototype.getNode=function(){return this._node},o.prototype.updatePosition=function(s){this._renderPosition(s)},o.prototype.initStyles=function(s){var l=this._node.style;l.position="absolute",s&&s.length&&this._node.classList.add(s)},o.prototype._renderPosition=function(s){var l=this._position,u=s.x+this._align[0]*s.w,f=s.y+this._align[1]*s.h;if(!l||l[0]!==u||l[1]!==f){this._position=[u,f];var c="translate("+this._align[2]+"%,"+this._align[3]+"%) ",p="translate("+u.toFixed(2)+"px,"+f.toFixed(2)+"px) ",g=c+p,d=this._node.style;d.webkitTransform=g,d.msTransform=g,d.transform=g}},o}(),n=function(){function o(s){this._node=s,this._elements={}}return o.prototype.addOrUpdateElem=function(s,l,u){u===void 0&&(u={});var f=this._elements[s];if(f)f.updateParams(l),f.updateData(u.data),f.updatePosition(u.position);else{var c=document.createElement("div");this._node.appendChild(c),this._elements[s]=new t({node:c,data:u.data,position:u.position},l)}},o.prototype.removeElemById=function(s){this._elements[s]&&(this._node.removeChild(this._elements[s].getNode()),delete this._elements[s])},o.prototype.updateElemPosition=function(s,l){var u=this._elements[s];u&&u.updatePosition(l)},o.prototype.updatePanZoom=function(s){var l=s.pan,u=s.zoom,f="translate("+l.x+"px,"+l.y+"px) scale("+u+")",c=this._node.style,p="top left";c.webkitTransform=f,c.msTransform=f,c.transform=f,c.webkitTransformOrigin=p,c.msTransformOrigin=p,c.transformOrigin=p},o}();function a(o,s,l){var u=!s||typeof s!="object"?[]:s,f=c();return o.one("render",function(S){p(S),C(S)}),o.on("add",g),o.on("layoutstop",d),o.on("remove",b),o.on("data",w),o.on("style",w),o.on("pan zoom",C),o.on("position bounds",x),o;function c(){var S=o.container(),P=document.createElement("div"),D=S.querySelector("canvas"),v=S.querySelector("[class^='cy-node-html']");v&&D.parentNode.removeChild(v);var E=P.style;return E.position="absolute",E["z-index"]=10,E.width="500px",E.margin="0px",E.padding="0px",E.border="0px",E.outline="0px",E.outline="0px",l&&l.enablePointerEvents!==!0&&(E["pointer-events"]="none"),D.parentNode.appendChild(P),new n(P)}function p(S){var P=S.cy;u.forEach(function(D){P.elements(D.query).forEach(function(v){v.isNode()&&f.addOrUpdateElem(v.id(),D,{position:m(v),data:v.data()})})})}function g(S){var P=S.target,D=e(u.slice().reverse(),function(v){return P.is(v.query)});D&&f.addOrUpdateElem(P.id(),D,{position:m(P),data:P.data()})}function d(S){var P=S.cy;u.forEach(function(D){P.elements(D.query).forEach(function(v){v.isNode()&&f.updateElemPosition(v.id(),m(v))})})}function b(S){f.removeElemById(S.target.id())}function x(S){f.updateElemPosition(S.target.id(),m(S.target))}function w(S){setTimeout(function(){var P=S.target,D=e(u.slice().reverse(),function(v){return P.is(v.query)});D&&!P.removed()?f.addOrUpdateElem(P.id(),D,{position:m(P),data:P.data()}):f.removeElemById(P.id())},0)}function C(S){var P=S.cy;f.updatePanZoom({pan:P.pan(),zoom:P.zoom()})}function m(S){return{w:S.width(),h:S.height(),x:S.position("x"),y:S.position("y")}}}var i=function(o){!o||o("core","nodeHtmlLabel",function(s,l){return a(this,s,l)})};r.exports&&(r.exports=function(o){i(o)}),typeof cytoscape!="undefined"&&i(cytoscape)})()})(Tv);var $x=Tv.exports,Pv={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={347:(a,i,o)=>{var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l=o(218),u=o(259),f=o(171),c=o(961),p=0;a.exports=function(g,d){var b=g;u.options=g;var x,w,C,m,S,P,D,v,E,k,N,O,I,H,G,Y,j,q,X,K="cy-edge-bend-editing-cxt-add-bend-point"+p,T="cy-edge-bend-editing-cxt-remove-bend-point"+p,M="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+p,L="cy-edge-control-editing-cxt-add-control-point"+p,F="cy-edge-control-editing-cxt-remove-control-point"+p,W="cy-edge-bend-editing-cxt-remove-multiple-control-point"+p,Z=null,ee=null,Q=!1,oe={init:function(){c(d,u,g);var fe=g,ce=$(this),Se="cy-node-edge-editing-stage"+p;p++;var De,Le,ke=$('<div id="'+Se+'"></div>');ce.find("#"+Se).length<1&&ce.append(ke),(De=Konva.stages.length<p?new Konva.Stage({id:"node-edge-editing-stage",container:Se,width:ce.width(),height:ce.height()}):Konva.stages[p-1]).getChildren().length<1?(Le=new Konva.Layer,De.add(Le)):Le=De.getChildren()[0];var me={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(Pe){Pe.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(Pe){Pe.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(Pe){d.autounselectify(!1),Q=!0,me.touchedAnchor=Pe.target,X=!1,me.edge.unselect();var pe=u.syntax[me.edgeType].weight,Ae=u.syntax[me.edgeType].distance,Ke=me.edge;ht={edge:Ke,type:me.edgeType,weights:Ke.data(pe)?[].concat(Ke.data(pe)):[],distances:Ke.data(Ae)?[].concat(Ke.data(Ae)):[]},j=d.style()._private.coreStyle["active-bg-opacity"]?d.style()._private.coreStyle["active-bg-opacity"].value:.15,d.style().selector("core").style("active-bg-opacity",0).update(),ze(),d.autoungrabify(!0),Le.getStage().on("contentTouchend contentMouseup",me.eMouseUp),Le.getStage().on("contentMouseout",me.eMouseOut)},eMouseUp:function(Pe){Q=!1,me.touchedAnchor=void 0,X=!1,me.edge.select(),d.style().selector("core").style("active-bg-opacity",j).update(),Oe(),d.autounselectify(!0),d.autoungrabify(!1),Le.getStage().off("contentTouchend contentMouseup",me.eMouseUp),Le.getStage().off("contentMouseout",me.eMouseOut)},eMouseOut:function(Pe){X=!0},clearAnchorsExcept:function(){var Pe=this,pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,Ae=!1;this.anchors.forEach(function(Ke,rt){pe&&Ke===pe?Ae=!0:(Pe.unbindListeners(Ke),Ke.destroy())}),Ae?this.anchors=[pe]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(Pe){if(this.edge=Pe,this.edgeType=u.getEdgeType(Pe),Pe.hasClass("edgebendediting-hasbendpoints")||Pe.hasClass("edgecontrolediting-hascontrolpoints")){for(var pe=u.getAnchorsAsArray(Pe),Ae=.65*ue(Pe),Ke=(Pe.source().position(),Pe.target().position(),0);pe&&Ke<pe.length;Ke+=2){var rt=pe[Ke],Ze=pe[Ke+1];this.renderAnchorShape(rt,Ze,Ae)}Le.draw()}},renderAnchorShape:function(Pe,pe,Ae){var Ke=ie({x:Pe-Ae/2,y:pe-Ae/2});Ae*=d.zoom();var rt=new Konva.Rect({x:Ke.x,y:Ke.y,width:Ae,height:Ae,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(rt),this.bindListeners(rt),Le.add(rt)}},_e=function(Pe,pe){var Ae=Pe.target||Pe.cyTarget;if(!u.isIgnoredEdge(Ae)){var Ke,rt,Ze,xt,Xt=u.getEdgeType(Ae);Xt==="none"?(Ke=[],rt=[]):(Ze=u.syntax[Xt].weight,xt=u.syntax[Xt].distance,Ke=Ae.data(Ze)?[].concat(Ae.data(Ze)):Ae.data(Ze),rt=Ae.data(xt)?[].concat(Ae.data(xt)):Ae.data(xt));var Wt={edge:Ae,type:Xt,weights:Ke,distances:rt};u.addAnchorPoint(void 0,void 0,pe),te().undoable&&d.undoRedo().do("changeAnchorPoints",Wt)}ve(),Ae.select()},we=function(Pe){var pe=me.edge,Ae=u.getEdgeType(pe);if(!u.edgeTypeNoneShouldntHappen(Ae,"UiUtilities.js, cxtRemoveAnchorFcn")){var Ke={edge:pe,type:Ae,weights:[].concat(pe.data(u.syntax[Ae].weight)),distances:[].concat(pe.data(u.syntax[Ae].distance))};u.removeAnchor(),te().undoable&&d.undoRedo().do("changeAnchorPoints",Ke),setTimeout(function(){ve(),pe.select()},50)}},xe=function(Pe){var pe=me.edge,Ae=u.getEdgeType(pe),Ke={edge:pe,type:Ae,weights:[].concat(pe.data(u.syntax[Ae].weight)),distances:[].concat(pe.data(u.syntax[Ae].distance))};u.removeAllAnchors(),te().undoable&&d.undoRedo().do("changeAnchorPoints",Ke),setTimeout(function(){ve(),pe.select()},50)},Ne=fe.handleReconnectEdge,qe=fe.validateEdge,at=fe.actOnUnsuccessfulReconnection,We=[{id:K,content:fe.addBendMenuItemTitle,selector:"edge",onClickFunction:function(Pe){_e(Pe,"bend")},hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:T,content:fe.removeBendMenuItemTitle,selector:"edge",onClickFunction:we,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:M,content:fe.removeAllBendMenuItemTitle,selector:fe.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:xe,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:L,content:fe.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(Pe){_e(Pe,"control")},hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:F,content:fe.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:we,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:W,content:fe.removeAllControlMenuItemTitle,selector:fe.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:xe,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions}];if(d.contextMenus){var Re=d.contextMenus("get");Re.isActive()?Re.appendMenuItems(We):d.contextMenus({menuItems:We})}var ge=l(function(){ke.attr("height",ce.height()).attr("width",ce.width()).css({position:"absolute",top:0,left:0,"z-index":te().zIndex}),setTimeout(function(){var Pe=ke.offset(),pe=ce.offset();ke.css({top:-(Pe.top-pe.top),left:-(Pe.left-pe.left)}),Le.getStage().setWidth(ce.width()),Le.getStage().setHeight(ce.height()),d&&ve()},0)},250);function z(){ge()}z(),$(window).bind("resize",function(){z()});var V,ne=ce.data("cyedgeediting");function te(){return V||(V=ce.data("cyedgeediting").options)}function ie(Pe){var pe=d.pan(),Ae=d.zoom();return{x:Pe.x*Ae+pe.x,y:Pe.y*Ae+pe.y}}function ve(){me.clearAnchorsExcept(me.touchedAnchor),Z!==null&&(Z.destroy(),Z=null),ee!==null&&(ee.destroy(),ee=null),Le.draw(),q&&(me.renderAnchorShapes(q),function(Pe){if(Pe){var pe=u.getAnchorsAsArray(Pe);pe===void 0&&(pe=[]);var Ae=Pe.sourceEndpoint(),Ke=Pe.targetEndpoint();if(Ae.x&&Ke.x&&(pe.unshift(Ae.y),pe.unshift(Ae.x),pe.push(Ke.x),pe.push(Ke.y),pe)){var rt={x:pe[0],y:pe[1]},Ze={x:pe[pe.length-2],y:pe[pe.length-1]},xt={x:pe[2],y:pe[3]},Xt={x:pe[pe.length-4],y:pe[pe.length-3]};(function(Wt,$t,gt,Qt,zr){var br=$t.x-gt/2,Gr=$t.y-gt/2,Vr=Qt.x-gt/2,tn=Qt.y-gt/2,sr=zr.x-gt/2,dn=zr.y-gt/2,Ir=ie({x:Wt.x-gt/2,y:Wt.y-gt/2}),Tr=ie({x:br,y:Gr});gt=gt*d.zoom()/2;var Lt=ie({x:Vr,y:tn}),Yr=ie({x:sr,y:dn}),Yn=gt,On=Math.sqrt(Math.pow(Lt.x-Ir.x,2)+Math.pow(Lt.y-Ir.y,2)),Xn=Ir.x+Yn/On*(Lt.x-Ir.x),Hr=Ir.y+Yn/On*(Lt.y-Ir.y),wa=Math.sqrt(Math.pow(Yr.x-Tr.x,2)+Math.pow(Yr.y-Tr.y,2)),gr=Tr.x+Yn/wa*(Yr.x-Tr.x),vn=Tr.y+Yn/wa*(Yr.y-Tr.y);Z===null&&(Z=new Konva.Circle({x:Xn+gt,y:Hr+gt,radius:gt,fill:"black"})),ee===null&&(ee=new Konva.Circle({x:gr+gt,y:vn+gt,radius:gt,fill:"black"})),Le.add(Z),Le.add(ee),Le.draw()})(rt,Ze,.65*ue(Pe),xt,Xt)}}}(q))}function ue(Pe){var pe=te().anchorShapeSizeFactor;return parseFloat(Pe.css("width"))<=2.5?2.5*pe:parseFloat(Pe.css("width"))*pe}function Ce(Pe,pe,Ae,Ke,rt){return Pe>=Ke-Ae/2&&Pe<=Ke+Ae/2&&pe>=rt-Ae/2&&pe<=rt+Ae/2}function Fe(Pe,pe,Ae){var Ke=u.getEdgeType(Ae);if(Ke==="none"||Ae.data(u.syntax[Ke].weight)==null||Ae.data(u.syntax[Ke].weight).length==0)return-1;for(var rt=u.getAnchorsAsArray(Ae),Ze=ue(Ae),xt=0;rt&&xt<rt.length;xt+=2)if(Ce(Pe,pe,Ze,rt[xt],rt[xt+1]))return xt/2;return-1}function ze(){H=d.panningEnabled(),G=d.zoomingEnabled(),Y=d.boxSelectionEnabled(),d.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function Oe(){d.zoomingEnabled(G).panningEnabled(H).boxSelectionEnabled(Y)}ne==null&&(ne={}),ne.options=fe;var Je=l(function(Pe,pe,Ae,Ke){var rt=Pe.data(u.syntax[pe].weight),Ze=Pe.data(u.syntax[pe].distance),xt=u.convertToRelativePosition(Pe,Ke);rt[Ae]=xt.weight,Ze[Ae]=xt.distance,Pe.data(u.syntax[pe].weight,rt),Pe.data(u.syntax[pe].distance,Ze)},5);H=d.panningEnabled(),G=d.zoomingEnabled(),Y=d.boxSelectionEnabled();var Ge,$e,lt,ht,Ot,dt,Dt,Ft,vt,st=(qt=d.edges(":selected")).length;st===1&&(q=qt[0]),d.bind("zoom pan",m=function(){q&&ve()}),d.on("data","edge",I=function(){q&&ve()}),d.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",x=function(){setTimeout(function(){ve()},50)}),d.on("remove","edge",w=function(){if(this.selected()){if(st-=1,d.startBatch(),q&&q.removeClass("cy-edge-editing-highlight"),st===1){var Pe=d.edges(":selected");Pe.length===1?(q=Pe[0]).addClass("cy-edge-editing-highlight"):q=void 0}else q=void 0;d.endBatch()}ve()}),d.on("add","edge",C=function(){this.selected()&&(st+=1,d.startBatch(),q&&q.removeClass("cy-edge-editing-highlight"),st===1?(q=this).addClass("cy-edge-editing-highlight"):q=void 0,d.endBatch()),ve()}),d.on("select","edge",S=function(){var Pe=this;Pe.target().connectedEdges().length!=0&&Pe.source().connectedEdges().length!=0&&(st+=1,d.startBatch(),q&&q.removeClass("cy-edge-editing-highlight"),st===1?(q=Pe).addClass("cy-edge-editing-highlight"):q=void 0,d.endBatch(),ve())}),d.on("unselect","edge",P=function(){if(st-=1,d.startBatch(),q&&q.removeClass("cy-edge-editing-highlight"),st===1){var Pe=d.edges(":selected");Pe.length===1?(q=Pe[0]).addClass("cy-edge-editing-highlight"):q=void 0}else q=void 0;d.endBatch(),ve()});var jt,vr,ir,mr,qt,Yt=!1;d.on("tapstart",D=function(Pe){$e=Pe.position||Pe.cyPosition}),d.on("tapstart","edge",v=function(Pe){var pe=this;if(q&&q.id()===pe.id()){lt=pe,u.getEdgeType(pe);var Ae=function(Ze,xt,Xt){var Wt=ue(Xt),$t=Xt._private.rscratch.allpts,gt={x:$t[0],y:$t[1]},Qt={x:$t[$t.length-2],y:$t[$t.length-1]};return ie(gt),ie(Qt),Ce(Ze,xt,Wt,gt.x,gt.y)?0:Ce(Ze,xt,Wt,Qt.x,Qt.y)?1:-1}($e.x,$e.y,pe);if(Ae==0||Ae==1){pe.unselect(),dt=Ae,Ft=Ae==0?lt.source():lt.target();var Ke=Ae==0?"source":"target",rt=f.disconnectEdge(lt,d,Pe.renderedPosition,Ke);Dt=rt.dummyNode,lt=rt.edge,ze()}else Ge=void 0,Ot=!0}else Ot=!1}),d.on("drag","node",O=function(){q&&ve()}),d.on("tapdrag",E=function(Pe){d.edges(":selected").length>0&&d.autounselectify(!1);var pe=lt;if(lt===void 0||!u.isIgnoredEdge(pe)){var Ae=u.getEdgeType(pe);if(Ot&&fe.enableCreateAnchorOnDrag&&!Q&&Ae!=="none"){var Ke=u.syntax[Ae].weight,rt=u.syntax[Ae].distance;ht={edge:pe,type:Ae,weights:pe.data(Ke)?[].concat(pe.data(Ke)):[],distances:pe.data(rt)?[].concat(pe.data(rt)):[]},pe.unselect(),Ge=u.addAnchorPoint(pe,$e),lt=pe,Ot=void 0,Yt=!0,ze()}if(Q||lt!==void 0&&(Ge!==void 0||dt!==void 0)){var Ze=Pe.position||Pe.cyPosition;dt!=-1&&Dt?Dt.position(Ze):Ge!=null?Je(pe,Ae,Ge,Ze):Q&&(me.touchedAnchorIndex===void 0&&$e&&(me.touchedAnchorIndex=Fe($e.x,$e.y,me.edge)),me.touchedAnchorIndex!==void 0&&Je(me.edge,me.edgeType,me.touchedAnchorIndex,Ze)),Pe.target&&Pe.target[0]&&Pe.target.isNode()&&(vt=Pe.target)}}}),d.on("tapend",k=function(Pe){X&&Le.getStage().fire("contentMouseup");var pe=lt||me.edge;if(pe!==void 0){var Ae=me.touchedAnchorIndex;if(Ae!=null){var Ke,rt=pe.source().position("x"),Ze=pe.source().position("y"),xt=pe.target().position("x"),Xt=pe.target().position("y"),Wt=u.getAnchorsAsArray(pe),$t=[rt,Ze].concat(Wt).concat([xt,Xt]),gt=Ae+1,Qt=gt-1,zr=gt+1,br={x:$t[2*gt],y:$t[2*gt+1]},Gr={x:$t[2*Qt],y:$t[2*Qt+1]},Vr={x:$t[2*zr],y:$t[2*zr+1]};if(br.x===Gr.x&&br.y===Gr.y||br.x===Gr.x&&br.y===Gr.y)Ke=!0;else{var tn,sr=(Gr.y-Vr.y)/(Gr.x-Vr.x),dn={srcPoint:Gr,tgtPoint:Vr,m1:sr,m2:-1/sr},Ir=u.getIntersection(pe,br,dn),Tr=Math.sqrt(Math.pow(br.x-Ir.x,2)+Math.pow(br.y-Ir.y,2));(tn=u.getEdgeType(pe))==="bend"&&Tr<te().bendRemovalSensitivity&&(Ke=!0)}Ke&&u.removeAnchor(pe,Ae)}else if(Dt!=null&&(dt==0||dt==1)){var Lt=Ft,Yr="valid",Yn=dt==0?"source":"target";if(vt){var On=dt==0?vt:pe.source(),Xn=dt==1?vt:pe.target();typeof qe=="function"&&(Yr=qe(pe,On,Xn)),Lt=Yr==="valid"?vt:Ft}if(On=dt==0?Lt:pe.source(),Xn=dt==1?Lt:pe.target(),pe=f.connectEdge(pe,Ft,Yn),Ft.id()!==Lt.id())if(typeof Ne=="function"){var Hr=Ne(On.id(),Xn.id(),pe.data());if(Hr&&(f.copyEdge(pe,Hr),u.initAnchorPoints(te().bendPositionsFunction,te().controlPositionsFunction,[Hr])),Hr&&te().undoable){var wa={newEdge:Hr,oldEdge:pe};d.undoRedo().do("removeReconnectedEdge",wa),pe=Hr}else Hr&&(d.remove(pe),pe=Hr)}else{var gr=dt==0?{source:Lt.id()}:{target:Lt.id()},vn=dt==0?{source:Ft.id()}:{target:Ft.id()};if(te().undoable&&Lt.id()!==Ft.id()){var ja={edge:pe,location:gr,oldLoc:vn};pe=d.undoRedo().do("reconnectEdge",ja).edge}}Yr!=="valid"&&typeof at=="function"&&at(),pe.select(),d.remove(Dt)}}(tn=u.getEdgeType(pe))==="none"&&(tn="bend"),me.touchedAnchorIndex!==void 0||Yt||(ht=void 0);var Oo=u.syntax[tn].weight;pe!==void 0&&ht!==void 0&&(pe.data(Oo)?pe.data(Oo).toString():null)!=ht.weights.toString()&&(Yt&&(pe.select(),d.autounselectify(!0)),te().undoable&&d.undoRedo().do("changeAnchorPoints",ht)),Ge=void 0,lt=void 0,ht=void 0,Ot=void 0,dt=void 0,Dt=void 0,Ft=void 0,vt=void 0,$e=void 0,Yt=!1,me.touchedAnchorIndex=void 0,Oe(),setTimeout(function(){ve()},50)}),d.on("edgeediting.movestart",function(Pe,pe){mr=!1,pe[0]!=null&&pe.forEach(function(Ae){u.getAnchorsAsArray(Ae)==null||mr||(vr={x:u.getAnchorsAsArray(Ae)[0],y:u.getAnchorsAsArray(Ae)[1]},jt={firstTime:!0,firstAnchorPosition:{x:vr.x,y:vr.y},edges:pe},ir=Ae,mr=!0)})}),d.on("edgeediting.moveend",function(Pe,pe){if(jt!=null){var Ae=jt.firstAnchorPosition,Ke={x:u.getAnchorsAsArray(ir)[0],y:u.getAnchorsAsArray(ir)[1]};jt.positionDiff={x:-Ke.x+Ae.x,y:-Ke.y+Ae.y},delete jt.firstAnchorPosition,te().undoable&&d.undoRedo().do("moveAnchorPoints",jt),jt=void 0}}),d.on("cxttap",N=function(Pe){var pe,Ae,Ke=Pe.target||Pe.cyTarget,rt=!1;try{rt=Ke.isEdge()}catch{}rt?(pe=Ke,Ae=u.getEdgeType(pe)):(pe=me.edge,Ae=me.edgeType);var Ze=d.contextMenus("get");if(!q||q.id()!=pe.id()||u.isIgnoredEdge(pe)||q!==pe)return Ze.hideMenuItem(T),Ze.hideMenuItem(K),Ze.hideMenuItem(F),void Ze.hideMenuItem(L);var xt=Pe.position||Pe.cyPosition,Xt=Fe(xt.x,xt.y,pe);Xt==-1?(Ze.hideMenuItem(T),Ze.hideMenuItem(F),Ae==="control"&&rt?(Ze.showMenuItem(L),Ze.hideMenuItem(K)):Ae==="bend"&&rt?(Ze.showMenuItem(K),Ze.hideMenuItem(L)):rt?(Ze.showMenuItem(K),Ze.showMenuItem(L)):(Ze.hideMenuItem(K),Ze.hideMenuItem(L)),u.currentCtxPos=xt):(Ze.hideMenuItem(K),Ze.hideMenuItem(L),Ae==="control"?(Ze.showMenuItem(F),Ze.hideMenuItem(T),fe.enableMultipleAnchorRemovalOption&&pe.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&Ze.showMenuItem(W)):Ae==="bend"?(Ze.showMenuItem(T),Ze.hideMenuItem(F)):(Ze.hideMenuItem(T),Ze.hideMenuItem(F),Ze.hideMenuItem(W)),u.currentAnchorIndex=Xt),u.currentCtxEdge=pe}),d.on("cyedgeediting.changeAnchorPoints","edge",function(){d.startBatch(),d.edges().unselect(),d.trigger("bendPointMovement"),d.endBatch(),ve()});var Bt=!1,Pt={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(Pe){if(typeof te().moveSelectedAnchorsOnKeyEvents=="function"?te().moveSelectedAnchorsOnKeyEvents():te().moveSelectedAnchorsOnKeyEvents){var pe,Ae,Ke=document.activeElement.tagName;if(Ke!="TEXTAREA"&&Ke!="INPUT"){switch(Pe.keyCode){case 37:case 39:case 38:case 40:case 32:Pe.preventDefault()}if(Pe.keyCode<"37"||Pe.keyCode>"40"||(Pt[Pe.keyCode]=!0,d.edges(":selected").length!=d.elements(":selected").length||d.edges(":selected").length!=1))return;Bt||(qt=d.edges(":selected"),d.trigger("edgeediting.movestart",[qt]),Bt=!0);var rt=3;if(Pe.altKey&&Pe.shiftKey)return;Pe.altKey?rt=1:Pe.shiftKey&&(rt=10);var Ze=0,xt=0;Ze+=Pt[39]?rt:0,Ze-=Pt[37]?rt:0,xt+=Pt[40]?rt:0,xt-=Pt[38]?rt:0,pe={x:Ze,y:xt},(Ae=qt).forEach(function(Xt){var Wt=u.getAnchorsAsArray(Xt),$t=[];if(Wt!=null){for(var gt=0;gt<Wt.length;gt+=2)$t.push({x:Wt[gt]+pe.x,y:Wt[gt+1]+pe.y});var Qt=u.getEdgeType(Xt);if(u.edgeTypeNoneShouldntHappen(Qt,"UiUtilities.js, moveAnchorPoints"))return;Qt==="bend"?g.bendPointPositionsSetterFunction(Xt,$t):Qt==="control"&&g.controlPointPositionsSetterFunction(Xt,$t)}}),u.initAnchorPoints(te().bendPositionsFunction,te().controlPositionsFunction,Ae),d.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(Pe){Pe.keyCode<"37"||Pe.keyCode>"40"||(Pe.preventDefault(),Pt[Pe.keyCode]=!1,(typeof te().moveSelectedAnchorsOnKeyEvents=="function"?te().moveSelectedAnchorsOnKeyEvents():te().moveSelectedAnchorsOnKeyEvents)&&(d.trigger("edgeediting.moveend",[qt]),qt=void 0,Bt=!1))},!0),ce.data("cyedgeediting",ne)},unbind:function(){d.off("remove","node",w).off("add","node",C).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",x).off("select","edge",S).off("unselect","edge",P).off("tapstart",D).off("tapstart","edge",v).off("tapdrag",E).off("tapend",k).off("cxttap",N).off("drag","node",O).off("data","edge",I),d.unbind("zoom pan",m)}};return oe[b]?oe[b].apply($(d.container()),Array.prototype.slice.call(arguments,1)):(b===void 0?"undefined":s(b))!="object"&&b?($.error("No such function `"+b+"` for cytoscape.js-edge-editing"),$(this)):oe.init.apply($(d.container()),arguments)}},259:a=>{var i={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(o){this.ignoredClasses=o},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(o){return o?o.hasClass(this.syntax.bend.class)?"bend":o.hasClass(this.syntax.control.class)?"control":o.css("curve-style")===this.syntax.bend.edge?"bend":o.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(o)&&this.options.bendPositionsFunction(o).length>0?"bend":this.options.controlPositionsFunction(o)&&this.options.controlPositionsFunction(o).length>0?"control":"none":"none"},initAnchorPoints:function(o,s,l){for(var u=0;u<l.length;u++){var f=l[u],c=this.getEdgeType(f);if(c!=="none"&&!this.isIgnoredEdge(f)){var p;c==="bend"?p=o.apply(this,f):c==="control"&&(p=s.apply(this,f));var g={weights:[],distances:[]};if(p)g=this.convertToRelativePositions(f,p);else{var d=f.data(this.syntax[c].weight),b=f.data(this.syntax[c].distance);d&&b&&(g={weights:d,distances:b})}g.distances.length>0?(f.data(this.syntax[c].weight,g.weights),f.data(this.syntax[c].distance,g.distances),f.addClass(this.syntax[c].class),g.distances.length>1&&f.addClass(this.syntax[c].multiClass)):(f.data(this.syntax[c].weight,[]),f.data(this.syntax[c].distance,[]),f.hasClass(this.syntax[c].class)&&f.removeClass(this.syntax[c].class),f.hasClass(this.syntax[c].multiClass)&&f.removeClass(this.syntax[c].multiClass))}}},isIgnoredEdge:function(o){var s=o.source().position("x"),l=o.source().position("y"),u=o.target().position("x"),f=o.target().position("y");if(s==u&&l==f||o.source().id()==o.target().id())return!0;for(var c=0;this.ignoredClasses&&c<this.ignoredClasses.length;c++)if(o.hasClass(this.ignoredClasses[c]))return!0;return!1},getLineDirection:function(o,s){return o.y==s.y&&o.x<s.x?1:o.y<s.y&&o.x<s.x?2:o.y<s.y&&o.x==s.x?3:o.y<s.y&&o.x>s.x?4:o.y==s.y&&o.x>s.x?5:o.y>s.y&&o.x>s.x?6:o.y>s.y&&o.x==s.x?7:8},getSrcTgtPointsAndTangents:function(o){var s=o.source(),l=o.target(),u=(l.position(),s.position(),s.position()),f=l.position(),c=(f.y-u.y)/(f.x-u.x);return{m1:c,m2:-1/c,srcPoint:u,tgtPoint:f}},getIntersection:function(o,s,l){l===void 0&&(l=this.getSrcTgtPointsAndTangents(o));var u,f,c=l.srcPoint,p=(l.tgtPoint,l.m1),g=l.m2;if(p==1/0||p==-1/0)u=c.x,f=s.y;else if(p==0)u=s.x,f=c.y;else{var d=c.y-p*c.x;f=p*(u=(s.y-g*s.x-d)/(p-g))+d}return{x:u,y:f}},getAnchorsAsArray:function(o){var s=this.getEdgeType(o);if(s!=="none"&&o.css("curve-style")===this.syntax[s].edge){for(var l=[],u=o.pstyle(this.syntax[s].weightCss)?o.pstyle(this.syntax[s].weightCss).pfValue:[],f=o.pstyle(this.syntax[s].distanceCss)?o.pstyle(this.syntax[s].distanceCss).pfValue:[],c=Math.min(u.length,f.length),p=o.source().position(),g=o.target().position(),d=g.y-p.y,b=g.x-p.x,x=Math.sqrt(b*b+d*d),w={x:b/x,y:d/x},C=-w.y,m=w.x,S=0;S<c;S++){var P=u[S],D=f[S],v=1-P,E=P,k={x1:p.x,x2:g.x,y1:p.y,y2:g.y},N={x:k.x1*v+k.x2*E,y:k.y1*v+k.y2*E};l.push(N.x+C*D,N.y+m*D)}return l}},convertToRelativePosition:function(o,s,l){l===void 0&&(l=this.getSrcTgtPointsAndTangents(o));var u,f=this.getIntersection(o,s,l),c=f.x,p=f.y,g=l.srcPoint,d=l.tgtPoint;u=c!=g.x?(c-g.x)/(d.x-g.x):p!=g.y?(p-g.y)/(d.y-g.y):0;var b=Math.sqrt(Math.pow(p-s.y,2)+Math.pow(c-s.x,2)),x=this.getLineDirection(g,d),w=this.getLineDirection(f,s);return x-w!=-2&&x-w!=6&&b!=0&&(b*=-1),{weight:u,distance:b}},convertToRelativePositions:function(o,s){for(var l=this.getSrcTgtPointsAndTangents(o),u=[],f=[],c=0;s&&c<s.length;c++){var p=s[c],g=this.convertToRelativePosition(o,p,l);u.push(g.weight),f.push(g.distance)}return{weights:u,distances:f}},getDistancesString:function(o,s){for(var l="",u=o.data(this.syntax[s].distance),f=0;u&&f<u.length;f++)l=l+" "+u[f];return l},getWeightsString:function(o,s){for(var l="",u=o.data(this.syntax[s].weight),f=0;u&&f<u.length;f++)l=l+" "+u[f];return l},addAnchorPoint:function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentCtxPos),l===void 0&&(l=this.getEdgeType(o));for(var u,f=this.syntax[l].weight,c=this.syntax[l].distance,p=this.convertToRelativePosition(o,s),g=p.weight,d=o.source().position("x"),b=o.source().position("y"),x=o.target().position("x"),w=o.target().position("y"),C=this.convertToRelativePosition(o,{x:d,y:b}).weight,m=this.convertToRelativePosition(o,{x,y:w}).weight,S=[C].concat(o.data(f)?o.data(f):[]).concat([m]),P=this.getAnchorsAsArray(o),D=1/0,v=[d,b].concat(P||[]).concat([x,w]),E=-1,k=0;k<S.length-1;k++){var N=S[k],O=S[k+1],I=this.compareWithPrecision(g,N,!0),H=this.compareWithPrecision(g,O),G=this.compareWithPrecision(g,O,!0),Y=this.compareWithPrecision(g,N);if(I&&H||G&&Y){var j={x:d=v[2*k],y:b=v[2*k+1]},q={x:x=v[2*k+2],y:w=v[2*k+3]},X=(b-w)/(d-x),K=-1/X,T={srcPoint:j,tgtPoint:q,m1:X,m2:K},M=this.getIntersection(o,s,T),L=Math.sqrt(Math.pow(s.x-M.x,2)+Math.pow(s.y-M.y,2));L<D&&(D=L,u=M,E=k)}}u!==void 0&&(s=u),p=this.convertToRelativePosition(o,s),u===void 0&&(p.distance=0);var F=o.data(f),W=o.data(c);return W=W||[],(F=F||[]).length===0&&(E=0),E!=-1&&(F.splice(E,0,p.weight),W.splice(E,0,p.distance)),o.data(f,F),o.data(c,W),o.addClass(this.syntax[l].class),(F.length>1||W.length>1)&&o.addClass(this.syntax[l].multiClass),E},removeAnchor:function(o,s){o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentAnchorIndex);var l=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(l,"anchorPointUtilities.js, removeAnchor")){var u,f=this.syntax[l].weight,c=this.syntax[l].distance,p=o.data(f),g=o.data(c);l==="bend"?u=this.options.bendPositionsFunction(o):l==="control"&&(u=this.options.controlPositionsFunction(o)),p.splice(s,1),g.splice(s,1),u&&u.splice(s,1),p.length==1||g.length==1?o.removeClass(this.syntax[l].multiClass):p.length==0||g.length==0?(o.removeClass(this.syntax[l].class),o.data(f,[]),o.data(c,[])):(o.data(f,p),o.data(c,g))}},removeAllAnchors:function(o){o===void 0&&(o=this.currentCtxEdge);var s=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(s,"anchorPointUtilities.js, removeAllAnchors")){o.removeClass(this.syntax[s].class),o.removeClass(this.syntax[s].multiClass);var l=this.syntax[s].weight,u=this.syntax[s].distance;o.data(l,[]),o.data(u,[]),s==="bend"&&this.options.bendPositionsFunction(o)?this.options.bendPointPositionsSetterFunction(o,[]):s==="control"&&this.options.controlPositionsFunction(o)&&this.options.controlPointPositionsSetterFunction(o,[])}},calculateDistance:function(o,s){var l=o.x-s.x,u=o.y-s.y;return Math.sqrt(Math.pow(l,2)+Math.pow(u,2))},compareWithPrecision:function(o,s){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.01,f=o-s;return Math.abs(f)<=u||(l?o<s:o>s)},edgeTypeNoneShouldntHappen:function(o,s){return o==="none"&&(console.log("In "+s+": edge type none should never happen here!!"),!0)}};a.exports=i},218:a=>{var i,o,s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},l=(i=Math.max,o=Date.now||function(){return new Date().getTime()},function(u,f,c){var p,g,d,b,x,w,C,m,S,P=0,D=!1,v=!0;if(typeof u!="function")throw new TypeError("Expected a function");if(f=f<0?0:+f||0,c===!0){var E=!0;v=!1}else S=(m=c)===void 0?"undefined":s(m),!m||S!="object"&&S!="function"||(E=!!c.leading,D="maxWait"in c&&i(+c.maxWait||0,f),v="trailing"in c?!!c.trailing:v);function k(H,G){G&&clearTimeout(G),g=w=C=void 0,H&&(P=o(),d=u.apply(x,p),w||g||(p=x=void 0))}function N(){var H=f-(o()-b);H<=0||H>f?k(C,g):w=setTimeout(N,H)}function O(){k(v,w)}function I(){if(p=arguments,b=o(),x=this,C=v&&(w||!E),D===!1)var H=E&&!w;else{g||E||(P=b);var G=D-(b-P),Y=G<=0||G>D;Y?(g&&(g=clearTimeout(g)),P=b,d=u.apply(x,p)):g||(g=setTimeout(O,G))}return Y&&w?w=clearTimeout(w):w||f===D||(w=setTimeout(N,f)),H&&(Y=!0,d=u.apply(x,p)),!Y||w||g||(p=x=void 0),d}return I.cancel=function(){w&&clearTimeout(w),g&&clearTimeout(g),P=0,g=w=C=void 0},I});a.exports=l},579:(a,i,o)=>{var s,l,u;l=o(259),o(218),u=function(f,c,p){var g=o(347);if(f&&c&&p){var d,b={bendPositionsFunction:function(w){return w.data("bendPointPositions")},controlPositionsFunction:function(w){return w.data("controlPointPositions")},bendPointPositionsSetterFunction:function(w,C){w.data("bendPointPositions",C)},controlPointPositionsSetterFunction:function(w,C){w.data("controlPointPositions",C)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},x=!1;f("core","edgeEditing",function(w){var C=this;return w==="initialized"?x:(w!=="get"&&(d=function(m,S){var P={};for(var D in m)P[D]=m[D];for(var D in S)if(D=="bendRemovalSensitivity"){var v=S[D];isNaN(v)||(P[D]=v>=0&&v<=20?S[D]:v<0?0:20)}else P[D]=S[D];return P}(b,w),x=!0,C.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(m){return l.getDistancesString(m,"bend")},"segment-weights":function(m){return l.getWeightsString(m,"bend")},"edge-distances":"node-position"}),C.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(m){return l.getDistancesString(m,"control")},"control-point-weights":function(m){return l.getWeightsString(m,"control")},"edge-distances":"node-position"}),C.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),l.setIgnoredClasses(d.ignoredClasses),d.initAnchorsAutomatically&&l.initAnchorPoints(d.bendPositionsFunction,d.controlPositionsFunction,C.edges(),d.ignoredClasses),g(d,C)),x?{getAnchorsAsArray:function(m){return l.getAnchorsAsArray(m)},initAnchorPoints:function(m){l.initAnchorPoints(d.bendPositionsFunction,d.controlPositionsFunction,m)},deleteSelectedAnchor:function(m,S){l.removeAnchor(m,S)},getEdgeType:function(m){return l.getEdgeType(m)}}:void 0)})}},a.exports&&(a.exports=u),(s=function(){return u}.call(i,o,i,a))===void 0||(a.exports=s),typeof cytoscape!="undefined"&&$&&Konva&&u(cytoscape,$,Konva)},171:a=>{a.exports={disconnectEdge:function(i,o,s,l){var u={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:s};o.add(u);var f=l==="source"?{source:u.data.id}:{target:u.data.id};return i=i.move(f)[0],{dummyNode:o.nodes("#"+u.data.id)[0],edge:i}},connectEdge:function(i,o,s){if(i.isEdge()&&o.isNode()){var l={};if(s==="source")l.source=o.id();else{if(s!=="target")return;l.target=o.id()}return i.move(l)[0]}},copyEdge:function(i,o){this.copyAnchors(i,o),this.copyStyle(i,o)},copyStyle:function(i,o){i&&o&&(o.data("line-color",i.data("line-color")),o.data("width",i.data("width")),o.data("cardinality",i.data("cardinality")))},copyAnchors:function(i,o){if(i.hasClass("edgebendediting-hasbendpoints")){var s=i.data("cyedgebendeditingDistances"),l=i.data("cyedgebendeditingWeights");o.data("cyedgebendeditingDistances",s),o.data("cyedgebendeditingWeights",l),o.addClass("edgebendediting-hasbendpoints")}else i.hasClass("edgecontrolediting-hascontrolpoints")&&(s=i.data("cyedgecontroleditingDistances"),l=i.data("cyedgecontroleditingWeights"),o.data("cyedgecontroleditingDistances",s),o.data("cyedgecontroleditingWeights",l),o.addClass("edgecontrolediting-hascontrolpoints"));i.hasClass("edgebendediting-hasmultiplebendpoints")?o.addClass("edgebendediting-hasmultiplebendpoints"):i.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&o.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:a=>{a.exports=function(i,o,s){if(i.undoRedo!=null){var l=i.undoRedo({defaultActions:!1,isDebug:!0});l.action("changeAnchorPoints",u,u),l.action("moveAnchorPoints",f,f),l.action("reconnectEdge",c,c),l.action("removeReconnectedEdge",p,p)}function u(g){var d,b,x,w,C=i.getElementById(g.edge.id()),m=g.type!=="none"?g.type:o.getEdgeType(C);g.type!=="none"||g.set?(x=o.syntax[m].weight,w=o.syntax[m].distance,d=g.set?C.data(x):g.weights,b=g.set?C.data(w):g.distances):(d=[],b=[]);var S={edge:C,type:m,weights:d,distances:b,set:!0};if(g.set){var P=g.weights&&g.weights.length>0,D=P&&g.weights.length>1;P&&(C.data(x,g.weights),C.data(w,g.distances));var v=o.syntax[m].class,E=o.syntax[m].multiClass;P||D?P&&!D?(C.addClass(v),C.removeClass(E)):C.addClass(v+" "+E):C.removeClass(v+" "+E),P||(C.data(x,[]),C.data(w,[])),C.selected()&&C.unselect(),C.select()}return C.trigger("cyedgeediting.changeAnchorPoints"),S}function f(g){if(g.firstTime)return delete g.firstTime,g;var d=g.edges,b=g.positionDiff,x={edges:d,positionDiff:{x:-b.x,y:-b.y}};return function(w,C){C.forEach(function(m){var S=o.getEdgeType(m),P=o.getAnchorsAsArray(m),D=[];if(P!=null){for(var v=0;v<P.length;v+=2)D.push({x:P[v]+w.x,y:P[v+1]+w.y});S==="bend"?s.bendPointPositionsSetterFunction(m,D):S==="control"&&s.controlPointPositionsSetterFunction(m,D)}}),o.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,C)}(b,d),x}function c(g){var d=g.edge,b=g.location,x=g.oldLoc,w={edge:d=d.move(b)[0],location:x,oldLoc:b};return d.unselect(),w}function p(g){var d=g.oldEdge;(b=i.getElementById(d.data("id")))&&b.length>0&&(d=b);var b,x=g.newEdge;return(b=i.getElementById(x.data("id")))&&b.length>0&&(x=b),d.inside()&&(d=d.remove()[0]),x.removed()&&(x=x.restore()).unselect(),{oldEdge:x,newEdge:d}}}}},n={};return function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,a),s.exports}(579)})()})})(Pv);var Ux=Pv.exports,kv={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(r){(function(e,t){r.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window!="undefined"?window:Xe,function(e,t){var n=[],a=Object.getPrototypeOf,i=n.slice,o=n.flat?function(h){return n.flat.call(h)}:function(h){return n.concat.apply([],h)},s=n.push,l=n.indexOf,u={},f=u.toString,c=u.hasOwnProperty,p=c.toString,g=p.call(Object),d={},b=function(y){return typeof y=="function"&&typeof y.nodeType!="number"&&typeof y.item!="function"},x=function(y){return y!=null&&y===y.window},w=e.document,C={type:!0,src:!0,nonce:!0,noModule:!0};function m(h,y,_){_=_||w;var A,R,B=_.createElement("script");if(B.text=h,y)for(A in C)R=y[A]||y.getAttribute&&y.getAttribute(A),R&&B.setAttribute(A,R);_.head.appendChild(B).parentNode.removeChild(B)}function S(h){return h==null?h+"":typeof h=="object"||typeof h=="function"?u[f.call(h)]||"object":typeof h}var P="3.7.1",D=/HTML$/i,v=function(h,y){return new v.fn.init(h,y)};v.fn=v.prototype={jquery:P,constructor:v,length:0,toArray:function(){return i.call(this)},get:function(h){return h==null?i.call(this):h<0?this[h+this.length]:this[h]},pushStack:function(h){var y=v.merge(this.constructor(),h);return y.prevObject=this,y},each:function(h){return v.each(this,h)},map:function(h){return this.pushStack(v.map(this,function(y,_){return h.call(y,_,y)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(h,y){return(y+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(h,y){return y%2}))},eq:function(h){var y=this.length,_=+h+(h<0?y:0);return this.pushStack(_>=0&&_<y?[this[_]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},v.extend=v.fn.extend=function(){var h,y,_,A,R,B,U=arguments[0]||{},ae=1,re=arguments.length,le=!1;for(typeof U=="boolean"&&(le=U,U=arguments[ae]||{},ae++),typeof U!="object"&&!b(U)&&(U={}),ae===re&&(U=this,ae--);ae<re;ae++)if((h=arguments[ae])!=null)for(y in h)A=h[y],!(y==="__proto__"||U===A)&&(le&&A&&(v.isPlainObject(A)||(R=Array.isArray(A)))?(_=U[y],R&&!Array.isArray(_)?B=[]:!R&&!v.isPlainObject(_)?B={}:B=_,R=!1,U[y]=v.extend(le,B,A)):A!==void 0&&(U[y]=A));return U},v.extend({expando:"jQuery"+(P+Math.random()).replace(/\D/g,""),isReady:!0,error:function(h){throw new Error(h)},noop:function(){},isPlainObject:function(h){var y,_;return!h||f.call(h)!=="[object Object]"?!1:(y=a(h),y?(_=c.call(y,"constructor")&&y.constructor,typeof _=="function"&&p.call(_)===g):!0)},isEmptyObject:function(h){var y;for(y in h)return!1;return!0},globalEval:function(h,y,_){m(h,{nonce:y&&y.nonce},_)},each:function(h,y){var _,A=0;if(E(h))for(_=h.length;A<_&&y.call(h[A],A,h[A])!==!1;A++);else for(A in h)if(y.call(h[A],A,h[A])===!1)break;return h},text:function(h){var y,_="",A=0,R=h.nodeType;if(!R)for(;y=h[A++];)_+=v.text(y);return R===1||R===11?h.textContent:R===9?h.documentElement.textContent:R===3||R===4?h.nodeValue:_},makeArray:function(h,y){var _=y||[];return h!=null&&(E(Object(h))?v.merge(_,typeof h=="string"?[h]:h):s.call(_,h)),_},inArray:function(h,y,_){return y==null?-1:l.call(y,h,_)},isXMLDoc:function(h){var y=h&&h.namespaceURI,_=h&&(h.ownerDocument||h).documentElement;return!D.test(y||_&&_.nodeName||"HTML")},merge:function(h,y){for(var _=+y.length,A=0,R=h.length;A<_;A++)h[R++]=y[A];return h.length=R,h},grep:function(h,y,_){for(var A,R=[],B=0,U=h.length,ae=!_;B<U;B++)A=!y(h[B],B),A!==ae&&R.push(h[B]);return R},map:function(h,y,_){var A,R,B=0,U=[];if(E(h))for(A=h.length;B<A;B++)R=y(h[B],B,_),R!=null&&U.push(R);else for(B in h)R=y(h[B],B,_),R!=null&&U.push(R);return o(U)},guid:1,support:d}),typeof Symbol=="function"&&(v.fn[Symbol.iterator]=n[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(h,y){u["[object "+y+"]"]=y.toLowerCase()});function E(h){var y=!!h&&"length"in h&&h.length,_=S(h);return b(h)||x(h)?!1:_==="array"||y===0||typeof y=="number"&&y>0&&y-1 in h}function k(h,y){return h.nodeName&&h.nodeName.toLowerCase()===y.toLowerCase()}var N=n.pop,O=n.sort,I=n.splice,H="[\\x20\\t\\r\\n\\f]",G=new RegExp("^"+H+"+|((?:^|[^\\\\])(?:\\\\.)*)"+H+"+$","g");v.contains=function(h,y){var _=y&&y.parentNode;return h===_||!!(_&&_.nodeType===1&&(h.contains?h.contains(_):h.compareDocumentPosition&&h.compareDocumentPosition(_)&16))};var Y=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function j(h,y){return y?h==="\0"?"\uFFFD":h.slice(0,-1)+"\\"+h.charCodeAt(h.length-1).toString(16)+" ":"\\"+h}v.escapeSelector=function(h){return(h+"").replace(Y,j)};var q=w,X=s;(function(){var h,y,_,A,R,B=X,U,ae,re,le,be,Te=v.expando,de=0,Me=0,it=No(),wt=No(),ut=No(),wr=No(),ur=function(J,se){return J===se&&(R=!0),0},gn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",pn="(?:\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",mt="\\["+H+"*("+pn+")(?:"+H+"*([*^$|!~]?=)"+H+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+pn+"))|)"+H+"*\\]",Ca=":("+pn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+mt+")*)|.*)\\)|)",St=new RegExp(H+"+","g"),Jt=new RegExp("^"+H+"*,"+H+"*"),Bi=new RegExp("^"+H+"*([>+~]|"+H+")"+H+"*"),Xu=new RegExp(H+"|>"),yn=new RegExp(Ca),zi=new RegExp("^"+pn+"$"),mn={ID:new RegExp("^#("+pn+")"),CLASS:new RegExp("^\\.("+pn+")"),TAG:new RegExp("^("+pn+"|[*])"),ATTR:new RegExp("^"+mt),PSEUDO:new RegExp("^"+Ca),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+H+"*(even|odd|(([+-]|)(\\d*)n|)"+H+"*(?:([+-]|)"+H+"*(\\d+)|))"+H+"*\\)|)","i"),bool:new RegExp("^(?:"+gn+")$","i"),needsContext:new RegExp("^"+H+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+H+"*((?:-\\d)?\\d*)"+H+"*\\)|)(?=[^-]|$)","i")},Qn=/^(?:input|select|textarea|button)$/i,Zn=/^h\d$/i,Xr=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Qu=/[+~]/,Ln=new RegExp("\\\\[\\da-fA-F]{1,6}"+H+"?|\\\\([^\\r\\n\\f])","g"),Nn=function(J,se){var he="0x"+J.slice(1)-65536;return se||(he<0?String.fromCharCode(he+65536):String.fromCharCode(he>>10|55296,he&1023|56320))},Rg=function(){Jn()},Fg=Ro(function(J){return J.disabled===!0&&k(J,"fieldset")},{dir:"parentNode",next:"legend"});function Bg(){try{return U.activeElement}catch{}}try{B.apply(n=i.call(q.childNodes),q.childNodes),n[q.childNodes.length].nodeType}catch{B={apply:function(se,he){X.apply(se,i.call(he))},call:function(se){X.apply(se,i.call(arguments,1))}}}function Mt(J,se,he,ye){var Ee,Ie,Ve,je,He,pt,nt,ot=se&&se.ownerDocument,yt=se?se.nodeType:9;if(he=he||[],typeof J!="string"||!J||yt!==1&&yt!==9&&yt!==11)return he;if(!ye&&(Jn(se),se=se||U,re)){if(yt!==11&&(He=Xr.exec(J)))if(Ee=He[1]){if(yt===9)if(Ve=se.getElementById(Ee)){if(Ve.id===Ee)return B.call(he,Ve),he}else return he;else if(ot&&(Ve=ot.getElementById(Ee))&&Mt.contains(se,Ve)&&Ve.id===Ee)return B.call(he,Ve),he}else{if(He[2])return B.apply(he,se.getElementsByTagName(J)),he;if((Ee=He[3])&&se.getElementsByClassName)return B.apply(he,se.getElementsByClassName(Ee)),he}if(!wr[J+" "]&&(!le||!le.test(J))){if(nt=J,ot=se,yt===1&&(Xu.test(J)||Bi.test(J))){for(ot=Qu.test(J)&&Zu(se.parentNode)||se,(ot!=se||!d.scope)&&((je=se.getAttribute("id"))?je=v.escapeSelector(je):se.setAttribute("id",je=Te)),pt=Gi(J),Ie=pt.length;Ie--;)pt[Ie]=(je?"#"+je:":scope")+" "+Io(pt[Ie]);nt=pt.join(",")}try{return B.apply(he,ot.querySelectorAll(nt)),he}catch{wr(J,!0)}finally{je===Te&&se.removeAttribute("id")}}}return Qf(J.replace(G,"$1"),se,he,ye)}function No(){var J=[];function se(he,ye){return J.push(he+" ")>y.cacheLength&&delete se[J.shift()],se[he+" "]=ye}return se}function nn(J){return J[Te]=!0,J}function Ya(J){var se=U.createElement("fieldset");try{return!!J(se)}catch{return!1}finally{se.parentNode&&se.parentNode.removeChild(se),se=null}}function zg(J){return function(se){return k(se,"input")&&se.type===J}}function Gg(J){return function(se){return(k(se,"input")||k(se,"button"))&&se.type===J}}function Yf(J){return function(se){return"form"in se?se.parentNode&&se.disabled===!1?"label"in se?"label"in se.parentNode?se.parentNode.disabled===J:se.disabled===J:se.isDisabled===J||se.isDisabled!==!J&&Fg(se)===J:se.disabled===J:"label"in se?se.disabled===J:!1}}function _a(J){return nn(function(se){return se=+se,nn(function(he,ye){for(var Ee,Ie=J([],he.length,se),Ve=Ie.length;Ve--;)he[Ee=Ie[Ve]]&&(he[Ee]=!(ye[Ee]=he[Ee]))})})}function Zu(J){return J&&typeof J.getElementsByTagName!="undefined"&&J}function Jn(J){var se,he=J?J.ownerDocument||J:q;return he==U||he.nodeType!==9||!he.documentElement||(U=he,ae=U.documentElement,re=!v.isXMLDoc(U),be=ae.matches||ae.webkitMatchesSelector||ae.msMatchesSelector,ae.msMatchesSelector&&q!=U&&(se=U.defaultView)&&se.top!==se&&se.addEventListener("unload",Rg),d.getById=Ya(function(ye){return ae.appendChild(ye).id=v.expando,!U.getElementsByName||!U.getElementsByName(v.expando).length}),d.disconnectedMatch=Ya(function(ye){return be.call(ye,"*")}),d.scope=Ya(function(){return U.querySelectorAll(":scope")}),d.cssHas=Ya(function(){try{return U.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),d.getById?(y.filter.ID=function(ye){var Ee=ye.replace(Ln,Nn);return function(Ie){return Ie.getAttribute("id")===Ee}},y.find.ID=function(ye,Ee){if(typeof Ee.getElementById!="undefined"&&re){var Ie=Ee.getElementById(ye);return Ie?[Ie]:[]}}):(y.filter.ID=function(ye){var Ee=ye.replace(Ln,Nn);return function(Ie){var Ve=typeof Ie.getAttributeNode!="undefined"&&Ie.getAttributeNode("id");return Ve&&Ve.value===Ee}},y.find.ID=function(ye,Ee){if(typeof Ee.getElementById!="undefined"&&re){var Ie,Ve,je,He=Ee.getElementById(ye);if(He){if(Ie=He.getAttributeNode("id"),Ie&&Ie.value===ye)return[He];for(je=Ee.getElementsByName(ye),Ve=0;He=je[Ve++];)if(Ie=He.getAttributeNode("id"),Ie&&Ie.value===ye)return[He]}return[]}}),y.find.TAG=function(ye,Ee){return typeof Ee.getElementsByTagName!="undefined"?Ee.getElementsByTagName(ye):Ee.querySelectorAll(ye)},y.find.CLASS=function(ye,Ee){if(typeof Ee.getElementsByClassName!="undefined"&&re)return Ee.getElementsByClassName(ye)},le=[],Ya(function(ye){var Ee;ae.appendChild(ye).innerHTML="<a id='"+Te+"' href='' disabled='disabled'></a><select id='"+Te+"-\r\\' disabled='disabled'><option selected=''></option></select>",ye.querySelectorAll("[selected]").length||le.push("\\["+H+"*(?:value|"+gn+")"),ye.querySelectorAll("[id~="+Te+"-]").length||le.push("~="),ye.querySelectorAll("a#"+Te+"+*").length||le.push(".#.+[+~]"),ye.querySelectorAll(":checked").length||le.push(":checked"),Ee=U.createElement("input"),Ee.setAttribute("type","hidden"),ye.appendChild(Ee).setAttribute("name","D"),ae.appendChild(ye).disabled=!0,ye.querySelectorAll(":disabled").length!==2&&le.push(":enabled",":disabled"),Ee=U.createElement("input"),Ee.setAttribute("name",""),ye.appendChild(Ee),ye.querySelectorAll("[name='']").length||le.push("\\["+H+"*name"+H+"*="+H+`*(?:''|"")`)}),d.cssHas||le.push(":has"),le=le.length&&new RegExp(le.join("|")),ur=function(ye,Ee){if(ye===Ee)return R=!0,0;var Ie=!ye.compareDocumentPosition-!Ee.compareDocumentPosition;return Ie||(Ie=(ye.ownerDocument||ye)==(Ee.ownerDocument||Ee)?ye.compareDocumentPosition(Ee):1,Ie&1||!d.sortDetached&&Ee.compareDocumentPosition(ye)===Ie?ye===U||ye.ownerDocument==q&&Mt.contains(q,ye)?-1:Ee===U||Ee.ownerDocument==q&&Mt.contains(q,Ee)?1:A?l.call(A,ye)-l.call(A,Ee):0:Ie&4?-1:1)}),U}Mt.matches=function(J,se){return Mt(J,null,null,se)},Mt.matchesSelector=function(J,se){if(Jn(J),re&&!wr[se+" "]&&(!le||!le.test(se)))try{var he=be.call(J,se);if(he||d.disconnectedMatch||J.document&&J.document.nodeType!==11)return he}catch{wr(se,!0)}return Mt(se,U,null,[J]).length>0},Mt.contains=function(J,se){return(J.ownerDocument||J)!=U&&Jn(J),v.contains(J,se)},Mt.attr=function(J,se){(J.ownerDocument||J)!=U&&Jn(J);var he=y.attrHandle[se.toLowerCase()],ye=he&&c.call(y.attrHandle,se.toLowerCase())?he(J,se,!re):void 0;return ye!==void 0?ye:J.getAttribute(se)},Mt.error=function(J){throw new Error("Syntax error, unrecognized expression: "+J)},v.uniqueSort=function(J){var se,he=[],ye=0,Ee=0;if(R=!d.sortStable,A=!d.sortStable&&i.call(J,0),O.call(J,ur),R){for(;se=J[Ee++];)se===J[Ee]&&(ye=he.push(Ee));for(;ye--;)I.call(J,he[ye],1)}return A=null,J},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(i.apply(this)))},y=v.expr={cacheLength:50,createPseudo:nn,match:mn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(J){return J[1]=J[1].replace(Ln,Nn),J[3]=(J[3]||J[4]||J[5]||"").replace(Ln,Nn),J[2]==="~="&&(J[3]=" "+J[3]+" "),J.slice(0,4)},CHILD:function(J){return J[1]=J[1].toLowerCase(),J[1].slice(0,3)==="nth"?(J[3]||Mt.error(J[0]),J[4]=+(J[4]?J[5]+(J[6]||1):2*(J[3]==="even"||J[3]==="odd")),J[5]=+(J[7]+J[8]||J[3]==="odd")):J[3]&&Mt.error(J[0]),J},PSEUDO:function(J){var se,he=!J[6]&&J[2];return mn.CHILD.test(J[0])?null:(J[3]?J[2]=J[4]||J[5]||"":he&&yn.test(he)&&(se=Gi(he,!0))&&(se=he.indexOf(")",he.length-se)-he.length)&&(J[0]=J[0].slice(0,se),J[2]=he.slice(0,se)),J.slice(0,3))}},filter:{TAG:function(J){var se=J.replace(Ln,Nn).toLowerCase();return J==="*"?function(){return!0}:function(he){return k(he,se)}},CLASS:function(J){var se=it[J+" "];return se||(se=new RegExp("(^|"+H+")"+J+"("+H+"|$)"))&&it(J,function(he){return se.test(typeof he.className=="string"&&he.className||typeof he.getAttribute!="undefined"&&he.getAttribute("class")||"")})},ATTR:function(J,se,he){return function(ye){var Ee=Mt.attr(ye,J);return Ee==null?se==="!=":se?(Ee+="",se==="="?Ee===he:se==="!="?Ee!==he:se==="^="?he&&Ee.indexOf(he)===0:se==="*="?he&&Ee.indexOf(he)>-1:se==="$="?he&&Ee.slice(-he.length)===he:se==="~="?(" "+Ee.replace(St," ")+" ").indexOf(he)>-1:se==="|="?Ee===he||Ee.slice(0,he.length+1)===he+"-":!1):!0}},CHILD:function(J,se,he,ye,Ee){var Ie=J.slice(0,3)!=="nth",Ve=J.slice(-4)!=="last",je=se==="of-type";return ye===1&&Ee===0?function(He){return!!He.parentNode}:function(He,pt,nt){var ot,yt,et,Gt,$r,Pr=Ie!==Ve?"nextSibling":"previousSibling",Qr=He.parentNode,bn=je&&He.nodeName.toLowerCase(),Xa=!nt&&!je,Rr=!1;if(Qr){if(Ie){for(;Pr;){for(et=He;et=et[Pr];)if(je?k(et,bn):et.nodeType===1)return!1;$r=Pr=J==="only"&&!$r&&"nextSibling"}return!0}if($r=[Ve?Qr.firstChild:Qr.lastChild],Ve&&Xa){for(yt=Qr[Te]||(Qr[Te]={}),ot=yt[J]||[],Gt=ot[0]===de&&ot[1],Rr=Gt&&ot[2],et=Gt&&Qr.childNodes[Gt];et=++Gt&&et&&et[Pr]||(Rr=Gt=0)||$r.pop();)if(et.nodeType===1&&++Rr&&et===He){yt[J]=[de,Gt,Rr];break}}else if(Xa&&(yt=He[Te]||(He[Te]={}),ot=yt[J]||[],Gt=ot[0]===de&&ot[1],Rr=Gt),Rr===!1)for(;(et=++Gt&&et&&et[Pr]||(Rr=Gt=0)||$r.pop())&&!((je?k(et,bn):et.nodeType===1)&&++Rr&&(Xa&&(yt=et[Te]||(et[Te]={}),yt[J]=[de,Rr]),et===He)););return Rr-=Ee,Rr===ye||Rr%ye===0&&Rr/ye>=0}}},PSEUDO:function(J,se){var he,ye=y.pseudos[J]||y.setFilters[J.toLowerCase()]||Mt.error("unsupported pseudo: "+J);return ye[Te]?ye(se):ye.length>1?(he=[J,J,"",se],y.setFilters.hasOwnProperty(J.toLowerCase())?nn(function(Ee,Ie){for(var Ve,je=ye(Ee,se),He=je.length;He--;)Ve=l.call(Ee,je[He]),Ee[Ve]=!(Ie[Ve]=je[He])}):function(Ee){return ye(Ee,0,he)}):ye}},pseudos:{not:nn(function(J){var se=[],he=[],ye=rl(J.replace(G,"$1"));return ye[Te]?nn(function(Ee,Ie,Ve,je){for(var He,pt=ye(Ee,null,je,[]),nt=Ee.length;nt--;)(He=pt[nt])&&(Ee[nt]=!(Ie[nt]=He))}):function(Ee,Ie,Ve){return se[0]=Ee,ye(se,null,Ve,he),se[0]=null,!he.pop()}}),has:nn(function(J){return function(se){return Mt(J,se).length>0}}),contains:nn(function(J){return J=J.replace(Ln,Nn),function(se){return(se.textContent||v.text(se)).indexOf(J)>-1}}),lang:nn(function(J){return zi.test(J||"")||Mt.error("unsupported lang: "+J),J=J.replace(Ln,Nn).toLowerCase(),function(se){var he;do if(he=re?se.lang:se.getAttribute("xml:lang")||se.getAttribute("lang"))return he=he.toLowerCase(),he===J||he.indexOf(J+"-")===0;while((se=se.parentNode)&&se.nodeType===1);return!1}}),target:function(J){var se=e.location&&e.location.hash;return se&&se.slice(1)===J.id},root:function(J){return J===ae},focus:function(J){return J===Bg()&&U.hasFocus()&&!!(J.type||J.href||~J.tabIndex)},enabled:Yf(!1),disabled:Yf(!0),checked:function(J){return k(J,"input")&&!!J.checked||k(J,"option")&&!!J.selected},selected:function(J){return J.parentNode&&J.parentNode.selectedIndex,J.selected===!0},empty:function(J){for(J=J.firstChild;J;J=J.nextSibling)if(J.nodeType<6)return!1;return!0},parent:function(J){return!y.pseudos.empty(J)},header:function(J){return Zn.test(J.nodeName)},input:function(J){return Qn.test(J.nodeName)},button:function(J){return k(J,"input")&&J.type==="button"||k(J,"button")},text:function(J){var se;return k(J,"input")&&J.type==="text"&&((se=J.getAttribute("type"))==null||se.toLowerCase()==="text")},first:_a(function(){return[0]}),last:_a(function(J,se){return[se-1]}),eq:_a(function(J,se,he){return[he<0?he+se:he]}),even:_a(function(J,se){for(var he=0;he<se;he+=2)J.push(he);return J}),odd:_a(function(J,se){for(var he=1;he<se;he+=2)J.push(he);return J}),lt:_a(function(J,se,he){var ye;for(he<0?ye=he+se:he>se?ye=se:ye=he;--ye>=0;)J.push(ye);return J}),gt:_a(function(J,se,he){for(var ye=he<0?he+se:he;++ye<se;)J.push(ye);return J})}},y.pseudos.nth=y.pseudos.eq;for(h in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})y.pseudos[h]=zg(h);for(h in{submit:!0,reset:!0})y.pseudos[h]=Gg(h);function Xf(){}Xf.prototype=y.filters=y.pseudos,y.setFilters=new Xf;function Gi(J,se){var he,ye,Ee,Ie,Ve,je,He,pt=wt[J+" "];if(pt)return se?0:pt.slice(0);for(Ve=J,je=[],He=y.preFilter;Ve;){(!he||(ye=Jt.exec(Ve)))&&(ye&&(Ve=Ve.slice(ye[0].length)||Ve),je.push(Ee=[])),he=!1,(ye=Bi.exec(Ve))&&(he=ye.shift(),Ee.push({value:he,type:ye[0].replace(G," ")}),Ve=Ve.slice(he.length));for(Ie in y.filter)(ye=mn[Ie].exec(Ve))&&(!He[Ie]||(ye=He[Ie](ye)))&&(he=ye.shift(),Ee.push({value:he,type:Ie,matches:ye}),Ve=Ve.slice(he.length));if(!he)break}return se?Ve.length:Ve?Mt.error(J):wt(J,je).slice(0)}function Io(J){for(var se=0,he=J.length,ye="";se<he;se++)ye+=J[se].value;return ye}function Ro(J,se,he){var ye=se.dir,Ee=se.next,Ie=Ee||ye,Ve=he&&Ie==="parentNode",je=Me++;return se.first?function(He,pt,nt){for(;He=He[ye];)if(He.nodeType===1||Ve)return J(He,pt,nt);return!1}:function(He,pt,nt){var ot,yt,et=[de,je];if(nt){for(;He=He[ye];)if((He.nodeType===1||Ve)&&J(He,pt,nt))return!0}else for(;He=He[ye];)if(He.nodeType===1||Ve)if(yt=He[Te]||(He[Te]={}),Ee&&k(He,Ee))He=He[ye]||He;else{if((ot=yt[Ie])&&ot[0]===de&&ot[1]===je)return et[2]=ot[2];if(yt[Ie]=et,et[2]=J(He,pt,nt))return!0}return!1}}function Ju(J){return J.length>1?function(se,he,ye){for(var Ee=J.length;Ee--;)if(!J[Ee](se,he,ye))return!1;return!0}:J[0]}function Vg(J,se,he){for(var ye=0,Ee=se.length;ye<Ee;ye++)Mt(J,se[ye],he);return he}function Fo(J,se,he,ye,Ee){for(var Ie,Ve=[],je=0,He=J.length,pt=se!=null;je<He;je++)(Ie=J[je])&&(!he||he(Ie,ye,Ee))&&(Ve.push(Ie),pt&&se.push(je));return Ve}function el(J,se,he,ye,Ee,Ie){return ye&&!ye[Te]&&(ye=el(ye)),Ee&&!Ee[Te]&&(Ee=el(Ee,Ie)),nn(function(Ve,je,He,pt){var nt,ot,yt,et,Gt=[],$r=[],Pr=je.length,Qr=Ve||Vg(se||"*",He.nodeType?[He]:He,[]),bn=J&&(Ve||!se)?Fo(Qr,Gt,J,He,pt):Qr;if(he?(et=Ee||(Ve?J:Pr||ye)?[]:je,he(bn,et,He,pt)):et=bn,ye)for(nt=Fo(et,$r),ye(nt,[],He,pt),ot=nt.length;ot--;)(yt=nt[ot])&&(et[$r[ot]]=!(bn[$r[ot]]=yt));if(Ve){if(Ee||J){if(Ee){for(nt=[],ot=et.length;ot--;)(yt=et[ot])&&nt.push(bn[ot]=yt);Ee(null,et=[],nt,pt)}for(ot=et.length;ot--;)(yt=et[ot])&&(nt=Ee?l.call(Ve,yt):Gt[ot])>-1&&(Ve[nt]=!(je[nt]=yt))}}else et=Fo(et===je?et.splice(Pr,et.length):et),Ee?Ee(null,je,et,pt):B.apply(je,et)})}function tl(J){for(var se,he,ye,Ee=J.length,Ie=y.relative[J[0].type],Ve=Ie||y.relative[" "],je=Ie?1:0,He=Ro(function(ot){return ot===se},Ve,!0),pt=Ro(function(ot){return l.call(se,ot)>-1},Ve,!0),nt=[function(ot,yt,et){var Gt=!Ie&&(et||yt!=_)||((se=yt).nodeType?He(ot,yt,et):pt(ot,yt,et));return se=null,Gt}];je<Ee;je++)if(he=y.relative[J[je].type])nt=[Ro(Ju(nt),he)];else{if(he=y.filter[J[je].type].apply(null,J[je].matches),he[Te]){for(ye=++je;ye<Ee&&!y.relative[J[ye].type];ye++);return el(je>1&&Ju(nt),je>1&&Io(J.slice(0,je-1).concat({value:J[je-2].type===" "?"*":""})).replace(G,"$1"),he,je<ye&&tl(J.slice(je,ye)),ye<Ee&&tl(J=J.slice(ye)),ye<Ee&&Io(J))}nt.push(he)}return Ju(nt)}function Hg(J,se){var he=se.length>0,ye=J.length>0,Ee=function(Ie,Ve,je,He,pt){var nt,ot,yt,et=0,Gt="0",$r=Ie&&[],Pr=[],Qr=_,bn=Ie||ye&&y.find.TAG("*",pt),Xa=de+=Qr==null?1:Math.random()||.1,Rr=bn.length;for(pt&&(_=Ve==U||Ve||pt);Gt!==Rr&&(nt=bn[Gt])!=null;Gt++){if(ye&&nt){for(ot=0,!Ve&&nt.ownerDocument!=U&&(Jn(nt),je=!re);yt=J[ot++];)if(yt(nt,Ve||U,je)){B.call(He,nt);break}pt&&(de=Xa)}he&&((nt=!yt&&nt)&&et--,Ie&&$r.push(nt))}if(et+=Gt,he&&Gt!==et){for(ot=0;yt=se[ot++];)yt($r,Pr,Ve,je);if(Ie){if(et>0)for(;Gt--;)$r[Gt]||Pr[Gt]||(Pr[Gt]=N.call(He));Pr=Fo(Pr)}B.apply(He,Pr),pt&&!Ie&&Pr.length>0&&et+se.length>1&&v.uniqueSort(He)}return pt&&(de=Xa,_=Qr),$r};return he?nn(Ee):Ee}function rl(J,se){var he,ye=[],Ee=[],Ie=ut[J+" "];if(!Ie){for(se||(se=Gi(J)),he=se.length;he--;)Ie=tl(se[he]),Ie[Te]?ye.push(Ie):Ee.push(Ie);Ie=ut(J,Hg(Ee,ye)),Ie.selector=J}return Ie}function Qf(J,se,he,ye){var Ee,Ie,Ve,je,He,pt=typeof J=="function"&&J,nt=!ye&&Gi(J=pt.selector||J);if(he=he||[],nt.length===1){if(Ie=nt[0]=nt[0].slice(0),Ie.length>2&&(Ve=Ie[0]).type==="ID"&&se.nodeType===9&&re&&y.relative[Ie[1].type]){if(se=(y.find.ID(Ve.matches[0].replace(Ln,Nn),se)||[])[0],se)pt&&(se=se.parentNode);else return he;J=J.slice(Ie.shift().value.length)}for(Ee=mn.needsContext.test(J)?0:Ie.length;Ee--&&(Ve=Ie[Ee],!y.relative[je=Ve.type]);)if((He=y.find[je])&&(ye=He(Ve.matches[0].replace(Ln,Nn),Qu.test(Ie[0].type)&&Zu(se.parentNode)||se))){if(Ie.splice(Ee,1),J=ye.length&&Io(Ie),!J)return B.apply(he,ye),he;break}}return(pt||rl(J,nt))(ye,se,!re,he,!se||Qu.test(J)&&Zu(se.parentNode)||se),he}d.sortStable=Te.split("").sort(ur).join("")===Te,Jn(),d.sortDetached=Ya(function(J){return J.compareDocumentPosition(U.createElement("fieldset"))&1}),v.find=Mt,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,Mt.compile=rl,Mt.select=Qf,Mt.setDocument=Jn,Mt.tokenize=Gi,Mt.escape=v.escapeSelector,Mt.getText=v.text,Mt.isXML=v.isXMLDoc,Mt.selectors=v.expr,Mt.support=v.support,Mt.uniqueSort=v.uniqueSort})();var K=function(h,y,_){for(var A=[],R=_!==void 0;(h=h[y])&&h.nodeType!==9;)if(h.nodeType===1){if(R&&v(h).is(_))break;A.push(h)}return A},T=function(h,y){for(var _=[];h;h=h.nextSibling)h.nodeType===1&&h!==y&&_.push(h);return _},M=v.expr.match.needsContext,L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function F(h,y,_){return b(y)?v.grep(h,function(A,R){return!!y.call(A,R,A)!==_}):y.nodeType?v.grep(h,function(A){return A===y!==_}):typeof y!="string"?v.grep(h,function(A){return l.call(y,A)>-1!==_}):v.filter(y,h,_)}v.filter=function(h,y,_){var A=y[0];return _&&(h=":not("+h+")"),y.length===1&&A.nodeType===1?v.find.matchesSelector(A,h)?[A]:[]:v.find.matches(h,v.grep(y,function(R){return R.nodeType===1}))},v.fn.extend({find:function(h){var y,_,A=this.length,R=this;if(typeof h!="string")return this.pushStack(v(h).filter(function(){for(y=0;y<A;y++)if(v.contains(R[y],this))return!0}));for(_=this.pushStack([]),y=0;y<A;y++)v.find(h,R[y],_);return A>1?v.uniqueSort(_):_},filter:function(h){return this.pushStack(F(this,h||[],!1))},not:function(h){return this.pushStack(F(this,h||[],!0))},is:function(h){return!!F(this,typeof h=="string"&&M.test(h)?v(h):h||[],!1).length}});var W,Z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ee=v.fn.init=function(h,y,_){var A,R;if(!h)return this;if(_=_||W,typeof h=="string")if(h[0]==="<"&&h[h.length-1]===">"&&h.length>=3?A=[null,h,null]:A=Z.exec(h),A&&(A[1]||!y))if(A[1]){if(y=y instanceof v?y[0]:y,v.merge(this,v.parseHTML(A[1],y&&y.nodeType?y.ownerDocument||y:w,!0)),L.test(A[1])&&v.isPlainObject(y))for(A in y)b(this[A])?this[A](y[A]):this.attr(A,y[A]);return this}else return R=w.getElementById(A[2]),R&&(this[0]=R,this.length=1),this;else return!y||y.jquery?(y||_).find(h):this.constructor(y).find(h);else{if(h.nodeType)return this[0]=h,this.length=1,this;if(b(h))return _.ready!==void 0?_.ready(h):h(v)}return v.makeArray(h,this)};ee.prototype=v.fn,W=v(w);var Q=/^(?:parents|prev(?:Until|All))/,oe={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(h){var y=v(h,this),_=y.length;return this.filter(function(){for(var A=0;A<_;A++)if(v.contains(this,y[A]))return!0})},closest:function(h,y){var _,A=0,R=this.length,B=[],U=typeof h!="string"&&v(h);if(!M.test(h)){for(;A<R;A++)for(_=this[A];_&&_!==y;_=_.parentNode)if(_.nodeType<11&&(U?U.index(_)>-1:_.nodeType===1&&v.find.matchesSelector(_,h))){B.push(_);break}}return this.pushStack(B.length>1?v.uniqueSort(B):B)},index:function(h){return h?typeof h=="string"?l.call(v(h),this[0]):l.call(this,h.jquery?h[0]:h):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(h,y){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(h,y))))},addBack:function(h){return this.add(h==null?this.prevObject:this.prevObject.filter(h))}});function fe(h,y){for(;(h=h[y])&&h.nodeType!==1;);return h}v.each({parent:function(h){var y=h.parentNode;return y&&y.nodeType!==11?y:null},parents:function(h){return K(h,"parentNode")},parentsUntil:function(h,y,_){return K(h,"parentNode",_)},next:function(h){return fe(h,"nextSibling")},prev:function(h){return fe(h,"previousSibling")},nextAll:function(h){return K(h,"nextSibling")},prevAll:function(h){return K(h,"previousSibling")},nextUntil:function(h,y,_){return K(h,"nextSibling",_)},prevUntil:function(h,y,_){return K(h,"previousSibling",_)},siblings:function(h){return T((h.parentNode||{}).firstChild,h)},children:function(h){return T(h.firstChild)},contents:function(h){return h.contentDocument!=null&&a(h.contentDocument)?h.contentDocument:(k(h,"template")&&(h=h.content||h),v.merge([],h.childNodes))}},function(h,y){v.fn[h]=function(_,A){var R=v.map(this,y,_);return h.slice(-5)!=="Until"&&(A=_),A&&typeof A=="string"&&(R=v.filter(A,R)),this.length>1&&(oe[h]||v.uniqueSort(R),Q.test(h)&&R.reverse()),this.pushStack(R)}});var ce=/[^\x20\t\r\n\f]+/g;function Se(h){var y={};return v.each(h.match(ce)||[],function(_,A){y[A]=!0}),y}v.Callbacks=function(h){h=typeof h=="string"?Se(h):v.extend({},h);var y,_,A,R,B=[],U=[],ae=-1,re=function(){for(R=R||h.once,A=y=!0;U.length;ae=-1)for(_=U.shift();++ae<B.length;)B[ae].apply(_[0],_[1])===!1&&h.stopOnFalse&&(ae=B.length,_=!1);h.memory||(_=!1),y=!1,R&&(_?B=[]:B="")},le={add:function(){return B&&(_&&!y&&(ae=B.length-1,U.push(_)),function be(Te){v.each(Te,function(de,Me){b(Me)?(!h.unique||!le.has(Me))&&B.push(Me):Me&&Me.length&&S(Me)!=="string"&&be(Me)})}(arguments),_&&!y&&re()),this},remove:function(){return v.each(arguments,function(be,Te){for(var de;(de=v.inArray(Te,B,de))>-1;)B.splice(de,1),de<=ae&&ae--}),this},has:function(be){return be?v.inArray(be,B)>-1:B.length>0},empty:function(){return B&&(B=[]),this},disable:function(){return R=U=[],B=_="",this},disabled:function(){return!B},lock:function(){return R=U=[],!_&&!y&&(B=_=""),this},locked:function(){return!!R},fireWith:function(be,Te){return R||(Te=Te||[],Te=[be,Te.slice?Te.slice():Te],U.push(Te),y||re()),this},fire:function(){return le.fireWith(this,arguments),this},fired:function(){return!!A}};return le};function De(h){return h}function Le(h){throw h}function ke(h,y,_,A){var R;try{h&&b(R=h.promise)?R.call(h).done(y).fail(_):h&&b(R=h.then)?R.call(h,y,_):y.apply(void 0,[h].slice(A))}catch(B){_.apply(void 0,[B])}}v.extend({Deferred:function(h){var y=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],_="pending",A={state:function(){return _},always:function(){return R.done(arguments).fail(arguments),this},catch:function(B){return A.then(null,B)},pipe:function(){var B=arguments;return v.Deferred(function(U){v.each(y,function(ae,re){var le=b(B[re[4]])&&B[re[4]];R[re[1]](function(){var be=le&&le.apply(this,arguments);be&&b(be.promise)?be.promise().progress(U.notify).done(U.resolve).fail(U.reject):U[re[0]+"With"](this,le?[be]:arguments)})}),B=null}).promise()},then:function(B,U,ae){var re=0;function le(be,Te,de,Me){return function(){var it=this,wt=arguments,ut=function(){var ur,gn;if(!(be<re)){if(ur=de.apply(it,wt),ur===Te.promise())throw new TypeError("Thenable self-resolution");gn=ur&&(typeof ur=="object"||typeof ur=="function")&&ur.then,b(gn)?Me?gn.call(ur,le(re,Te,De,Me),le(re,Te,Le,Me)):(re++,gn.call(ur,le(re,Te,De,Me),le(re,Te,Le,Me),le(re,Te,De,Te.notifyWith))):(de!==De&&(it=void 0,wt=[ur]),(Me||Te.resolveWith)(it,wt))}},wr=Me?ut:function(){try{ut()}catch(ur){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(ur,wr.error),be+1>=re&&(de!==Le&&(it=void 0,wt=[ur]),Te.rejectWith(it,wt))}};be?wr():(v.Deferred.getErrorHook?wr.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(wr.error=v.Deferred.getStackHook()),e.setTimeout(wr))}}return v.Deferred(function(be){y[0][3].add(le(0,be,b(ae)?ae:De,be.notifyWith)),y[1][3].add(le(0,be,b(B)?B:De)),y[2][3].add(le(0,be,b(U)?U:Le))}).promise()},promise:function(B){return B!=null?v.extend(B,A):A}},R={};return v.each(y,function(B,U){var ae=U[2],re=U[5];A[U[1]]=ae.add,re&&ae.add(function(){_=re},y[3-B][2].disable,y[3-B][3].disable,y[0][2].lock,y[0][3].lock),ae.add(U[3].fire),R[U[0]]=function(){return R[U[0]+"With"](this===R?void 0:this,arguments),this},R[U[0]+"With"]=ae.fireWith}),A.promise(R),h&&h.call(R,R),R},when:function(h){var y=arguments.length,_=y,A=Array(_),R=i.call(arguments),B=v.Deferred(),U=function(ae){return function(re){A[ae]=this,R[ae]=arguments.length>1?i.call(arguments):re,--y||B.resolveWith(A,R)}};if(y<=1&&(ke(h,B.done(U(_)).resolve,B.reject,!y),B.state()==="pending"||b(R[_]&&R[_].then)))return B.then();for(;_--;)ke(R[_],U(_),B.reject);return B.promise()}});var me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(h,y){e.console&&e.console.warn&&h&&me.test(h.name)&&e.console.warn("jQuery.Deferred exception: "+h.message,h.stack,y)},v.readyException=function(h){e.setTimeout(function(){throw h})};var _e=v.Deferred();v.fn.ready=function(h){return _e.then(h).catch(function(y){v.readyException(y)}),this},v.extend({isReady:!1,readyWait:1,ready:function(h){(h===!0?--v.readyWait:v.isReady)||(v.isReady=!0,!(h!==!0&&--v.readyWait>0)&&_e.resolveWith(w,[v]))}}),v.ready.then=_e.then;function we(){w.removeEventListener("DOMContentLoaded",we),e.removeEventListener("load",we),v.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?e.setTimeout(v.ready):(w.addEventListener("DOMContentLoaded",we),e.addEventListener("load",we));var xe=function(h,y,_,A,R,B,U){var ae=0,re=h.length,le=_==null;if(S(_)==="object"){R=!0;for(ae in _)xe(h,y,ae,_[ae],!0,B,U)}else if(A!==void 0&&(R=!0,b(A)||(U=!0),le&&(U?(y.call(h,A),y=null):(le=y,y=function(be,Te,de){return le.call(v(be),de)})),y))for(;ae<re;ae++)y(h[ae],_,U?A:A.call(h[ae],ae,y(h[ae],_)));return R?h:le?y.call(h):re?y(h[0],_):B},Ne=/^-ms-/,qe=/-([a-z])/g;function at(h,y){return y.toUpperCase()}function We(h){return h.replace(Ne,"ms-").replace(qe,at)}var Re=function(h){return h.nodeType===1||h.nodeType===9||!+h.nodeType};function ge(){this.expando=v.expando+ge.uid++}ge.uid=1,ge.prototype={cache:function(h){var y=h[this.expando];return y||(y={},Re(h)&&(h.nodeType?h[this.expando]=y:Object.defineProperty(h,this.expando,{value:y,configurable:!0}))),y},set:function(h,y,_){var A,R=this.cache(h);if(typeof y=="string")R[We(y)]=_;else for(A in y)R[We(A)]=y[A];return R},get:function(h,y){return y===void 0?this.cache(h):h[this.expando]&&h[this.expando][We(y)]},access:function(h,y,_){return y===void 0||y&&typeof y=="string"&&_===void 0?this.get(h,y):(this.set(h,y,_),_!==void 0?_:y)},remove:function(h,y){var _,A=h[this.expando];if(A!==void 0){if(y!==void 0)for(Array.isArray(y)?y=y.map(We):(y=We(y),y=y in A?[y]:y.match(ce)||[]),_=y.length;_--;)delete A[y[_]];(y===void 0||v.isEmptyObject(A))&&(h.nodeType?h[this.expando]=void 0:delete h[this.expando])}},hasData:function(h){var y=h[this.expando];return y!==void 0&&!v.isEmptyObject(y)}};var z=new ge,V=new ge,ne=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ie(h){return h==="true"?!0:h==="false"?!1:h==="null"?null:h===+h+""?+h:ne.test(h)?JSON.parse(h):h}function ve(h,y,_){var A;if(_===void 0&&h.nodeType===1)if(A="data-"+y.replace(te,"-$&").toLowerCase(),_=h.getAttribute(A),typeof _=="string"){try{_=ie(_)}catch{}V.set(h,y,_)}else _=void 0;return _}v.extend({hasData:function(h){return V.hasData(h)||z.hasData(h)},data:function(h,y,_){return V.access(h,y,_)},removeData:function(h,y){V.remove(h,y)},_data:function(h,y,_){return z.access(h,y,_)},_removeData:function(h,y){z.remove(h,y)}}),v.fn.extend({data:function(h,y){var _,A,R,B=this[0],U=B&&B.attributes;if(h===void 0){if(this.length&&(R=V.get(B),B.nodeType===1&&!z.get(B,"hasDataAttrs"))){for(_=U.length;_--;)U[_]&&(A=U[_].name,A.indexOf("data-")===0&&(A=We(A.slice(5)),ve(B,A,R[A])));z.set(B,"hasDataAttrs",!0)}return R}return typeof h=="object"?this.each(function(){V.set(this,h)}):xe(this,function(ae){var re;if(B&&ae===void 0)return re=V.get(B,h),re!==void 0||(re=ve(B,h),re!==void 0)?re:void 0;this.each(function(){V.set(this,h,ae)})},null,y,arguments.length>1,null,!0)},removeData:function(h){return this.each(function(){V.remove(this,h)})}}),v.extend({queue:function(h,y,_){var A;if(h)return y=(y||"fx")+"queue",A=z.get(h,y),_&&(!A||Array.isArray(_)?A=z.access(h,y,v.makeArray(_)):A.push(_)),A||[]},dequeue:function(h,y){y=y||"fx";var _=v.queue(h,y),A=_.length,R=_.shift(),B=v._queueHooks(h,y),U=function(){v.dequeue(h,y)};R==="inprogress"&&(R=_.shift(),A--),R&&(y==="fx"&&_.unshift("inprogress"),delete B.stop,R.call(h,U,B)),!A&&B&&B.empty.fire()},_queueHooks:function(h,y){var _=y+"queueHooks";return z.get(h,_)||z.access(h,_,{empty:v.Callbacks("once memory").add(function(){z.remove(h,[y+"queue",_])})})}}),v.fn.extend({queue:function(h,y){var _=2;return typeof h!="string"&&(y=h,h="fx",_--),arguments.length<_?v.queue(this[0],h):y===void 0?this:this.each(function(){var A=v.queue(this,h,y);v._queueHooks(this,h),h==="fx"&&A[0]!=="inprogress"&&v.dequeue(this,h)})},dequeue:function(h){return this.each(function(){v.dequeue(this,h)})},clearQueue:function(h){return this.queue(h||"fx",[])},promise:function(h,y){var _,A=1,R=v.Deferred(),B=this,U=this.length,ae=function(){--A||R.resolveWith(B,[B])};for(typeof h!="string"&&(y=h,h=void 0),h=h||"fx";U--;)_=z.get(B[U],h+"queueHooks"),_&&_.empty&&(A++,_.empty.add(ae));return ae(),R.promise(y)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],ze=w.documentElement,Oe=function(h){return v.contains(h.ownerDocument,h)},Je={composed:!0};ze.getRootNode&&(Oe=function(h){return v.contains(h.ownerDocument,h)||h.getRootNode(Je)===h.ownerDocument});var Ge=function(h,y){return h=y||h,h.style.display==="none"||h.style.display===""&&Oe(h)&&v.css(h,"display")==="none"};function $e(h,y,_,A){var R,B,U=20,ae=A?function(){return A.cur()}:function(){return v.css(h,y,"")},re=ae(),le=_&&_[3]||(v.cssNumber[y]?"":"px"),be=h.nodeType&&(v.cssNumber[y]||le!=="px"&&+re)&&Ce.exec(v.css(h,y));if(be&&be[3]!==le){for(re=re/2,le=le||be[3],be=+re||1;U--;)v.style(h,y,be+le),(1-B)*(1-(B=ae()/re||.5))<=0&&(U=0),be=be/B;be=be*2,v.style(h,y,be+le),_=_||[]}return _&&(be=+be||+re||0,R=_[1]?be+(_[1]+1)*_[2]:+_[2],A&&(A.unit=le,A.start=be,A.end=R)),R}var lt={};function ht(h){var y,_=h.ownerDocument,A=h.nodeName,R=lt[A];return R||(y=_.body.appendChild(_.createElement(A)),R=v.css(y,"display"),y.parentNode.removeChild(y),R==="none"&&(R="block"),lt[A]=R,R)}function Ot(h,y){for(var _,A,R=[],B=0,U=h.length;B<U;B++)A=h[B],A.style&&(_=A.style.display,y?(_==="none"&&(R[B]=z.get(A,"display")||null,R[B]||(A.style.display="")),A.style.display===""&&Ge(A)&&(R[B]=ht(A))):_!=="none"&&(R[B]="none",z.set(A,"display",_)));for(B=0;B<U;B++)R[B]!=null&&(h[B].style.display=R[B]);return h}v.fn.extend({show:function(){return Ot(this,!0)},hide:function(){return Ot(this)},toggle:function(h){return typeof h=="boolean"?h?this.show():this.hide():this.each(function(){Ge(this)?v(this).show():v(this).hide()})}});var dt=/^(?:checkbox|radio)$/i,Dt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ft=/^$|^module$|\/(?:java|ecma)script/i;(function(){var h=w.createDocumentFragment(),y=h.appendChild(w.createElement("div")),_=w.createElement("input");_.setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),y.appendChild(_),d.checkClone=y.cloneNode(!0).cloneNode(!0).lastChild.checked,y.innerHTML="<textarea>x</textarea>",d.noCloneChecked=!!y.cloneNode(!0).lastChild.defaultValue,y.innerHTML="<option></option>",d.option=!!y.lastChild})();var vt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td,d.option||(vt.optgroup=vt.option=[1,"<select multiple='multiple'>","</select>"]);function st(h,y){var _;return typeof h.getElementsByTagName!="undefined"?_=h.getElementsByTagName(y||"*"):typeof h.querySelectorAll!="undefined"?_=h.querySelectorAll(y||"*"):_=[],y===void 0||y&&k(h,y)?v.merge([h],_):_}function jt(h,y){for(var _=0,A=h.length;_<A;_++)z.set(h[_],"globalEval",!y||z.get(y[_],"globalEval"))}var vr=/<|&#?\w+;/;function ir(h,y,_,A,R){for(var B,U,ae,re,le,be,Te=y.createDocumentFragment(),de=[],Me=0,it=h.length;Me<it;Me++)if(B=h[Me],B||B===0)if(S(B)==="object")v.merge(de,B.nodeType?[B]:B);else if(!vr.test(B))de.push(y.createTextNode(B));else{for(U=U||Te.appendChild(y.createElement("div")),ae=(Dt.exec(B)||["",""])[1].toLowerCase(),re=vt[ae]||vt._default,U.innerHTML=re[1]+v.htmlPrefilter(B)+re[2],be=re[0];be--;)U=U.lastChild;v.merge(de,U.childNodes),U=Te.firstChild,U.textContent=""}for(Te.textContent="",Me=0;B=de[Me++];){if(A&&v.inArray(B,A)>-1){R&&R.push(B);continue}if(le=Oe(B),U=st(Te.appendChild(B),"script"),le&&jt(U),_)for(be=0;B=U[be++];)Ft.test(B.type||"")&&_.push(B)}return Te}var mr=/^([^.]*)(?:\.(.+)|)/;function qt(){return!0}function Yt(){return!1}function Bt(h,y,_,A,R,B){var U,ae;if(typeof y=="object"){typeof _!="string"&&(A=A||_,_=void 0);for(ae in y)Bt(h,ae,_,A,y[ae],B);return h}if(A==null&&R==null?(R=_,A=_=void 0):R==null&&(typeof _=="string"?(R=A,A=void 0):(R=A,A=_,_=void 0)),R===!1)R=Yt;else if(!R)return h;return B===1&&(U=R,R=function(re){return v().off(re),U.apply(this,arguments)},R.guid=U.guid||(U.guid=v.guid++)),h.each(function(){v.event.add(this,y,R,A,_)})}v.event={global:{},add:function(h,y,_,A,R){var B,U,ae,re,le,be,Te,de,Me,it,wt,ut=z.get(h);if(!!Re(h))for(_.handler&&(B=_,_=B.handler,R=B.selector),R&&v.find.matchesSelector(ze,R),_.guid||(_.guid=v.guid++),(re=ut.events)||(re=ut.events=Object.create(null)),(U=ut.handle)||(U=ut.handle=function(wr){return typeof v!="undefined"&&v.event.triggered!==wr.type?v.event.dispatch.apply(h,arguments):void 0}),y=(y||"").match(ce)||[""],le=y.length;le--;)ae=mr.exec(y[le])||[],Me=wt=ae[1],it=(ae[2]||"").split(".").sort(),Me&&(Te=v.event.special[Me]||{},Me=(R?Te.delegateType:Te.bindType)||Me,Te=v.event.special[Me]||{},be=v.extend({type:Me,origType:wt,data:A,handler:_,guid:_.guid,selector:R,needsContext:R&&v.expr.match.needsContext.test(R),namespace:it.join(".")},B),(de=re[Me])||(de=re[Me]=[],de.delegateCount=0,(!Te.setup||Te.setup.call(h,A,it,U)===!1)&&h.addEventListener&&h.addEventListener(Me,U)),Te.add&&(Te.add.call(h,be),be.handler.guid||(be.handler.guid=_.guid)),R?de.splice(de.delegateCount++,0,be):de.push(be),v.event.global[Me]=!0)},remove:function(h,y,_,A,R){var B,U,ae,re,le,be,Te,de,Me,it,wt,ut=z.hasData(h)&&z.get(h);if(!(!ut||!(re=ut.events))){for(y=(y||"").match(ce)||[""],le=y.length;le--;){if(ae=mr.exec(y[le])||[],Me=wt=ae[1],it=(ae[2]||"").split(".").sort(),!Me){for(Me in re)v.event.remove(h,Me+y[le],_,A,!0);continue}for(Te=v.event.special[Me]||{},Me=(A?Te.delegateType:Te.bindType)||Me,de=re[Me]||[],ae=ae[2]&&new RegExp("(^|\\.)"+it.join("\\.(?:.*\\.|)")+"(\\.|$)"),U=B=de.length;B--;)be=de[B],(R||wt===be.origType)&&(!_||_.guid===be.guid)&&(!ae||ae.test(be.namespace))&&(!A||A===be.selector||A==="**"&&be.selector)&&(de.splice(B,1),be.selector&&de.delegateCount--,Te.remove&&Te.remove.call(h,be));U&&!de.length&&((!Te.teardown||Te.teardown.call(h,it,ut.handle)===!1)&&v.removeEvent(h,Me,ut.handle),delete re[Me])}v.isEmptyObject(re)&&z.remove(h,"handle events")}},dispatch:function(h){var y,_,A,R,B,U,ae=new Array(arguments.length),re=v.event.fix(h),le=(z.get(this,"events")||Object.create(null))[re.type]||[],be=v.event.special[re.type]||{};for(ae[0]=re,y=1;y<arguments.length;y++)ae[y]=arguments[y];if(re.delegateTarget=this,!(be.preDispatch&&be.preDispatch.call(this,re)===!1)){for(U=v.event.handlers.call(this,re,le),y=0;(R=U[y++])&&!re.isPropagationStopped();)for(re.currentTarget=R.elem,_=0;(B=R.handlers[_++])&&!re.isImmediatePropagationStopped();)(!re.rnamespace||B.namespace===!1||re.rnamespace.test(B.namespace))&&(re.handleObj=B,re.data=B.data,A=((v.event.special[B.origType]||{}).handle||B.handler).apply(R.elem,ae),A!==void 0&&(re.result=A)===!1&&(re.preventDefault(),re.stopPropagation()));return be.postDispatch&&be.postDispatch.call(this,re),re.result}},handlers:function(h,y){var _,A,R,B,U,ae=[],re=y.delegateCount,le=h.target;if(re&&le.nodeType&&!(h.type==="click"&&h.button>=1)){for(;le!==this;le=le.parentNode||this)if(le.nodeType===1&&!(h.type==="click"&&le.disabled===!0)){for(B=[],U={},_=0;_<re;_++)A=y[_],R=A.selector+" ",U[R]===void 0&&(U[R]=A.needsContext?v(R,this).index(le)>-1:v.find(R,this,null,[le]).length),U[R]&&B.push(A);B.length&&ae.push({elem:le,handlers:B})}}return le=this,re<y.length&&ae.push({elem:le,handlers:y.slice(re)}),ae},addProp:function(h,y){Object.defineProperty(v.Event.prototype,h,{enumerable:!0,configurable:!0,get:b(y)?function(){if(this.originalEvent)return y(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[h]},set:function(_){Object.defineProperty(this,h,{enumerable:!0,configurable:!0,writable:!0,value:_})}})},fix:function(h){return h[v.expando]?h:new v.Event(h)},special:{load:{noBubble:!0},click:{setup:function(h){var y=this||h;return dt.test(y.type)&&y.click&&k(y,"input")&&Pt(y,"click",!0),!1},trigger:function(h){var y=this||h;return dt.test(y.type)&&y.click&&k(y,"input")&&Pt(y,"click"),!0},_default:function(h){var y=h.target;return dt.test(y.type)&&y.click&&k(y,"input")&&z.get(y,"click")||k(y,"a")}},beforeunload:{postDispatch:function(h){h.result!==void 0&&h.originalEvent&&(h.originalEvent.returnValue=h.result)}}}};function Pt(h,y,_){if(!_){z.get(h,y)===void 0&&v.event.add(h,y,qt);return}z.set(h,y,!1),v.event.add(h,y,{namespace:!1,handler:function(A){var R,B=z.get(this,y);if(A.isTrigger&1&&this[y]){if(B)(v.event.special[y]||{}).delegateType&&A.stopPropagation();else if(B=i.call(arguments),z.set(this,y,B),this[y](),R=z.get(this,y),z.set(this,y,!1),B!==R)return A.stopImmediatePropagation(),A.preventDefault(),R}else B&&(z.set(this,y,v.event.trigger(B[0],B.slice(1),this)),A.stopPropagation(),A.isImmediatePropagationStopped=qt)}})}v.removeEvent=function(h,y,_){h.removeEventListener&&h.removeEventListener(y,_)},v.Event=function(h,y){if(!(this instanceof v.Event))return new v.Event(h,y);h&&h.type?(this.originalEvent=h,this.type=h.type,this.isDefaultPrevented=h.defaultPrevented||h.defaultPrevented===void 0&&h.returnValue===!1?qt:Yt,this.target=h.target&&h.target.nodeType===3?h.target.parentNode:h.target,this.currentTarget=h.currentTarget,this.relatedTarget=h.relatedTarget):this.type=h,y&&v.extend(this,y),this.timeStamp=h&&h.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:Yt,isPropagationStopped:Yt,isImmediatePropagationStopped:Yt,isSimulated:!1,preventDefault:function(){var h=this.originalEvent;this.isDefaultPrevented=qt,h&&!this.isSimulated&&h.preventDefault()},stopPropagation:function(){var h=this.originalEvent;this.isPropagationStopped=qt,h&&!this.isSimulated&&h.stopPropagation()},stopImmediatePropagation:function(){var h=this.originalEvent;this.isImmediatePropagationStopped=qt,h&&!this.isSimulated&&h.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(h,y){function _(A){if(w.documentMode){var R=z.get(this,"handle"),B=v.event.fix(A);B.type=A.type==="focusin"?"focus":"blur",B.isSimulated=!0,R(A),B.target===B.currentTarget&&R(B)}else v.event.simulate(y,A.target,v.event.fix(A))}v.event.special[h]={setup:function(){var A;if(Pt(this,h,!0),w.documentMode)A=z.get(this,y),A||this.addEventListener(y,_),z.set(this,y,(A||0)+1);else return!1},trigger:function(){return Pt(this,h),!0},teardown:function(){var A;if(w.documentMode)A=z.get(this,y)-1,A?z.set(this,y,A):(this.removeEventListener(y,_),z.remove(this,y));else return!1},_default:function(A){return z.get(A.target,h)},delegateType:y},v.event.special[y]={setup:function(){var A=this.ownerDocument||this.document||this,R=w.documentMode?this:A,B=z.get(R,y);B||(w.documentMode?this.addEventListener(y,_):A.addEventListener(h,_,!0)),z.set(R,y,(B||0)+1)},teardown:function(){var A=this.ownerDocument||this.document||this,R=w.documentMode?this:A,B=z.get(R,y)-1;B?z.set(R,y,B):(w.documentMode?this.removeEventListener(y,_):A.removeEventListener(h,_,!0),z.remove(R,y))}}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(h,y){v.event.special[h]={delegateType:y,bindType:y,handle:function(_){var A,R=this,B=_.relatedTarget,U=_.handleObj;return(!B||B!==R&&!v.contains(R,B))&&(_.type=U.origType,A=U.handler.apply(this,arguments),_.type=y),A}}}),v.fn.extend({on:function(h,y,_,A){return Bt(this,h,y,_,A)},one:function(h,y,_,A){return Bt(this,h,y,_,A,1)},off:function(h,y,_){var A,R;if(h&&h.preventDefault&&h.handleObj)return A=h.handleObj,v(h.delegateTarget).off(A.namespace?A.origType+"."+A.namespace:A.origType,A.selector,A.handler),this;if(typeof h=="object"){for(R in h)this.off(R,y,h[R]);return this}return(y===!1||typeof y=="function")&&(_=y,y=void 0),_===!1&&(_=Yt),this.each(function(){v.event.remove(this,h,_,y)})}});var Pe=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ae=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function Ke(h,y){return k(h,"table")&&k(y.nodeType!==11?y:y.firstChild,"tr")&&v(h).children("tbody")[0]||h}function rt(h){return h.type=(h.getAttribute("type")!==null)+"/"+h.type,h}function Ze(h){return(h.type||"").slice(0,5)==="true/"?h.type=h.type.slice(5):h.removeAttribute("type"),h}function xt(h,y){var _,A,R,B,U,ae,re;if(y.nodeType===1){if(z.hasData(h)&&(B=z.get(h),re=B.events,re)){z.remove(y,"handle events");for(R in re)for(_=0,A=re[R].length;_<A;_++)v.event.add(y,R,re[R][_])}V.hasData(h)&&(U=V.access(h),ae=v.extend({},U),V.set(y,ae))}}function Xt(h,y){var _=y.nodeName.toLowerCase();_==="input"&&dt.test(h.type)?y.checked=h.checked:(_==="input"||_==="textarea")&&(y.defaultValue=h.defaultValue)}function Wt(h,y,_,A){y=o(y);var R,B,U,ae,re,le,be=0,Te=h.length,de=Te-1,Me=y[0],it=b(Me);if(it||Te>1&&typeof Me=="string"&&!d.checkClone&&pe.test(Me))return h.each(function(wt){var ut=h.eq(wt);it&&(y[0]=Me.call(this,wt,ut.html())),Wt(ut,y,_,A)});if(Te&&(R=ir(y,h[0].ownerDocument,!1,h,A),B=R.firstChild,R.childNodes.length===1&&(R=B),B||A)){for(U=v.map(st(R,"script"),rt),ae=U.length;be<Te;be++)re=R,be!==de&&(re=v.clone(re,!0,!0),ae&&v.merge(U,st(re,"script"))),_.call(h[be],re,be);if(ae)for(le=U[U.length-1].ownerDocument,v.map(U,Ze),be=0;be<ae;be++)re=U[be],Ft.test(re.type||"")&&!z.access(re,"globalEval")&&v.contains(le,re)&&(re.src&&(re.type||"").toLowerCase()!=="module"?v._evalUrl&&!re.noModule&&v._evalUrl(re.src,{nonce:re.nonce||re.getAttribute("nonce")},le):m(re.textContent.replace(Ae,""),re,le))}return h}function $t(h,y,_){for(var A,R=y?v.filter(y,h):h,B=0;(A=R[B])!=null;B++)!_&&A.nodeType===1&&v.cleanData(st(A)),A.parentNode&&(_&&Oe(A)&&jt(st(A,"script")),A.parentNode.removeChild(A));return h}v.extend({htmlPrefilter:function(h){return h},clone:function(h,y,_){var A,R,B,U,ae=h.cloneNode(!0),re=Oe(h);if(!d.noCloneChecked&&(h.nodeType===1||h.nodeType===11)&&!v.isXMLDoc(h))for(U=st(ae),B=st(h),A=0,R=B.length;A<R;A++)Xt(B[A],U[A]);if(y)if(_)for(B=B||st(h),U=U||st(ae),A=0,R=B.length;A<R;A++)xt(B[A],U[A]);else xt(h,ae);return U=st(ae,"script"),U.length>0&&jt(U,!re&&st(h,"script")),ae},cleanData:function(h){for(var y,_,A,R=v.event.special,B=0;(_=h[B])!==void 0;B++)if(Re(_)){if(y=_[z.expando]){if(y.events)for(A in y.events)R[A]?v.event.remove(_,A):v.removeEvent(_,A,y.handle);_[z.expando]=void 0}_[V.expando]&&(_[V.expando]=void 0)}}}),v.fn.extend({detach:function(h){return $t(this,h,!0)},remove:function(h){return $t(this,h)},text:function(h){return xe(this,function(y){return y===void 0?v.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=y)})},null,h,arguments.length)},append:function(){return Wt(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=Ke(this,h);y.appendChild(h)}})},prepend:function(){return Wt(this,arguments,function(h){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var y=Ke(this,h);y.insertBefore(h,y.firstChild)}})},before:function(){return Wt(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this)})},after:function(){return Wt(this,arguments,function(h){this.parentNode&&this.parentNode.insertBefore(h,this.nextSibling)})},empty:function(){for(var h,y=0;(h=this[y])!=null;y++)h.nodeType===1&&(v.cleanData(st(h,!1)),h.textContent="");return this},clone:function(h,y){return h=h==null?!1:h,y=y==null?h:y,this.map(function(){return v.clone(this,h,y)})},html:function(h){return xe(this,function(y){var _=this[0]||{},A=0,R=this.length;if(y===void 0&&_.nodeType===1)return _.innerHTML;if(typeof y=="string"&&!Pe.test(y)&&!vt[(Dt.exec(y)||["",""])[1].toLowerCase()]){y=v.htmlPrefilter(y);try{for(;A<R;A++)_=this[A]||{},_.nodeType===1&&(v.cleanData(st(_,!1)),_.innerHTML=y);_=0}catch{}}_&&this.empty().append(y)},null,h,arguments.length)},replaceWith:function(){var h=[];return Wt(this,arguments,function(y){var _=this.parentNode;v.inArray(this,h)<0&&(v.cleanData(st(this)),_&&_.replaceChild(y,this))},h)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(h,y){v.fn[h]=function(_){for(var A,R=[],B=v(_),U=B.length-1,ae=0;ae<=U;ae++)A=ae===U?this:this.clone(!0),v(B[ae])[y](A),s.apply(R,A.get());return this.pushStack(R)}});var gt=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),Qt=/^--/,zr=function(h){var y=h.ownerDocument.defaultView;return(!y||!y.opener)&&(y=e),y.getComputedStyle(h)},br=function(h,y,_){var A,R,B={};for(R in y)B[R]=h.style[R],h.style[R]=y[R];A=_.call(h);for(R in y)h.style[R]=B[R];return A},Gr=new RegExp(Fe.join("|"),"i");(function(){function h(){if(!!le){re.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",le.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ze.appendChild(re).appendChild(le);var be=e.getComputedStyle(le);_=be.top!=="1%",ae=y(be.marginLeft)===12,le.style.right="60%",B=y(be.right)===36,A=y(be.width)===36,le.style.position="absolute",R=y(le.offsetWidth/3)===12,ze.removeChild(re),le=null}}function y(be){return Math.round(parseFloat(be))}var _,A,R,B,U,ae,re=w.createElement("div"),le=w.createElement("div");!le.style||(le.style.backgroundClip="content-box",le.cloneNode(!0).style.backgroundClip="",d.clearCloneStyle=le.style.backgroundClip==="content-box",v.extend(d,{boxSizingReliable:function(){return h(),A},pixelBoxStyles:function(){return h(),B},pixelPosition:function(){return h(),_},reliableMarginLeft:function(){return h(),ae},scrollboxSize:function(){return h(),R},reliableTrDimensions:function(){var be,Te,de,Me;return U==null&&(be=w.createElement("table"),Te=w.createElement("tr"),de=w.createElement("div"),be.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Te.style.cssText="box-sizing:content-box;border:1px solid",Te.style.height="1px",de.style.height="9px",de.style.display="block",ze.appendChild(be).appendChild(Te).appendChild(de),Me=e.getComputedStyle(Te),U=parseInt(Me.height,10)+parseInt(Me.borderTopWidth,10)+parseInt(Me.borderBottomWidth,10)===Te.offsetHeight,ze.removeChild(be)),U}}))})();function Vr(h,y,_){var A,R,B,U,ae=Qt.test(y),re=h.style;return _=_||zr(h),_&&(U=_.getPropertyValue(y)||_[y],ae&&U&&(U=U.replace(G,"$1")||void 0),U===""&&!Oe(h)&&(U=v.style(h,y)),!d.pixelBoxStyles()&&gt.test(U)&&Gr.test(y)&&(A=re.width,R=re.minWidth,B=re.maxWidth,re.minWidth=re.maxWidth=re.width=U,U=_.width,re.width=A,re.minWidth=R,re.maxWidth=B)),U!==void 0?U+"":U}function tn(h,y){return{get:function(){if(h()){delete this.get;return}return(this.get=y).apply(this,arguments)}}}var sr=["Webkit","Moz","ms"],dn=w.createElement("div").style,Ir={};function Tr(h){for(var y=h[0].toUpperCase()+h.slice(1),_=sr.length;_--;)if(h=sr[_]+y,h in dn)return h}function Lt(h){var y=v.cssProps[h]||Ir[h];return y||(h in dn?h:Ir[h]=Tr(h)||h)}var Yr=/^(none|table(?!-c[ea]).+)/,Yn={position:"absolute",visibility:"hidden",display:"block"},On={letterSpacing:"0",fontWeight:"400"};function Xn(h,y,_){var A=Ce.exec(y);return A?Math.max(0,A[2]-(_||0))+(A[3]||"px"):y}function Hr(h,y,_,A,R,B){var U=y==="width"?1:0,ae=0,re=0,le=0;if(_===(A?"border":"content"))return 0;for(;U<4;U+=2)_==="margin"&&(le+=v.css(h,_+Fe[U],!0,R)),A?(_==="content"&&(re-=v.css(h,"padding"+Fe[U],!0,R)),_!=="margin"&&(re-=v.css(h,"border"+Fe[U]+"Width",!0,R))):(re+=v.css(h,"padding"+Fe[U],!0,R),_!=="padding"?re+=v.css(h,"border"+Fe[U]+"Width",!0,R):ae+=v.css(h,"border"+Fe[U]+"Width",!0,R));return!A&&B>=0&&(re+=Math.max(0,Math.ceil(h["offset"+y[0].toUpperCase()+y.slice(1)]-B-re-ae-.5))||0),re+le}function wa(h,y,_){var A=zr(h),R=!d.boxSizingReliable()||_,B=R&&v.css(h,"boxSizing",!1,A)==="border-box",U=B,ae=Vr(h,y,A),re="offset"+y[0].toUpperCase()+y.slice(1);if(gt.test(ae)){if(!_)return ae;ae="auto"}return(!d.boxSizingReliable()&&B||!d.reliableTrDimensions()&&k(h,"tr")||ae==="auto"||!parseFloat(ae)&&v.css(h,"display",!1,A)==="inline")&&h.getClientRects().length&&(B=v.css(h,"boxSizing",!1,A)==="border-box",U=re in h,U&&(ae=h[re])),ae=parseFloat(ae)||0,ae+Hr(h,y,_||(B?"border":"content"),U,A,ae)+"px"}v.extend({cssHooks:{opacity:{get:function(h,y){if(y){var _=Vr(h,"opacity");return _===""?"1":_}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(h,y,_,A){if(!(!h||h.nodeType===3||h.nodeType===8||!h.style)){var R,B,U,ae=We(y),re=Qt.test(y),le=h.style;if(re||(y=Lt(ae)),U=v.cssHooks[y]||v.cssHooks[ae],_!==void 0){if(B=typeof _,B==="string"&&(R=Ce.exec(_))&&R[1]&&(_=$e(h,y,R),B="number"),_==null||_!==_)return;B==="number"&&!re&&(_+=R&&R[3]||(v.cssNumber[ae]?"":"px")),!d.clearCloneStyle&&_===""&&y.indexOf("background")===0&&(le[y]="inherit"),(!U||!("set"in U)||(_=U.set(h,_,A))!==void 0)&&(re?le.setProperty(y,_):le[y]=_)}else return U&&"get"in U&&(R=U.get(h,!1,A))!==void 0?R:le[y]}},css:function(h,y,_,A){var R,B,U,ae=We(y),re=Qt.test(y);return re||(y=Lt(ae)),U=v.cssHooks[y]||v.cssHooks[ae],U&&"get"in U&&(R=U.get(h,!0,_)),R===void 0&&(R=Vr(h,y,A)),R==="normal"&&y in On&&(R=On[y]),_===""||_?(B=parseFloat(R),_===!0||isFinite(B)?B||0:R):R}}),v.each(["height","width"],function(h,y){v.cssHooks[y]={get:function(_,A,R){if(A)return Yr.test(v.css(_,"display"))&&(!_.getClientRects().length||!_.getBoundingClientRect().width)?br(_,Yn,function(){return wa(_,y,R)}):wa(_,y,R)},set:function(_,A,R){var B,U=zr(_),ae=!d.scrollboxSize()&&U.position==="absolute",re=ae||R,le=re&&v.css(_,"boxSizing",!1,U)==="border-box",be=R?Hr(_,y,R,le,U):0;return le&&ae&&(be-=Math.ceil(_["offset"+y[0].toUpperCase()+y.slice(1)]-parseFloat(U[y])-Hr(_,y,"border",!1,U)-.5)),be&&(B=Ce.exec(A))&&(B[3]||"px")!=="px"&&(_.style[y]=A,A=v.css(_,y)),Xn(_,A,be)}}}),v.cssHooks.marginLeft=tn(d.reliableMarginLeft,function(h,y){if(y)return(parseFloat(Vr(h,"marginLeft"))||h.getBoundingClientRect().left-br(h,{marginLeft:0},function(){return h.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(h,y){v.cssHooks[h+y]={expand:function(_){for(var A=0,R={},B=typeof _=="string"?_.split(" "):[_];A<4;A++)R[h+Fe[A]+y]=B[A]||B[A-2]||B[0];return R}},h!=="margin"&&(v.cssHooks[h+y].set=Xn)}),v.fn.extend({css:function(h,y){return xe(this,function(_,A,R){var B,U,ae={},re=0;if(Array.isArray(A)){for(B=zr(_),U=A.length;re<U;re++)ae[A[re]]=v.css(_,A[re],!1,B);return ae}return R!==void 0?v.style(_,A,R):v.css(_,A)},h,y,arguments.length>1)}});function gr(h,y,_,A,R){return new gr.prototype.init(h,y,_,A,R)}v.Tween=gr,gr.prototype={constructor:gr,init:function(h,y,_,A,R,B){this.elem=h,this.prop=_,this.easing=R||v.easing._default,this.options=y,this.start=this.now=this.cur(),this.end=A,this.unit=B||(v.cssNumber[_]?"":"px")},cur:function(){var h=gr.propHooks[this.prop];return h&&h.get?h.get(this):gr.propHooks._default.get(this)},run:function(h){var y,_=gr.propHooks[this.prop];return this.options.duration?this.pos=y=v.easing[this.easing](h,this.options.duration*h,0,1,this.options.duration):this.pos=y=h,this.now=(this.end-this.start)*y+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),_&&_.set?_.set(this):gr.propHooks._default.set(this),this}},gr.prototype.init.prototype=gr.prototype,gr.propHooks={_default:{get:function(h){var y;return h.elem.nodeType!==1||h.elem[h.prop]!=null&&h.elem.style[h.prop]==null?h.elem[h.prop]:(y=v.css(h.elem,h.prop,""),!y||y==="auto"?0:y)},set:function(h){v.fx.step[h.prop]?v.fx.step[h.prop](h):h.elem.nodeType===1&&(v.cssHooks[h.prop]||h.elem.style[Lt(h.prop)]!=null)?v.style(h.elem,h.prop,h.now+h.unit):h.elem[h.prop]=h.now}}},gr.propHooks.scrollTop=gr.propHooks.scrollLeft={set:function(h){h.elem.nodeType&&h.elem.parentNode&&(h.elem[h.prop]=h.now)}},v.easing={linear:function(h){return h},swing:function(h){return .5-Math.cos(h*Math.PI)/2},_default:"swing"},v.fx=gr.prototype.init,v.fx.step={};var vn,ja,Oo=/^(?:toggle|show|hide)$/,vg=/queueHooks$/;function Hu(){ja&&(w.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(Hu):e.setTimeout(Hu,v.fx.interval),v.fx.tick())}function Ff(){return e.setTimeout(function(){vn=void 0}),vn=Date.now()}function Lo(h,y){var _,A=0,R={height:h};for(y=y?1:0;A<4;A+=2-y)_=Fe[A],R["margin"+_]=R["padding"+_]=h;return y&&(R.opacity=R.width=h),R}function Bf(h,y,_){for(var A,R=(rn.tweeners[y]||[]).concat(rn.tweeners["*"]),B=0,U=R.length;B<U;B++)if(A=R[B].call(_,y,h))return A}function gg(h,y,_){var A,R,B,U,ae,re,le,be,Te="width"in y||"height"in y,de=this,Me={},it=h.style,wt=h.nodeType&&Ge(h),ut=z.get(h,"fxshow");_.queue||(U=v._queueHooks(h,"fx"),U.unqueued==null&&(U.unqueued=0,ae=U.empty.fire,U.empty.fire=function(){U.unqueued||ae()}),U.unqueued++,de.always(function(){de.always(function(){U.unqueued--,v.queue(h,"fx").length||U.empty.fire()})}));for(A in y)if(R=y[A],Oo.test(R)){if(delete y[A],B=B||R==="toggle",R===(wt?"hide":"show"))if(R==="show"&&ut&&ut[A]!==void 0)wt=!0;else continue;Me[A]=ut&&ut[A]||v.style(h,A)}if(re=!v.isEmptyObject(y),!(!re&&v.isEmptyObject(Me))){Te&&h.nodeType===1&&(_.overflow=[it.overflow,it.overflowX,it.overflowY],le=ut&&ut.display,le==null&&(le=z.get(h,"display")),be=v.css(h,"display"),be==="none"&&(le?be=le:(Ot([h],!0),le=h.style.display||le,be=v.css(h,"display"),Ot([h]))),(be==="inline"||be==="inline-block"&&le!=null)&&v.css(h,"float")==="none"&&(re||(de.done(function(){it.display=le}),le==null&&(be=it.display,le=be==="none"?"":be)),it.display="inline-block")),_.overflow&&(it.overflow="hidden",de.always(function(){it.overflow=_.overflow[0],it.overflowX=_.overflow[1],it.overflowY=_.overflow[2]})),re=!1;for(A in Me)re||(ut?"hidden"in ut&&(wt=ut.hidden):ut=z.access(h,"fxshow",{display:le}),B&&(ut.hidden=!wt),wt&&Ot([h],!0),de.done(function(){wt||Ot([h]),z.remove(h,"fxshow");for(A in Me)v.style(h,A,Me[A])})),re=Bf(wt?ut[A]:0,A,de),A in ut||(ut[A]=re.start,wt&&(re.end=re.start,re.start=0))}}function pg(h,y){var _,A,R,B,U;for(_ in h)if(A=We(_),R=y[A],B=h[_],Array.isArray(B)&&(R=B[1],B=h[_]=B[0]),_!==A&&(h[A]=B,delete h[_]),U=v.cssHooks[A],U&&"expand"in U){B=U.expand(B),delete h[A];for(_ in B)_ in h||(h[_]=B[_],y[_]=R)}else y[A]=R}function rn(h,y,_){var A,R,B=0,U=rn.prefilters.length,ae=v.Deferred().always(function(){delete re.elem}),re=function(){if(R)return!1;for(var Te=vn||Ff(),de=Math.max(0,le.startTime+le.duration-Te),Me=de/le.duration||0,it=1-Me,wt=0,ut=le.tweens.length;wt<ut;wt++)le.tweens[wt].run(it);return ae.notifyWith(h,[le,it,de]),it<1&&ut?de:(ut||ae.notifyWith(h,[le,1,0]),ae.resolveWith(h,[le]),!1)},le=ae.promise({elem:h,props:v.extend({},y),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},_),originalProperties:y,originalOptions:_,startTime:vn||Ff(),duration:_.duration,tweens:[],createTween:function(Te,de){var Me=v.Tween(h,le.opts,Te,de,le.opts.specialEasing[Te]||le.opts.easing);return le.tweens.push(Me),Me},stop:function(Te){var de=0,Me=Te?le.tweens.length:0;if(R)return this;for(R=!0;de<Me;de++)le.tweens[de].run(1);return Te?(ae.notifyWith(h,[le,1,0]),ae.resolveWith(h,[le,Te])):ae.rejectWith(h,[le,Te]),this}}),be=le.props;for(pg(be,le.opts.specialEasing);B<U;B++)if(A=rn.prefilters[B].call(le,h,be,le.opts),A)return b(A.stop)&&(v._queueHooks(le.elem,le.opts.queue).stop=A.stop.bind(A)),A;return v.map(be,Bf,le),b(le.opts.start)&&le.opts.start.call(h,le),le.progress(le.opts.progress).done(le.opts.done,le.opts.complete).fail(le.opts.fail).always(le.opts.always),v.fx.timer(v.extend(re,{elem:h,anim:le,queue:le.opts.queue})),le}v.Animation=v.extend(rn,{tweeners:{"*":[function(h,y){var _=this.createTween(h,y);return $e(_.elem,h,Ce.exec(y),_),_}]},tweener:function(h,y){b(h)?(y=h,h=["*"]):h=h.match(ce);for(var _,A=0,R=h.length;A<R;A++)_=h[A],rn.tweeners[_]=rn.tweeners[_]||[],rn.tweeners[_].unshift(y)},prefilters:[gg],prefilter:function(h,y){y?rn.prefilters.unshift(h):rn.prefilters.push(h)}}),v.speed=function(h,y,_){var A=h&&typeof h=="object"?v.extend({},h):{complete:_||!_&&y||b(h)&&h,duration:h,easing:_&&y||y&&!b(y)&&y};return v.fx.off?A.duration=0:typeof A.duration!="number"&&(A.duration in v.fx.speeds?A.duration=v.fx.speeds[A.duration]:A.duration=v.fx.speeds._default),(A.queue==null||A.queue===!0)&&(A.queue="fx"),A.old=A.complete,A.complete=function(){b(A.old)&&A.old.call(this),A.queue&&v.dequeue(this,A.queue)},A},v.fn.extend({fadeTo:function(h,y,_,A){return this.filter(Ge).css("opacity",0).show().end().animate({opacity:y},h,_,A)},animate:function(h,y,_,A){var R=v.isEmptyObject(h),B=v.speed(y,_,A),U=function(){var ae=rn(this,v.extend({},h),B);(R||z.get(this,"finish"))&&ae.stop(!0)};return U.finish=U,R||B.queue===!1?this.each(U):this.queue(B.queue,U)},stop:function(h,y,_){var A=function(R){var B=R.stop;delete R.stop,B(_)};return typeof h!="string"&&(_=y,y=h,h=void 0),y&&this.queue(h||"fx",[]),this.each(function(){var R=!0,B=h!=null&&h+"queueHooks",U=v.timers,ae=z.get(this);if(B)ae[B]&&ae[B].stop&&A(ae[B]);else for(B in ae)ae[B]&&ae[B].stop&&vg.test(B)&&A(ae[B]);for(B=U.length;B--;)U[B].elem===this&&(h==null||U[B].queue===h)&&(U[B].anim.stop(_),R=!1,U.splice(B,1));(R||!_)&&v.dequeue(this,h)})},finish:function(h){return h!==!1&&(h=h||"fx"),this.each(function(){var y,_=z.get(this),A=_[h+"queue"],R=_[h+"queueHooks"],B=v.timers,U=A?A.length:0;for(_.finish=!0,v.queue(this,h,[]),R&&R.stop&&R.stop.call(this,!0),y=B.length;y--;)B[y].elem===this&&B[y].queue===h&&(B[y].anim.stop(!0),B.splice(y,1));for(y=0;y<U;y++)A[y]&&A[y].finish&&A[y].finish.call(this);delete _.finish})}}),v.each(["toggle","show","hide"],function(h,y){var _=v.fn[y];v.fn[y]=function(A,R,B){return A==null||typeof A=="boolean"?_.apply(this,arguments):this.animate(Lo(y,!0),A,R,B)}}),v.each({slideDown:Lo("show"),slideUp:Lo("hide"),slideToggle:Lo("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(h,y){v.fn[h]=function(_,A,R){return this.animate(y,_,A,R)}}),v.timers=[],v.fx.tick=function(){var h,y=0,_=v.timers;for(vn=Date.now();y<_.length;y++)h=_[y],!h()&&_[y]===h&&_.splice(y--,1);_.length||v.fx.stop(),vn=void 0},v.fx.timer=function(h){v.timers.push(h),v.fx.start()},v.fx.interval=13,v.fx.start=function(){ja||(ja=!0,Hu())},v.fx.stop=function(){ja=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(h,y){return h=v.fx&&v.fx.speeds[h]||h,y=y||"fx",this.queue(y,function(_,A){var R=e.setTimeout(_,h);A.stop=function(){e.clearTimeout(R)}})},function(){var h=w.createElement("input"),y=w.createElement("select"),_=y.appendChild(w.createElement("option"));h.type="checkbox",d.checkOn=h.value!=="",d.optSelected=_.selected,h=w.createElement("input"),h.value="t",h.type="radio",d.radioValue=h.value==="t"}();var zf,Ii=v.expr.attrHandle;v.fn.extend({attr:function(h,y){return xe(this,v.attr,h,y,arguments.length>1)},removeAttr:function(h){return this.each(function(){v.removeAttr(this,h)})}}),v.extend({attr:function(h,y,_){var A,R,B=h.nodeType;if(!(B===3||B===8||B===2)){if(typeof h.getAttribute=="undefined")return v.prop(h,y,_);if((B!==1||!v.isXMLDoc(h))&&(R=v.attrHooks[y.toLowerCase()]||(v.expr.match.bool.test(y)?zf:void 0)),_!==void 0){if(_===null){v.removeAttr(h,y);return}return R&&"set"in R&&(A=R.set(h,_,y))!==void 0?A:(h.setAttribute(y,_+""),_)}return R&&"get"in R&&(A=R.get(h,y))!==null?A:(A=v.find.attr(h,y),A==null?void 0:A)}},attrHooks:{type:{set:function(h,y){if(!d.radioValue&&y==="radio"&&k(h,"input")){var _=h.value;return h.setAttribute("type",y),_&&(h.value=_),y}}}},removeAttr:function(h,y){var _,A=0,R=y&&y.match(ce);if(R&&h.nodeType===1)for(;_=R[A++];)h.removeAttribute(_)}}),zf={set:function(h,y,_){return y===!1?v.removeAttr(h,_):h.setAttribute(_,_),_}},v.each(v.expr.match.bool.source.match(/\w+/g),function(h,y){var _=Ii[y]||v.find.attr;Ii[y]=function(A,R,B){var U,ae,re=R.toLowerCase();return B||(ae=Ii[re],Ii[re]=U,U=_(A,R,B)!=null?re:null,Ii[re]=ae),U}});var yg=/^(?:input|select|textarea|button)$/i,mg=/^(?:a|area)$/i;v.fn.extend({prop:function(h,y){return xe(this,v.prop,h,y,arguments.length>1)},removeProp:function(h){return this.each(function(){delete this[v.propFix[h]||h]})}}),v.extend({prop:function(h,y,_){var A,R,B=h.nodeType;if(!(B===3||B===8||B===2))return(B!==1||!v.isXMLDoc(h))&&(y=v.propFix[y]||y,R=v.propHooks[y]),_!==void 0?R&&"set"in R&&(A=R.set(h,_,y))!==void 0?A:h[y]=_:R&&"get"in R&&(A=R.get(h,y))!==null?A:h[y]},propHooks:{tabIndex:{get:function(h){var y=v.find.attr(h,"tabindex");return y?parseInt(y,10):yg.test(h.nodeName)||mg.test(h.nodeName)&&h.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),d.optSelected||(v.propHooks.selected={get:function(h){var y=h.parentNode;return y&&y.parentNode&&y.parentNode.selectedIndex,null},set:function(h){var y=h.parentNode;y&&(y.selectedIndex,y.parentNode&&y.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this});function xa(h){var y=h.match(ce)||[];return y.join(" ")}function Sa(h){return h.getAttribute&&h.getAttribute("class")||""}function $u(h){return Array.isArray(h)?h:typeof h=="string"?h.match(ce)||[]:[]}v.fn.extend({addClass:function(h){var y,_,A,R,B,U;return b(h)?this.each(function(ae){v(this).addClass(h.call(this,ae,Sa(this)))}):(y=$u(h),y.length?this.each(function(){if(A=Sa(this),_=this.nodeType===1&&" "+xa(A)+" ",_){for(B=0;B<y.length;B++)R=y[B],_.indexOf(" "+R+" ")<0&&(_+=R+" ");U=xa(_),A!==U&&this.setAttribute("class",U)}}):this)},removeClass:function(h){var y,_,A,R,B,U;return b(h)?this.each(function(ae){v(this).removeClass(h.call(this,ae,Sa(this)))}):arguments.length?(y=$u(h),y.length?this.each(function(){if(A=Sa(this),_=this.nodeType===1&&" "+xa(A)+" ",_){for(B=0;B<y.length;B++)for(R=y[B];_.indexOf(" "+R+" ")>-1;)_=_.replace(" "+R+" "," ");U=xa(_),A!==U&&this.setAttribute("class",U)}}):this):this.attr("class","")},toggleClass:function(h,y){var _,A,R,B,U=typeof h,ae=U==="string"||Array.isArray(h);return b(h)?this.each(function(re){v(this).toggleClass(h.call(this,re,Sa(this),y),y)}):typeof y=="boolean"&&ae?y?this.addClass(h):this.removeClass(h):(_=$u(h),this.each(function(){if(ae)for(B=v(this),R=0;R<_.length;R++)A=_[R],B.hasClass(A)?B.removeClass(A):B.addClass(A);else(h===void 0||U==="boolean")&&(A=Sa(this),A&&z.set(this,"__className__",A),this.setAttribute&&this.setAttribute("class",A||h===!1?"":z.get(this,"__className__")||""))}))},hasClass:function(h){var y,_,A=0;for(y=" "+h+" ";_=this[A++];)if(_.nodeType===1&&(" "+xa(Sa(_))+" ").indexOf(y)>-1)return!0;return!1}});var bg=/\r/g;v.fn.extend({val:function(h){var y,_,A,R=this[0];return arguments.length?(A=b(h),this.each(function(B){var U;this.nodeType===1&&(A?U=h.call(this,B,v(this).val()):U=h,U==null?U="":typeof U=="number"?U+="":Array.isArray(U)&&(U=v.map(U,function(ae){return ae==null?"":ae+""})),y=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],(!y||!("set"in y)||y.set(this,U,"value")===void 0)&&(this.value=U))})):R?(y=v.valHooks[R.type]||v.valHooks[R.nodeName.toLowerCase()],y&&"get"in y&&(_=y.get(R,"value"))!==void 0?_:(_=R.value,typeof _=="string"?_.replace(bg,""):_==null?"":_)):void 0}}),v.extend({valHooks:{option:{get:function(h){var y=v.find.attr(h,"value");return y!=null?y:xa(v.text(h))}},select:{get:function(h){var y,_,A,R=h.options,B=h.selectedIndex,U=h.type==="select-one",ae=U?null:[],re=U?B+1:R.length;for(B<0?A=re:A=U?B:0;A<re;A++)if(_=R[A],(_.selected||A===B)&&!_.disabled&&(!_.parentNode.disabled||!k(_.parentNode,"optgroup"))){if(y=v(_).val(),U)return y;ae.push(y)}return ae},set:function(h,y){for(var _,A,R=h.options,B=v.makeArray(y),U=R.length;U--;)A=R[U],(A.selected=v.inArray(v.valHooks.option.get(A),B)>-1)&&(_=!0);return _||(h.selectedIndex=-1),B}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(h,y){if(Array.isArray(y))return h.checked=v.inArray(v(h).val(),y)>-1}},d.checkOn||(v.valHooks[this].get=function(h){return h.getAttribute("value")===null?"on":h.value})});var Ri=e.location,Gf={guid:Date.now()},Uu=/\?/;v.parseXML=function(h){var y,_;if(!h||typeof h!="string")return null;try{y=new e.DOMParser().parseFromString(h,"text/xml")}catch{}return _=y&&y.getElementsByTagName("parsererror")[0],(!y||_)&&v.error("Invalid XML: "+(_?v.map(_.childNodes,function(A){return A.textContent}).join(`
`):h)),y};var Vf=/^(?:focusinfocus|focusoutblur)$/,Hf=function(h){h.stopPropagation()};v.extend(v.event,{trigger:function(h,y,_,A){var R,B,U,ae,re,le,be,Te,de=[_||w],Me=c.call(h,"type")?h.type:h,it=c.call(h,"namespace")?h.namespace.split("."):[];if(B=Te=U=_=_||w,!(_.nodeType===3||_.nodeType===8)&&!Vf.test(Me+v.event.triggered)&&(Me.indexOf(".")>-1&&(it=Me.split("."),Me=it.shift(),it.sort()),re=Me.indexOf(":")<0&&"on"+Me,h=h[v.expando]?h:new v.Event(Me,typeof h=="object"&&h),h.isTrigger=A?2:3,h.namespace=it.join("."),h.rnamespace=h.namespace?new RegExp("(^|\\.)"+it.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,h.result=void 0,h.target||(h.target=_),y=y==null?[h]:v.makeArray(y,[h]),be=v.event.special[Me]||{},!(!A&&be.trigger&&be.trigger.apply(_,y)===!1))){if(!A&&!be.noBubble&&!x(_)){for(ae=be.delegateType||Me,Vf.test(ae+Me)||(B=B.parentNode);B;B=B.parentNode)de.push(B),U=B;U===(_.ownerDocument||w)&&de.push(U.defaultView||U.parentWindow||e)}for(R=0;(B=de[R++])&&!h.isPropagationStopped();)Te=B,h.type=R>1?ae:be.bindType||Me,le=(z.get(B,"events")||Object.create(null))[h.type]&&z.get(B,"handle"),le&&le.apply(B,y),le=re&&B[re],le&&le.apply&&Re(B)&&(h.result=le.apply(B,y),h.result===!1&&h.preventDefault());return h.type=Me,!A&&!h.isDefaultPrevented()&&(!be._default||be._default.apply(de.pop(),y)===!1)&&Re(_)&&re&&b(_[Me])&&!x(_)&&(U=_[re],U&&(_[re]=null),v.event.triggered=Me,h.isPropagationStopped()&&Te.addEventListener(Me,Hf),_[Me](),h.isPropagationStopped()&&Te.removeEventListener(Me,Hf),v.event.triggered=void 0,U&&(_[re]=U)),h.result}},simulate:function(h,y,_){var A=v.extend(new v.Event,_,{type:h,isSimulated:!0});v.event.trigger(A,null,y)}}),v.fn.extend({trigger:function(h,y){return this.each(function(){v.event.trigger(h,y,this)})},triggerHandler:function(h,y){var _=this[0];if(_)return v.event.trigger(h,y,_,!0)}});var wg=/\[\]$/,$f=/\r?\n/g,xg=/^(?:submit|button|image|reset|file)$/i,Sg=/^(?:input|select|textarea|keygen)/i;function qu(h,y,_,A){var R;if(Array.isArray(y))v.each(y,function(B,U){_||wg.test(h)?A(h,U):qu(h+"["+(typeof U=="object"&&U!=null?B:"")+"]",U,_,A)});else if(!_&&S(y)==="object")for(R in y)qu(h+"["+R+"]",y[R],_,A);else A(h,y)}v.param=function(h,y){var _,A=[],R=function(B,U){var ae=b(U)?U():U;A[A.length]=encodeURIComponent(B)+"="+encodeURIComponent(ae==null?"":ae)};if(h==null)return"";if(Array.isArray(h)||h.jquery&&!v.isPlainObject(h))v.each(h,function(){R(this.name,this.value)});else for(_ in h)qu(_,h[_],y,R);return A.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var h=v.prop(this,"elements");return h?v.makeArray(h):this}).filter(function(){var h=this.type;return this.name&&!v(this).is(":disabled")&&Sg.test(this.nodeName)&&!xg.test(h)&&(this.checked||!dt.test(h))}).map(function(h,y){var _=v(this).val();return _==null?null:Array.isArray(_)?v.map(_,function(A){return{name:y.name,value:A.replace($f,`\r
`)}}):{name:y.name,value:_.replace($f,`\r
`)}}).get()}});var Cg=/%20/g,_g=/#.*$/,Eg=/([?&])_=[^&]*/,Tg=/^(.*?):[ \t]*([^\r\n]*)$/mg,Pg=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,kg=/^(?:GET|HEAD)$/,Ag=/^\/\//,Uf={},Wu={},qf="*/".concat("*"),Ku=w.createElement("a");Ku.href=Ri.href;function Wf(h){return function(y,_){typeof y!="string"&&(_=y,y="*");var A,R=0,B=y.toLowerCase().match(ce)||[];if(b(_))for(;A=B[R++];)A[0]==="+"?(A=A.slice(1)||"*",(h[A]=h[A]||[]).unshift(_)):(h[A]=h[A]||[]).push(_)}}function Kf(h,y,_,A){var R={},B=h===Wu;function U(ae){var re;return R[ae]=!0,v.each(h[ae]||[],function(le,be){var Te=be(y,_,A);if(typeof Te=="string"&&!B&&!R[Te])return y.dataTypes.unshift(Te),U(Te),!1;if(B)return!(re=Te)}),re}return U(y.dataTypes[0])||!R["*"]&&U("*")}function ju(h,y){var _,A,R=v.ajaxSettings.flatOptions||{};for(_ in y)y[_]!==void 0&&((R[_]?h:A||(A={}))[_]=y[_]);return A&&v.extend(!0,h,A),h}function Dg(h,y,_){for(var A,R,B,U,ae=h.contents,re=h.dataTypes;re[0]==="*";)re.shift(),A===void 0&&(A=h.mimeType||y.getResponseHeader("Content-Type"));if(A){for(R in ae)if(ae[R]&&ae[R].test(A)){re.unshift(R);break}}if(re[0]in _)B=re[0];else{for(R in _){if(!re[0]||h.converters[R+" "+re[0]]){B=R;break}U||(U=R)}B=B||U}if(B)return B!==re[0]&&re.unshift(B),_[B]}function Mg(h,y,_,A){var R,B,U,ae,re,le={},be=h.dataTypes.slice();if(be[1])for(U in h.converters)le[U.toLowerCase()]=h.converters[U];for(B=be.shift();B;)if(h.responseFields[B]&&(_[h.responseFields[B]]=y),!re&&A&&h.dataFilter&&(y=h.dataFilter(y,h.dataType)),re=B,B=be.shift(),B){if(B==="*")B=re;else if(re!=="*"&&re!==B){if(U=le[re+" "+B]||le["* "+B],!U){for(R in le)if(ae=R.split(" "),ae[1]===B&&(U=le[re+" "+ae[0]]||le["* "+ae[0]],U)){U===!0?U=le[R]:le[R]!==!0&&(B=ae[0],be.unshift(ae[1]));break}}if(U!==!0)if(U&&h.throws)y=U(y);else try{y=U(y)}catch(Te){return{state:"parsererror",error:U?Te:"No conversion from "+re+" to "+B}}}}return{state:"success",data:y}}v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ri.href,type:"GET",isLocal:Pg.test(Ri.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":qf,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(h,y){return y?ju(ju(h,v.ajaxSettings),y):ju(v.ajaxSettings,h)},ajaxPrefilter:Wf(Uf),ajaxTransport:Wf(Wu),ajax:function(h,y){typeof h=="object"&&(y=h,h=void 0),y=y||{};var _,A,R,B,U,ae,re,le,be,Te,de=v.ajaxSetup({},y),Me=de.context||de,it=de.context&&(Me.nodeType||Me.jquery)?v(Me):v.event,wt=v.Deferred(),ut=v.Callbacks("once memory"),wr=de.statusCode||{},ur={},gn={},pn="canceled",mt={readyState:0,getResponseHeader:function(St){var Jt;if(re){if(!B)for(B={};Jt=Tg.exec(R);)B[Jt[1].toLowerCase()+" "]=(B[Jt[1].toLowerCase()+" "]||[]).concat(Jt[2]);Jt=B[St.toLowerCase()+" "]}return Jt==null?null:Jt.join(", ")},getAllResponseHeaders:function(){return re?R:null},setRequestHeader:function(St,Jt){return re==null&&(St=gn[St.toLowerCase()]=gn[St.toLowerCase()]||St,ur[St]=Jt),this},overrideMimeType:function(St){return re==null&&(de.mimeType=St),this},statusCode:function(St){var Jt;if(St)if(re)mt.always(St[mt.status]);else for(Jt in St)wr[Jt]=[wr[Jt],St[Jt]];return this},abort:function(St){var Jt=St||pn;return _&&_.abort(Jt),Ca(0,Jt),this}};if(wt.promise(mt),de.url=((h||de.url||Ri.href)+"").replace(Ag,Ri.protocol+"//"),de.type=y.method||y.type||de.method||de.type,de.dataTypes=(de.dataType||"*").toLowerCase().match(ce)||[""],de.crossDomain==null){ae=w.createElement("a");try{ae.href=de.url,ae.href=ae.href,de.crossDomain=Ku.protocol+"//"+Ku.host!=ae.protocol+"//"+ae.host}catch{de.crossDomain=!0}}if(de.data&&de.processData&&typeof de.data!="string"&&(de.data=v.param(de.data,de.traditional)),Kf(Uf,de,y,mt),re)return mt;le=v.event&&de.global,le&&v.active++===0&&v.event.trigger("ajaxStart"),de.type=de.type.toUpperCase(),de.hasContent=!kg.test(de.type),A=de.url.replace(_g,""),de.hasContent?de.data&&de.processData&&(de.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(de.data=de.data.replace(Cg,"+")):(Te=de.url.slice(A.length),de.data&&(de.processData||typeof de.data=="string")&&(A+=(Uu.test(A)?"&":"?")+de.data,delete de.data),de.cache===!1&&(A=A.replace(Eg,"$1"),Te=(Uu.test(A)?"&":"?")+"_="+Gf.guid+++Te),de.url=A+Te),de.ifModified&&(v.lastModified[A]&&mt.setRequestHeader("If-Modified-Since",v.lastModified[A]),v.etag[A]&&mt.setRequestHeader("If-None-Match",v.etag[A])),(de.data&&de.hasContent&&de.contentType!==!1||y.contentType)&&mt.setRequestHeader("Content-Type",de.contentType),mt.setRequestHeader("Accept",de.dataTypes[0]&&de.accepts[de.dataTypes[0]]?de.accepts[de.dataTypes[0]]+(de.dataTypes[0]!=="*"?", "+qf+"; q=0.01":""):de.accepts["*"]);for(be in de.headers)mt.setRequestHeader(be,de.headers[be]);if(de.beforeSend&&(de.beforeSend.call(Me,mt,de)===!1||re))return mt.abort();if(pn="abort",ut.add(de.complete),mt.done(de.success),mt.fail(de.error),_=Kf(Wu,de,y,mt),!_)Ca(-1,"No Transport");else{if(mt.readyState=1,le&&it.trigger("ajaxSend",[mt,de]),re)return mt;de.async&&de.timeout>0&&(U=e.setTimeout(function(){mt.abort("timeout")},de.timeout));try{re=!1,_.send(ur,Ca)}catch(St){if(re)throw St;Ca(-1,St)}}function Ca(St,Jt,Bi,Xu){var yn,zi,mn,Qn,Zn,Xr=Jt;re||(re=!0,U&&e.clearTimeout(U),_=void 0,R=Xu||"",mt.readyState=St>0?4:0,yn=St>=200&&St<300||St===304,Bi&&(Qn=Dg(de,mt,Bi)),!yn&&v.inArray("script",de.dataTypes)>-1&&v.inArray("json",de.dataTypes)<0&&(de.converters["text script"]=function(){}),Qn=Mg(de,Qn,mt,yn),yn?(de.ifModified&&(Zn=mt.getResponseHeader("Last-Modified"),Zn&&(v.lastModified[A]=Zn),Zn=mt.getResponseHeader("etag"),Zn&&(v.etag[A]=Zn)),St===204||de.type==="HEAD"?Xr="nocontent":St===304?Xr="notmodified":(Xr=Qn.state,zi=Qn.data,mn=Qn.error,yn=!mn)):(mn=Xr,(St||!Xr)&&(Xr="error",St<0&&(St=0))),mt.status=St,mt.statusText=(Jt||Xr)+"",yn?wt.resolveWith(Me,[zi,Xr,mt]):wt.rejectWith(Me,[mt,Xr,mn]),mt.statusCode(wr),wr=void 0,le&&it.trigger(yn?"ajaxSuccess":"ajaxError",[mt,de,yn?zi:mn]),ut.fireWith(Me,[mt,Xr]),le&&(it.trigger("ajaxComplete",[mt,de]),--v.active||v.event.trigger("ajaxStop")))}return mt},getJSON:function(h,y,_){return v.get(h,y,_,"json")},getScript:function(h,y){return v.get(h,void 0,y,"script")}}),v.each(["get","post"],function(h,y){v[y]=function(_,A,R,B){return b(A)&&(B=B||R,R=A,A=void 0),v.ajax(v.extend({url:_,type:y,dataType:B,data:A,success:R},v.isPlainObject(_)&&_))}}),v.ajaxPrefilter(function(h){var y;for(y in h.headers)y.toLowerCase()==="content-type"&&(h.contentType=h.headers[y]||"")}),v._evalUrl=function(h,y,_){return v.ajax({url:h,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(A){v.globalEval(A,y,_)}})},v.fn.extend({wrapAll:function(h){var y;return this[0]&&(b(h)&&(h=h.call(this[0])),y=v(h,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&y.insertBefore(this[0]),y.map(function(){for(var _=this;_.firstElementChild;)_=_.firstElementChild;return _}).append(this)),this},wrapInner:function(h){return b(h)?this.each(function(y){v(this).wrapInner(h.call(this,y))}):this.each(function(){var y=v(this),_=y.contents();_.length?_.wrapAll(h):y.append(h)})},wrap:function(h){var y=b(h);return this.each(function(_){v(this).wrapAll(y?h.call(this,_):h)})},unwrap:function(h){return this.parent(h).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(h){return!v.expr.pseudos.visible(h)},v.expr.pseudos.visible=function(h){return!!(h.offsetWidth||h.offsetHeight||h.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Og={0:200,1223:204},Fi=v.ajaxSettings.xhr();d.cors=!!Fi&&"withCredentials"in Fi,d.ajax=Fi=!!Fi,v.ajaxTransport(function(h){var y,_;if(d.cors||Fi&&!h.crossDomain)return{send:function(A,R){var B,U=h.xhr();if(U.open(h.type,h.url,h.async,h.username,h.password),h.xhrFields)for(B in h.xhrFields)U[B]=h.xhrFields[B];h.mimeType&&U.overrideMimeType&&U.overrideMimeType(h.mimeType),!h.crossDomain&&!A["X-Requested-With"]&&(A["X-Requested-With"]="XMLHttpRequest");for(B in A)U.setRequestHeader(B,A[B]);y=function(ae){return function(){y&&(y=_=U.onload=U.onerror=U.onabort=U.ontimeout=U.onreadystatechange=null,ae==="abort"?U.abort():ae==="error"?typeof U.status!="number"?R(0,"error"):R(U.status,U.statusText):R(Og[U.status]||U.status,U.statusText,(U.responseType||"text")!=="text"||typeof U.responseText!="string"?{binary:U.response}:{text:U.responseText},U.getAllResponseHeaders()))}},U.onload=y(),_=U.onerror=U.ontimeout=y("error"),U.onabort!==void 0?U.onabort=_:U.onreadystatechange=function(){U.readyState===4&&e.setTimeout(function(){y&&_()})},y=y("abort");try{U.send(h.hasContent&&h.data||null)}catch(ae){if(y)throw ae}},abort:function(){y&&y()}}}),v.ajaxPrefilter(function(h){h.crossDomain&&(h.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(h){return v.globalEval(h),h}}}),v.ajaxPrefilter("script",function(h){h.cache===void 0&&(h.cache=!1),h.crossDomain&&(h.type="GET")}),v.ajaxTransport("script",function(h){if(h.crossDomain||h.scriptAttrs){var y,_;return{send:function(A,R){y=v("<script>").attr(h.scriptAttrs||{}).prop({charset:h.scriptCharset,src:h.url}).on("load error",_=function(B){y.remove(),_=null,B&&R(B.type==="error"?404:200,B.type)}),w.head.appendChild(y[0])},abort:function(){_&&_()}}}});var jf=[],Yu=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var h=jf.pop()||v.expando+"_"+Gf.guid++;return this[h]=!0,h}}),v.ajaxPrefilter("json jsonp",function(h,y,_){var A,R,B,U=h.jsonp!==!1&&(Yu.test(h.url)?"url":typeof h.data=="string"&&(h.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&Yu.test(h.data)&&"data");if(U||h.dataTypes[0]==="jsonp")return A=h.jsonpCallback=b(h.jsonpCallback)?h.jsonpCallback():h.jsonpCallback,U?h[U]=h[U].replace(Yu,"$1"+A):h.jsonp!==!1&&(h.url+=(Uu.test(h.url)?"&":"?")+h.jsonp+"="+A),h.converters["script json"]=function(){return B||v.error(A+" was not called"),B[0]},h.dataTypes[0]="json",R=e[A],e[A]=function(){B=arguments},_.always(function(){R===void 0?v(e).removeProp(A):e[A]=R,h[A]&&(h.jsonpCallback=y.jsonpCallback,jf.push(A)),B&&b(R)&&R(B[0]),B=R=void 0}),"script"}),d.createHTMLDocument=function(){var h=w.implementation.createHTMLDocument("").body;return h.innerHTML="<form></form><form></form>",h.childNodes.length===2}(),v.parseHTML=function(h,y,_){if(typeof h!="string")return[];typeof y=="boolean"&&(_=y,y=!1);var A,R,B;return y||(d.createHTMLDocument?(y=w.implementation.createHTMLDocument(""),A=y.createElement("base"),A.href=w.location.href,y.head.appendChild(A)):y=w),R=L.exec(h),B=!_&&[],R?[y.createElement(R[1])]:(R=ir([h],y,B),B&&B.length&&v(B).remove(),v.merge([],R.childNodes))},v.fn.load=function(h,y,_){var A,R,B,U=this,ae=h.indexOf(" ");return ae>-1&&(A=xa(h.slice(ae)),h=h.slice(0,ae)),b(y)?(_=y,y=void 0):y&&typeof y=="object"&&(R="POST"),U.length>0&&v.ajax({url:h,type:R||"GET",dataType:"html",data:y}).done(function(re){B=arguments,U.html(A?v("<div>").append(v.parseHTML(re)).find(A):re)}).always(_&&function(re,le){U.each(function(){_.apply(this,B||[re.responseText,le,re])})}),this},v.expr.pseudos.animated=function(h){return v.grep(v.timers,function(y){return h===y.elem}).length},v.offset={setOffset:function(h,y,_){var A,R,B,U,ae,re,le,be=v.css(h,"position"),Te=v(h),de={};be==="static"&&(h.style.position="relative"),ae=Te.offset(),B=v.css(h,"top"),re=v.css(h,"left"),le=(be==="absolute"||be==="fixed")&&(B+re).indexOf("auto")>-1,le?(A=Te.position(),U=A.top,R=A.left):(U=parseFloat(B)||0,R=parseFloat(re)||0),b(y)&&(y=y.call(h,_,v.extend({},ae))),y.top!=null&&(de.top=y.top-ae.top+U),y.left!=null&&(de.left=y.left-ae.left+R),"using"in y?y.using.call(h,de):Te.css(de)}},v.fn.extend({offset:function(h){if(arguments.length)return h===void 0?this:this.each(function(R){v.offset.setOffset(this,h,R)});var y,_,A=this[0];if(!!A)return A.getClientRects().length?(y=A.getBoundingClientRect(),_=A.ownerDocument.defaultView,{top:y.top+_.pageYOffset,left:y.left+_.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var h,y,_,A=this[0],R={top:0,left:0};if(v.css(A,"position")==="fixed")y=A.getBoundingClientRect();else{for(y=this.offset(),_=A.ownerDocument,h=A.offsetParent||_.documentElement;h&&(h===_.body||h===_.documentElement)&&v.css(h,"position")==="static";)h=h.parentNode;h&&h!==A&&h.nodeType===1&&(R=v(h).offset(),R.top+=v.css(h,"borderTopWidth",!0),R.left+=v.css(h,"borderLeftWidth",!0))}return{top:y.top-R.top-v.css(A,"marginTop",!0),left:y.left-R.left-v.css(A,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var h=this.offsetParent;h&&v.css(h,"position")==="static";)h=h.offsetParent;return h||ze})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(h,y){var _=y==="pageYOffset";v.fn[h]=function(A){return xe(this,function(R,B,U){var ae;if(x(R)?ae=R:R.nodeType===9&&(ae=R.defaultView),U===void 0)return ae?ae[y]:R[B];ae?ae.scrollTo(_?ae.pageXOffset:U,_?U:ae.pageYOffset):R[B]=U},h,A,arguments.length)}}),v.each(["top","left"],function(h,y){v.cssHooks[y]=tn(d.pixelPosition,function(_,A){if(A)return A=Vr(_,y),gt.test(A)?v(_).position()[y]+"px":A})}),v.each({Height:"height",Width:"width"},function(h,y){v.each({padding:"inner"+h,content:y,"":"outer"+h},function(_,A){v.fn[A]=function(R,B){var U=arguments.length&&(_||typeof R!="boolean"),ae=_||(R===!0||B===!0?"margin":"border");return xe(this,function(re,le,be){var Te;return x(re)?A.indexOf("outer")===0?re["inner"+h]:re.document.documentElement["client"+h]:re.nodeType===9?(Te=re.documentElement,Math.max(re.body["scroll"+h],Te["scroll"+h],re.body["offset"+h],Te["offset"+h],Te["client"+h])):be===void 0?v.css(re,le,ae):v.style(re,le,be,ae)},y,U?R:void 0,U)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(h,y){v.fn[y]=function(_){return this.on(y,_)}}),v.fn.extend({bind:function(h,y,_){return this.on(h,null,y,_)},unbind:function(h,y){return this.off(h,null,y)},delegate:function(h,y,_,A){return this.on(y,h,_,A)},undelegate:function(h,y,_){return arguments.length===1?this.off(h,"**"):this.off(y,h||"**",_)},hover:function(h,y){return this.on("mouseenter",h).on("mouseleave",y||h)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(h,y){v.fn[y]=function(_,A){return arguments.length>0?this.on(y,null,_,A):this.trigger(y)}});var Lg=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(h,y){var _,A,R;if(typeof y=="string"&&(_=h[y],y=h,h=_),!!b(h))return A=i.call(arguments,2),R=function(){return h.apply(y||this,A.concat(i.call(arguments)))},R.guid=h.guid=h.guid||v.guid++,R},v.holdReady=function(h){h?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=k,v.isFunction=b,v.isWindow=x,v.camelCase=We,v.type=S,v.now=Date.now,v.isNumeric=function(h){var y=v.type(h);return(y==="number"||y==="string")&&!isNaN(h-parseFloat(h))},v.trim=function(h){return h==null?"":(h+"").replace(Lg,"$1")};var Ng=e.jQuery,Ig=e.$;return v.noConflict=function(h){return e.$===v&&(e.$=Ig),h&&e.jQuery===v&&(e.jQuery=Ng),v},typeof t=="undefined"&&(e.jQuery=e.$=v),v})})(kv);var wl=kv.exports,Wl={exports:{}},Ks={},js={},ct={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r._registerNode=r._NODES_REGISTRY=r.Konva=r.glob=r._parseUA=void 0;var e=Math.PI/180;function t(){return typeof window!="undefined"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}var n=function(o){var s=o.indexOf("msie ");if(s>0)return parseInt(o.substring(s+5,o.indexOf(".",s)),10);var l=o.indexOf("trident/");if(l>0){var u=o.indexOf("rv:");return parseInt(o.substring(u+3,o.indexOf(".",u)),10)}var f=o.indexOf("edge/");return f>0?parseInt(o.substring(f+5,o.indexOf(".",f)),10):!1},a=function(o){var s=o.toLowerCase(),l=/(chrome)[ /]([\w.]+)/.exec(s)||/(webkit)[ /]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(s)||[],u=!!o.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),f=!!o.match(/IEMobile/i);return{browser:l[1]||"",version:l[2]||"0",isIE:n(s),mobile:u,ieMobile:f}};r._parseUA=a,r.glob=typeof Xe!="undefined"?Xe:typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"?self:{},r.Konva={_global:r.glob,version:"7.2.5",isBrowser:t(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle:function(o){return r.Konva.angleDeg?o*e:o},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return r.Konva.DD.isDragging},isDragReady:function(){return!!r.Konva.DD.node},UA:r._parseUA(r.glob.navigator&&r.glob.navigator.userAgent||""),document:r.glob.document,_injectGlobal:function(o){r.glob.Konva=o},_parseUA:r._parseUA},r._NODES_REGISTRY={};var i=function(o){r._NODES_REGISTRY[o.prototype.getClassName()]=o,r.Konva[o.prototype.getClassName()]=o};r._registerNode=i})(ct);var bt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Util=r.Transform=r.Collection=void 0;var e=ct,t=function(){function m(){}return m.toCollection=function(S){var P=new m,D=S.length,v;for(v=0;v<D;v++)P.push(S[v]);return P},m._mapMethod=function(S){m.prototype[S]=function(){var P=this.length,D,v=[].slice.call(arguments);for(D=0;D<P;D++)this[D][S].apply(this[D],v);return this}},m.mapMethods=function(S){var P=S.prototype;for(var D in P)m._mapMethod(D)},m}();r.Collection=t,t.prototype=[],t.prototype.each=function(m){for(var S=0;S<this.length;S++)m(this[S],S)},t.prototype.toArray=function(){var m=[],S=this.length,P;for(P=0;P<S;P++)m.push(this[P]);return m};var n=function(){function m(S){S===void 0&&(S=[1,0,0,1,0,0]),this.dirty=!1,this.m=S&&S.slice()||[1,0,0,1,0,0]}return m.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},m.prototype.copy=function(){return new m(this.m)},m.prototype.copyInto=function(S){S.m[0]=this.m[0],S.m[1]=this.m[1],S.m[2]=this.m[2],S.m[3]=this.m[3],S.m[4]=this.m[4],S.m[5]=this.m[5]},m.prototype.point=function(S){var P=this.m;return{x:P[0]*S.x+P[2]*S.y+P[4],y:P[1]*S.x+P[3]*S.y+P[5]}},m.prototype.translate=function(S,P){return this.m[4]+=this.m[0]*S+this.m[2]*P,this.m[5]+=this.m[1]*S+this.m[3]*P,this},m.prototype.scale=function(S,P){return this.m[0]*=S,this.m[1]*=S,this.m[2]*=P,this.m[3]*=P,this},m.prototype.rotate=function(S){var P=Math.cos(S),D=Math.sin(S),v=this.m[0]*P+this.m[2]*D,E=this.m[1]*P+this.m[3]*D,k=this.m[0]*-D+this.m[2]*P,N=this.m[1]*-D+this.m[3]*P;return this.m[0]=v,this.m[1]=E,this.m[2]=k,this.m[3]=N,this},m.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},m.prototype.skew=function(S,P){var D=this.m[0]+this.m[2]*P,v=this.m[1]+this.m[3]*P,E=this.m[2]+this.m[0]*S,k=this.m[3]+this.m[1]*S;return this.m[0]=D,this.m[1]=v,this.m[2]=E,this.m[3]=k,this},m.prototype.multiply=function(S){var P=this.m[0]*S.m[0]+this.m[2]*S.m[1],D=this.m[1]*S.m[0]+this.m[3]*S.m[1],v=this.m[0]*S.m[2]+this.m[2]*S.m[3],E=this.m[1]*S.m[2]+this.m[3]*S.m[3],k=this.m[0]*S.m[4]+this.m[2]*S.m[5]+this.m[4],N=this.m[1]*S.m[4]+this.m[3]*S.m[5]+this.m[5];return this.m[0]=P,this.m[1]=D,this.m[2]=v,this.m[3]=E,this.m[4]=k,this.m[5]=N,this},m.prototype.invert=function(){var S=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),P=this.m[3]*S,D=-this.m[1]*S,v=-this.m[2]*S,E=this.m[0]*S,k=S*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),N=S*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=P,this.m[1]=D,this.m[2]=v,this.m[3]=E,this.m[4]=k,this.m[5]=N,this},m.prototype.getMatrix=function(){return this.m},m.prototype.setAbsolutePosition=function(S,P){var D=this.m[0],v=this.m[1],E=this.m[2],k=this.m[3],N=this.m[4],O=this.m[5],I=(D*(P-O)-v*(S-N))/(D*k-v*E),H=(S-N-E*I)/D;return this.translate(H,I)},m.prototype.decompose=function(){var S=this.m[0],P=this.m[1],D=this.m[2],v=this.m[3],E=this.m[4],k=this.m[5],N=S*v-P*D,O={x:E,y:k,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(S!=0||P!=0){var I=Math.sqrt(S*S+P*P);O.rotation=P>0?Math.acos(S/I):-Math.acos(S/I),O.scaleX=I,O.scaleY=N/I,O.skewX=(S*D+P*v)/N,O.skewY=0}else if(D!=0||v!=0){var H=Math.sqrt(D*D+v*v);O.rotation=Math.PI/2-(v>0?Math.acos(-D/H):-Math.acos(D/H)),O.scaleX=N/H,O.scaleY=H,O.skewX=0,O.skewY=(S*D+P*v)/N}return O.rotation=r.Util._getRotation(O.rotation),O},m}();r.Transform=n;var a="[object Array]",i="[object Number]",o="[object String]",s="[object Boolean]",l=Math.PI/180,u=180/Math.PI,f="#",c="",p="0",g="Konva warning: ",d="Konva error: ",b="rgb(",x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},w=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,C=[];r.Util={_isElement:function(m){return!!(m&&m.nodeType==1)},_isFunction:function(m){return!!(m&&m.constructor&&m.call&&m.apply)},_isPlainObject:function(m){return!!m&&m.constructor===Object},_isArray:function(m){return Object.prototype.toString.call(m)===a},_isNumber:function(m){return Object.prototype.toString.call(m)===i&&!isNaN(m)&&isFinite(m)},_isString:function(m){return Object.prototype.toString.call(m)===o},_isBoolean:function(m){return Object.prototype.toString.call(m)===s},isObject:function(m){return m instanceof Object},isValidSelector:function(m){if(typeof m!="string")return!1;var S=m[0];return S==="#"||S==="."||S===S.toUpperCase()},_sign:function(m){return m===0||m>0?1:-1},requestAnimFrame:function(m){C.push(m),C.length===1&&requestAnimationFrame(function(){var S=C;C=[],S.forEach(function(P){P()})})},createCanvasElement:function(){var m=document.createElement("canvas");try{m.style=m.style||{}}catch{}return m},createImageElement:function(){return document.createElement("img")},_isInDocument:function(m){for(;m=m.parentNode;)if(m==document)return!0;return!1},_simplifyArray:function(m){var S=[],P=m.length,D=r.Util,v,E;for(v=0;v<P;v++)E=m[v],D._isNumber(E)?E=Math.round(E*1e3)/1e3:D._isString(E)||(E=E.toString()),S.push(E);return S},_urlToImage:function(m,S){var P=new e.glob.Image;P.onload=function(){S(P)},P.src=m},_rgbToHex:function(m,S,P){return((1<<24)+(m<<16)+(S<<8)+P).toString(16).slice(1)},_hexToRgb:function(m){m=m.replace(f,c);var S=parseInt(m,16);return{r:S>>16&255,g:S>>8&255,b:S&255}},getRandomColor:function(){for(var m=(Math.random()*16777215<<0).toString(16);m.length<6;)m=p+m;return f+m},get:function(m,S){return m===void 0?S:m},getRGB:function(m){var S;return m in x?(S=x[m],{r:S[0],g:S[1],b:S[2]}):m[0]===f?this._hexToRgb(m.substring(1)):m.substr(0,4)===b?(S=w.exec(m.replace(/ /g,"")),{r:parseInt(S[1],10),g:parseInt(S[2],10),b:parseInt(S[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(m){return m=m||"black",r.Util._namedColorToRBA(m)||r.Util._hex3ColorToRGBA(m)||r.Util._hex6ColorToRGBA(m)||r.Util._rgbColorToRGBA(m)||r.Util._rgbaColorToRGBA(m)||r.Util._hslColorToRGBA(m)},_namedColorToRBA:function(m){var S=x[m.toLowerCase()];return S?{r:S[0],g:S[1],b:S[2],a:1}:null},_rgbColorToRGBA:function(m){if(m.indexOf("rgb(")===0){m=m.match(/rgb\(([^)]+)\)/)[1];var S=m.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:1}}},_rgbaColorToRGBA:function(m){if(m.indexOf("rgba(")===0){m=m.match(/rgba\(([^)]+)\)/)[1];var S=m.split(/ *, */).map(Number);return{r:S[0],g:S[1],b:S[2],a:S[3]}}},_hex6ColorToRGBA:function(m){if(m[0]==="#"&&m.length===7)return{r:parseInt(m.slice(1,3),16),g:parseInt(m.slice(3,5),16),b:parseInt(m.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(m){if(m[0]==="#"&&m.length===4)return{r:parseInt(m[1]+m[1],16),g:parseInt(m[2]+m[2],16),b:parseInt(m[3]+m[3],16),a:1}},_hslColorToRGBA:function(m){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(m)){var S=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(m);S[0];var P=S.slice(1),D=Number(P[0])/360,v=Number(P[1])/100,E=Number(P[2])/100,k=void 0,N=void 0,O=void 0;if(v===0)return O=E*255,{r:Math.round(O),g:Math.round(O),b:Math.round(O),a:1};E<.5?k=E*(1+v):k=E+v-E*v;for(var I=2*E-k,H=[0,0,0],G=0;G<3;G++)N=D+1/3*-(G-1),N<0&&N++,N>1&&N--,6*N<1?O=I+(k-I)*6*N:2*N<1?O=k:3*N<2?O=I+(k-I)*(2/3-N)*6:O=I,H[G]=O*255;return{r:Math.round(H[0]),g:Math.round(H[1]),b:Math.round(H[2]),a:1}}},haveIntersection:function(m,S){return!(S.x>m.x+m.width||S.x+S.width<m.x||S.y>m.y+m.height||S.y+S.height<m.y)},cloneObject:function(m){var S={};for(var P in m)this._isPlainObject(m[P])?S[P]=this.cloneObject(m[P]):this._isArray(m[P])?S[P]=this.cloneArray(m[P]):S[P]=m[P];return S},cloneArray:function(m){return m.slice(0)},_degToRad:function(m){return m*l},_radToDeg:function(m){return m*u},_getRotation:function(m){return e.Konva.angleDeg?r.Util._radToDeg(m):m},_capitalize:function(m){return m.charAt(0).toUpperCase()+m.slice(1)},throw:function(m){throw new Error(d+m)},error:function(m){console.error(d+m)},warn:function(m){!e.Konva.showWarnings||console.warn(g+m)},extend:function(m,S){function P(){this.constructor=m}P.prototype=S.prototype;var D=m.prototype;m.prototype=new P;for(var v in D)D.hasOwnProperty(v)&&(m.prototype[v]=D[v]);m.__super__=S.prototype,m.super=S},_getControlPoints:function(m,S,P,D,v,E,k){var N=Math.sqrt(Math.pow(P-m,2)+Math.pow(D-S,2)),O=Math.sqrt(Math.pow(v-P,2)+Math.pow(E-D,2)),I=k*N/(N+O),H=k*O/(N+O),G=P-I*(v-m),Y=D-I*(E-S),j=P+H*(v-m),q=D+H*(E-S);return[G,Y,j,q]},_expandPoints:function(m,S){var P=m.length,D=[],v,E;for(v=2;v<P-2;v+=2)E=r.Util._getControlPoints(m[v-2],m[v-1],m[v],m[v+1],m[v+2],m[v+3],S),!isNaN(E[0])&&(D.push(E[0]),D.push(E[1]),D.push(m[v]),D.push(m[v+1]),D.push(E[2]),D.push(E[3]));return D},each:function(m,S){for(var P in m)S(P,m[P])},_inRange:function(m,S,P){return S<=m&&m<P},_getProjectionToSegment:function(m,S,P,D,v,E){var k,N,O,I=(m-P)*(m-P)+(S-D)*(S-D);if(I==0)k=m,N=S,O=(v-P)*(v-P)+(E-D)*(E-D);else{var H=((v-m)*(P-m)+(E-S)*(D-S))/I;H<0?(k=m,N=S,O=(m-v)*(m-v)+(S-E)*(S-E)):H>1?(k=P,N=D,O=(P-v)*(P-v)+(D-E)*(D-E)):(k=m+H*(P-m),N=S+H*(D-S),O=(k-v)*(k-v)+(N-E)*(N-E))}return[k,N,O]},_getProjectionToLine:function(m,S,P){var D=r.Util.cloneObject(m),v=Number.MAX_VALUE;return S.forEach(function(E,k){if(!(!P&&k===S.length-1)){var N=S[(k+1)%S.length],O=r.Util._getProjectionToSegment(E.x,E.y,N.x,N.y,m.x,m.y),I=O[0],H=O[1],G=O[2];G<v&&(D.x=I,D.y=H,v=G)}}),D},_prepareArrayForTween:function(m,S,P){var D,v=[],E=[];if(m.length>S.length){var k=S;S=m,m=k}for(D=0;D<m.length;D+=2)v.push({x:m[D],y:m[D+1]});for(D=0;D<S.length;D+=2)E.push({x:S[D],y:S[D+1]});var N=[];return E.forEach(function(O){var I=r.Util._getProjectionToLine(O,v,P);N.push(I.x),N.push(I.y)}),N},_prepareToStringify:function(m){var S;m.visitedByCircularReferenceRemoval=!0;for(var P in m)if(!!(m.hasOwnProperty(P)&&m[P]&&typeof m[P]=="object")){if(S=Object.getOwnPropertyDescriptor(m,P),m[P].visitedByCircularReferenceRemoval||r.Util._isElement(m[P]))if(S.configurable)delete m[P];else return null;else if(r.Util._prepareToStringify(m[P])===null)if(S.configurable)delete m[P];else return null}return delete m.visitedByCircularReferenceRemoval,m},_assign:function(m,S){for(var P in S)m[P]=S[P];return m},_getFirstPointerId:function(m){return m.touches?m.changedTouches[0].identifier:999}}})(bt);var nr={},ft={},Ye={};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.getComponentValidator=Ye.getBooleanValidator=Ye.getNumberArrayValidator=Ye.getFunctionValidator=Ye.getStringOrGradientValidator=Ye.getStringValidator=Ye.getNumberOrAutoValidator=Ye.getNumberOrArrayOfNumbersValidator=Ye.getNumberValidator=Ye.alphaComponent=Ye.RGBComponent=void 0;var Un=ct,tr=bt;function qn(r){return tr.Util._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||tr.Util._isBoolean(r)?r:Object.prototype.toString.call(r)}function qx(r){return r>255?255:r<0?0:Math.round(r)}Ye.RGBComponent=qx;function Wx(r){return r>1?1:r<1e-4?1e-4:r}Ye.alphaComponent=Wx;function Kx(){if(Un.Konva.isUnminified)return function(r,e){return tr.Util._isNumber(r)||tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}Ye.getNumberValidator=Kx;function jx(r){if(Un.Konva.isUnminified)return function(e,t){var n=tr.Util._isNumber(e),a=tr.Util._isArray(e)&&e.length==r;return!n&&!a&&tr.Util.warn(qn(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}Ye.getNumberOrArrayOfNumbersValidator=jx;function Yx(){if(Un.Konva.isUnminified)return function(r,e){var t=tr.Util._isNumber(r),n=r==="auto";return t||n||tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}Ye.getNumberOrAutoValidator=Yx;function Xx(){if(Un.Konva.isUnminified)return function(r,e){return tr.Util._isString(r)||tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}Ye.getStringValidator=Xx;function Qx(){if(Un.Konva.isUnminified)return function(r,e){var t=tr.Util._isString(r),n=Object.prototype.toString.call(r)==="[object CanvasGradient]";return t||n||tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}Ye.getStringOrGradientValidator=Qx;function Zx(){if(Un.Konva.isUnminified)return function(r,e){return tr.Util._isFunction(r)||tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),r}}Ye.getFunctionValidator=Zx;function Jx(){if(Un.Konva.isUnminified)return function(r,e){return tr.Util._isArray(r)?r.forEach(function(t){tr.Util._isNumber(t)||tr.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),r}}Ye.getNumberArrayValidator=Jx;function e2(){if(Un.Konva.isUnminified)return function(r,e){var t=r===!0||r===!1;return t||tr.Util.warn(qn(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}Ye.getBooleanValidator=e2;function t2(r){if(Un.Konva.isUnminified)return function(e,t){return tr.Util.isObject(e)||tr.Util.warn(qn(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}Ye.getComponentValidator=t2;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Factory=void 0;var e=bt,t=Ye,n="get",a="set";r.Factory={addGetterSetter:function(i,o,s,l,u){r.Factory.addGetter(i,o,s),r.Factory.addSetter(i,o,l,u),r.Factory.addOverloadedGetterSetter(i,o)},addGetter:function(i,o,s){var l=n+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter:function(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||r.Factory.overWriteSetter(i,o,s,l)},overWriteSetter:function(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(f){return s&&f!==void 0&&f!==null&&(f=s.call(this,f,o)),this._setAttr(o,f),l&&l.call(this),this}},addComponentsGetterSetter:function(i,o,s,l,u){var f=s.length,c=e.Util._capitalize,p=n+c(o),g=a+c(o),d,b;i.prototype[p]=function(){var w={};for(d=0;d<f;d++)b=s[d],w[b]=this.getAttr(o+c(b));return w};var x=t.getComponentValidator(s);i.prototype[g]=function(w){var C=this.attrs[o],m;l&&(w=l.call(this,w)),x&&x.call(this,w,o);for(m in w)!w.hasOwnProperty(m)||this._setAttr(o+c(m),w[m]);return this._fireChangeEvent(o,C,w),u&&u.call(this),this},r.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter:function(i,o){var s=e.Util._capitalize(o),l=a+s,u=n+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter:function(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=n+e.Util._capitalize(o),f=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(f);var c=this.attrs[o];return c===void 0?s:c},r.Factory.addSetter(i,o,l,function(){e.Util.error(f)}),r.Factory.addOverloadedGetterSetter(i,o)},backCompat:function(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],f=n+e.Util._capitalize(s),c=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[f]=p,i.prototype[c]=p})},afterSetFilter:function(){this._filterUpToDate=!1}}})(ft);var fn={},Bn={},Av=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Bn,"__esModule",{value:!0});Bn.HitContext=Bn.SceneContext=Bn.Context=void 0;var Kl=bt,Dv=ct,yh=",",r2="(",n2=")",a2="([",i2="])",o2=";",s2="()",u2="=",mh=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],l2=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],f2=100,Ys=function(){function r(e){this.canvas=e,this._context=e._canvas.getContext("2d"),Dv.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return r.prototype.fillShape=function(e){e.fillEnabled()&&this._fill(e)},r.prototype._fill=function(e){},r.prototype.strokeShape=function(e){e.hasStroke()&&this._stroke(e)},r.prototype._stroke=function(e){},r.prototype.fillStrokeShape=function(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))},r.prototype.getTrace=function(e){var t=this.traceArr,n=t.length,a="",i,o,s,l;for(i=0;i<n;i++)o=t[i],s=o.method,s?(l=o.args,a+=s,e?a+=s2:Kl.Util._isArray(l[0])?a+=a2+l.join(yh)+i2:a+=r2+l.join(yh)+n2):(a+=o.property,e||(a+=u2+o.val)),a+=o2;return a},r.prototype.clearTrace=function(){this.traceArr=[]},r.prototype._trace=function(e){var t=this.traceArr,n;t.push(e),n=t.length,n>=f2&&t.shift()},r.prototype.reset=function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},r.prototype.getCanvas=function(){return this.canvas},r.prototype.clear=function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)},r.prototype._applyLineCap=function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},r.prototype._applyOpacity=function(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)},r.prototype._applyLineJoin=function(e){var t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)},r.prototype.setAttr=function(e,t){this._context[e]=t},r.prototype.arc=function(e,t,n,a,i,o){this._context.arc(e,t,n,a,i,o)},r.prototype.arcTo=function(e,t,n,a,i){this._context.arcTo(e,t,n,a,i)},r.prototype.beginPath=function(){this._context.beginPath()},r.prototype.bezierCurveTo=function(e,t,n,a,i,o){this._context.bezierCurveTo(e,t,n,a,i,o)},r.prototype.clearRect=function(e,t,n,a){this._context.clearRect(e,t,n,a)},r.prototype.clip=function(){this._context.clip()},r.prototype.closePath=function(){this._context.closePath()},r.prototype.createImageData=function(e,t){var n=arguments;if(n.length===2)return this._context.createImageData(e,t);if(n.length===1)return this._context.createImageData(e)},r.prototype.createLinearGradient=function(e,t,n,a){return this._context.createLinearGradient(e,t,n,a)},r.prototype.createPattern=function(e,t){return this._context.createPattern(e,t)},r.prototype.createRadialGradient=function(e,t,n,a,i,o){return this._context.createRadialGradient(e,t,n,a,i,o)},r.prototype.drawImage=function(e,t,n,a,i,o,s,l,u){var f=arguments,c=this._context;f.length===3?c.drawImage(e,t,n):f.length===5?c.drawImage(e,t,n,a,i):f.length===9&&c.drawImage(e,t,n,a,i,o,s,l,u)},r.prototype.ellipse=function(e,t,n,a,i,o,s,l){this._context.ellipse(e,t,n,a,i,o,s,l)},r.prototype.isPointInPath=function(e,t){return this._context.isPointInPath(e,t)},r.prototype.fill=function(){this._context.fill()},r.prototype.fillRect=function(e,t,n,a){this._context.fillRect(e,t,n,a)},r.prototype.strokeRect=function(e,t,n,a){this._context.strokeRect(e,t,n,a)},r.prototype.fillText=function(e,t,n){this._context.fillText(e,t,n)},r.prototype.measureText=function(e){return this._context.measureText(e)},r.prototype.getImageData=function(e,t,n,a){return this._context.getImageData(e,t,n,a)},r.prototype.lineTo=function(e,t){this._context.lineTo(e,t)},r.prototype.moveTo=function(e,t){this._context.moveTo(e,t)},r.prototype.rect=function(e,t,n,a){this._context.rect(e,t,n,a)},r.prototype.putImageData=function(e,t,n){this._context.putImageData(e,t,n)},r.prototype.quadraticCurveTo=function(e,t,n,a){this._context.quadraticCurveTo(e,t,n,a)},r.prototype.restore=function(){this._context.restore()},r.prototype.rotate=function(e){this._context.rotate(e)},r.prototype.save=function(){this._context.save()},r.prototype.scale=function(e,t){this._context.scale(e,t)},r.prototype.setLineDash=function(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)},r.prototype.getLineDash=function(){return this._context.getLineDash()},r.prototype.setTransform=function(e,t,n,a,i,o){this._context.setTransform(e,t,n,a,i,o)},r.prototype.stroke=function(){this._context.stroke()},r.prototype.strokeText=function(e,t,n,a){this._context.strokeText(e,t,n,a)},r.prototype.transform=function(e,t,n,a,i,o){this._context.transform(e,t,n,a,i,o)},r.prototype.translate=function(e,t){this._context.translate(e,t)},r.prototype._enableTrace=function(){var e=this,t=mh.length,n=Kl.Util._simplifyArray,a=this.setAttr,i,o,s=function(l){var u=e[l],f;e[l]=function(){return o=n(Array.prototype.slice.call(arguments,0)),f=u.apply(e,arguments),e._trace({method:l,args:o}),f}};for(i=0;i<t;i++)s(mh[i]);e.setAttr=function(){a.apply(e,arguments);var l=arguments[0],u=arguments[1];(l==="shadowOffsetX"||l==="shadowOffsetY"||l==="shadowBlur")&&(u=u/this.canvas.getPixelRatio()),e._trace({property:l,val:u})}},r.prototype._applyGlobalCompositeOperation=function(e){var t=e.getGlobalCompositeOperation();t!=="source-over"&&this.setAttr("globalCompositeOperation",t)},r}();Bn.Context=Ys;l2.forEach(function(r){Object.defineProperty(Ys.prototype,r,{get:function(){return this._context[r]},set:function(e){this._context[r]=e}})});var c2=function(r){Av(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fillColor=function(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)},e.prototype._fillPattern=function(t){var n=t.getFillPatternX(),a=t.getFillPatternY(),i=Dv.Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffsetX(),s=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY(),(n||a)&&this.translate(n||0,a||0),i&&this.rotate(i),(o||s)&&this.translate(-1*o,-1*s),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fill=function(t){var n=t.fill(),a=t.getFillPriority();if(n&&a==="color"){this._fillColor(t);return}var i=t.getFillPatternImage();if(i&&a==="pattern"){this._fillPattern(t);return}var o=t.getFillLinearGradientColorStops();if(o&&a==="linear-gradient"){this._fillLinearGradient(t);return}var s=t.getFillRadialGradientColorStops();if(s&&a==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):i?this._fillPattern(t):o?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)},e.prototype._strokeLinearGradient=function(t){var n=t.getStrokeLinearGradientStartPoint(),a=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,a.x,a.y);if(i){for(var s=0;s<i.length;s+=2)o.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",o)}},e.prototype._stroke=function(t){var n=t.dash(),a=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!a){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=t.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),a||this.restore()}},e.prototype._applyShadow=function(t){var n=Kl.Util,a=n.get(t.getShadowRGBA(),"black"),i=n.get(t.getShadowBlur(),5),o=n.get(t.getShadowOffset(),{x:0,y:0}),s=t.getAbsoluteScale(),l=this.canvas.getPixelRatio(),u=s.x*l,f=s.y*l;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",i*Math.min(Math.abs(u),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*u),this.setAttr("shadowOffsetY",o.y*f)},e}(Ys);Bn.SceneContext=c2;var h2=function(r){Av(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var n=t.getStrokeScaleEnabled();if(!n){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),o=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}},e}(Ys);Bn.HitContext=h2;var Mv=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(fn,"__esModule",{value:!0});fn.HitCanvas=fn.SceneCanvas=fn.Canvas=void 0;var jl=bt,Ov=Bn,Lv=ct,d2=ft,v2=Ye,Qo;function g2(){if(Qo)return Qo;var r=jl.Util.createCanvasElement(),e=r.getContext("2d");return Qo=function(){var t=Lv.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}(),Qo}var Xs=function(){function r(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=e||{},n=t.pixelRatio||Lv.Konva.pixelRatio||g2();this.pixelRatio=n,this._canvas=jl.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return r.prototype.getContext=function(){return this.context},r.prototype.getPixelRatio=function(){return this.pixelRatio},r.prototype.setPixelRatio=function(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)},r.prototype.setWidth=function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.setHeight=function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.setSize=function(e,t){this.setWidth(e||0),this.setHeight(t||0)},r.prototype.toDataURL=function(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(a){return jl.Util.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},r}();fn.Canvas=Xs;d2.Factory.addGetterSetter(Xs,"pixelRatio",void 0,v2.getNumberValidator());var p2=function(r){Mv(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.context=new Ov.SceneContext(n),n.setSize(t.width,t.height),n}return e}(Xs);fn.SceneCanvas=p2;var y2=function(r){Mv(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.hitCanvas=!0,n.context=new Ov.HitContext(n),n.setSize(t.width,t.height),n}return e}(Xs);fn.HitCanvas=y2;var Qs={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DD=void 0;var e=ct,t=bt;r.DD={get isDragging(){var n=!1;return r.DD._dragElements.forEach(function(a){a.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return r.DD._dragElements.forEach(function(a){n=a.node}),n},_dragElements:new Map,_drag:function(n){var a=[];r.DD._dragElements.forEach(function(i,o){var s=i.node,l=s.getStage();l.setPointersPositions(n),i.pointerId===void 0&&(i.pointerId=t.Util._getFirstPointerId(n));var u=l._changedPointerPositions.find(function(p){return p.id===i.pointerId});if(!!u){if(i.dragStatus!=="dragging"){var f=s.dragDistance(),c=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(c<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,i),a.push(s)}}),a.forEach(function(i){i.fire("dragmove",{type:"dragmove",target:i,evt:n},!0)})},_endDragBefore:function(n){r.DD._dragElements.forEach(function(a,i){var o=a.node,s=o.getStage();n&&s.setPointersPositions(n);var l=s._changedPointerPositions.find(function(f){return f.id===a.pointerId});if(!!l){(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(r.DD.justDragged=!0,e.Konva.listenClickTap=!1,a.dragStatus="stopped");var u=a.node.getLayer()||a.node instanceof e.Konva.Stage&&a.node;u&&u.batchDraw()}})},_endDragAfter:function(n){r.DD._dragElements.forEach(function(a,i){a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:n},!0),a.dragStatus!=="dragging"&&r.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",r.DD._endDragBefore,!0),window.addEventListener("touchend",r.DD._endDragBefore,!0),window.addEventListener("mousemove",r.DD._drag),window.addEventListener("touchmove",r.DD._drag),window.addEventListener("mouseup",r.DD._endDragAfter,!1),window.addEventListener("touchend",r.DD._endDragAfter,!1))})(Qs);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Node=r._removeName=r._addName=r._removeId=r.names=r.ids=void 0;var e=bt,t=ft,n=fn,a=ct,i=Qs,o=Ye;r.ids={},r.names={};var s=function(K,T){!T||(r.ids[T]=K)},l=function(K,T){!K||r.ids[K]===T&&delete r.ids[K]};r._removeId=l;var u=function(K,T){T&&(r.names[T]||(r.names[T]=[]),r.names[T].push(K))};r._addName=u;var f=function(K,T){if(!!K){var M=r.names[K];if(!!M){for(var L=0;L<M.length;L++){var F=M[L];F._id===T&&M.splice(L,1)}M.length===0&&delete r.names[K]}}};r._removeName=f;var c="absoluteOpacity",p="allEventListeners",g="absoluteTransform",d="absoluteScale",b="canvas",x="Change",w="children",C="konva",m="listening",S="mouseenter",P="mouseleave",D="name",v="set",E="Shape",k=" ",N="stage",O="transform",I="Stage",H="visible",G=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(k),Y=new e.Collection,j=1,q=function(){function K(T){this._id=j++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=Y,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(T),this._shouldFireChangeEvents=!0}return K.prototype.hasChildren=function(){return!1},K.prototype.getChildren=function(){return Y},K.prototype._clearCache=function(T){(T===O||T===g)&&this._cache.get(T)?this._cache.get(T).dirty=!0:T?this._cache.delete(T):this._cache.clear()},K.prototype._getCache=function(T,M){var L=this._cache.get(T),F=T===O||T===g,W=L===void 0||F&&L.dirty===!0;return W&&(L=M.call(this),this._cache.set(T,L)),L},K.prototype._calculate=function(T,M,L){var F=this;if(!this._attachedDepsListeners.get(T)){var W=M.map(function(Z){return Z+"Change.konva"}).join(k);this.on(W,function(){F._clearCache(T)}),this._attachedDepsListeners.set(T,!0)}return this._getCache(T,L)},K.prototype._getCanvasCache=function(){return this._cache.get(b)},K.prototype._clearSelfAndDescendantCache=function(T,M){this._clearCache(T),M&&T===g&&this.fire("_clearTransformCache"),!this.isCached()&&this.children&&this.children.each(function(L){L._clearSelfAndDescendantCache(T,!0)})},K.prototype.clearCache=function(){return this._cache.delete(b),this._clearSelfAndDescendantCache(),this},K.prototype.cache=function(T){var M=T||{},L={};(M.x===void 0||M.y===void 0||M.width===void 0||M.height===void 0)&&(L=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var F=Math.ceil(M.width||L.width),W=Math.ceil(M.height||L.height),Z=M.pixelRatio,ee=M.x===void 0?L.x:M.x,Q=M.y===void 0?L.y:M.y,oe=M.offset||0,fe=M.drawBorder||!1;if(!F||!W){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}F+=oe*2,W+=oe*2,ee-=oe,Q-=oe;var ce=new n.SceneCanvas({pixelRatio:Z,width:F,height:W}),Se=new n.SceneCanvas({pixelRatio:Z,width:0,height:0}),De=new n.HitCanvas({pixelRatio:1,width:F,height:W}),Le=ce.getContext(),ke=De.getContext();return De.isCache=!0,ce.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,M.imageSmoothingEnabled===!1&&(ce.getContext()._context.imageSmoothingEnabled=!1,Se.getContext()._context.imageSmoothingEnabled=!1),Le.save(),ke.save(),Le.translate(-ee,-Q),ke.translate(-ee,-Q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(d),this.drawScene(ce,this),this.drawHit(De,this),this._isUnderCache=!1,Le.restore(),ke.restore(),fe&&(Le.save(),Le.beginPath(),Le.rect(0,0,F,W),Le.closePath(),Le.setAttr("strokeStyle","red"),Le.setAttr("lineWidth",5),Le.stroke(),Le.restore()),this._cache.set(b,{scene:ce,filter:Se,hit:De,x:ee,y:Q}),this},K.prototype.isCached=function(){return this._cache.has("canvas")},K.prototype.getClientRect=function(T){throw new Error('abstract "getClientRect" method call')},K.prototype._transformedRect=function(T,M){var L=[{x:T.x,y:T.y},{x:T.x+T.width,y:T.y},{x:T.x+T.width,y:T.y+T.height},{x:T.x,y:T.y+T.height}],F,W,Z,ee,Q=this.getAbsoluteTransform(M);return L.forEach(function(oe){var fe=Q.point(oe);F===void 0&&(F=Z=fe.x,W=ee=fe.y),F=Math.min(F,fe.x),W=Math.min(W,fe.y),Z=Math.max(Z,fe.x),ee=Math.max(ee,fe.y)}),{x:F,y:W,width:Z-F,height:ee-W}},K.prototype._drawCachedSceneCanvas=function(T){T.save(),T._applyOpacity(this),T._applyGlobalCompositeOperation(this);var M=this._getCanvasCache();T.translate(M.x,M.y);var L=this._getCachedSceneCanvas(),F=L.pixelRatio;T.drawImage(L._canvas,0,0,L.width/F,L.height/F),T.restore()},K.prototype._drawCachedHitCanvas=function(T){var M=this._getCanvasCache(),L=M.hit;T.save(),T.translate(M.x,M.y),T.drawImage(L._canvas,0,0),T.restore()},K.prototype._getCachedSceneCanvas=function(){var T=this.filters(),M=this._getCanvasCache(),L=M.scene,F=M.filter,W=F.getContext(),Z,ee,Q,oe;if(T){if(!this._filterUpToDate){var fe=L.pixelRatio;F.setSize(L.width/L.pixelRatio,L.height/L.pixelRatio);try{for(Z=T.length,W.clear(),W.drawImage(L._canvas,0,0,L.getWidth()/fe,L.getHeight()/fe),ee=W.getImageData(0,0,F.getWidth(),F.getHeight()),Q=0;Q<Z;Q++){if(oe=T[Q],typeof oe!="function"){e.Util.error("Filter should be type of function, but got "+typeof oe+" instead. Please check correct filters");continue}oe.call(this,ee),W.putImageData(ee,0,0)}}catch(ce){e.Util.error("Unable to apply filter. "+ce.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return F}return L},K.prototype.on=function(T,M){if(this._cache&&this._cache.delete(p),arguments.length===3)return this._delegate.apply(this,arguments);var L=T.split(k),F=L.length,W,Z,ee,Q,oe;for(W=0;W<F;W++)Z=L[W],ee=Z.split("."),Q=ee[0],oe=ee[1]||"",this.eventListeners[Q]||(this.eventListeners[Q]=[]),this.eventListeners[Q].push({name:oe,handler:M});return this},K.prototype.off=function(T,M){var L=(T||"").split(k),F=L.length,W,Z,ee,Q,oe,fe;if(this._cache&&this._cache.delete(p),!T)for(Z in this.eventListeners)this._off(Z);for(W=0;W<F;W++)if(ee=L[W],Q=ee.split("."),oe=Q[0],fe=Q[1],oe)this.eventListeners[oe]&&this._off(oe,fe,M);else for(Z in this.eventListeners)this._off(Z,fe,M);return this},K.prototype.dispatchEvent=function(T){var M={target:this,type:T.type,evt:T};return this.fire(T.type,M),this},K.prototype.addEventListener=function(T,M){return this.on(T,function(L){M.call(this,L.evt)}),this},K.prototype.removeEventListener=function(T){return this.off(T),this},K.prototype._delegate=function(T,M,L){var F=this;this.on(T,function(W){for(var Z=W.target.findAncestors(M,!0,F),ee=0;ee<Z.length;ee++)W=e.Util.cloneObject(W),W.currentTarget=Z[ee],L.call(Z[ee],W)})},K.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this},K.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(d),this._clearSelfAndDescendantCache(N),this._clearSelfAndDescendantCache(H),this._clearSelfAndDescendantCache(m)},K.prototype._remove=function(){this._clearCaches();var T=this.getParent();T&&T.children&&(T.children.splice(this.index,1),T._setChildrenIndices(),this.parent=null)},K.prototype.destroy=function(){r._removeId(this.id(),this);for(var T=(this.name()||"").split(/\s/g),M=0;M<T.length;M++){var L=T[M];r._removeName(L,this._id)}return this.remove(),this},K.prototype.getAttr=function(T){var M="get"+e.Util._capitalize(T);return e.Util._isFunction(this[M])?this[M]():this.attrs[T]},K.prototype.getAncestors=function(){for(var T=this.getParent(),M=new e.Collection;T;)M.push(T),T=T.getParent();return M},K.prototype.getAttrs=function(){return this.attrs||{}},K.prototype.setAttrs=function(T){var M=this;return this._batchTransformChanges(function(){var L,F;if(!T)return M;for(L in T)L!==w&&(F=v+e.Util._capitalize(L),e.Util._isFunction(M[F])?M[F](T[L]):M._setAttr(L,T[L]))}),this},K.prototype.isListening=function(){return this._getCache(m,this._isListening)},K.prototype._isListening=function(T){var M=this.listening();if(!M)return!1;var L=this.getParent();return L&&L!==T&&this!==T?L._isListening(T):!0},K.prototype.isVisible=function(){return this._getCache(H,this._isVisible)},K.prototype._isVisible=function(T){var M=this.visible();if(!M)return!1;var L=this.getParent();return L&&L!==T&&this!==T?L._isVisible(T):!0},K.prototype.shouldDrawHit=function(T,M){if(M===void 0&&(M=!1),T)return this._isVisible(T)&&this._isListening(T);var L=this.getLayer(),F=!1;i.DD._dragElements.forEach(function(Z){Z.dragStatus==="dragging"&&(Z.node.nodeType==="Stage"||Z.node.getLayer()===L)&&(F=!0)});var W=!M&&!a.Konva.hitOnDragEnabled&&F;return this.isListening()&&this.isVisible()&&!W},K.prototype.show=function(){return this.visible(!0),this},K.prototype.hide=function(){return this.visible(!1),this},K.prototype.getZIndex=function(){return this.index||0},K.prototype.getAbsoluteZIndex=function(){var T=this.getDepth(),M=this,L=0,F,W,Z,ee;function Q(oe){for(F=[],W=oe.length,Z=0;Z<W;Z++)ee=oe[Z],L++,ee.nodeType!==E&&(F=F.concat(ee.getChildren().toArray())),ee._id===M._id&&(Z=W);F.length>0&&F[0].getDepth()<=T&&Q(F)}return M.nodeType!==I&&Q(M.getStage().getChildren()),L},K.prototype.getDepth=function(){for(var T=0,M=this.parent;M;)T++,M=M.parent;return T},K.prototype._batchTransformChanges=function(T){this._batchingTransformChange=!0,T(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(O),this._clearSelfAndDescendantCache(g,!0)),this._needClearTransformCache=!1},K.prototype.setPosition=function(T){var M=this;return this._batchTransformChanges(function(){M.x(T.x),M.y(T.y)}),this},K.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},K.prototype.getAbsolutePosition=function(T){for(var M=!1,L=this.parent;L;){if(L.isCached()){M=!0;break}L=L.parent}M&&!T&&(T=!0);var F=this.getAbsoluteTransform(T).getMatrix(),W=new e.Transform,Z=this.offset();return W.m=F.slice(),W.translate(Z.x,Z.y),W.getTranslation()},K.prototype.setAbsolutePosition=function(T){var M=this._clearTransform();this.attrs.x=M.x,this.attrs.y=M.y,delete M.x,delete M.y,this._clearCache(O);var L=this._getAbsoluteTransform().copy();return L.invert(),L.translate(T.x,T.y),T={x:this.attrs.x+L.getTranslation().x,y:this.attrs.y+L.getTranslation().y},this._setTransform(M),this.setPosition({x:T.x,y:T.y}),this._clearCache(O),this._clearSelfAndDescendantCache(g),this},K.prototype._setTransform=function(T){var M;for(M in T)this.attrs[M]=T[M]},K.prototype._clearTransform=function(){var T={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,T},K.prototype.move=function(T){var M=T.x,L=T.y,F=this.x(),W=this.y();return M!==void 0&&(F+=M),L!==void 0&&(W+=L),this.setPosition({x:F,y:W}),this},K.prototype._eachAncestorReverse=function(T,M){var L=[],F=this.getParent(),W,Z;if(!(M&&M._id===this._id)){for(L.unshift(this);F&&(!M||F._id!==M._id);)L.unshift(F),F=F.parent;for(W=L.length,Z=0;Z<W;Z++)T(L[Z])}},K.prototype.rotate=function(T){return this.rotation(this.rotation()+T),this},K.prototype.moveToTop=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var T=this.index;return this.parent.children.splice(T,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},K.prototype.moveUp=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var T=this.index,M=this.parent.getChildren().length;return T<M-1?(this.parent.children.splice(T,1),this.parent.children.splice(T+1,0,this),this.parent._setChildrenIndices(),!0):!1},K.prototype.moveDown=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.splice(T-1,0,this),this.parent._setChildrenIndices(),!0):!1},K.prototype.moveToBottom=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var T=this.index;return T>0?(this.parent.children.splice(T,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},K.prototype.setZIndex=function(T){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(T<0||T>=this.parent.children.length)&&e.Util.warn("Unexpected value "+T+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var M=this.index;return this.parent.children.splice(M,1),this.parent.children.splice(T,0,this),this.parent._setChildrenIndices(),this},K.prototype.getAbsoluteOpacity=function(){return this._getCache(c,this._getAbsoluteOpacity)},K.prototype._getAbsoluteOpacity=function(){var T=this.opacity(),M=this.getParent();return M&&!M._isUnderCache&&(T*=M.getAbsoluteOpacity()),T},K.prototype.moveTo=function(T){return this.getParent()!==T&&(this._remove(),T.add(this)),this},K.prototype.toObject=function(){var T={},M=this.getAttrs(),L,F,W,Z,ee;T.attrs={};for(L in M)F=M[L],ee=e.Util.isObject(F)&&!e.Util._isPlainObject(F)&&!e.Util._isArray(F),!ee&&(W=typeof this[L]=="function"&&this[L],delete M[L],Z=W?W.call(this):null,M[L]=F,Z!==F&&(T.attrs[L]=F));return T.className=this.getClassName(),e.Util._prepareToStringify(T)},K.prototype.toJSON=function(){return JSON.stringify(this.toObject())},K.prototype.getParent=function(){return this.parent},K.prototype.findAncestors=function(T,M,L){var F=[];M&&this._isMatch(T)&&F.push(this);for(var W=this.parent;W;){if(W===L)return F;W._isMatch(T)&&F.push(W),W=W.parent}return F},K.prototype.isAncestorOf=function(T){return!1},K.prototype.findAncestor=function(T,M,L){return this.findAncestors(T,M,L)[0]},K.prototype._isMatch=function(T){if(!T)return!1;if(typeof T=="function")return T(this);var M=T.replace(/ /g,"").split(","),L=M.length,F,W;for(F=0;F<L;F++)if(W=M[F],e.Util.isValidSelector(W)||(e.Util.warn('Selector "'+W+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),W.charAt(0)==="#"){if(this.id()===W.slice(1))return!0}else if(W.charAt(0)==="."){if(this.hasName(W.slice(1)))return!0}else if(this.className===W||this.nodeType===W)return!0;return!1},K.prototype.getLayer=function(){var T=this.getParent();return T?T.getLayer():null},K.prototype.getStage=function(){return this._getCache(N,this._getStage)},K.prototype._getStage=function(){var T=this.getParent();if(T)return T.getStage()},K.prototype.fire=function(T,M,L){return M===void 0&&(M={}),M.target=M.target||this,L?this._fireAndBubble(T,M):this._fire(T,M),this},K.prototype.getAbsoluteTransform=function(T){return T?this._getAbsoluteTransform(T):this._getCache(g,this._getAbsoluteTransform)},K.prototype._getAbsoluteTransform=function(T){var M;if(T)return M=new e.Transform,this._eachAncestorReverse(function(Q){var oe=Q.transformsEnabled();oe==="all"?M.multiply(Q.getTransform()):oe==="position"&&M.translate(Q.x()-Q.offsetX(),Q.y()-Q.offsetY())},T),M;M=this._cache.get(g)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(M):M.reset();var L=this.transformsEnabled();if(L==="all")M.multiply(this.getTransform());else if(L==="position"){var F=this.attrs.x||0,W=this.attrs.y||0,Z=this.attrs.offsetX||0,ee=this.attrs.offsetY||0;M.translate(F-Z,W-ee)}return M.dirty=!1,M},K.prototype.getAbsoluteScale=function(T){for(var M=this;M;)M._isUnderCache&&(T=M),M=M.getParent();var L=this.getAbsoluteTransform(T),F=L.decompose();return{x:F.scaleX,y:F.scaleY}},K.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},K.prototype.getTransform=function(){return this._getCache(O,this._getTransform)},K.prototype._getTransform=function(){var T,M,L=this._cache.get(O)||new e.Transform;L.reset();var F=this.x(),W=this.y(),Z=a.Konva.getAngle(this.rotation()),ee=(T=this.attrs.scaleX)!==null&&T!==void 0?T:1,Q=(M=this.attrs.scaleY)!==null&&M!==void 0?M:1,oe=this.attrs.skewX||0,fe=this.attrs.skewY||0,ce=this.attrs.offsetX||0,Se=this.attrs.offsetY||0;return(F!==0||W!==0)&&L.translate(F,W),Z!==0&&L.rotate(Z),(oe!==0||fe!==0)&&L.skew(oe,fe),(ee!==1||Q!==1)&&L.scale(ee,Q),(ce!==0||Se!==0)&&L.translate(-1*ce,-1*Se),L.dirty=!1,L},K.prototype.clone=function(T){var M=e.Util.cloneObject(this.attrs),L,F,W,Z,ee;for(L in T)M[L]=T[L];var Q=new this.constructor(M);for(L in this.eventListeners)for(F=this.eventListeners[L],W=F.length,Z=0;Z<W;Z++)ee=F[Z],ee.name.indexOf(C)<0&&(Q.eventListeners[L]||(Q.eventListeners[L]=[]),Q.eventListeners[L].push(ee));return Q},K.prototype._toKonvaCanvas=function(T){T=T||{};var M=this.getClientRect(),L=this.getStage(),F=T.x!==void 0?T.x:M.x,W=T.y!==void 0?T.y:M.y,Z=T.pixelRatio||1,ee=new n.SceneCanvas({width:T.width||M.width||(L?L.width():0),height:T.height||M.height||(L?L.height():0),pixelRatio:Z}),Q=ee.getContext();return Q.save(),(F||W)&&Q.translate(-1*F,-1*W),this.drawScene(ee),Q.restore(),ee},K.prototype.toCanvas=function(T){return this._toKonvaCanvas(T)._canvas},K.prototype.toDataURL=function(T){T=T||{};var M=T.mimeType||null,L=T.quality||null,F=this._toKonvaCanvas(T).toDataURL(M,L);return T.callback&&T.callback(F),F},K.prototype.toImage=function(T){if(!T||!T.callback)throw"callback required for toImage method config argument";var M=T.callback;delete T.callback,e.Util._urlToImage(this.toDataURL(T),function(L){M(L)})},K.prototype.setSize=function(T){return this.width(T.width),this.height(T.height),this},K.prototype.getSize=function(){return{width:this.width(),height:this.height()}},K.prototype.getClassName=function(){return this.className||this.nodeType},K.prototype.getType=function(){return this.nodeType},K.prototype.getDragDistance=function(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},K.prototype._off=function(T,M,L){var F=this.eventListeners[T],W,Z,ee;for(W=0;W<F.length;W++)if(Z=F[W].name,ee=F[W].handler,(Z!=="konva"||M==="konva")&&(!M||Z===M)&&(!L||L===ee)){if(F.splice(W,1),F.length===0){delete this.eventListeners[T];break}W--}},K.prototype._fireChangeEvent=function(T,M,L){this._fire(T+x,{oldVal:M,newVal:L})},K.prototype.setId=function(T){var M=this.id();return r._removeId(M,this),s(this,T),this._setAttr("id",T),this},K.prototype.setName=function(T){var M=(this.name()||"").split(/\s/g),L=(T||"").split(/\s/g),F,W;for(W=0;W<M.length;W++)F=M[W],L.indexOf(F)===-1&&F&&r._removeName(F,this._id);for(W=0;W<L.length;W++)F=L[W],M.indexOf(F)===-1&&F&&r._addName(this,F);return this._setAttr(D,T),this},K.prototype.addName=function(T){if(!this.hasName(T)){var M=this.name(),L=M?M+" "+T:T;this.setName(L)}return this},K.prototype.hasName=function(T){if(!T)return!1;var M=this.name();if(!M)return!1;var L=(M||"").split(/\s/g);return L.indexOf(T)!==-1},K.prototype.removeName=function(T){var M=(this.name()||"").split(/\s/g),L=M.indexOf(T);return L!==-1&&(M.splice(L,1),this.setName(M.join(" "))),this},K.prototype.setAttr=function(T,M){var L=this[v+e.Util._capitalize(T)];return e.Util._isFunction(L)?L.call(this,M):this._setAttr(T,M),this},K.prototype._setAttr=function(T,M,L){var F=this.attrs[T];F===M&&!e.Util.isObject(M)||(M==null?delete this.attrs[T]:this.attrs[T]=M,this._shouldFireChangeEvents&&this._fireChangeEvent(T,F,M))},K.prototype._setComponentAttr=function(T,M,L){var F;L!==void 0&&(F=this.attrs[T],F||(this.attrs[T]=this.getAttr(T)),this.attrs[T][M]=L,this._fireChangeEvent(T,F,L))},K.prototype._fireAndBubble=function(T,M,L){M&&this.nodeType===E&&(M.target=this);var F=(T===S||T===P)&&(L&&(this===L||this.isAncestorOf&&this.isAncestorOf(L))||this.nodeType==="Stage"&&!L);if(!F){this._fire(T,M);var W=(T===S||T===P)&&L&&L.isAncestorOf&&L.isAncestorOf(this)&&!L.isAncestorOf(this.parent);(M&&!M.cancelBubble||!M)&&this.parent&&this.parent.isListening()&&!W&&(L&&L.parent?this._fireAndBubble.call(this.parent,T,M,L):this._fireAndBubble.call(this.parent,T,M))}},K.prototype._getProtoListeners=function(T){var M=this._cache.get(p);if(!M){M={};for(var L=Object.getPrototypeOf(this);L;){if(!L.eventListeners){L=Object.getPrototypeOf(L);continue}for(var F in L.eventListeners){var W=L.eventListeners[F],Z=M[F]||[];M[F]=W.concat(Z)}L=Object.getPrototypeOf(L)}this._cache.set(p,M)}return M[T]},K.prototype._fire=function(T,M){M=M||{},M.currentTarget=this,M.type=T;var L=this._getProtoListeners(T);if(L)for(var F=0;F<L.length;F++)L[F].handler.call(this,M);var W=this.eventListeners[T];if(W)for(var F=0;F<W.length;F++)W[F].handler.call(this,M)},K.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},K.prototype._createDragElement=function(T){var M=T?T.pointerId:void 0,L=this.getStage(),F=this.getAbsolutePosition(),W=L._getPointerById(M)||L._changedPointerPositions[0]||F;i.DD._dragElements.set(this._id,{node:this,startPointerPos:W,offset:{x:W.x-F.x,y:W.y-F.y},dragStatus:"ready",pointerId:M})},K.prototype.startDrag=function(T,M){M===void 0&&(M=!0),i.DD._dragElements.has(this._id)||this._createDragElement(T);var L=i.DD._dragElements.get(this._id);L.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:T&&T.evt},M)},K.prototype._setDragPosition=function(T,M){var L=this.getStage()._getPointerById(M.pointerId);if(!!L){var F={x:L.x-M.offset.x,y:L.y-M.offset.y},W=this.dragBoundFunc();if(W!==void 0){var Z=W.call(this,F,T);Z?F=Z:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==F.x||this._lastPos.y!==F.y)&&(this.setAbsolutePosition(F),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=F}},K.prototype.stopDrag=function(T){var M=i.DD._dragElements.get(this._id);M&&(M.dragStatus="stopped"),i.DD._endDragBefore(T),i.DD._endDragAfter(T)},K.prototype.setDraggable=function(T){this._setAttr("draggable",T),this._dragChange()},K.prototype.isDragging=function(){var T=i.DD._dragElements.get(this._id);return T?T.dragStatus==="dragging":!1},K.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(T){var M=this,L=T.evt.button!==void 0,F=!L||a.Konva.dragButtons.indexOf(T.evt.button)>=0;if(!!F&&!this.isDragging()){var W=!1;i.DD._dragElements.forEach(function(Z){M.isAncestorOf(Z.node)&&(W=!0)}),W||this._createDragElement(T)}})},K.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var T=this.getStage();if(!T)return;var M=i.DD._dragElements.get(this._id),L=M&&M.dragStatus==="dragging",F=M&&M.dragStatus==="ready";L?this.stopDrag():F&&i.DD._dragElements.delete(this._id)}},K.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},K.create=function(T,M){return e.Util._isString(T)&&(T=JSON.parse(T)),this._createNode(T,M)},K._createNode=function(T,M){var L=K.prototype.getClassName.call(T),F=T.children,W,Z,ee;M&&(T.attrs.container=M),a._NODES_REGISTRY[L]||(e.Util.warn('Can not find a node with class name "'+L+'". Fallback to "Shape".'),L="Shape");var Q=a._NODES_REGISTRY[L];if(W=new Q(T.attrs),F)for(Z=F.length,ee=0;ee<Z;ee++)W.add(K._createNode(F[ee]));return W},K}();r.Node=q,q.prototype.nodeType="Node",q.prototype._attrsAffectingSize=[],q.prototype.eventListeners={},q.prototype.on.call(q.prototype,G,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(O),this._clearSelfAndDescendantCache(g)}),q.prototype.on.call(q.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(H)}),q.prototype.on.call(q.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(m)}),q.prototype.on.call(q.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(c)});var X=t.Factory.addGetterSetter;X(q,"zIndex"),X(q,"absolutePosition"),X(q,"position"),X(q,"x",0,o.getNumberValidator()),X(q,"y",0,o.getNumberValidator()),X(q,"globalCompositeOperation","source-over",o.getStringValidator()),X(q,"opacity",1,o.getNumberValidator()),X(q,"name","",o.getStringValidator()),X(q,"id","",o.getStringValidator()),X(q,"rotation",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(q,"scale",["x","y"]),X(q,"scaleX",1,o.getNumberValidator()),X(q,"scaleY",1,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(q,"skew",["x","y"]),X(q,"skewX",0,o.getNumberValidator()),X(q,"skewY",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(q,"offset",["x","y"]),X(q,"offsetX",0,o.getNumberValidator()),X(q,"offsetY",0,o.getNumberValidator()),X(q,"dragDistance",null,o.getNumberValidator()),X(q,"width",0,o.getNumberValidator()),X(q,"height",0,o.getNumberValidator()),X(q,"listening",!0,o.getBooleanValidator()),X(q,"preventDefault",!0,o.getBooleanValidator()),X(q,"filters",null,function(K){return this._filterUpToDate=!1,K}),X(q,"visible",!0,o.getBooleanValidator()),X(q,"transformsEnabled","all",o.getStringValidator()),X(q,"size"),X(q,"dragBoundFunc"),X(q,"draggable",!1,o.getBooleanValidator()),t.Factory.backCompat(q,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),e.Collection.mapMethods(q)})(nr);var Ha={},m2=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ha,"__esModule",{value:!0});Ha.Container=void 0;var Aa=bt,Di=ft,xl=nr,Zs=Ye,ga=function(r){m2(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.children=new Aa.Collection,t}return e.prototype.getChildren=function(t){if(!t)return this.children;var n=new Aa.Collection;return this.children.each(function(a){t(a)&&n.push(a)}),n},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.remove();return this.children=new Aa.Collection,this},e.prototype.destroyChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.destroy();return this.children=new Aa.Collection,this},e.prototype.add=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}var i=t[0];if(i.getParent())return i.moveTo(this),this;var o=this.children;return this._validateAdd(i),i._clearCaches(),i.index=o.length,i.parent=this,o.push(i),this._fire("add",{child:i}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),r.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return Aa.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0},e.prototype._generalFind=function(t,n){var a=[];return this._descendants(function(i){var o=i._isMatch(t);return o&&a.push(i),!!(o&&n)}),Aa.Collection.toCollection(a)},e.prototype._descendants=function(t){for(var n=!1,a=0;a<this.children.length;a++){var i=this.children[a];if(n=t(i),n)return!0;if(!!i.hasChildren()&&(n=i._descendants(t),n))return!0}return!1},e.prototype.toObject=function(){var t=xl.Node.prototype.toObject.call(this);t.children=[];for(var n=this.getChildren(),a=n.length,i=0;i<a;i++){var o=n[i];t.children.push(o.toObject())}return t},e.prototype.isAncestorOf=function(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1},e.prototype.clone=function(t){var n=xl.Node.prototype.clone.call(this,t);return this.getChildren().each(function(a){n.add(a.clone())}),n},e.prototype.getAllIntersections=function(t){var n=[];return this.find("Shape").each(function(a){a.isVisible()&&a.intersects(t)&&n.push(a)}),n},e.prototype._setChildrenIndices=function(){this.children.each(function(t,n){t.index=n})},e.prototype.drawScene=function(t,n){var a=this.getLayer(),i=t||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var f=this.getAbsoluteTransform(n).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n);return this},e.prototype.drawHit=function(t,n){if(!this.shouldDrawHit(n))return this;var a=this.getLayer(),i=t||a&&a.hitCanvas,o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.hit;if(l){o.save();var u=this.getAbsoluteTransform(n).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,n);return this},e.prototype._drawChildren=function(t,n,a){var i=n&&n.getContext(),o=this.clipWidth(),s=this.clipHeight(),l=this.clipFunc(),u=o&&s||l,f=a===this;if(u){i.save();var c=this.getAbsoluteTransform(a),p=c.getMatrix();if(i.transform(p[0],p[1],p[2],p[3],p[4],p[5]),i.beginPath(),l)l.call(this,i,this);else{var g=this.clipX(),d=this.clipY();i.rect(g,d,o,s)}i.clip(),p=c.copy().invert().getMatrix(),i.transform(p[0],p[1],p[2],p[3],p[4],p[5])}var b=!f&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";b&&(i.save(),i._applyGlobalCompositeOperation(this)),this.children.each(function(x){x[t](n,a)}),b&&i.restore(),u&&i.restore()},e.prototype.getClientRect=function(t){t=t||{};var n=t.skipTransform,a=t.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},f=this;this.children.each(function(b){if(!!b.visible()){var x=b.getClientRect({relativeTo:f,skipShadow:t.skipShadow,skipStroke:t.skipStroke});x.width===0&&x.height===0||(i===void 0?(i=x.x,o=x.y,s=x.x+x.width,l=x.y+x.height):(i=Math.min(i,x.x),o=Math.min(o,x.y),s=Math.max(s,x.x+x.width),l=Math.max(l,x.y+x.height)))}});for(var c=this.find("Shape"),p=!1,g=0;g<c.length;g++){var d=c[g];if(d._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},n?u:this._transformedRect(u,a)},e}(xl.Node);Ha.Container=ga;Di.Factory.addComponentsGetterSetter(ga,"clip",["x","y","width","height"]);Di.Factory.addGetterSetter(ga,"clipX",void 0,Zs.getNumberValidator());Di.Factory.addGetterSetter(ga,"clipY",void 0,Zs.getNumberValidator());Di.Factory.addGetterSetter(ga,"clipWidth",void 0,Zs.getNumberValidator());Di.Factory.addGetterSetter(ga,"clipHeight",void 0,Zs.getNumberValidator());Di.Factory.addGetterSetter(ga,"clipFunc");Aa.Collection.mapMethods(ga);var Nv={},Wr={};Object.defineProperty(Wr,"__esModule",{value:!0});Wr.releaseCapture=Wr.setPointerCapture=Wr.hasPointerCapture=Wr.createEvent=Wr.getCapturedShape=void 0;var b2=ct,po=new Map,Iv=b2.Konva._global.PointerEvent!==void 0;function w2(r){return po.get(r)}Wr.getCapturedShape=w2;function Ef(r){return{evt:r,pointerId:r.pointerId}}Wr.createEvent=Ef;function x2(r,e){return po.get(r)===e}Wr.hasPointerCapture=x2;function S2(r,e){Rv(r);var t=e.getStage();!t||(po.set(r,e),Iv&&e._fire("gotpointercapture",Ef(new PointerEvent("gotpointercapture"))))}Wr.setPointerCapture=S2;function Rv(r,e){var t=po.get(r);if(!!t){var n=t.getStage();n&&n.content,po.delete(r),Iv&&t._fire("lostpointercapture",Ef(new PointerEvent("lostpointercapture")))}}Wr.releaseCapture=Rv;(function(r){var e=Xe&&Xe.__extends||function(){var ge=function(z,V){return ge=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(ne,te){ne.__proto__=te}||function(ne,te){for(var ie in te)Object.prototype.hasOwnProperty.call(te,ie)&&(ne[ie]=te[ie])},ge(z,V)};return function(z,V){ge(z,V);function ne(){this.constructor=z}z.prototype=V===null?Object.create(V):(ne.prototype=V.prototype,new ne)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Stage=r.stages=void 0;var t=bt,n=ft,a=Ha,i=ct,o=fn,s=Qs,l=ct,u=Wr,f="Stage",c="string",p="px",g="mouseout",d="mouseleave",b="mouseover",x="mouseenter",w="mousemove",C="mousedown",m="mouseup",S="pointermove",P="pointerdown",D="pointerup",v="pointercancel",E="lostpointercapture",k="contextmenu",N="click",O="dblclick",I="touchstart",H="touchend",G="tap",Y="dbltap",j="touchmove",q="wheel",X="contentMouseout",K="contentMouseover",T="contentMousemove",M="contentMousedown",L="contentMouseup",F="contentContextmenu",W="contentClick",Z="contentDblclick",ee="contentTouchstart",Q="contentTouchend",oe="contentDbltap",fe="contentTap",ce="contentTouchmove",Se="contentWheel",De="relative",Le="konvajs-content",ke="_",me="container",_e=5,we="",xe=[x,C,w,m,d,I,j,H,b,q,k,P,S,D,v,E],Ne=xe.length;function qe(ge,z){ge.content.addEventListener(z,function(V){ge[ke+z](V)},!1)}var at="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";r.stages=[];function We(ge){return ge===void 0&&(ge={}),(ge.clipFunc||ge.clipWidth||ge.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),ge}var Re=function(ge){e(z,ge);function z(V){var ne=ge.call(this,We(V))||this;return ne._pointerPositions=[],ne._changedPointerPositions=[],ne._buildDOM(),ne._bindContentEvents(),r.stages.push(ne),ne.on("widthChange.konva heightChange.konva",ne._resizeDOM),ne.on("visibleChange.konva",ne._checkVisibility),ne.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){We(ne.attrs)}),ne._checkVisibility(),ne}return z.prototype._validateAdd=function(V){var ne=V.getType()==="Layer",te=V.getType()==="FastLayer",ie=ne||te;ie||t.Util.throw("You may only add layers to the stage.")},z.prototype._checkVisibility=function(){if(!!this.content){var V=this.visible()?"":"none";this.content.style.display=V}},z.prototype.setContainer=function(V){if(typeof V===c){if(V.charAt(0)==="."){var ne=V.slice(1);V=document.getElementsByClassName(ne)[0]}else{var te;V.charAt(0)!=="#"?te=V:te=V.slice(1),V=document.getElementById(te)}if(!V)throw"Can not find container in document with id "+te}return this._setAttr(me,V),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),V.appendChild(this.content)),this},z.prototype.shouldDrawHit=function(){return!0},z.prototype.clear=function(){var V=this.children,ne=V.length,te;for(te=0;te<ne;te++)V[te].clear();return this},z.prototype.clone=function(V){return V||(V={}),V.container=document.createElement("div"),a.Container.prototype.clone.call(this,V)},z.prototype.destroy=function(){ge.prototype.destroy.call(this);var V=this.content;V&&t.Util._isInDocument(V)&&this.container().removeChild(V);var ne=r.stages.indexOf(this);return ne>-1&&r.stages.splice(ne,1),this},z.prototype.getPointerPosition=function(){var V=this._pointerPositions[0]||this._changedPointerPositions[0];return V?{x:V.x,y:V.y}:(t.Util.warn(at),null)},z.prototype._getPointerById=function(V){return this._pointerPositions.find(function(ne){return ne.id===V})},z.prototype.getPointersPositions=function(){return this._pointerPositions},z.prototype.getStage=function(){return this},z.prototype.getContent=function(){return this.content},z.prototype._toKonvaCanvas=function(V){V=V||{},V.x=V.x||0,V.y=V.y||0,V.width=V.width||this.width(),V.height=V.height||this.height();var ne=new o.SceneCanvas({width:V.width,height:V.height,pixelRatio:V.pixelRatio||1}),te=ne.getContext()._context,ie=this.children;return(V.x||V.y)&&te.translate(-1*V.x,-1*V.y),ie.each(function(ve){if(!!ve.isVisible()){var ue=ve._toKonvaCanvas(V);te.drawImage(ue._canvas,V.x,V.y,ue.getWidth()/ue.getPixelRatio(),ue.getHeight()/ue.getPixelRatio())}}),ne},z.prototype.getIntersection=function(V,ne){if(!V)return null;var te=this.children,ie=te.length,ve=ie-1,ue,Ce;for(ue=ve;ue>=0;ue--)if(Ce=te[ue].getIntersection(V,ne),Ce)return Ce;return null},z.prototype._resizeDOM=function(){var V=this.width(),ne=this.height();this.content&&(this.content.style.width=V+p,this.content.style.height=ne+p),this.bufferCanvas.setSize(V,ne),this.bufferHitCanvas.setSize(V,ne),this.children.each(function(te){te.setSize({width:V,height:ne}),te.draw()})},z.prototype.add=function(V){if(arguments.length>1){for(var ne=0;ne<arguments.length;ne++)this.add(arguments[ne]);return this}ge.prototype.add.call(this,V);var te=this.children.length;return te>_e&&t.Util.warn("The stage has "+te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),V.setSize({width:this.width(),height:this.height()}),V.draw(),i.Konva.isBrowser&&this.content.appendChild(V.canvas._canvas),this},z.prototype.getParent=function(){return null},z.prototype.getLayer=function(){return null},z.prototype.hasPointerCapture=function(V){return u.hasPointerCapture(V,this)},z.prototype.setPointerCapture=function(V){u.setPointerCapture(V,this)},z.prototype.releaseCapture=function(V){u.releaseCapture(V,this)},z.prototype.getLayers=function(){return this.getChildren()},z.prototype._bindContentEvents=function(){if(!!i.Konva.isBrowser)for(var V=0;V<Ne;V++)qe(this,xe[V])},z.prototype._mouseenter=function(V){this.setPointersPositions(V),this._fire(x,{evt:V,target:this,currentTarget:this})},z.prototype._mouseover=function(V){this.setPointersPositions(V),this._fire(K,{evt:V}),this._fire(b,{evt:V,target:this,currentTarget:this})},z.prototype._mouseleave=function(V){var ne;this.setPointersPositions(V);var te=!((ne=this.targetShape)===null||ne===void 0)&&ne.getStage()?this.targetShape:null,ie=!s.DD.isDragging||i.Konva.hitOnDragEnabled;te&&ie?(te._fireAndBubble(g,{evt:V}),te._fireAndBubble(d,{evt:V}),this._fire(d,{evt:V,target:this,currentTarget:this}),this.targetShape=null):ie&&(this._fire(d,{evt:V,target:this,currentTarget:this}),this._fire(g,{evt:V,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire(X,{evt:V})},z.prototype._mousemove=function(V){var ne;if(i.Konva.UA.ieMobile)return this._touchmove(V);this.setPointersPositions(V);var te=t.Util._getFirstPointerId(V),ie,ve=!((ne=this.targetShape)===null||ne===void 0)&&ne.getStage()?this.targetShape:null,ue=!s.DD.isDragging||i.Konva.hitOnDragEnabled;if(ue){if(ie=this.getIntersection(this.getPointerPosition()),ie&&ie.isListening()){var Ce=ve!==ie;ue&&Ce?(ve&&(ve._fireAndBubble(g,{evt:V,pointerId:te},ie),ve._fireAndBubble(d,{evt:V,pointerId:te},ie)),ie._fireAndBubble(b,{evt:V,pointerId:te},ve),ie._fireAndBubble(x,{evt:V,pointerId:te},ve),ie._fireAndBubble(w,{evt:V,pointerId:te}),this.targetShape=ie):ie._fireAndBubble(w,{evt:V,pointerId:te})}else ve&&ue&&(ve._fireAndBubble(g,{evt:V,pointerId:te}),ve._fireAndBubble(d,{evt:V,pointerId:te}),this._fire(b,{evt:V,target:this,currentTarget:this,pointerId:te}),this.targetShape=null),this._fire(w,{evt:V,target:this,currentTarget:this,pointerId:te});this._fire(T,{evt:V})}V.cancelable&&V.preventDefault()},z.prototype._mousedown=function(V){if(i.Konva.UA.ieMobile)return this._touchstart(V);this.setPointersPositions(V);var ne=t.Util._getFirstPointerId(V),te=this.getIntersection(this.getPointerPosition());s.DD.justDragged=!1,i.Konva.listenClickTap=!0,te&&te.isListening()?(this.clickStartShape=te,te._fireAndBubble(C,{evt:V,pointerId:ne})):this._fire(C,{evt:V,target:this,currentTarget:this,pointerId:ne}),this._fire(M,{evt:V})},z.prototype._mouseup=function(V){if(i.Konva.UA.ieMobile)return this._touchend(V);this.setPointersPositions(V);var ne=t.Util._getFirstPointerId(V),te=this.getIntersection(this.getPointerPosition()),ie=this.clickStartShape,ve=this.clickEndShape,ue=!1;i.Konva.inDblClickWindow?(ue=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(i.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){i.Konva.inDblClickWindow=!1},i.Konva.dblClickWindow),te&&te.isListening()?(this.clickEndShape=te,te._fireAndBubble(m,{evt:V,pointerId:ne}),i.Konva.listenClickTap&&ie&&ie._id===te._id&&(te._fireAndBubble(N,{evt:V,pointerId:ne}),ue&&ve&&ve===te&&te._fireAndBubble(O,{evt:V,pointerId:ne}))):(this.clickEndShape=null,this._fire(m,{evt:V,target:this,currentTarget:this,pointerId:ne}),i.Konva.listenClickTap&&this._fire(N,{evt:V,target:this,currentTarget:this,pointerId:ne}),ue&&this._fire(O,{evt:V,target:this,currentTarget:this,pointerId:ne})),this._fire(L,{evt:V}),i.Konva.listenClickTap&&(this._fire(W,{evt:V}),ue&&this._fire(Z,{evt:V})),i.Konva.listenClickTap=!1,V.cancelable&&V.preventDefault()},z.prototype._contextmenu=function(V){this.setPointersPositions(V);var ne=this.getIntersection(this.getPointerPosition());ne&&ne.isListening()?ne._fireAndBubble(k,{evt:V}):this._fire(k,{evt:V,target:this,currentTarget:this}),this._fire(F,{evt:V})},z.prototype._touchstart=function(V){var ne=this;this.setPointersPositions(V);var te=!1;this._changedPointerPositions.forEach(function(ie){var ve=ne.getIntersection(ie);i.Konva.listenClickTap=!0,s.DD.justDragged=!1;var ue=ve&&ve.isListening();!ue||(i.Konva.captureTouchEventsEnabled&&ve.setPointerCapture(ie.id),ne.tapStartShape=ve,ve._fireAndBubble(I,{evt:V,pointerId:ie.id},ne),te=!0,ve.isListening()&&ve.preventDefault()&&V.cancelable&&V.preventDefault())}),te||this._fire(I,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(ee,{evt:V})},z.prototype._touchmove=function(V){var ne=this;this.setPointersPositions(V);var te=!s.DD.isDragging||i.Konva.hitOnDragEnabled;if(te){var ie=!1,ve={};this._changedPointerPositions.forEach(function(ue){var Ce=u.getCapturedShape(ue.id)||ne.getIntersection(ue),Fe=Ce&&Ce.isListening();!Fe||ve[Ce._id]||(ve[Ce._id]=!0,Ce._fireAndBubble(j,{evt:V,pointerId:ue.id}),ie=!0,Ce.isListening()&&Ce.preventDefault()&&V.cancelable&&V.preventDefault())}),ie||this._fire(j,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(ce,{evt:V})}s.DD.isDragging&&s.DD.node.preventDefault()&&V.cancelable&&V.preventDefault()},z.prototype._touchend=function(V){var ne=this;this.setPointersPositions(V);var te=this.tapEndShape,ie=!1;i.Konva.inDblClickWindow?(ie=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(i.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){i.Konva.inDblClickWindow=!1},i.Konva.dblClickWindow);var ve=!1,ue={},Ce=!1,Fe=!1;this._changedPointerPositions.forEach(function(ze){var Oe=u.getCapturedShape(ze.id)||ne.getIntersection(ze);Oe&&Oe.releaseCapture(ze.id);var Je=Oe&&Oe.isListening();!Je||ue[Oe._id]||(ue[Oe._id]=!0,ne.tapEndShape=Oe,Oe._fireAndBubble(H,{evt:V,pointerId:ze.id}),ve=!0,i.Konva.listenClickTap&&Oe===ne.tapStartShape&&(Ce=!0,Oe._fireAndBubble(G,{evt:V,pointerId:ze.id}),ie&&te&&te===Oe&&(Fe=!0,Oe._fireAndBubble(Y,{evt:V,pointerId:ze.id}))),Oe.isListening()&&Oe.preventDefault()&&V.cancelable&&V.preventDefault())}),ve||this._fire(H,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva.listenClickTap&&!Ce&&(this.tapEndShape=null,this._fire(G,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),ie&&!Fe&&this._fire(Y,{evt:V,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(Q,{evt:V}),i.Konva.listenClickTap&&(this._fire(fe,{evt:V}),ie&&this._fire(oe,{evt:V})),this.preventDefault()&&V.cancelable&&V.preventDefault(),i.Konva.listenClickTap=!1},z.prototype._wheel=function(V){this.setPointersPositions(V);var ne=this.getIntersection(this.getPointerPosition());ne&&ne.isListening()?ne._fireAndBubble(q,{evt:V}):this._fire(q,{evt:V,target:this,currentTarget:this}),this._fire(Se,{evt:V})},z.prototype._pointerdown=function(V){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(V);var ne=u.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());ne&&ne._fireAndBubble(P,u.createEvent(V))}},z.prototype._pointermove=function(V){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(V);var ne=u.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());ne&&ne._fireAndBubble(S,u.createEvent(V))}},z.prototype._pointerup=function(V){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(V);var ne=u.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());ne&&ne._fireAndBubble(D,u.createEvent(V)),u.releaseCapture(V.pointerId)}},z.prototype._pointercancel=function(V){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(V);var ne=u.getCapturedShape(V.pointerId)||this.getIntersection(this.getPointerPosition());ne&&ne._fireAndBubble(D,u.createEvent(V)),u.releaseCapture(V.pointerId)}},z.prototype._lostpointercapture=function(V){u.releaseCapture(V.pointerId)},z.prototype.setPointersPositions=function(V){var ne=this,te=this._getContentPosition(),ie=null,ve=null;V=V||window.event,V.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],t.Collection.prototype.each.call(V.touches,function(ue){ne._pointerPositions.push({id:ue.identifier,x:(ue.clientX-te.left)/te.scaleX,y:(ue.clientY-te.top)/te.scaleY})}),t.Collection.prototype.each.call(V.changedTouches||V.touches,function(ue){ne._changedPointerPositions.push({id:ue.identifier,x:(ue.clientX-te.left)/te.scaleX,y:(ue.clientY-te.top)/te.scaleY})})):(ie=(V.clientX-te.left)/te.scaleX,ve=(V.clientY-te.top)/te.scaleY,this.pointerPos={x:ie,y:ve},this._pointerPositions=[{x:ie,y:ve,id:t.Util._getFirstPointerId(V)}],this._changedPointerPositions=[{x:ie,y:ve,id:t.Util._getFirstPointerId(V)}])},z.prototype._setPointerPosition=function(V){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(V)},z.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var V=this.content.getBoundingClientRect();return{top:V.top,left:V.left,scaleX:V.width/this.content.clientWidth||1,scaleY:V.height/this.content.clientHeight||1}},z.prototype._buildDOM=function(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!i.Konva.isBrowser){var V=this.container();if(!V)throw"Stage has no container. A container is required.";V.innerHTML=we,this.content=document.createElement("div"),this.content.style.position=De,this.content.style.userSelect="none",this.content.className=Le,this.content.setAttribute("role","presentation"),V.appendChild(this.content),this._resizeDOM()}},z.prototype.cache=function(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},z.prototype.clearCache=function(){return this},z.prototype.batchDraw=function(){return this.children.each(function(V){V.batchDraw()}),this},z}(a.Container);r.Stage=Re,Re.prototype.nodeType=f,l._registerNode(Re),n.Factory.addGetterSetter(Re,"container")})(Nv);var Po={},dr={};(function(r){var e=Xe&&Xe.__extends||function(){var k=function(N,O){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,H){I.__proto__=H}||function(I,H){for(var G in H)Object.prototype.hasOwnProperty.call(H,G)&&(I[G]=H[G])},k(N,O)};return function(N,O){k(N,O);function I(){this.constructor=N}N.prototype=O===null?Object.create(O):(I.prototype=O.prototype,new I)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Shape=r.shapes=void 0;var t=bt,n=ft,a=nr,i=Ye,o=ct,s=Wr,l="hasShadow",u="shadowRGBA",f="patternImage",c="linearGradient",p="radialGradient",g;function d(){return g||(g=t.Util.createCanvasElement().getContext("2d"),g)}r.shapes={};function b(k){k.fill()}function x(k){k.stroke()}function w(k){k.fill()}function C(k){k.stroke()}function m(){this._clearCache(l)}function S(){this._clearCache(u)}function P(){this._clearCache(f)}function D(){this._clearCache(c)}function v(){this._clearCache(p)}var E=function(k){e(N,k);function N(O){for(var I=k.call(this,O)||this,H;H=t.Util.getRandomColor(),!(H&&!(H in r.shapes)););return I.colorKey=H,r.shapes[H]=I,I}return N.prototype.getContext=function(){return this.getLayer().getContext()},N.prototype.getCanvas=function(){return this.getLayer().getCanvas()},N.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},N.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},N.prototype.hasShadow=function(){return this._getCache(l,this._hasShadow)},N.prototype._hasShadow=function(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},N.prototype._getFillPattern=function(){return this._getCache(f,this.__getFillPattern)},N.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var O=d(),I=O.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return I&&I.setTransform&&I.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),I}},N.prototype._getLinearGradient=function(){return this._getCache(c,this.__getLinearGradient)},N.prototype.__getLinearGradient=function(){var O=this.fillLinearGradientColorStops();if(O){for(var I=d(),H=this.fillLinearGradientStartPoint(),G=this.fillLinearGradientEndPoint(),Y=I.createLinearGradient(H.x,H.y,G.x,G.y),j=0;j<O.length;j+=2)Y.addColorStop(O[j],O[j+1]);return Y}},N.prototype._getRadialGradient=function(){return this._getCache(p,this.__getRadialGradient)},N.prototype.__getRadialGradient=function(){var O=this.fillRadialGradientColorStops();if(O){for(var I=d(),H=this.fillRadialGradientStartPoint(),G=this.fillRadialGradientEndPoint(),Y=I.createRadialGradient(H.x,H.y,this.fillRadialGradientStartRadius(),G.x,G.y,this.fillRadialGradientEndRadius()),j=0;j<O.length;j+=2)Y.addColorStop(O[j],O[j+1]);return Y}},N.prototype.getShadowRGBA=function(){return this._getCache(u,this._getShadowRGBA)},N.prototype._getShadowRGBA=function(){if(this.hasShadow()){var O=t.Util.colorToRGBA(this.shadowColor());return"rgba("+O.r+","+O.g+","+O.b+","+O.a*(this.shadowOpacity()||1)+")"}},N.prototype.hasFill=function(){var O=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],function(){return O.fillEnabled()&&!!(O.fill()||O.fillPatternImage()||O.fillLinearGradientColorStops()||O.fillRadialGradientColorStops())})},N.prototype.hasStroke=function(){var O=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],function(){return O.strokeEnabled()&&O.strokeWidth()&&!!(O.stroke()||O.strokeLinearGradientColorStops())})},N.prototype.hasHitStroke=function(){var O=this.hitStrokeWidth();return O==="auto"?this.hasStroke():this.strokeEnabled()&&!!O},N.prototype.intersects=function(O){var I=this.getStage(),H=I.bufferHitCanvas,G;return H.getContext().clear(),this.drawHit(H,null,!0),G=H.context.getImageData(Math.round(O.x),Math.round(O.y),1,1).data,G[3]>0},N.prototype.destroy=function(){return a.Node.prototype.destroy.call(this),delete r.shapes[this.colorKey],delete this.colorKey,this},N.prototype._useBufferCanvas=function(O){var I;if(!this.getStage())return!1;var H=(I=this.attrs.perfectDrawEnabled)!==null&&I!==void 0?I:!0;if(!H)return!1;var G=O||this.hasFill(),Y=this.hasStroke(),j=this.getAbsoluteOpacity()!==1;if(G&&Y&&j)return!0;var q=this.hasShadow(),X=this.shadowForStrokeEnabled();return!!(G&&Y&&q&&X)},N.prototype.setStrokeHitEnabled=function(O){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),O?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},N.prototype.getStrokeHitEnabled=function(){return this.hitStrokeWidth()!==0},N.prototype.getSelfRect=function(){var O=this.size();return{x:this._centroid?-O.width/2:0,y:this._centroid?-O.height/2:0,width:O.width,height:O.height}},N.prototype.getClientRect=function(O){O===void 0&&(O={});var I=O.skipTransform,H=O.relativeTo,G=this.getSelfRect(),Y=!O.skipStroke&&this.hasStroke(),j=Y&&this.strokeWidth()||0,q=G.width+j,X=G.height+j,K=!O.skipShadow&&this.hasShadow(),T=K?this.shadowOffsetX():0,M=K?this.shadowOffsetY():0,L=q+Math.abs(T),F=X+Math.abs(M),W=K&&this.shadowBlur()||0,Z=L+W*2,ee=F+W*2,Q=0;Math.round(j/2)!==j/2&&(Q=1);var oe={width:Z+Q,height:ee+Q,x:-Math.round(j/2+W)+Math.min(T,0)+G.x,y:-Math.round(j/2+W)+Math.min(M,0)+G.y};return I?oe:this._transformedRect(oe,H)},N.prototype.drawScene=function(O,I){var H=this.getLayer(),G=O||H.getCanvas(),Y=G.getContext(),j=this._getCanvasCache(),q=this.getSceneFunc(),X=this.hasShadow(),K,T,M,L=G.isCache,F=G.isCache,W=I===this;if(!this.isVisible()&&!L)return this;if(j){Y.save();var Z=this.getAbsoluteTransform(I).getMatrix();return Y.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),this._drawCachedSceneCanvas(Y),Y.restore(),this}if(!q)return this;if(Y.save(),this._useBufferCanvas()&&!F){K=this.getStage(),T=K.bufferCanvas,M=T.getContext(),M.clear(),M.save(),M._applyLineJoin(this);var ee=this.getAbsoluteTransform(I).getMatrix();M.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),q.call(this,M,this),M.restore();var Q=T.pixelRatio;X&&Y._applyShadow(this),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this),Y.drawImage(T._canvas,0,0,T.width/Q,T.height/Q)}else{if(Y._applyLineJoin(this),!W){var ee=this.getAbsoluteTransform(I).getMatrix();Y.transform(ee[0],ee[1],ee[2],ee[3],ee[4],ee[5]),Y._applyOpacity(this),Y._applyGlobalCompositeOperation(this)}X&&Y._applyShadow(this),q.call(this,Y,this)}return Y.restore(),this},N.prototype.drawHit=function(O,I,H){if(H===void 0&&(H=!1),!this.shouldDrawHit(I,H))return this;var G=this.getLayer(),Y=O||G.hitCanvas,j=Y&&Y.getContext(),q=this.hitFunc()||this.sceneFunc(),X=this._getCanvasCache(),K=X&&X.hit;if(this.colorKey||(console.log(this),t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),K){j.save();var T=this.getAbsoluteTransform(I).getMatrix();return j.transform(T[0],T[1],T[2],T[3],T[4],T[5]),this._drawCachedHitCanvas(j),j.restore(),this}if(!q)return this;j.save(),j._applyLineJoin(this);var M=this===I;if(!M){var L=this.getAbsoluteTransform(I).getMatrix();j.transform(L[0],L[1],L[2],L[3],L[4],L[5])}return q.call(this,j,this),j.restore(),this},N.prototype.drawHitFromCache=function(O){O===void 0&&(O=0);var I=this._getCanvasCache(),H=this._getCachedSceneCanvas(),G=I.hit,Y=G.getContext(),j=G.getWidth(),q=G.getHeight(),X,K,T,M,L,F;Y.clear(),Y.drawImage(H._canvas,0,0,j,q);try{for(X=Y.getImageData(0,0,j,q),K=X.data,T=K.length,M=t.Util._hexToRgb(this.colorKey),L=0;L<T;L+=4)F=K[L+3],F>O?(K[L]=M.r,K[L+1]=M.g,K[L+2]=M.b,K[L+3]=255):K[L+3]=0;Y.putImageData(X,0,0)}catch(W){t.Util.error("Unable to draw hit graph from cached scene canvas. "+W.message)}return this},N.prototype.hasPointerCapture=function(O){return s.hasPointerCapture(O,this)},N.prototype.setPointerCapture=function(O){s.setPointerCapture(O,this)},N.prototype.releaseCapture=function(O){s.releaseCapture(O,this)},N}(a.Node);r.Shape=E,E.prototype._fillFunc=b,E.prototype._strokeFunc=x,E.prototype._fillFuncHit=w,E.prototype._strokeFuncHit=C,E.prototype._centroid=!1,E.prototype.nodeType="Shape",o._registerNode(E),E.prototype.eventListeners={},E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",m),E.prototype.on.call(E.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",S),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",P),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",D),E.prototype.on.call(E.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",v),n.Factory.addGetterSetter(E,"stroke",void 0,i.getStringOrGradientValidator()),n.Factory.addGetterSetter(E,"strokeWidth",2,i.getNumberValidator()),n.Factory.addGetterSetter(E,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(E,"hitStrokeWidth","auto",i.getNumberOrAutoValidator()),n.Factory.addGetterSetter(E,"strokeHitEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(E,"perfectDrawEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(E,"shadowForStrokeEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(E,"lineJoin"),n.Factory.addGetterSetter(E,"lineCap"),n.Factory.addGetterSetter(E,"sceneFunc"),n.Factory.addGetterSetter(E,"hitFunc"),n.Factory.addGetterSetter(E,"dash"),n.Factory.addGetterSetter(E,"dashOffset",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"shadowColor",void 0,i.getStringValidator()),n.Factory.addGetterSetter(E,"shadowBlur",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"shadowOpacity",1,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(E,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(E,"shadowOffsetX",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"shadowOffsetY",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternImage"),n.Factory.addGetterSetter(E,"fill",void 0,i.getStringOrGradientValidator()),n.Factory.addGetterSetter(E,"fillPatternX",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternY",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(E,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(E,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(E,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(E,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(E,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(E,"fillEnabled",!0),n.Factory.addGetterSetter(E,"strokeEnabled",!0),n.Factory.addGetterSetter(E,"shadowEnabled",!0),n.Factory.addGetterSetter(E,"dashEnabled",!0),n.Factory.addGetterSetter(E,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(E,"fillPriority","color"),n.Factory.addComponentsGetterSetter(E,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(E,"fillPatternOffsetX",0,i.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternOffsetY",0,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(E,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(E,"fillPatternScaleX",1,i.getNumberValidator()),n.Factory.addGetterSetter(E,"fillPatternScaleY",1,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(E,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(E,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(E,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(E,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(E,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(E,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(E,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(E,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(E,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(E,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(E,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(E,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(E,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(E,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(E,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(E,"fillPatternRotation",0),n.Factory.backCompat(E,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),t.Collection.mapMethods(E)})(dr);var C2=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Po,"__esModule",{value:!0});Po.Layer=void 0;var Rn=bt,Sl=Ha,ai=nr,Tf=ft,bh=fn,_2=Ye,E2=dr,T2=ct,P2="#",k2="beforeDraw",A2="draw",Fv=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],D2=Fv.length,$a=function(r){C2(e,r);function e(t){var n=r.call(this,t)||this;return n.canvas=new bh.SceneCanvas,n.hitCanvas=new bh.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}return e.prototype.createPNGStream=function(){var t=this.canvas._canvas;return t.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},e.prototype.setZIndex=function(t){r.prototype.setZIndex.call(this,t);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),t<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){ai.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){var t=ai.Node.prototype.moveUp.call(this);if(!t)return!1;var n=this.getStage();return n?(n.content.removeChild(this.getCanvas()._canvas),this.index<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas),!0):!1},e.prototype.moveDown=function(){if(ai.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(ai.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return ai.Node.prototype.remove.call(this),t&&t.parentNode&&Rn.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var n=t.width,a=t.height;return this.canvas.setSize(n,a),this.hitCanvas.setSize(n,a),this._setSmoothEnabled(),this},e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Rn.Util.throw("You may only add groups and shapes to a layer.")},e.prototype._toKonvaCanvas=function(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),ai.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();t?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"},e.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){Rn.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){Rn.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,Rn.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype.getIntersection=function(t,n){if(!this.isListening()||!this.isVisible())return null;for(var a=1,i=!1;;){for(var o=0;o<D2;o++){var s=Fv[o],l=this._getIntersection({x:t.x+s.x*a,y:t.y+s.y*a}),u=l.shape;if(u&&n)return u.findAncestor(n,!0);if(u)return u;if(i=!!l.antialiased,!l.antialiased)break}if(i)a+=1;else return null}},e.prototype._getIntersection=function(t){var n=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,i=a[3];if(i===255){var o=Rn.Util._rgbToHex(a[0],a[1],a[2]),s=E2.shapes[P2+o];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}},e.prototype.drawScene=function(t,n){var a=this.getLayer(),i=t||a&&a.getCanvas();return this._fire(k2,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Sl.Container.prototype.drawScene.call(this,i,n),this._fire(A2,{node:this}),this},e.prototype.drawHit=function(t,n){var a=this.getLayer(),i=t||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),Sl.Container.prototype.drawHit.call(this,i,n),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.setHitGraphEnabled=function(t){Rn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},e.prototype.getHitGraphEnabled=function(t){return Rn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},e.prototype.toggleHitCanvas=function(){if(!!this.parent){var t=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(Sl.Container);Po.Layer=$a;$a.prototype.nodeType="Layer";T2._registerNode($a);Tf.Factory.addGetterSetter($a,"imageSmoothingEnabled",!0);Tf.Factory.addGetterSetter($a,"clearBeforeDraw",!0);Tf.Factory.addGetterSetter($a,"hitGraphEnabled",!0,_2.getBooleanValidator());Rn.Collection.mapMethods($a);var Js={},M2=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Js,"__esModule",{value:!0});Js.FastLayer=void 0;var Bv=bt,O2=Po,L2=ct,eu=function(r){M2(e,r);function e(t){var n=r.call(this,t)||this;return n.listening(!1),Bv.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return e}(O2.Layer);Js.FastLayer=eu;eu.prototype.nodeType="FastLayer";L2._registerNode(eu);Bv.Collection.mapMethods(eu);var Mi={},N2=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Mi,"__esModule",{value:!0});Mi.Group=void 0;var zv=bt,I2=Ha,R2=ct,tu=function(r){N2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&zv.Util.throw("You may only add groups and shapes to groups.")},e}(I2.Container);Mi.Group=tu;tu.prototype.nodeType="Group";R2._registerNode(tu);zv.Collection.mapMethods(tu);var Oi={};Object.defineProperty(Oi,"__esModule",{value:!0});Oi.Animation=void 0;var Cl=ct,_l=function(){return Cl.glob.performance&&Cl.glob.performance.now?function(){return Cl.glob.performance.now()}:function(){return new Date().getTime()}}(),F2=function(){function r(e,t){this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:_l(),frameRate:0},this.func=e,this.setLayers(t)}return r.prototype.setLayers=function(e){var t=[];return e?e.length>0?t=e:t=[e]:t=[],this.layers=t,this},r.prototype.getLayers=function(){return this.layers},r.prototype.addLayer=function(e){var t=this.layers,n=t.length,a;for(a=0;a<n;a++)if(t[a]._id===e._id)return!1;return this.layers.push(e),!0},r.prototype.isRunning=function(){var e=r,t=e.animations,n=t.length,a;for(a=0;a<n;a++)if(t[a].id===this.id)return!0;return!1},r.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=_l(),r._addAnimation(this),this},r.prototype.stop=function(){return r._removeAnimation(this),this},r.prototype._updateFrameObject=function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},r._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},r._removeAnimation=function(e){var t=e.id,n=this.animations,a=n.length,i;for(i=0;i<a;i++)if(n[i].id===t){this.animations.splice(i,1);break}},r._runFrames=function(){var e={},t=this.animations,n,a,i,o,s,l,u,f,c;for(o=0;o<t.length;o++)if(n=t[o],a=n.layers,i=n.func,n._updateFrameObject(_l()),l=a.length,i?c=i.call(n,n.frame)!==!1:c=!0,!!c)for(s=0;s<l;s++)u=a[s],u._id!==void 0&&(e[u._id]=u);for(f in e)!e.hasOwnProperty(f)||e[f].draw()},r._animationLoop=function(){var e=r;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},r._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},r.animations=[],r.animIdCounter=0,r.animRunning=!1,r}();Oi.Animation=F2;var Gv={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Easings=r.Tween=void 0;var e=bt,t=Oi,n=nr,a=ct,i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,f=["fill","stroke","shadowColor"],c=function(){function g(d,b,x,w,C,m,S){this.prop=d,this.propFunc=b,this.begin=w,this._pos=w,this.duration=m,this._change=0,this.prevPos=0,this.yoyo=S,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=C-this.begin,this.pause()}return g.prototype.fire=function(d){var b=this[d];b&&b()},g.prototype.setTime=function(d){d>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():d<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=d,this.update())},g.prototype.getTime=function(){return this._time},g.prototype.setPosition=function(d){this.prevPos=this._pos,this.propFunc(d),this._pos=d},g.prototype.getPosition=function(d){return d===void 0&&(d=this._time),this.func(d,this.begin,this._change,this.duration)},g.prototype.play=function(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},g.prototype.reverse=function(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},g.prototype.seek=function(d){this.pause(),this._time=d,this.update(),this.fire("onSeek")},g.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},g.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},g.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},g.prototype.onEnterFrame=function(){var d=this.getTimer()-this._startTime;this.state===s?this.setTime(d):this.state===l&&this.setTime(this.duration-d)},g.prototype.pause=function(){this.state=o,this.fire("onPause")},g.prototype.getTimer=function(){return new Date().getTime()},g}(),p=function(){function g(d){var b=this,x=d.node,w=x._id,C,m=d.easing||r.Easings.Linear,S=!!d.yoyo,P;typeof d.duration=="undefined"?C=.3:d.duration===0?C=.001:C=d.duration,this.node=x,this._id=u++;var D=x.getLayer()||(x instanceof a.Konva.Stage?x.getLayers():null);D||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){b.tween.onEnterFrame()},D),this.tween=new c(P,function(v){b._tweenFunc(v)},m,0,1,C*1e3,S),this._addListeners(),g.attrs[w]||(g.attrs[w]={}),g.attrs[w][this._id]||(g.attrs[w][this._id]={}),g.tweens[w]||(g.tweens[w]={});for(P in d)i[P]===void 0&&this._addAttr(P,d[P]);this.reset(),this.onFinish=d.onFinish,this.onReset=d.onReset,this.onUpdate=d.onUpdate}return g.prototype._addAttr=function(d,b){var x=this.node,w=x._id,C,m,S,P,D,v,E,k;if(S=g.tweens[w][d],S&&delete g.attrs[w][S][d],C=x.getAttr(d),e.Util._isArray(b))if(m=[],D=Math.max(b.length,C.length),d==="points"&&b.length!==C.length&&(b.length>C.length?(E=C,C=e.Util._prepareArrayForTween(C,b,x.closed())):(v=b,b=e.Util._prepareArrayForTween(b,C,x.closed()))),d.indexOf("fill")===0)for(P=0;P<D;P++)if(P%2===0)m.push(b[P]-C[P]);else{var N=e.Util.colorToRGBA(C[P]);k=e.Util.colorToRGBA(b[P]),C[P]=N,m.push({r:k.r-N.r,g:k.g-N.g,b:k.b-N.b,a:k.a-N.a})}else for(P=0;P<D;P++)m.push(b[P]-C[P]);else f.indexOf(d)!==-1?(C=e.Util.colorToRGBA(C),k=e.Util.colorToRGBA(b),m={r:k.r-C.r,g:k.g-C.g,b:k.b-C.b,a:k.a-C.a}):m=b-C;g.attrs[w][this._id][d]={start:C,diff:m,end:b,trueEnd:v,trueStart:E},g.tweens[w][d]=this._id},g.prototype._tweenFunc=function(d){var b=this.node,x=g.attrs[b._id][this._id],w,C,m,S,P,D,v,E;for(w in x){if(C=x[w],m=C.start,S=C.diff,E=C.end,e.Util._isArray(m))if(P=[],v=Math.max(m.length,E.length),w.indexOf("fill")===0)for(D=0;D<v;D++)D%2===0?P.push((m[D]||0)+S[D]*d):P.push("rgba("+Math.round(m[D].r+S[D].r*d)+","+Math.round(m[D].g+S[D].g*d)+","+Math.round(m[D].b+S[D].b*d)+","+(m[D].a+S[D].a*d)+")");else for(D=0;D<v;D++)P.push((m[D]||0)+S[D]*d);else f.indexOf(w)!==-1?P="rgba("+Math.round(m.r+S.r*d)+","+Math.round(m.g+S.g*d)+","+Math.round(m.b+S.b*d)+","+(m.a+S.a*d)+")":P=m+S*d;b.setAttr(w,P)}},g.prototype._addListeners=function(){var d=this;this.tween.onPlay=function(){d.anim.start()},this.tween.onReverse=function(){d.anim.start()},this.tween.onPause=function(){d.anim.stop()},this.tween.onFinish=function(){var b=d.node,x=g.attrs[b._id][d._id];x.points&&x.points.trueEnd&&b.setAttr("points",x.points.trueEnd),d.onFinish&&d.onFinish.call(d)},this.tween.onReset=function(){var b=d.node,x=g.attrs[b._id][d._id];x.points&&x.points.trueStart&&b.points(x.points.trueStart),d.onReset&&d.onReset()},this.tween.onUpdate=function(){d.onUpdate&&d.onUpdate.call(d)}},g.prototype.play=function(){return this.tween.play(),this},g.prototype.reverse=function(){return this.tween.reverse(),this},g.prototype.reset=function(){return this.tween.reset(),this},g.prototype.seek=function(d){return this.tween.seek(d*1e3),this},g.prototype.pause=function(){return this.tween.pause(),this},g.prototype.finish=function(){return this.tween.finish(),this},g.prototype.destroy=function(){var d=this.node._id,b=this._id,x=g.tweens[d],w;this.pause();for(w in x)delete g.tweens[d][w];delete g.attrs[d][b]},g.attrs={},g.tweens={},g}();r.Tween=p,n.Node.prototype.to=function(g){var d=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),d&&d()};var b=new p(g);b.play()},r.Easings={BackEaseIn:function(g,d,b,x){var w=1.70158;return b*(g/=x)*g*((w+1)*g-w)+d},BackEaseOut:function(g,d,b,x){var w=1.70158;return b*((g=g/x-1)*g*((w+1)*g+w)+1)+d},BackEaseInOut:function(g,d,b,x){var w=1.70158;return(g/=x/2)<1?b/2*(g*g*(((w*=1.525)+1)*g-w))+d:b/2*((g-=2)*g*(((w*=1.525)+1)*g+w)+2)+d},ElasticEaseIn:function(g,d,b,x,w,C){var m=0;return g===0?d:(g/=x)===1?d+b:(C||(C=x*.3),!w||w<Math.abs(b)?(w=b,m=C/4):m=C/(2*Math.PI)*Math.asin(b/w),-(w*Math.pow(2,10*(g-=1))*Math.sin((g*x-m)*(2*Math.PI)/C))+d)},ElasticEaseOut:function(g,d,b,x,w,C){var m=0;return g===0?d:(g/=x)===1?d+b:(C||(C=x*.3),!w||w<Math.abs(b)?(w=b,m=C/4):m=C/(2*Math.PI)*Math.asin(b/w),w*Math.pow(2,-10*g)*Math.sin((g*x-m)*(2*Math.PI)/C)+b+d)},ElasticEaseInOut:function(g,d,b,x,w,C){var m=0;return g===0?d:(g/=x/2)===2?d+b:(C||(C=x*(.3*1.5)),!w||w<Math.abs(b)?(w=b,m=C/4):m=C/(2*Math.PI)*Math.asin(b/w),g<1?-.5*(w*Math.pow(2,10*(g-=1))*Math.sin((g*x-m)*(2*Math.PI)/C))+d:w*Math.pow(2,-10*(g-=1))*Math.sin((g*x-m)*(2*Math.PI)/C)*.5+b+d)},BounceEaseOut:function(g,d,b,x){return(g/=x)<1/2.75?b*(7.5625*g*g)+d:g<2/2.75?b*(7.5625*(g-=1.5/2.75)*g+.75)+d:g<2.5/2.75?b*(7.5625*(g-=2.25/2.75)*g+.9375)+d:b*(7.5625*(g-=2.625/2.75)*g+.984375)+d},BounceEaseIn:function(g,d,b,x){return b-r.Easings.BounceEaseOut(x-g,0,b,x)+d},BounceEaseInOut:function(g,d,b,x){return g<x/2?r.Easings.BounceEaseIn(g*2,0,b,x)*.5+d:r.Easings.BounceEaseOut(g*2-x,0,b,x)*.5+b*.5+d},EaseIn:function(g,d,b,x){return b*(g/=x)*g+d},EaseOut:function(g,d,b,x){return-b*(g/=x)*(g-2)+d},EaseInOut:function(g,d,b,x){return(g/=x/2)<1?b/2*g*g+d:-b/2*(--g*(g-2)-1)+d},StrongEaseIn:function(g,d,b,x){return b*(g/=x)*g*g*g*g+d},StrongEaseOut:function(g,d,b,x){return b*((g=g/x-1)*g*g*g*g+1)+d},StrongEaseInOut:function(g,d,b,x){return(g/=x/2)<1?b/2*g*g*g*g*g+d:b/2*((g-=2)*g*g*g*g+2)+d},Linear:function(g,d,b,x){return b*g/x+d}}})(Gv);Object.defineProperty(js,"__esModule",{value:!0});js.Konva=void 0;var B2=ct,Zo=bt,El=nr,z2=Ha,wh=Nv,G2=Po,V2=Js,H2=Mi,$2=Qs,xh=dr,U2=Oi,Sh=Gv,q2=Bn,W2=fn;js.Konva=Zo.Util._assign(B2.Konva,{Collection:Zo.Collection,Util:Zo.Util,Transform:Zo.Transform,Node:El.Node,ids:El.ids,names:El.names,Container:z2.Container,Stage:wh.Stage,stages:wh.stages,Layer:G2.Layer,FastLayer:V2.FastLayer,Group:H2.Group,DD:$2.DD,Shape:xh.Shape,shapes:xh.shapes,Animation:U2.Animation,Tween:Sh.Tween,Easings:Sh.Easings,Context:q2.Context,Canvas:W2.Canvas});var ru={},K2=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ru,"__esModule",{value:!0});ru.Arc=void 0;var j2=bt,nu=ft,Y2=dr,X2=ct,au=Ye,Q2=ct,An=function(r){K2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=X2.Konva.getAngle(this.angle()),a=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,a),t.arc(0,0,this.innerRadius(),n,0,!a),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(Y2.Shape);ru.Arc=An;An.prototype._centroid=!0;An.prototype.className="Arc";An.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Q2._registerNode(An);nu.Factory.addGetterSetter(An,"innerRadius",0,au.getNumberValidator());nu.Factory.addGetterSetter(An,"outerRadius",0,au.getNumberValidator());nu.Factory.addGetterSetter(An,"angle",0,au.getNumberValidator());nu.Factory.addGetterSetter(An,"clockwise",!1,au.getBooleanValidator());j2.Collection.mapMethods(An);var iu={},ko={},Z2=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),J2=Xe&&Xe.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n};Object.defineProperty(ko,"__esModule",{value:!0});ko.Line=void 0;var eo=bt,ou=ft,eS=dr,Vv=Ye,tS=ct,Wn=function(r){Z2(e,r);function e(t){var n=r.call(this,t)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return e.prototype._sceneFunc=function(t){var n=this.points(),a=n.length,i=this.tension(),o=this.closed(),s=this.bezier(),l,u,f;if(!!a){if(t.beginPath(),t.moveTo(n[0],n[1]),i!==0&&a>4){for(l=this.getTensionPoints(),u=l.length,f=o?0:4,o||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);f<u-2;)t.bezierCurveTo(l[f++],l[f++],l[f++],l[f++],l[f++],l[f++]);o||t.quadraticCurveTo(l[u-2],l[u-1],n[a-2],n[a-1])}else if(s)for(f=2;f<a;)t.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<a;f+=2)t.lineTo(n[f],n[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():eo.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),n=t.length,a=this.tension(),i=eo.Util._getControlPoints(t[n-2],t[n-1],t[0],t[1],t[2],t[3],a),o=eo.Util._getControlPoints(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],a),s=eo.Util._expandPoints(t,a),l=[i[2],i[3]].concat(s).concat([o[0],o[1],t[n-2],t[n-1],o[2],o[3],i[0],i[1],t[0],t[1]]);return l},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=J2([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):t=this.points();for(var n=t[0],a=t[0],i=t[1],o=t[1],s,l,u=0;u<t.length/2;u++)s=t[u*2],l=t[u*2+1],n=Math.min(n,s),a=Math.max(a,s),i=Math.min(i,l),o=Math.max(o,l);return{x:n,y:i,width:a-n,height:o-i}},e}(eS.Shape);ko.Line=Wn;Wn.prototype.className="Line";Wn.prototype._attrsAffectingSize=["points","bezier","tension"];tS._registerNode(Wn);ou.Factory.addGetterSetter(Wn,"closed",!1);ou.Factory.addGetterSetter(Wn,"bezier",!1);ou.Factory.addGetterSetter(Wn,"tension",0,Vv.getNumberValidator());ou.Factory.addGetterSetter(Wn,"points",[],Vv.getNumberArrayValidator());eo.Collection.mapMethods(Wn);var rS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(iu,"__esModule",{value:!0});iu.Arrow=void 0;var nS=bt,Pf=ft,aS=ko,Hv=Ye,iS=ct,Ua=function(r){rS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){r.prototype._sceneFunc.call(this,t);var n=Math.PI*2,a=this.points(),i=a,o=this.tension()!==0&&a.length>4;o&&(i=this.getTensionPoints());var s=a.length,l,u;o?(l=a[s-2]-(i[i.length-2]+i[i.length-4])/2,u=a[s-1]-(i[i.length-1]+i[i.length-3])/2):(l=a[s-2]-a[s-4],u=a[s-1]-a[s-3]);var f=(Math.atan2(u,l)+n)%n,c=this.pointerLength(),p=this.pointerWidth();t.save(),t.beginPath(),t.translate(a[s-2],a[s-1]),t.rotate(f),t.moveTo(0,0),t.lineTo(-c,p/2),t.lineTo(-c,-p/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(a[0],a[1]),o?(l=(i[0]+i[2])/2-a[0],u=(i[1]+i[3])/2-a[1]):(l=a[2]-a[0],u=a[3]-a[1]),t.rotate((Math.atan2(-u,-l)+n)%n),t.moveTo(0,0),t.lineTo(-c,p/2),t.lineTo(-c,-p/2),t.closePath(),t.restore());var g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var t=r.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}},e}(aS.Line);iu.Arrow=Ua;Ua.prototype.className="Arrow";iS._registerNode(Ua);Pf.Factory.addGetterSetter(Ua,"pointerLength",10,Hv.getNumberValidator());Pf.Factory.addGetterSetter(Ua,"pointerWidth",10,Hv.getNumberValidator());Pf.Factory.addGetterSetter(Ua,"pointerAtBeginning",!1);nS.Collection.mapMethods(Ua);var su={},oS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(su,"__esModule",{value:!0});su.Circle=void 0;var sS=bt,uS=ft,lS=dr,fS=Ye,cS=ct,qa=function(r){oS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(lS.Shape);su.Circle=qa;qa.prototype._centroid=!0;qa.prototype.className="Circle";qa.prototype._attrsAffectingSize=["radius"];cS._registerNode(qa);uS.Factory.addGetterSetter(qa,"radius",0,fS.getNumberValidator());sS.Collection.mapMethods(qa);var uu={},hS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(uu,"__esModule",{value:!0});uu.Ellipse=void 0;var dS=bt,kf=ft,vS=dr,$v=Ye,gS=ct,Kn=function(r){hS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.radiusX(),a=this.radiusY();t.beginPath(),t.save(),n!==a&&t.scale(1,a/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radiusX()*2},e.prototype.getHeight=function(){return this.radiusY()*2},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(vS.Shape);uu.Ellipse=Kn;Kn.prototype.className="Ellipse";Kn.prototype._centroid=!0;Kn.prototype._attrsAffectingSize=["radiusX","radiusY"];gS._registerNode(Kn);kf.Factory.addComponentsGetterSetter(Kn,"radius",["x","y"]);kf.Factory.addGetterSetter(Kn,"radiusX",0,$v.getNumberValidator());kf.Factory.addGetterSetter(Kn,"radiusY",0,$v.getNumberValidator());dS.Collection.mapMethods(Kn);var lu={},pS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(lu,"__esModule",{value:!0});lu.Image=void 0;var Uv=bt,Li=ft,yS=dr,fu=Ye,mS=ct,Dn=function(r){pS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._sceneFunc=function(t){var n=this.getWidth(),a=this.getHeight(),i=this.attrs.image,o;if(i){var s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,a]:o=[i,0,0,n,a]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,o)},e.prototype._hitFunc=function(t){var n=this.width(),a=this.height();t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.width)||0},e.prototype.getHeight=function(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.height)||0},e.fromURL=function(t,n){var a=Uv.Util.createImageElement();a.onload=function(){var i=new e({image:a});n(i)},a.crossOrigin="Anonymous",a.src=t},e}(yS.Shape);lu.Image=Dn;Dn.prototype.className="Image";mS._registerNode(Dn);Li.Factory.addGetterSetter(Dn,"image");Li.Factory.addComponentsGetterSetter(Dn,"crop",["x","y","width","height"]);Li.Factory.addGetterSetter(Dn,"cropX",0,fu.getNumberValidator());Li.Factory.addGetterSetter(Dn,"cropY",0,fu.getNumberValidator());Li.Factory.addGetterSetter(Dn,"cropWidth",0,fu.getNumberValidator());Li.Factory.addGetterSetter(Dn,"cropHeight",0,fu.getNumberValidator());Uv.Collection.mapMethods(Dn);var yi={},qv=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yi,"__esModule",{value:!0});yi.Tag=yi.Label=void 0;var Wv=bt,cu=ft,bS=dr,wS=Mi,Af=Ye,Kv=ct,jv=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],xS="Change.konva",SS="none",Yl="up",Xl="right",Ql="down",Zl="left",CS=jv.length,hu=function(r){qv(e,r);function e(t){var n=r.call(this,t)||this;return n.on("add.konva",function(a){this._addListeners(a.child),this._sync()}),n}return e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var n=this,a,i=function(){n._sync()};for(a=0;a<CS;a++)t.on(jv[a]+xS,i)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t=this.getText(),n=this.getTag(),a,i,o,s,l,u,f;if(t&&n){switch(a=t.width(),i=t.height(),o=n.pointerDirection(),s=n.pointerWidth(),f=n.pointerHeight(),l=0,u=0,o){case Yl:l=a/2,u=-1*f;break;case Xl:l=a+s,u=i/2;break;case Ql:l=a/2,u=i+f;break;case Zl:l=-1*s,u=i/2;break}n.setAttrs({x:-1*l,y:-1*u,width:a,height:i}),t.setAttrs({x:-1*l,y:-1*u})}},e}(wS.Group);yi.Label=hu;hu.prototype.className="Label";Kv._registerNode(hu);Wv.Collection.mapMethods(hu);var pa=function(r){qv(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.width(),a=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),l=this.cornerRadius(),u=0,f=0,c=0,p=0;typeof l=="number"?u=f=c=p=Math.min(l,n/2,a/2):(u=Math.min(l[0]||0,n/2,a/2),f=Math.min(l[1]||0,n/2,a/2),p=Math.min(l[2]||0,n/2,a/2),c=Math.min(l[3]||0,n/2,a/2)),t.beginPath(),t.moveTo(u,0),i===Yl&&(t.lineTo((n-o)/2,0),t.lineTo(n/2,-1*s),t.lineTo((n+o)/2,0)),t.lineTo(n-f,0),t.arc(n-f,f,f,Math.PI*3/2,0,!1),i===Xl&&(t.lineTo(n,(a-s)/2),t.lineTo(n+o,a/2),t.lineTo(n,(a+s)/2)),t.lineTo(n,a-p),t.arc(n-p,a-p,p,0,Math.PI/2,!1),i===Ql&&(t.lineTo((n+o)/2,a),t.lineTo(n/2,a+s),t.lineTo((n-o)/2,a)),t.lineTo(c,a),t.arc(c,a-c,c,Math.PI/2,Math.PI,!1),i===Zl&&(t.lineTo(0,(a+s)/2),t.lineTo(-1*o,a/2),t.lineTo(0,(a-s)/2)),t.lineTo(0,u),t.arc(u,u,u,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,n=0,a=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),l=this.height();return o===Yl?(n-=i,l+=i):o===Ql?l+=i:o===Zl?(t-=a*1.5,s+=a):o===Xl&&(s+=a*1.5),{x:t,y:n,width:s,height:l}},e}(bS.Shape);yi.Tag=pa;pa.prototype.className="Tag";Kv._registerNode(pa);cu.Factory.addGetterSetter(pa,"pointerDirection",SS);cu.Factory.addGetterSetter(pa,"pointerWidth",0,Af.getNumberValidator());cu.Factory.addGetterSetter(pa,"pointerHeight",0,Af.getNumberValidator());cu.Factory.addGetterSetter(pa,"cornerRadius",0,Af.getNumberOrArrayOfNumbersValidator(4));Wv.Collection.mapMethods(pa);var Ao={},_S=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ao,"__esModule",{value:!0});Ao.Path=void 0;var ES=bt,TS=ft,PS=dr,kS=ct,Ni=function(r){_S(e,r);function e(t){var n=r.call(this,t)||this;n.dataArray=[],n.pathLength=0,n.dataArray=e.parsePathData(n.data()),n.pathLength=0;for(var a=0;a<n.dataArray.length;++a)n.pathLength+=n.dataArray[a].pathLength;return n.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength}),n}return e.prototype._sceneFunc=function(t){var n=this.dataArray;t.beginPath();for(var a=!1,i=0;i<n.length;i++){var o=n[i].command,s=n[i].points;switch(o){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var l=s[0],u=s[1],f=s[2],c=s[3],p=s[4],g=s[5],d=s[6],b=s[7],x=f>c?f:c,w=f>c?1:f/c,C=f>c?c/f:1;t.translate(l,u),t.rotate(d),t.scale(w,C),t.arc(0,0,x,p,p+g,1-b),t.scale(1/w,1/C),t.rotate(-d),t.translate(-l,-u);break;case"z":a=!0,t.closePath();break}}!a&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(f){if(f.command==="A"){var c=f.points[4],p=f.points[5],g=f.points[4]+p,d=Math.PI/180;if(Math.abs(c-g)<d&&(d=Math.abs(c-g)),p<0)for(var b=c-d;b>g;b-=d){var x=e.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],b,0);t.push(x.x,x.y)}else for(var b=c+d;b<g;b+=d){var x=e.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],b,0);t.push(x.x,x.y)}}else if(f.command==="C")for(var b=0;b<=1;b+=.01){var x=e.getPointOnCubicBezier(b,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);t.push(x.x,x.y)}else t=t.concat(f.points)});for(var n=t[0],a=t[0],i=t[1],o=t[1],s,l,u=0;u<t.length/2;u++)s=t[u*2],l=t[u*2+1],isNaN(s)||(n=Math.min(n,s),a=Math.max(a,s)),isNaN(l)||(i=Math.min(i,l),o=Math.max(o,l));return{x:Math.round(n),y:Math.round(i),width:Math.round(a-n),height:Math.round(o-i)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,a=0,i=this.dataArray.length;if(!i)return null;for(;a<i&&t>this.dataArray[a].pathLength;)t-=this.dataArray[a].pathLength,++a;if(a===i)return n=this.dataArray[a-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=this.dataArray[a].points.slice(0,2),{x:n[0],y:n[1]};var o=this.dataArray[a],s=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,s[0],s[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],f=s[2],c=s[3],p=s[4],g=s[5],d=s[6];return p+=g*t/o.pathLength,e.getPointOnEllipticalArc(l,u,f,c,p,d)}return null},e.getLineLength=function(t,n,a,i){return Math.sqrt((a-t)*(a-t)+(i-n)*(i-n))},e.getPointOnLine=function(t,n,a,i,o,s,l){s===void 0&&(s=n),l===void 0&&(l=a);var u=(o-a)/(i-n+1e-8),f=Math.sqrt(t*t/(1+u*u));i<n&&(f*=-1);var c=u*f,p;if(i===n)p={x:s,y:l+c};else if((l-a)/(s-n+1e-8)===u)p={x:s+f,y:l+c};else{var g,d,b=this.getLineLength(n,a,i,o),x=(s-n)*(i-n)+(l-a)*(o-a);x=x/(b*b),g=n+x*(i-n),d=a+x*(o-a);var w=this.getLineLength(s,l,g,d),C=Math.sqrt(t*t-w*w);f=Math.sqrt(C*C/(1+u*u)),i<n&&(f*=-1),c=u*f,p={x:g+f,y:d+c}}return p},e.getPointOnCubicBezier=function(t,n,a,i,o,s,l,u,f){function c(w){return w*w*w}function p(w){return 3*w*w*(1-w)}function g(w){return 3*w*(1-w)*(1-w)}function d(w){return(1-w)*(1-w)*(1-w)}var b=u*c(t)+s*p(t)+i*g(t)+n*d(t),x=f*c(t)+l*p(t)+o*g(t)+a*d(t);return{x:b,y:x}},e.getPointOnQuadraticBezier=function(t,n,a,i,o,s,l){function u(d){return d*d}function f(d){return 2*d*(1-d)}function c(d){return(1-d)*(1-d)}var p=s*u(t)+i*f(t)+n*c(t),g=l*u(t)+o*f(t)+a*c(t);return{x:p,y:g}},e.getPointOnEllipticalArc=function(t,n,a,i,o,s){var l=Math.cos(s),u=Math.sin(s),f={x:a*Math.cos(o),y:i*Math.sin(o)};return{x:t+(f.x*l-f.y*u),y:n+(f.x*u+f.y*l)}},e.parsePathData=function(t){if(!t)return[];var n=t,a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<a.length;i++)n=n.replace(new RegExp(a[i],"g"),"|"+a[i]);var o=n.split("|"),s=[],l=[],u=0,f=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,p;for(i=1;i<o.length;i++){var g=o[i],d=g.charAt(0);for(g=g.slice(1),l.length=0;p=c.exec(g);)l.push(p[0]);for(var b=[],x=0,w=l.length;x<w;x++){var C=parseFloat(l[x]);isNaN(C)?b.push(0):b.push(C)}for(;b.length>0&&!isNaN(b[0]);){var m=null,S=[],P=u,D=f,v,E,k,N,O,I,H,G,Y,j;switch(d){case"l":u+=b.shift(),f+=b.shift(),m="L",S.push(u,f);break;case"L":u=b.shift(),f=b.shift(),S.push(u,f);break;case"m":var q=b.shift(),X=b.shift();if(u+=q,f+=X,m="M",s.length>2&&s[s.length-1].command==="z"){for(var K=s.length-2;K>=0;K--)if(s[K].command==="M"){u=s[K].points[0]+q,f=s[K].points[1]+X;break}}S.push(u,f),d="l";break;case"M":u=b.shift(),f=b.shift(),m="M",S.push(u,f),d="L";break;case"h":u+=b.shift(),m="L",S.push(u,f);break;case"H":u=b.shift(),m="L",S.push(u,f);break;case"v":f+=b.shift(),m="L",S.push(u,f);break;case"V":f=b.shift(),m="L",S.push(u,f);break;case"C":S.push(b.shift(),b.shift(),b.shift(),b.shift()),u=b.shift(),f=b.shift(),S.push(u,f);break;case"c":S.push(u+b.shift(),f+b.shift(),u+b.shift(),f+b.shift()),u+=b.shift(),f+=b.shift(),m="C",S.push(u,f);break;case"S":E=u,k=f,v=s[s.length-1],v.command==="C"&&(E=u+(u-v.points[2]),k=f+(f-v.points[3])),S.push(E,k,b.shift(),b.shift()),u=b.shift(),f=b.shift(),m="C",S.push(u,f);break;case"s":E=u,k=f,v=s[s.length-1],v.command==="C"&&(E=u+(u-v.points[2]),k=f+(f-v.points[3])),S.push(E,k,u+b.shift(),f+b.shift()),u+=b.shift(),f+=b.shift(),m="C",S.push(u,f);break;case"Q":S.push(b.shift(),b.shift()),u=b.shift(),f=b.shift(),S.push(u,f);break;case"q":S.push(u+b.shift(),f+b.shift()),u+=b.shift(),f+=b.shift(),m="Q",S.push(u,f);break;case"T":E=u,k=f,v=s[s.length-1],v.command==="Q"&&(E=u+(u-v.points[0]),k=f+(f-v.points[1])),u=b.shift(),f=b.shift(),m="Q",S.push(E,k,u,f);break;case"t":E=u,k=f,v=s[s.length-1],v.command==="Q"&&(E=u+(u-v.points[0]),k=f+(f-v.points[1])),u+=b.shift(),f+=b.shift(),m="Q",S.push(E,k,u,f);break;case"A":N=b.shift(),O=b.shift(),I=b.shift(),H=b.shift(),G=b.shift(),Y=u,j=f,u=b.shift(),f=b.shift(),m="A",S=this.convertEndpointToCenterParameterization(Y,j,u,f,H,G,N,O,I);break;case"a":N=b.shift(),O=b.shift(),I=b.shift(),H=b.shift(),G=b.shift(),Y=u,j=f,u+=b.shift(),f+=b.shift(),m="A",S=this.convertEndpointToCenterParameterization(Y,j,u,f,H,G,N,O,I);break}s.push({command:m||d,points:S,start:{x:P,y:D},pathLength:this.calcLength(P,D,m||d,S)})}(d==="z"||d==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},e.calcLength=function(t,n,a,i){var o,s,l,u,f=e;switch(a){case"L":return f.getLineLength(t,n,i[0],i[1]);case"C":for(o=0,s=f.getPointOnCubicBezier(0,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),u=.01;u<=1;u+=.01)l=f.getPointOnCubicBezier(u,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;return o;case"Q":for(o=0,s=f.getPointOnQuadraticBezier(0,t,n,i[0],i[1],i[2],i[3]),u=.01;u<=1;u+=.01)l=f.getPointOnQuadraticBezier(u,t,n,i[0],i[1],i[2],i[3]),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;return o;case"A":o=0;var c=i[4],p=i[5],g=i[4]+p,d=Math.PI/180;if(Math.abs(c-g)<d&&(d=Math.abs(c-g)),s=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),p<0)for(u=c-d;u>g;u-=d)l=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;else for(u=c+d;u<g;u+=d)l=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;return l=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],g,0),o+=f.getLineLength(s.x,s.y,l.x,l.y),o}return 0},e.convertEndpointToCenterParameterization=function(t,n,a,i,o,s,l,u,f){var c=f*(Math.PI/180),p=Math.cos(c)*(t-a)/2+Math.sin(c)*(n-i)/2,g=-1*Math.sin(c)*(t-a)/2+Math.cos(c)*(n-i)/2,d=p*p/(l*l)+g*g/(u*u);d>1&&(l*=Math.sqrt(d),u*=Math.sqrt(d));var b=Math.sqrt((l*l*(u*u)-l*l*(g*g)-u*u*(p*p))/(l*l*(g*g)+u*u*(p*p)));o===s&&(b*=-1),isNaN(b)&&(b=0);var x=b*l*g/u,w=b*-u*p/l,C=(t+a)/2+Math.cos(c)*x-Math.sin(c)*w,m=(n+i)/2+Math.sin(c)*x+Math.cos(c)*w,S=function(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])},P=function(O,I){return(O[0]*I[0]+O[1]*I[1])/(S(O)*S(I))},D=function(O,I){return(O[0]*I[1]<O[1]*I[0]?-1:1)*Math.acos(P(O,I))},v=D([1,0],[(p-x)/l,(g-w)/u]),E=[(p-x)/l,(g-w)/u],k=[(-1*p-x)/l,(-1*g-w)/u],N=D(E,k);return P(E,k)<=-1&&(N=Math.PI),P(E,k)>=1&&(N=0),s===0&&N>0&&(N=N-2*Math.PI),s===1&&N<0&&(N=N+2*Math.PI),[C,m,l,u,v,N,c,s]},e}(PS.Shape);Ao.Path=Ni;Ni.prototype.className="Path";Ni.prototype._attrsAffectingSize=["data"];kS._registerNode(Ni);TS.Factory.addGetterSetter(Ni,"data");ES.Collection.mapMethods(Ni);var Do={},AS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Do,"__esModule",{value:!0});Do.Rect=void 0;var DS=bt,MS=ft,OS=dr,LS=ct,NS=Ye,Mo=function(r){AS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.cornerRadius(),a=this.width(),i=this.height();if(t.beginPath(),!n)t.rect(0,0,a,i);else{var o=0,s=0,l=0,u=0;typeof n=="number"?o=s=l=u=Math.min(n,a/2,i/2):(o=Math.min(n[0]||0,a/2,i/2),s=Math.min(n[1]||0,a/2,i/2),u=Math.min(n[2]||0,a/2,i/2),l=Math.min(n[3]||0,a/2,i/2)),t.moveTo(o,0),t.lineTo(a-s,0),t.arc(a-s,s,s,Math.PI*3/2,0,!1),t.lineTo(a,i-u),t.arc(a-u,i-u,u,0,Math.PI/2,!1),t.lineTo(l,i),t.arc(l,i-l,l,Math.PI/2,Math.PI,!1),t.lineTo(0,o),t.arc(o,o,o,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)},e}(OS.Shape);Do.Rect=Mo;Mo.prototype.className="Rect";LS._registerNode(Mo);MS.Factory.addGetterSetter(Mo,"cornerRadius",0,NS.getNumberOrArrayOfNumbersValidator(4));DS.Collection.mapMethods(Mo);var du={},IS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(du,"__esModule",{value:!0});du.RegularPolygon=void 0;var RS=bt,Yv=ft,FS=dr,Xv=Ye,BS=ct,ya=function(r){IS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var a=1;a<n.length;a++)t.lineTo(n[a].x,n[a].y);t.closePath(),t.fillStrokeShape(this)},e.prototype._getPoints=function(){for(var t=this.attrs.sides,n=this.attrs.radius||0,a=[],i=0;i<t;i++)a.push({x:n*Math.sin(i*2*Math.PI/t),y:-1*n*Math.cos(i*2*Math.PI/t)});return a},e.prototype.getSelfRect=function(){var t=this._getPoints(),n=t[0].x,a=t[0].y,i=t[0].x,o=t[0].y;return t.forEach(function(s){n=Math.min(n,s.x),a=Math.max(a,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y)}),{x:n,y:i,width:a-n,height:o-i}},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(FS.Shape);du.RegularPolygon=ya;ya.prototype.className="RegularPolygon";ya.prototype._centroid=!0;ya.prototype._attrsAffectingSize=["radius"];BS._registerNode(ya);Yv.Factory.addGetterSetter(ya,"radius",0,Xv.getNumberValidator());Yv.Factory.addGetterSetter(ya,"sides",0,Xv.getNumberValidator());RS.Collection.mapMethods(ya);var vu={},zS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(vu,"__esModule",{value:!0});vu.Ring=void 0;var GS=bt,Qv=ft,VS=dr,Zv=Ye,HS=ct,Ch=Math.PI*2,ma=function(r){zS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Ch,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Ch,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(VS.Shape);vu.Ring=ma;ma.prototype.className="Ring";ma.prototype._centroid=!0;ma.prototype._attrsAffectingSize=["innerRadius","outerRadius"];HS._registerNode(ma);Qv.Factory.addGetterSetter(ma,"innerRadius",0,Zv.getNumberValidator());Qv.Factory.addGetterSetter(ma,"outerRadius",0,Zv.getNumberValidator());GS.Collection.mapMethods(ma);var gu={},$S=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gu,"__esModule",{value:!0});gu.Sprite=void 0;var US=bt,Wa=ft,qS=dr,WS=Oi,Jv=Ye,KS=ct,cn=function(r){$S(e,r);function e(t){var n=r.call(this,t)||this;return n._updated=!0,n.anim=new WS.Animation(function(){var a=n._updated;return n._updated=!1,a}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())}),n}return e.prototype._sceneFunc=function(t){var n=this.animation(),a=this.frameIndex(),i=a*4,o=this.animations()[n],s=this.frameOffsets(),l=o[i+0],u=o[i+1],f=o[i+2],c=o[i+3],p=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,f,c),t.closePath(),t.fillStrokeShape(this)),p)if(s){var g=s[n],d=a*2;t.drawImage(p,l,u,f,c,g[d+0],g[d+1],f,c)}else t.drawImage(p,l,u,f,c,0,0,f,c)},e.prototype._hitFunc=function(t){var n=this.animation(),a=this.frameIndex(),i=a*4,o=this.animations()[n],s=this.frameOffsets(),l=o[i+2],u=o[i+3];if(t.beginPath(),s){var f=s[n],c=a*2;t.rect(f[c+0],f[c+1],l,u)}else t.rect(0,0,l,u);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),n=this.animation(),a=this.animations(),i=a[n],o=i.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)},e}(qS.Shape);gu.Sprite=cn;cn.prototype.className="Sprite";KS._registerNode(cn);Wa.Factory.addGetterSetter(cn,"animation");Wa.Factory.addGetterSetter(cn,"animations");Wa.Factory.addGetterSetter(cn,"frameOffsets");Wa.Factory.addGetterSetter(cn,"image");Wa.Factory.addGetterSetter(cn,"frameIndex",0,Jv.getNumberValidator());Wa.Factory.addGetterSetter(cn,"frameRate",17,Jv.getNumberValidator());Wa.Factory.backCompat(cn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});US.Collection.mapMethods(cn);var pu={},jS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(pu,"__esModule",{value:!0});pu.Star=void 0;var YS=bt,Df=ft,XS=dr,Mf=Ye,QS=ct,jn=function(r){jS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.innerRadius(),a=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-a);for(var o=1;o<i*2;o++){var s=o%2===0?a:n,l=s*Math.sin(o*Math.PI/i),u=-1*s*Math.cos(o*Math.PI/i);t.lineTo(l,u)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(XS.Shape);pu.Star=jn;jn.prototype.className="Star";jn.prototype._centroid=!0;jn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];QS._registerNode(jn);Df.Factory.addGetterSetter(jn,"numPoints",5,Mf.getNumberValidator());Df.Factory.addGetterSetter(jn,"innerRadius",0,Mf.getNumberValidator());Df.Factory.addGetterSetter(jn,"outerRadius",0,Mf.getNumberValidator());YS.Collection.mapMethods(jn);var za={},ZS=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(za,"__esModule",{value:!0});za.Text=za.stringToArray=void 0;var Cs=bt,Br=ft,JS=dr,eC=ct,ba=Ye,tC=ct;function eg(r){return Array.from(r)}za.stringToArray=eg;var Jo="auto",rC="center",Wi="justify",nC="Change.konva",aC="2d",_h="-",tg="left",iC="text",oC="Text",sC="top",uC="bottom",Eh="middle",rg="normal",Th="px ",Ki=" ",lC="right",fC="word",cC="char",hC="none",Tl="\u2026",ng=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],dC=ng.length;function vC(r){return r.split(",").map(function(e){e=e.trim();var t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e='"'+e+'"'),e}).join(", ")}var es;function Pl(){return es||(es=Cs.Util.createCanvasElement().getContext(aC),es)}function gC(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function pC(r){r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function yC(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}var ar=function(r){ZS(e,r);function e(t){var n=r.call(this,yC(t))||this;n._partialTextX=0,n._partialTextY=0;for(var a=0;a<dC;a++)n.on(ng[a]+nC,n._setTextData);return n._setTextData(),n}return e.prototype._sceneFunc=function(t){var n=this.textArr,a=n.length;if(!!this.text()){var i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,l=this.verticalAlign(),u=0,f=this.align(),c=this.getWidth(),p=this.letterSpacing(),g=this.fill(),d=this.textDecoration(),b=d.indexOf("underline")!==-1,x=d.indexOf("line-through")!==-1,w,C=0,C=s/2,m=0,S=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",Eh),t.setAttr("textAlign",tg),l===Eh?u=(this.getHeight()-a*s-i*2)/2:l===uC&&(u=this.getHeight()-a*s-i*2),t.translate(i,u+i),w=0;w<a;w++){var m=0,S=0,P=n[w],D=P.text,v=P.width,E=w!==a-1,k,N,O;if(t.save(),f===lC?m+=c-v-i*2:f===rC&&(m+=(c-v-i*2)/2),b&&(t.save(),t.beginPath(),t.moveTo(m,C+S+Math.round(o/2)),k=D.split(" ").length-1,N=k===0,O=f===Wi&&E&&!N?c-i*2:v,t.lineTo(m+Math.round(O),C+S+Math.round(o/2)),t.lineWidth=o/15,t.strokeStyle=g,t.stroke(),t.restore()),x&&(t.save(),t.beginPath(),t.moveTo(m,C+S),k=D.split(" ").length-1,N=k===0,O=f===Wi&&E&&!N?c-i*2:v,t.lineTo(m+Math.round(O),C+S),t.lineWidth=o/15,t.strokeStyle=g,t.stroke(),t.restore()),p!==0||f===Wi){k=D.split(" ").length-1;for(var I=eg(D),H=0;H<I.length;H++){var G=I[H];G===" "&&w!==a-1&&f===Wi&&(m+=(c-i*2-v)/k),this._partialTextX=m,this._partialTextY=C+S,this._partialText=G,t.fillStrokeShape(this),m+=this.measureSize(G).width+p}}else this._partialTextX=m,this._partialTextY=C+S,this._partialText=D,t.fillStrokeShape(this);t.restore(),a>1&&(C+=s)}}},e.prototype._hitFunc=function(t){var n=this.getWidth(),a=this.getHeight();t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var n=Cs.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(iC,n),this},e.prototype.getWidth=function(){var t=this.attrs.width===Jo||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width},e.prototype.getHeight=function(){var t=this.attrs.height===Jo||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return Cs.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var n=Pl(),a=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(t),n.restore(),{width:i.width,height:a}},e.prototype._getContextFont=function(){return eC.Konva.UA.isIE?this.fontStyle()+Ki+this.fontSize()+Th+this.fontFamily():this.fontStyle()+Ki+this.fontVariant()+Ki+(this.fontSize()+Th)+vC(this.fontFamily())},e.prototype._addTextLine=function(t){this.align()===Wi&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n})},e.prototype._getTextWidth=function(t){var n=this.letterSpacing(),a=t.length;return Pl().measureText(t).width+(a?n*(a-1):0)},e.prototype._setTextData=function(){var t=this.text().split(`
`),n=+this.fontSize(),a=0,i=this.lineHeight()*n,o=this.attrs.width,s=this.attrs.height,l=o!==Jo&&o!==void 0,u=s!==Jo&&s!==void 0,f=this.padding(),c=o-f*2,p=s-f*2,g=0,d=this.wrap(),b=d!==hC,x=d!==cC&&b,w=this.ellipsis();this.textArr=[],Pl().font=this._getContextFont();for(var C=w?this._getTextWidth(Tl):0,m=0,S=t.length;m<S;++m){var P=t[m],D=this._getTextWidth(P);if(l&&D>c)for(;P.length>0;){for(var v=0,E=P.length,k="",N=0;v<E;){var O=v+E>>>1,I=P.slice(0,O+1),H=this._getTextWidth(I)+C;H<=c?(v=O+1,k=I,N=H):E=O}if(k){if(x){var G,Y=P[k.length],j=Y===Ki||Y===_h;j&&N<=c?G=k.length:G=Math.max(k.lastIndexOf(Ki),k.lastIndexOf(_h))+1,G>0&&(v=G,k=k.slice(0,v),N=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),a=Math.max(a,N),g+=i,!b||u&&g+i>p){var q=this.textArr[this.textArr.length-1];if(q&&w){var X=this._getTextWidth(q.text+Tl)<c;X||(q.text=q.text.slice(0,q.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(q.text+Tl)}break}if(P=P.slice(v),P=P.trimLeft(),P.length>0&&(D=this._getTextWidth(P),D<=c)){this._addTextLine(P),g+=i,a=Math.max(a,D);break}}else break}else this._addTextLine(P),g+=i,a=Math.max(a,D);if(u&&g+i>p)break}this.textHeight=n,this.textWidth=a},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(JS.Shape);za.Text=ar;ar.prototype._fillFunc=gC;ar.prototype._strokeFunc=pC;ar.prototype.className=oC;ar.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];tC._registerNode(ar);Br.Factory.overWriteSetter(ar,"width",ba.getNumberOrAutoValidator());Br.Factory.overWriteSetter(ar,"height",ba.getNumberOrAutoValidator());Br.Factory.addGetterSetter(ar,"fontFamily","Arial");Br.Factory.addGetterSetter(ar,"fontSize",12,ba.getNumberValidator());Br.Factory.addGetterSetter(ar,"fontStyle",rg);Br.Factory.addGetterSetter(ar,"fontVariant",rg);Br.Factory.addGetterSetter(ar,"padding",0,ba.getNumberValidator());Br.Factory.addGetterSetter(ar,"align",tg);Br.Factory.addGetterSetter(ar,"verticalAlign",sC);Br.Factory.addGetterSetter(ar,"lineHeight",1,ba.getNumberValidator());Br.Factory.addGetterSetter(ar,"wrap",fC);Br.Factory.addGetterSetter(ar,"ellipsis",!1,ba.getBooleanValidator());Br.Factory.addGetterSetter(ar,"letterSpacing",0,ba.getNumberValidator());Br.Factory.addGetterSetter(ar,"text","",ba.getStringValidator());Br.Factory.addGetterSetter(ar,"textDecoration","");Cs.Collection.mapMethods(ar);var yu={},mC=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(yu,"__esModule",{value:!0});yu.TextPath=void 0;var cs=bt,hn=ft,bC=dr,xn=Ao,kl=za,ag=Ye,wC=ct,xC="",ig="normal";function og(r){r.fillText(this.partialText,0,0)}function sg(r){r.strokeText(this.partialText,0,0)}var or=function(r){mC(e,r);function e(t){var n=r.call(this,t)||this;return n.dummyCanvas=cs.Util.createCanvasElement(),n.dataArray=[],n.dataArray=xn.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=xn.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),t&&t.getKerning&&(cs.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(t.getKerning)),n._setTextData(),n}return e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),a=this.fill(),i=this.fontSize(),o=this.glyphInfo;n==="underline"&&t.beginPath();for(var s=0;s<o.length;s++){t.save();var l=o[s].p0;t.translate(l.x,l.y),t.rotate(o[s].rotation),this.partialText=o[s].text,t.fillStrokeShape(this),n==="underline"&&(s===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=a,t.lineWidth=i/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var a=n[0].p0;t.moveTo(a.x,a.y)}for(var i=0;i<n.length;i++){var o=n[i].p1;t.lineTo(o.x,o.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return cs.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return kl.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return kl.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var n=this.dummyCanvas,a=n.getContext("2d");a.save(),a.font=this._getContextFont();var i=a.measureText(t);return a.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,n=this._getTextSize(this.attrs.text),a=this.letterSpacing(),i=this.align(),o=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var l=0,u=0;u<t.dataArray.length;u++)t.dataArray[u].pathLength>0&&(l+=t.dataArray[u].pathLength);var f=0;i==="center"&&(f=Math.max(0,l/2-s/2)),i==="right"&&(f=Math.max(0,l-s));for(var c=kl.stringToArray(this.text()),p=this.text().split(" ").length-1,g,d,b,x=-1,w=0,C=function(){w=0;for(var H=t.dataArray,G=x+1;G<H.length;G++){if(H[G].pathLength>0)return x=G,H[G];H[G].command==="M"&&(g={x:H[G].points[0],y:H[G].points[1]})}return{}},m=function(H){var G=t._getTextSize(H).width+a;H===" "&&i==="justify"&&(G+=(l-s)/p);var Y=0,j=0;for(d=void 0;Math.abs(G-Y)/G>.01&&j<20;){j++;for(var q=Y;b===void 0;)b=C(),b&&q+b.pathLength<G&&(q+=b.pathLength,b=void 0);if(b==={}||g===void 0)return;var X=!1;switch(b.command){case"L":xn.Path.getLineLength(g.x,g.y,b.points[0],b.points[1])>G?d=xn.Path.getPointOnLine(G,g.x,g.y,b.points[0],b.points[1],g.x,g.y):b=void 0;break;case"A":var K=b.points[4],T=b.points[5],M=b.points[4]+T;w===0?w=K+1e-8:G>Y?w+=Math.PI/180*T/Math.abs(T):w-=Math.PI/360*T/Math.abs(T),(T<0&&w<M||T>=0&&w>M)&&(w=M,X=!0),d=xn.Path.getPointOnEllipticalArc(b.points[0],b.points[1],b.points[2],b.points[3],w,b.points[6]);break;case"C":w===0?G>b.pathLength?w=1e-8:w=G/b.pathLength:G>Y?w+=(G-Y)/b.pathLength/2:w=Math.max(w-(Y-G)/b.pathLength/2,0),w>1&&(w=1,X=!0),d=xn.Path.getPointOnCubicBezier(w,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3],b.points[4],b.points[5]);break;case"Q":w===0?w=G/b.pathLength:G>Y?w+=(G-Y)/b.pathLength:w-=(Y-G)/b.pathLength,w>1&&(w=1,X=!0),d=xn.Path.getPointOnQuadraticBezier(w,b.start.x,b.start.y,b.points[0],b.points[1],b.points[2],b.points[3]);break}d!==void 0&&(Y=xn.Path.getLineLength(g.x,g.y,d.x,d.y)),X&&(X=!1,b=void 0)}},S="C",P=t._getTextSize(S).width+a,D=f/P-1,v=0;v<D&&(m(S),!(g===void 0||d===void 0));v++)g=d;for(var E=0;E<c.length&&(m(c[E]),!(g===void 0||d===void 0));E++){var k=xn.Path.getLineLength(g.x,g.y,d.x,d.y),N=0;if(o)try{N=o(c[E-1],c[E])*this.fontSize()}catch{N=0}g.x+=N,d.x+=N,this.textWidth+=N;var O=xn.Path.getPointOnLine(N+k/2,g.x,g.y,d.x,d.y),I=Math.atan2(d.y-g.y,d.x-g.x);this.glyphInfo.push({transposeX:O.x,transposeY:O.y,text:c[E],rotation:I,p0:g,p1:d}),g=d}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var n=t[0]||0,a=t[0]||0,i=t[1]||0,o=t[1]||0,s,l,u=0;u<t.length/2;u++)s=t[u*2],l=t[u*2+1],n=Math.min(n,s),a=Math.max(a,s),i=Math.min(i,l),o=Math.max(o,l);var f=this.fontSize();return{x:n-f/2,y:i-f/2,width:a-n+f,height:o-i+f}},e}(bC.Shape);yu.TextPath=or;or.prototype._fillFunc=og;or.prototype._strokeFunc=sg;or.prototype._fillFuncHit=og;or.prototype._strokeFuncHit=sg;or.prototype.className="TextPath";or.prototype._attrsAffectingSize=["text","fontSize","data"];wC._registerNode(or);hn.Factory.addGetterSetter(or,"data");hn.Factory.addGetterSetter(or,"fontFamily","Arial");hn.Factory.addGetterSetter(or,"fontSize",12,ag.getNumberValidator());hn.Factory.addGetterSetter(or,"fontStyle",ig);hn.Factory.addGetterSetter(or,"align","left");hn.Factory.addGetterSetter(or,"letterSpacing",0,ag.getNumberValidator());hn.Factory.addGetterSetter(or,"textBaseline","middle");hn.Factory.addGetterSetter(or,"fontVariant",ig);hn.Factory.addGetterSetter(or,"text",xC);hn.Factory.addGetterSetter(or,"textDecoration",null);hn.Factory.addGetterSetter(or,"kerningFunc",null);cs.Collection.mapMethods(or);var mu={},SC=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_s=Xe&&Xe.__assign||function(){return _s=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},_s.apply(this,arguments)};Object.defineProperty(mu,"__esModule",{value:!0});mu.Transformer=void 0;var It=bt,Kt=ft,CC=nr,_C=dr,EC=Do,Ph=Mi,an=ct,Ka=Ye,TC=ct,Fn="tr-konva",PC=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(r){return r+("."+Fn)}).join(" "),kh="nodesRect",kC=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(r){return r+("."+Fn)}).join(" "),AC={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},DC="ontouchstart"in an.Konva._global;function MC(r,e){if(r==="rotater")return"crosshair";e+=It.Util._degToRad(AC[r]||0);var t=(It.Util._radToDeg(e)%360+360)%360;return It.Util._inRange(t,315+22.5,360)||It.Util._inRange(t,0,22.5)?"ns-resize":It.Util._inRange(t,45-22.5,45+22.5)?"nesw-resize":It.Util._inRange(t,90-22.5,90+22.5)?"ew-resize":It.Util._inRange(t,135-22.5,135+22.5)?"nwse-resize":It.Util._inRange(t,180-22.5,180+22.5)?"ns-resize":It.Util._inRange(t,225-22.5,225+22.5)?"nesw-resize":It.Util._inRange(t,270-22.5,270+22.5)?"ew-resize":It.Util._inRange(t,315-22.5,315+22.5)?"nwse-resize":(It.Util.error("Transformer has unknown angle for cursor detection: "+t),"pointer")}var Es=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],Ah=1e8;function OC(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function ug(r,e,t){var n=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),a=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return _s(_s({},r),{rotation:r.rotation+e,x:n,y:a})}function LC(r,e){var t=OC(r);return ug(r,e,t)}function NC(r,e,t){for(var n=e,a=0;a<r.length;a++){var i=an.Konva.getAngle(r[a]),o=Math.abs(i-e)%(Math.PI*2),s=Math.min(o,Math.PI*2-o);s<t&&(n=i)}return n}var Rt=function(r){SC(e,r);function e(t){var n=r.call(this,t)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(PC,n.update),n.getNode()&&n.update(),n}return e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){return It.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},e.prototype.getNode=function(){return this._nodes&&this._nodes[0]},e.prototype.setNodes=function(t){var n=this;t===void 0&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(function(i){var o=i._attrsAffectingSize.map(function(l){return l+"Change."+Fn}).join(" "),s=function(){n.nodes().length===1&&n.rotation(n.nodes()[0].getAbsoluteRotation()),n._resetTransformCache(),!n._transforming&&!n.isDragging()&&n.update()};i.on(o,s),i.on(kC,s),i.on("_clearTransformCache."+Fn,s),i.on("xChange."+Fn+" yChange."+Fn,s),n._proxyDrag(i)}),this._resetTransformCache();var a=!!this.findOne(".top-left");return a&&this.update(),this},e.prototype._proxyDrag=function(t){var n=this,a;t.on("dragstart."+Fn,function(i){a=t.getAbsolutePosition(),!n.isDragging()&&t!==n.findOne(".back")&&n.startDrag(i,!1)}),t.on("dragmove."+Fn,function(i){if(!!a){var o=t.getAbsolutePosition(),s=o.x-a.x,l=o.y-a.y;n.nodes().forEach(function(u){if(u!==t&&!u.isDragging()){var f=u.getAbsolutePosition();u.setAbsolutePosition({x:f.x+s,y:f.y+l}),u.startDrag(i)}}),a=null}})},e.prototype.getNodes=function(){return this._nodes||[]},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(t){t.off("."+Fn)}),this._nodes=[],this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache(kh),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache(kh,this.__getNodeRect)},e.prototype.__getNodeShape=function(t,n,a){n===void 0&&(n=this.rotation());var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(a),s=t.getAbsolutePosition(a),l=i.x*o.x-t.offsetX()*o.x,u=i.y*o.y-t.offsetY()*o.y,f=(an.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:s.x+l*Math.cos(f)+u*Math.sin(-f),y:s.y+u*Math.cos(f)+l*Math.sin(f),width:i.width*o.x,height:i.height*o.y,rotation:f};return ug(c,-an.Konva.getAngle(n),{x:0,y:0})},e.prototype.__getNodeRect=function(){var t=this,n=this.getNode();if(!n)return{x:-Ah,y:-Ah,width:0,height:0,rotation:0};var a=[];this.nodes().map(function(c){var p=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),g=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],d=c.getAbsoluteTransform();g.forEach(function(b){var x=d.point(b);a.push(x)})});var i=new It.Transform;i.rotate(-an.Konva.getAngle(this.rotation()));var o,s,l,u;a.forEach(function(c){var p=i.point(c);o===void 0&&(o=l=p.x,s=u=p.y),o=Math.min(o,p.x),s=Math.min(s,p.y),l=Math.max(l,p.x),u=Math.max(u,p.y)}),i.invert();var f=i.point({x:o,y:s});return{x:f.x,y:f.y,width:l-o,height:u-s,rotation:an.Konva.getAngle(this.rotation())}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),Es.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var n=this,a=new EC.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:DC?10:"auto"}),i=this;a.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),a.on("dragstart",function(o){a.stopDrag(),o.cancelBubble=!0}),a.on("dragend",function(o){o.cancelBubble=!0}),a.on("mouseenter",function(){var o=an.Konva.getAngle(n.rotation()),s=MC(t,o);a.getStage().content.style.cursor=s,n._cursorChange=!0}),a.on("mouseout",function(){a.getStage().content.style.cursor="",n._cursorChange=!1}),this.add(a)},e.prototype._createBack=function(){var t=this,n=new _C.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(a){var i=this.getParent(),o=i.padding();a.beginPath(),a.rect(-o,-o,this.width()+o*2,this.height()+o*2),a.moveTo(this.width()/2,-o),i.rotateEnabled()&&a.lineTo(this.width()/2,-i.rotateAnchorOffset()*It.Util._sign(this.height())-o),a.fillStrokeShape(this)},hitFunc:function(a,i){if(!!t.shouldOverdrawWholeArea()){var o=t.padding();a.beginPath(),a.rect(-o,-o,i.width()+o*2,i.height()+o*2),a.fillStrokeShape(i)}}});this.add(n),this._proxyDrag(n),n.on("dragstart",function(a){a.cancelBubble=!0}),n.on("dragmove",function(a){a.cancelBubble=!0}),n.on("dragend",function(a){a.cancelBubble=!0})},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),a=n.width,i=n.height,o=Math.sqrt(Math.pow(a,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(a/o),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var s=t.target.getAbsolutePosition(),l=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:l.x-s.x,y:l.y-s.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(function(u){u._fire("transformstart",{evt:t,target:u})})},e.prototype._handleMouseMove=function(t){var n,a,i,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(t);var l=s.getPointerPosition(),u={x:l.x-this._anchorDragOffset.x,y:l.y-this._anchorDragOffset.y},f=o.getAbsolutePosition();o.setAbsolutePosition(u);var c=o.getAbsolutePosition();if(!(f.x===c.x&&f.y===c.y)){if(this._movingAnchorName==="rotater"){var p=this._getNodeRect();n=o.x()-p.width/2,a=-o.y()+p.height/2;var g=Math.atan2(-a,n)+Math.PI/2;p.height<0&&(g-=Math.PI);var d=an.Konva.getAngle(this.rotation()),b=d+g,x=an.Konva.getAngle(this.rotationSnapTolerance()),w=NC(this.rotationSnaps(),b,x),C=w-p.rotation,m=LC(p,C);this._fitNodesInto(m,t);return}var S=this.keepRatio()||t.shiftKey,k=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(S){var P=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(P.x-o.x(),2)+Math.pow(P.y-o.y(),2));var D=this.findOne(".top-left").x()>P.x?-1:1,v=this.findOne(".top-left").y()>P.y?-1:1;n=i*this.cos*D,a=i*this.sin*v,this.findOne(".top-left").x(P.x-n),this.findOne(".top-left").y(P.y-a)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(S){var P=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-P.x,2)+Math.pow(P.y-o.y(),2));var D=this.findOne(".top-right").x()<P.x?-1:1,v=this.findOne(".top-right").y()>P.y?-1:1;n=i*this.cos*D,a=i*this.sin*v,this.findOne(".top-right").x(P.x+n),this.findOne(".top-right").y(P.y-a)}var E=o.position();this.findOne(".top-left").y(E.y),this.findOne(".bottom-right").x(E.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(S){var P=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(P.x-o.x(),2)+Math.pow(o.y()-P.y,2));var D=P.x<o.x()?-1:1,v=o.y()<P.y?-1:1;n=i*this.cos*D,a=i*this.sin*v,o.x(P.x-n),o.y(P.y+a)}E=o.position(),this.findOne(".top-left").x(E.x),this.findOne(".bottom-right").y(E.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(S){var P=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-P.x,2)+Math.pow(o.y()-P.y,2));var D=this.findOne(".bottom-right").x()<P.x?-1:1,v=this.findOne(".bottom-right").y()<P.y?-1:1;n=i*this.cos*D,a=i*this.sin*v,this.findOne(".bottom-right").x(P.x+n),this.findOne(".bottom-right").y(P.y+a)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var k=this.centeredScaling()||t.altKey;if(k){var N=this.findOne(".top-left"),O=this.findOne(".bottom-right"),I=N.x(),H=N.y(),G=this.getWidth()-O.x(),Y=this.getHeight()-O.y();O.move({x:-I,y:-H}),N.move({x:G,y:Y})}var j=this.findOne(".top-left").getAbsolutePosition();n=j.x,a=j.y;var q=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:a,width:q,height:X,rotation:an.Konva.getAngle(this.rotation())},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype.getAbsoluteTransform=function(){return this.getTransform()},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(function(a){a._fire("transformend",{evt:t,target:a})}),this._movingAnchorName=null}},e.prototype._fitNodesInto=function(t,n){var a=this,i=this._getNodeRect(),o=1;if(It.Util._inRange(t.width,-this.padding()*2-o,o)){this.update();return}if(It.Util._inRange(t.height,-this.padding()*2-o,o)){this.update();return}var s=new It.Transform;if(s.rotate(an.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var l=s.point({x:-this.padding()*2,y:0});t.x+=l.x,t.y+=l.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var l=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var l=s.point({x:0,y:-this.padding()*2});t.x+=l.x,t.y+=l.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var l=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){var u=this.boundBoxFunc()(i,t);u?t=u:It.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var f=1e7,c=new It.Transform;c.translate(i.x,i.y),c.rotate(i.rotation),c.scale(i.width/f,i.height/f);var p=new It.Transform;p.translate(t.x,t.y),p.rotate(t.rotation),p.scale(t.width/f,t.height/f);var g=p.multiply(c.invert());this._nodes.forEach(function(d){var b,x=d.getParent().getAbsoluteTransform(),w=d.getTransform().copy();w.translate(d.offsetX(),d.offsetY());var C=new It.Transform;C.multiply(x.copy().invert()).multiply(g).multiply(x).multiply(w);var m=C.decompose();d.setAttrs(m),a._fire("transform",{evt:n,target:d}),d._fire("transform",{evt:n,target:d}),(b=d.getLayer())===null||b===void 0||b.batchDraw()}),this.rotation(It.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype._batchChangeChild=function(t,n){var a=this.findOne(t);a.setAttrs(n)},e.prototype.update=function(){var t=this,n,a=this._getNodeRect();this.rotation(It.Util._getRotation(a.rotation));var i=a.width,o=a.height,s=this.enabledAnchors(),l=this.resizeEnabled(),u=this.padding(),f=this.anchorSize();this.find("._anchor").each(function(c){c.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+u,offsetY:f/2+u,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+u,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-u,offsetY:f/2+u,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+u,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-u,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+u,offsetY:f/2-u,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-u,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-u,offsetY:f/2-u,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*It.Util._sign(o)-u,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(n=this.getLayer())===null||n===void 0||n.batchDraw()},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),Ph.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return CC.Node.prototype.toObject.call(this)},e}(Ph.Group);mu.Transformer=Rt;function IC(r){return r instanceof Array||It.Util.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){Es.indexOf(e)===-1&&It.Util.warn("Unknown anchor name: "+e+". Available names are: "+Es.join(", "))}),r||[]}Rt.prototype.className="Transformer";TC._registerNode(Rt);Kt.Factory.addGetterSetter(Rt,"enabledAnchors",Es,IC);Kt.Factory.addGetterSetter(Rt,"resizeEnabled",!0);Kt.Factory.addGetterSetter(Rt,"anchorSize",10,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"rotateEnabled",!0);Kt.Factory.addGetterSetter(Rt,"rotationSnaps",[]);Kt.Factory.addGetterSetter(Rt,"rotateAnchorOffset",50,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"rotationSnapTolerance",5,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"borderEnabled",!0);Kt.Factory.addGetterSetter(Rt,"anchorStroke","rgb(0, 161, 255)");Kt.Factory.addGetterSetter(Rt,"anchorStrokeWidth",1,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"anchorFill","white");Kt.Factory.addGetterSetter(Rt,"anchorCornerRadius",0,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"borderStroke","rgb(0, 161, 255)");Kt.Factory.addGetterSetter(Rt,"borderStrokeWidth",1,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"borderDash");Kt.Factory.addGetterSetter(Rt,"keepRatio",!0);Kt.Factory.addGetterSetter(Rt,"centeredScaling",!1);Kt.Factory.addGetterSetter(Rt,"ignoreStroke",!1);Kt.Factory.addGetterSetter(Rt,"padding",0,Ka.getNumberValidator());Kt.Factory.addGetterSetter(Rt,"node");Kt.Factory.addGetterSetter(Rt,"nodes");Kt.Factory.addGetterSetter(Rt,"boundBoxFunc");Kt.Factory.addGetterSetter(Rt,"shouldOverdrawWholeArea",!1);Kt.Factory.backCompat(Rt,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});It.Collection.mapMethods(Rt);var bu={},RC=Xe&&Xe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(bu,"__esModule",{value:!0});bu.Wedge=void 0;var FC=bt,wu=ft,BC=dr,zC=ct,lg=Ye,GC=ct,Mn=function(r){RC(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,zC.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(BC.Shape);bu.Wedge=Mn;Mn.prototype.className="Wedge";Mn.prototype._centroid=!0;Mn.prototype._attrsAffectingSize=["radius"];GC._registerNode(Mn);wu.Factory.addGetterSetter(Mn,"radius",0,lg.getNumberValidator());wu.Factory.addGetterSetter(Mn,"angle",0,lg.getNumberValidator());wu.Factory.addGetterSetter(Mn,"clockwise",!1);wu.Factory.backCompat(Mn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});FC.Collection.mapMethods(Mn);var xu={};Object.defineProperty(xu,"__esModule",{value:!0});xu.Blur=void 0;var Dh=ft,VC=nr,HC=Ye;function Mh(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var $C=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],UC=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function qC(r,e){var t=r.data,n=r.width,a=r.height,i,o,s,l,u,f,c,p,g,d,b,x,w,C,m,S,P,D,v,E,k,N,O,I,H=e+e+1,G=n-1,Y=a-1,j=e+1,q=j*(j+1)/2,X=new Mh,K=null,T=X,M=null,L=null,F=$C[e],W=UC[e];for(s=1;s<H;s++)T=T.next=new Mh,s===j&&(K=T);for(T.next=X,c=f=0,o=0;o<a;o++){for(S=P=D=v=p=g=d=b=0,x=j*(E=t[f]),w=j*(k=t[f+1]),C=j*(N=t[f+2]),m=j*(O=t[f+3]),p+=q*E,g+=q*k,d+=q*N,b+=q*O,T=X,s=0;s<j;s++)T.r=E,T.g=k,T.b=N,T.a=O,T=T.next;for(s=1;s<j;s++)l=f+((G<s?G:s)<<2),p+=(T.r=E=t[l])*(I=j-s),g+=(T.g=k=t[l+1])*I,d+=(T.b=N=t[l+2])*I,b+=(T.a=O=t[l+3])*I,S+=E,P+=k,D+=N,v+=O,T=T.next;for(M=X,L=K,i=0;i<n;i++)t[f+3]=O=b*F>>W,O!==0?(O=255/O,t[f]=(p*F>>W)*O,t[f+1]=(g*F>>W)*O,t[f+2]=(d*F>>W)*O):t[f]=t[f+1]=t[f+2]=0,p-=x,g-=w,d-=C,b-=m,x-=M.r,w-=M.g,C-=M.b,m-=M.a,l=c+((l=i+e+1)<G?l:G)<<2,S+=M.r=t[l],P+=M.g=t[l+1],D+=M.b=t[l+2],v+=M.a=t[l+3],p+=S,g+=P,d+=D,b+=v,M=M.next,x+=E=L.r,w+=k=L.g,C+=N=L.b,m+=O=L.a,S-=E,P-=k,D-=N,v-=O,L=L.next,f+=4;c+=n}for(i=0;i<n;i++){for(P=D=v=S=g=d=b=p=0,f=i<<2,x=j*(E=t[f]),w=j*(k=t[f+1]),C=j*(N=t[f+2]),m=j*(O=t[f+3]),p+=q*E,g+=q*k,d+=q*N,b+=q*O,T=X,s=0;s<j;s++)T.r=E,T.g=k,T.b=N,T.a=O,T=T.next;for(u=n,s=1;s<=e;s++)f=u+i<<2,p+=(T.r=E=t[f])*(I=j-s),g+=(T.g=k=t[f+1])*I,d+=(T.b=N=t[f+2])*I,b+=(T.a=O=t[f+3])*I,S+=E,P+=k,D+=N,v+=O,T=T.next,s<Y&&(u+=n);for(f=i,M=X,L=K,o=0;o<a;o++)l=f<<2,t[l+3]=O=b*F>>W,O>0?(O=255/O,t[l]=(p*F>>W)*O,t[l+1]=(g*F>>W)*O,t[l+2]=(d*F>>W)*O):t[l]=t[l+1]=t[l+2]=0,p-=x,g-=w,d-=C,b-=m,x-=M.r,w-=M.g,C-=M.b,m-=M.a,l=i+((l=o+j)<Y?l:Y)*n<<2,p+=S+=M.r=t[l],g+=P+=M.g=t[l+1],d+=D+=M.b=t[l+2],b+=v+=M.a=t[l+3],M=M.next,x+=E=L.r,w+=k=L.g,C+=N=L.b,m+=O=L.a,S-=E,P-=k,D-=N,v-=O,L=L.next,f+=n}}var WC=function(e){var t=Math.round(this.blurRadius());t>0&&qC(e,t)};xu.Blur=WC;Dh.Factory.addGetterSetter(VC.Node,"blurRadius",0,HC.getNumberValidator(),Dh.Factory.afterSetFilter);var Su={};Object.defineProperty(Su,"__esModule",{value:!0});Su.Brighten=void 0;var Oh=ft,KC=nr,jC=Ye,YC=function(r){var e=this.brightness()*255,t=r.data,n=t.length,a;for(a=0;a<n;a+=4)t[a]+=e,t[a+1]+=e,t[a+2]+=e};Su.Brighten=YC;Oh.Factory.addGetterSetter(KC.Node,"brightness",0,jC.getNumberValidator(),Oh.Factory.afterSetFilter);var Cu={};Object.defineProperty(Cu,"__esModule",{value:!0});Cu.Contrast=void 0;var Lh=ft,XC=nr,QC=Ye,ZC=function(r){var e=Math.pow((this.contrast()+100)/100,2),t=r.data,n=t.length,a=150,i=150,o=150,s;for(s=0;s<n;s+=4)a=t[s],i=t[s+1],o=t[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,t[s]=a,t[s+1]=i,t[s+2]=o};Cu.Contrast=ZC;Lh.Factory.addGetterSetter(XC.Node,"contrast",0,QC.getNumberValidator(),Lh.Factory.afterSetFilter);var _u={};Object.defineProperty(_u,"__esModule",{value:!0});_u.Emboss=void 0;var ha=ft,Eu=nr,JC=bt,fg=Ye,e_=function(r){var e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,n=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=r.data,l=r.width,u=r.height,f=l*4,c=u;switch(n){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:JC.Util.error("Unknown emboss direction: "+n)}do{var p=(c-1)*f,g=i;c+g<1&&(g=0),c+g>u&&(g=0);var d=(c-1+g)*l*4,b=l;do{var x=p+(b-1)*4,w=o;b+w<1&&(w=0),b+w>l&&(w=0);var C=d+(b-1+w)*4,m=s[x]-s[C],S=s[x+1]-s[C+1],P=s[x+2]-s[C+2],D=m,v=D>0?D:-D,E=S>0?S:-S,k=P>0?P:-P;if(E>v&&(D=S),k>v&&(D=P),D*=e,a){var N=s[x]+D,O=s[x+1]+D,I=s[x+2]+D;s[x]=N>255?255:N<0?0:N,s[x+1]=O>255?255:O<0?0:O,s[x+2]=I>255?255:I<0?0:I}else{var H=t-D;H<0?H=0:H>255&&(H=255),s[x]=s[x+1]=s[x+2]=H}}while(--b)}while(--c)};_u.Emboss=e_;ha.Factory.addGetterSetter(Eu.Node,"embossStrength",.5,fg.getNumberValidator(),ha.Factory.afterSetFilter);ha.Factory.addGetterSetter(Eu.Node,"embossWhiteLevel",.5,fg.getNumberValidator(),ha.Factory.afterSetFilter);ha.Factory.addGetterSetter(Eu.Node,"embossDirection","top-left",null,ha.Factory.afterSetFilter);ha.Factory.addGetterSetter(Eu.Node,"embossBlend",!1,null,ha.Factory.afterSetFilter);var Tu={};Object.defineProperty(Tu,"__esModule",{value:!0});Tu.Enhance=void 0;var Nh=ft,t_=nr,r_=Ye;function Al(r,e,t,n,a){var i=t-e,o=a-n,s;return i===0?n+o/2:o===0?n:(s=(r-e)/i,s=o*s+n,s)}var n_=function(r){var e=r.data,t=e.length,n=e[0],a=n,i,o=e[1],s=o,l,u=e[2],f=u,c,p,g=this.enhance();if(g!==0){for(p=0;p<t;p+=4)i=e[p+0],i<n?n=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),c=e[p+2],c<u?u=c:c>f&&(f=c);a===n&&(a=255,n=0),s===o&&(s=255,o=0),f===u&&(f=255,u=0);var d,b,x,w,C,m,S,P,D;for(g>0?(b=a+g*(255-a),x=n-g*(n-0),C=s+g*(255-s),m=o-g*(o-0),P=f+g*(255-f),D=u-g*(u-0)):(d=(a+n)*.5,b=a+g*(a-d),x=n+g*(n-d),w=(s+o)*.5,C=s+g*(s-w),m=o+g*(o-w),S=(f+u)*.5,P=f+g*(f-S),D=u+g*(u-S)),p=0;p<t;p+=4)e[p+0]=Al(e[p+0],n,a,x,b),e[p+1]=Al(e[p+1],o,s,m,C),e[p+2]=Al(e[p+2],u,f,D,P)}};Tu.Enhance=n_;Nh.Factory.addGetterSetter(t_.Node,"enhance",0,r_.getNumberValidator(),Nh.Factory.afterSetFilter);var Pu={};Object.defineProperty(Pu,"__esModule",{value:!0});Pu.Grayscale=void 0;var a_=function(r){var e=r.data,t=e.length,n,a;for(n=0;n<t;n+=4)a=.34*e[n]+.5*e[n+1]+.16*e[n+2],e[n]=a,e[n+1]=a,e[n+2]=a};Pu.Grayscale=a_;var ku={};Object.defineProperty(ku,"__esModule",{value:!0});ku.HSL=void 0;var mi=ft,Of=nr,Lf=Ye;mi.Factory.addGetterSetter(Of.Node,"hue",0,Lf.getNumberValidator(),mi.Factory.afterSetFilter);mi.Factory.addGetterSetter(Of.Node,"saturation",0,Lf.getNumberValidator(),mi.Factory.afterSetFilter);mi.Factory.addGetterSetter(Of.Node,"luminance",0,Lf.getNumberValidator(),mi.Factory.afterSetFilter);var i_=function(r){var e=r.data,t=e.length,n=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=n*a*Math.cos(i*Math.PI/180),u=n*a*Math.sin(i*Math.PI/180),f=.299*n+.701*l+.167*u,c=.587*n-.587*l+.33*u,p=.114*n-.114*l-.497*u,g=.299*n-.299*l-.328*u,d=.587*n+.413*l+.035*u,b=.114*n-.114*l+.293*u,x=.299*n-.3*l+1.25*u,w=.587*n-.586*l-1.05*u,C=.114*n+.886*l-.2*u,m,S,P,D;for(s=0;s<t;s+=4)m=e[s+0],S=e[s+1],P=e[s+2],D=e[s+3],e[s+0]=f*m+c*S+p*P+o,e[s+1]=g*m+d*S+b*P+o,e[s+2]=x*m+w*S+C*P+o,e[s+3]=D};ku.HSL=i_;var Au={};Object.defineProperty(Au,"__esModule",{value:!0});Au.HSV=void 0;var bi=ft,Nf=nr,If=Ye,o_=function(r){var e=r.data,t=e.length,n=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=n*a*Math.cos(i*Math.PI/180),l=n*a*Math.sin(i*Math.PI/180),u=.299*n+.701*s+.167*l,f=.587*n-.587*s+.33*l,c=.114*n-.114*s-.497*l,p=.299*n-.299*s-.328*l,g=.587*n+.413*s+.035*l,d=.114*n-.114*s+.293*l,b=.299*n-.3*s+1.25*l,x=.587*n-.586*s-1.05*l,w=.114*n+.886*s-.2*l,C,m,S,P;for(o=0;o<t;o+=4)C=e[o+0],m=e[o+1],S=e[o+2],P=e[o+3],e[o+0]=u*C+f*m+c*S,e[o+1]=p*C+g*m+d*S,e[o+2]=b*C+x*m+w*S,e[o+3]=P};Au.HSV=o_;bi.Factory.addGetterSetter(Nf.Node,"hue",0,If.getNumberValidator(),bi.Factory.afterSetFilter);bi.Factory.addGetterSetter(Nf.Node,"saturation",0,If.getNumberValidator(),bi.Factory.afterSetFilter);bi.Factory.addGetterSetter(Nf.Node,"value",0,If.getNumberValidator(),bi.Factory.afterSetFilter);var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.Invert=void 0;var s_=function(r){var e=r.data,t=e.length,n;for(n=0;n<t;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};Du.Invert=s_;var Mu={};Object.defineProperty(Mu,"__esModule",{value:!0});Mu.Kaleidoscope=void 0;var Ts=ft,cg=nr,u_=bt,hg=Ye,l_=function(r,e,t){var n=r.data,a=e.data,i=r.width,o=r.height,s=t.polarCenterX||i/2,l=t.polarCenterY||o/2,u,f,c,p=0,g=0,d=0,b=0,x,w=Math.sqrt(s*s+l*l);f=i-s,c=o-l,x=Math.sqrt(f*f+c*c),w=x>w?x:w;var C=o,m=i,S,P,D=360/m*Math.PI/180,v,E;for(P=0;P<m;P+=1)for(v=Math.sin(P*D),E=Math.cos(P*D),S=0;S<C;S+=1)f=Math.floor(s+w*S/C*E),c=Math.floor(l+w*S/C*v),u=(c*i+f)*4,p=n[u+0],g=n[u+1],d=n[u+2],b=n[u+3],u=(P+S*i)*4,a[u+0]=p,a[u+1]=g,a[u+2]=d,a[u+3]=b},f_=function(r,e,t){var n=r.data,a=e.data,i=r.width,o=r.height,s=t.polarCenterX||i/2,l=t.polarCenterY||o/2,u,f,c,p,g,d=0,b=0,x=0,w=0,C,m=Math.sqrt(s*s+l*l);f=i-s,c=o-l,C=Math.sqrt(f*f+c*c),m=C>m?C:m;var S=o,P=i,D,v,E=t.polarRotation||0,k,N;for(f=0;f<i;f+=1)for(c=0;c<o;c+=1)p=f-s,g=c-l,D=Math.sqrt(p*p+g*g)*S/m,v=(Math.atan2(g,p)*180/Math.PI+360+E)%360,v=v*P/360,k=Math.floor(v),N=Math.floor(D),u=(N*i+k)*4,d=n[u+0],b=n[u+1],x=n[u+2],w=n[u+3],u=(c*i+f)*4,a[u+0]=d,a[u+1]=b,a[u+2]=x,a[u+3]=w},c_=function(r){var e=r.width,t=r.height,n,a,i,o,s,l,u,f,c,p,g=Math.round(this.kaleidoscopePower()),d=Math.round(this.kaleidoscopeAngle()),b=Math.floor(e*(d%360)/360);if(!(g<1)){var x=u_.Util.createCanvasElement();x.width=e,x.height=t;var w=x.getContext("2d").getImageData(0,0,e,t);l_(r,w,{polarCenterX:e/2,polarCenterY:t/2});for(var C=e/Math.pow(2,g);C<=8;)C=C*2,g-=1;C=Math.ceil(C);var m=C,S=0,P=m,D=1;for(b+C>e&&(S=m,P=0,D=-1),a=0;a<t;a+=1)for(n=S;n!==P;n+=D)i=Math.round(n+b)%e,c=(e*a+i)*4,s=w.data[c+0],l=w.data[c+1],u=w.data[c+2],f=w.data[c+3],p=(e*a+n)*4,w.data[p+0]=s,w.data[p+1]=l,w.data[p+2]=u,w.data[p+3]=f;for(a=0;a<t;a+=1)for(m=Math.floor(C),o=0;o<g;o+=1){for(n=0;n<m+1;n+=1)c=(e*a+n)*4,s=w.data[c+0],l=w.data[c+1],u=w.data[c+2],f=w.data[c+3],p=(e*a+m*2-n-1)*4,w.data[p+0]=s,w.data[p+1]=l,w.data[p+2]=u,w.data[p+3]=f;m*=2}f_(w,r,{polarRotation:0})}};Mu.Kaleidoscope=c_;Ts.Factory.addGetterSetter(cg.Node,"kaleidoscopePower",2,hg.getNumberValidator(),Ts.Factory.afterSetFilter);Ts.Factory.addGetterSetter(cg.Node,"kaleidoscopeAngle",0,hg.getNumberValidator(),Ts.Factory.afterSetFilter);var Ou={};Object.defineProperty(Ou,"__esModule",{value:!0});Ou.Mask=void 0;var Ih=ft,h_=nr,d_=Ye;function ts(r,e,t){var n=(t*r.width+e)*4,a=[];return a.push(r.data[n++],r.data[n++],r.data[n++],r.data[n++]),a}function ji(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function v_(r){for(var e=[0,0,0],t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function g_(r,e){var t=ts(r,0,0),n=ts(r,r.width-1,0),a=ts(r,0,r.height-1),i=ts(r,r.width-1,r.height-1),o=e||10;if(ji(t,n)<o&&ji(n,i)<o&&ji(i,a)<o&&ji(a,t)<o){for(var s=v_([n,t,i,a]),l=[],u=0;u<r.width*r.height;u++){var f=ji(s,[r.data[u*4],r.data[u*4+1],r.data[u*4+2]]);l[u]=f<o?0:255}return l}}function p_(r,e){for(var t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function y_(r,e,t){for(var n=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var l=0;l<e;l++){for(var u=s*e+l,f=0,c=0;c<a;c++)for(var p=0;p<a;p++){var g=s+c-i,d=l+p-i;if(g>=0&&g<t&&d>=0&&d<e){var b=g*e+d,x=n[c*a+p];f+=r[b]*x}}o[u]=f===255*8?255:0}return o}function m_(r,e,t){for(var n=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var l=0;l<e;l++){for(var u=s*e+l,f=0,c=0;c<a;c++)for(var p=0;p<a;p++){var g=s+c-i,d=l+p-i;if(g>=0&&g<t&&d>=0&&d<e){var b=g*e+d,x=n[c*a+p];f+=r[b]*x}}o[u]=f>=255*4?255:0}return o}function b_(r,e,t){for(var n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var l=0;l<e;l++){for(var u=s*e+l,f=0,c=0;c<a;c++)for(var p=0;p<a;p++){var g=s+c-i,d=l+p-i;if(g>=0&&g<t&&d>=0&&d<e){var b=g*e+d,x=n[c*a+p];f+=r[b]*x}}o[u]=f}return o}var w_=function(r){var e=this.threshold(),t=g_(r,e);return t&&(t=y_(t,r.width,r.height),t=m_(t,r.width,r.height),t=b_(t,r.width,r.height),p_(r,t)),r};Ou.Mask=w_;Ih.Factory.addGetterSetter(h_.Node,"threshold",0,d_.getNumberValidator(),Ih.Factory.afterSetFilter);var Lu={};Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Noise=void 0;var Rh=ft,x_=nr,S_=Ye,C_=function(r){var e=this.noise()*255,t=r.data,n=t.length,a=e/2,i;for(i=0;i<n;i+=4)t[i+0]+=a-2*a*Math.random(),t[i+1]+=a-2*a*Math.random(),t[i+2]+=a-2*a*Math.random()};Lu.Noise=C_;Rh.Factory.addGetterSetter(x_.Node,"noise",.2,S_.getNumberValidator(),Rh.Factory.afterSetFilter);var Nu={};Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Pixelate=void 0;var Fh=ft,__=bt,E_=nr,T_=Ye,P_=function(r){var e=Math.ceil(this.pixelSize()),t=r.width,n=r.height,a,i,o,s,l,u,f,c=Math.ceil(t/e),p=Math.ceil(n/e),g,d,b,x,w,C,m,S=r.data;if(e<=0){__.Util.error("pixelSize value can not be <= 0");return}for(w=0;w<c;w+=1)for(C=0;C<p;C+=1){for(s=0,l=0,u=0,f=0,g=w*e,d=g+e,b=C*e,x=b+e,m=0,a=g;a<d;a+=1)if(!(a>=t))for(i=b;i<x;i+=1)i>=n||(o=(t*i+a)*4,s+=S[o+0],l+=S[o+1],u+=S[o+2],f+=S[o+3],m+=1);for(s=s/m,l=l/m,u=u/m,f=f/m,a=g;a<d;a+=1)if(!(a>=t))for(i=b;i<x;i+=1)i>=n||(o=(t*i+a)*4,S[o+0]=s,S[o+1]=l,S[o+2]=u,S[o+3]=f)}};Nu.Pixelate=P_;Fh.Factory.addGetterSetter(E_.Node,"pixelSize",8,T_.getNumberValidator(),Fh.Factory.afterSetFilter);var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.Posterize=void 0;var Bh=ft,k_=nr,A_=Ye,D_=function(r){var e=Math.round(this.levels()*254)+1,t=r.data,n=t.length,a=255/e,i;for(i=0;i<n;i+=1)t[i]=Math.floor(t[i]/a)*a};Iu.Posterize=D_;Bh.Factory.addGetterSetter(k_.Node,"levels",.5,A_.getNumberValidator(),Bh.Factory.afterSetFilter);var Ru={};Object.defineProperty(Ru,"__esModule",{value:!0});Ru.RGB=void 0;var Ps=ft,Rf=nr,M_=Ye,O_=function(r){var e=r.data,t=e.length,n=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<t;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*n,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};Ru.RGB=O_;Ps.Factory.addGetterSetter(Rf.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Ps.Factory.addGetterSetter(Rf.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Ps.Factory.addGetterSetter(Rf.Node,"blue",0,M_.RGBComponent,Ps.Factory.afterSetFilter);var Fu={};Object.defineProperty(Fu,"__esModule",{value:!0});Fu.RGBA=void 0;var yo=ft,Bu=nr,L_=Ye,N_=function(r){var e=r.data,t=e.length,n=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<t;s+=4)l=1-o,e[s]=n*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};Fu.RGBA=N_;yo.Factory.addGetterSetter(Bu.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});yo.Factory.addGetterSetter(Bu.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});yo.Factory.addGetterSetter(Bu.Node,"blue",0,L_.RGBComponent,yo.Factory.afterSetFilter);yo.Factory.addGetterSetter(Bu.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});var zu={};Object.defineProperty(zu,"__esModule",{value:!0});zu.Sepia=void 0;var I_=function(r){var e=r.data,t=e.length,n,a,i,o;for(n=0;n<t;n+=4)a=e[n+0],i=e[n+1],o=e[n+2],e[n+0]=Math.min(255,a*.393+i*.769+o*.189),e[n+1]=Math.min(255,a*.349+i*.686+o*.168),e[n+2]=Math.min(255,a*.272+i*.534+o*.131)};zu.Sepia=I_;var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Solarize=void 0;var R_=function(r){var e=r.data,t=r.width,n=r.height,a=t*4,i=n;do{var o=(i-1)*a,s=t;do{var l=o+(s-1)*4,u=e[l],f=e[l+1],c=e[l+2];u>127&&(u=255-u),f>127&&(f=255-f),c>127&&(c=255-c),e[l]=u,e[l+1]=f,e[l+2]=c}while(--s)}while(--i)};Gu.Solarize=R_;var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.Threshold=void 0;var zh=ft,F_=nr,B_=Ye,z_=function(r){var e=this.threshold()*255,t=r.data,n=t.length,a;for(a=0;a<n;a+=1)t[a]=t[a]<e?0:255};Vu.Threshold=z_;zh.Factory.addGetterSetter(F_.Node,"threshold",.5,B_.getNumberValidator(),zh.Factory.afterSetFilter);Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Konva=void 0;var Gh=js,G_=ru,V_=iu,H_=su,$_=uu,U_=lu,Vh=yi,q_=ko,W_=Ao,K_=Do,j_=du,Y_=vu,X_=gu,Q_=pu,Z_=za,J_=yu,eE=mu,tE=bu,rE=xu,nE=Su,aE=Cu,iE=_u,oE=Tu,sE=Pu,uE=ku,lE=Au,fE=Du,cE=Mu,hE=Ou,dE=Lu,vE=Nu,gE=Iu,pE=Ru,yE=Fu,mE=zu,bE=Gu,wE=Vu;Ks.Konva=Gh.Konva.Util._assign(Gh.Konva,{Arc:G_.Arc,Arrow:V_.Arrow,Circle:H_.Circle,Ellipse:$_.Ellipse,Image:U_.Image,Label:Vh.Label,Tag:Vh.Tag,Line:q_.Line,Path:W_.Path,Rect:K_.Rect,RegularPolygon:j_.RegularPolygon,Ring:Y_.Ring,Sprite:X_.Sprite,Star:Q_.Star,Text:Z_.Text,TextPath:J_.TextPath,Transformer:eE.Transformer,Wedge:tE.Wedge,Filters:{Blur:rE.Blur,Brighten:nE.Brighten,Contrast:aE.Contrast,Emboss:iE.Emboss,Enhance:oE.Enhance,Grayscale:sE.Grayscale,HSL:uE.HSL,HSV:lE.HSV,Invert:fE.Invert,Kaleidoscope:cE.Kaleidoscope,Mask:hE.Mask,Noise:dE.Noise,Pixelate:vE.Pixelate,Posterize:gE.Posterize,RGB:pE.RGB,RGBA:yE.RGBA,Sepia:mE.Sepia,Solarize:bE.Solarize,Threshold:wE.Threshold}});(function(r,e){var t=Ks.Konva;t._injectGlobal(t),e.default=t,r.exports=e.default})(Wl,Wl.exports);var xE=Wl.exports,dg={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={621:(i,o,s)=>{function l(T,M){(M==null||M>T.length)&&(M=T.length);for(var L=0,F=new Array(M);L<M;L++)F[L]=T[L];return F}function u(T){for(var M="",L=0;L<T.length;L++)M+=T[L],L!==T.length-1&&(M+=" ");return M}function f(T,M,L){L?T.setAttribute(M,""):T.removeAttribute(M)}function c(T,M,L){customElements.get(T)===void 0&&customElements.define(T,M,{extends:L})}s.r(o),s.d(o,{contextMenus:()=>K});var p="cy-context-menus-divider",g={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function d(T){return(d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M})(T)}function b(T,M){var L;if(typeof Symbol=="undefined"||T[Symbol.iterator]==null){if(Array.isArray(T)||(L=function(oe,fe){if(oe){if(typeof oe=="string")return x(oe,fe);var ce=Object.prototype.toString.call(oe).slice(8,-1);return ce==="Object"&&oe.constructor&&(ce=oe.constructor.name),ce==="Map"||ce==="Set"?Array.from(oe):ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce)?x(oe,fe):void 0}}(T))||M&&T&&typeof T.length=="number"){L&&(T=L);var F=0,W=function(){};return{s:W,n:function(){return F>=T.length?{done:!0}:{done:!1,value:T[F++]}},e:function(oe){throw oe},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z,ee=!0,Q=!1;return{s:function(){L=T[Symbol.iterator]()},n:function(){var oe=L.next();return ee=oe.done,oe},e:function(oe){Q=!0,Z=oe},f:function(){try{ee||L.return==null||L.return()}finally{if(Q)throw Z}}}}function x(T,M){(M==null||M>T.length)&&(M=T.length);for(var L=0,F=new Array(M);L<M;L++)F[L]=T[L];return F}function w(T,M){if(!(T instanceof M))throw new TypeError("Cannot call a class as a function")}function C(T,M){for(var L=0;L<M.length;L++){var F=M[L];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(T,F.key,F)}}function m(T,M,L){return M&&C(T.prototype,M),L&&C(T,L),T}function S(T,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");T.prototype=Object.create(M&&M.prototype,{constructor:{value:T,writable:!0,configurable:!0}}),M&&I(T,M)}function P(T){var M=O();return function(){var L,F=H(T);if(M){var W=H(this).constructor;L=Reflect.construct(F,arguments,W)}else L=F.apply(this,arguments);return D(this,L)}}function D(T,M){return!M||d(M)!=="object"&&typeof M!="function"?v(T):M}function v(T){if(T===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T}function E(T,M,L){return(E=typeof Reflect!="undefined"&&Reflect.get?Reflect.get:function(F,W,Z){var ee=function(oe,fe){for(;!Object.prototype.hasOwnProperty.call(oe,fe)&&(oe=H(oe))!==null;);return oe}(F,W);if(ee){var Q=Object.getOwnPropertyDescriptor(ee,W);return Q.get?Q.get.call(Z):Q.value}})(T,M,L||T)}function k(T){var M=typeof Map=="function"?new Map:void 0;return(k=function(L){if(L===null||(F=L,Function.toString.call(F).indexOf("[native code]")===-1))return L;var F;if(typeof L!="function")throw new TypeError("Super expression must either be null or a function");if(M!==void 0){if(M.has(L))return M.get(L);M.set(L,W)}function W(){return N(L,arguments,H(this).constructor)}return W.prototype=Object.create(L.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),I(W,L)})(T)}function N(T,M,L){return(N=O()?Reflect.construct:function(F,W,Z){var ee=[null];ee.push.apply(ee,W);var Q=new(Function.bind.apply(F,ee));return Z&&I(Q,Z.prototype),Q}).apply(null,arguments)}function O(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(T,M){return(I=Object.setPrototypeOf||function(L,F){return L.__proto__=F,L})(T,M)}function H(T){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)})(T)}function G(T){T.preventDefault(),T.stopPropagation()}var Y=function(T){S(L,T);var M=P(L);function L(F,W,Z){var ee,Q,oe,fe,ce,Se,De,Le,ke,me;w(this,L),E((Q=v(me=M.call(this)),H(L.prototype)),"setAttribute",Q).call(Q,"id",F.id);var _e=me._getMenuItemClassStr(Z.cxtMenuItemClasses,F.hasTrailingDivider);if(E((oe=v(me),H(L.prototype)),"setAttribute",oe).call(oe,"class",_e),E((fe=v(me),H(L.prototype)),"setAttribute",fe).call(fe,"title",(ee=F.tooltipText)!==null&&ee!==void 0?ee:""),F.disabled&&f(v(me),"disabled",!0),F.image){var we=document.createElement("img");we.src=F.image.src,we.width=F.image.width,we.height=F.image.height,we.style.position="absolute",we.style.top=F.image.y+"px",we.style.left=F.image.x+"px",E((ce=v(me),H(L.prototype)),"appendChild",ce).call(ce,we)}if(me.innerHTML+=F.content,me.onMenuItemClick=W,me.data={},me.clickFns=[],me.selector=F.selector,me.hasTrailingDivider=F.hasTrailingDivider,me.show=F.show===void 0||F.show,me.coreAsWell=F.coreAsWell||!1,me.scratchpad=Z,F.onClickFunction===void 0&&F.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return me.onClickFunction=F.onClickFunction,F.submenu instanceof Array&&me._createSubmenu(F.submenu),E((Se=v(me),H(L.prototype)),"addEventListener",Se).call(Se,"mousedown",G),E((De=v(me),H(L.prototype)),"addEventListener",De).call(De,"mouseup",G),E((Le=v(me),H(L.prototype)),"addEventListener",Le).call(Le,"touchstart",G),E((ke=v(me),H(L.prototype)),"addEventListener",ke).call(ke,"touchend",G),me}return m(L,[{key:"bindOnClickFunction",value:function(F){this.clickFns.push(F),E(H(L.prototype),"addEventListener",this).call(this,"click",F)}},{key:"unbindOnClickFunctions",value:function(){var F,W=b(this.clickFns);try{for(W.s();!(F=W.n()).done;){var Z=F.value;E(H(L.prototype),"removeEventListener",this).call(this,"click",Z)}}catch(ee){W.e(ee)}finally{W.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(F){this.hasTrailingDivider=F}},{key:"hasSubmenu",value:function(){return this.submenu instanceof j}},{key:"appendSubmenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(F,W)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(F){var W=this.getBoundingClientRect(),Z=function(ce){ce.style.opacity="0",ce.style.display="block";var Se=ce.getBoundingClientRect();return ce.style.opacity="1",ce.style.display="none",Se}(this.submenu),ee=W.right+Z.width>window.innerWidth,Q=W.top+Z.height>window.innerHeight;ee||Q?ee&&!Q?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):ee&&Q?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var oe=Array.from(this.submenu.children).filter(function(ce){if(ce instanceof L)return ce.isVisible()}),fe=oe.length;oe.forEach(function(ce,Se){ce instanceof L&&(Se<fe-1&&ce.getHasTrailingDivider()?ce.classList.add(p):ce.getHasTrailingDivider()&&ce.classList.remove(p))})}},{key:"_onMouseLeave",value:function(F){var W,Z,ee,Q,oe;W={x:F.clientX,y:F.clientY},Z=this.submenu,Q=W.y,(ee=W.x)>=(oe=Z.getBoundingClientRect()).left&&ee<=oe.right&&Q>=oe.top&&Q<=oe.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new j(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var W,Z=b(F);try{for(Z.s();!(W=Z.n()).done;){var ee=W.value,Q=new L(ee,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(Q)}}catch(oe){Z.e(oe)}finally{Z.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(F,W){return W?F+" "+p:F}}],[{key:"define",value:function(){c("ctx-menu-item",L,"button")}}]),L}(k(HTMLButtonElement)),j=function(T){S(L,T);var M=P(L);function L(F,W){var Z,ee;return w(this,L),E((Z=v(ee=M.call(this)),H(L.prototype)),"setAttribute",Z).call(Z,"class",W.cxtMenuClasses),ee.style.position="absolute",ee.onMenuItemClick=F,ee.scratchpad=W,ee}return m(L,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var F,W=b(this.children);try{for(W.s();!(F=W.n()).done;){var Z=F.value;Z instanceof HTMLElement?Z.style.display="none":console.warn("".concat(Z," is not a HTMLElement"))}}catch(ee){W.e(ee)}finally{W.f()}}},{key:"hideSubmenus",value:function(){var F,W=b(this.children);try{for(W.s();!(F=W.n()).done;){var Z=F.value;Z instanceof Y&&Z.submenu&&Z.submenu.hide()}}catch(ee){W.e(ee)}finally{W.f()}}},{key:"appendMenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(W!==void 0){if(W.parentNode!==this)throw new Error("The item with id='".concat(W.id,"' is not a child of the context menu"));this.insertBefore(F,W)}else this.appendChild(F);F.isClickable()&&this._performBindings(F)}},{key:"moveBefore",value:function(F,W){if(F.parentNode!==this)throw new Error("The item with id='".concat(F.id,"' is not a child of context menu"));if(W.parentNode!==this)throw new Error("The item with id='".concat(W.id,"' is not a child of context menu"));this.removeChild(F),this.insertBefore(F,W)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var F=this.lastChild;F instanceof Y?this._removeImmediateMenuItem(F):(console.warn("Found non menu item in the context menu: ",F),this.removeChild(F))}}},{key:"_removeImmediateMenuItem",value:function(F){if(!this._detachImmediateMenuItem(F))throw new Error("menu item(id=".concat(F.id,") is not in the context menu"));F.detachSubmenu(),F.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(F){if(F.parentNode===this){if(this.removeChild(F),this.children.length<=0){var W=this.parentNode;W instanceof Y&&W.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(F){var W=this._bindOnClick(F.onClickFunction);F.bindOnClickFunction(W),F.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(F){var W=this;return function(){var Z=W.scratchpad.currentCyEvent;F(Z)}}}],[{key:"define",value:function(){c("menu-item-list",L,"div")}}]),L}(k(HTMLDivElement)),q=function(T){S(L,T);var M=P(L);function L(F,W){var Z;return w(this,L),(Z=M.call(this,F,W)).onMenuItemClick=function(ee){G(ee),Z.hide(),F()},Z}return m(L,[{key:"removeMenuItem",value:function(F){var W=F.parentElement;W instanceof j&&this.contains(W)&&W._removeImmediateMenuItem(F)}},{key:"appendMenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(F.id),E(H(L.prototype),"appendMenuItem",this).call(this,F,W)}},{key:"insertMenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=W.before,ee=W.parent;if(this.ensureDoesntContain(F.id),Z!==void 0){if(!this.contains(Z))throw new Error("before(id=".concat(Z.id,") is not in the context menu"));var Q=Z.parentNode;if(!(Q instanceof j))throw new Error("Parent of before(id=".concat(Z.id,") is not a submenu"));Q.appendMenuItem(F,Z)}else if(ee!==void 0){if(!this.contains(ee))throw new Error("parent(id=".concat(ee.id,") is not a descendant of the context menu"));ee.appendSubmenuItem(F)}else this.appendMenuItem(F)}},{key:"moveBefore",value:function(F,W){var Z=F.parentElement;if(!this.contains(Z))throw new Error("parent(id=".concat(Z.id,") is not in the contex menu"));if(!this.contains(W))throw new Error("before(id=".concat(W.id,") is not in the context menu"));Z.removeChild(F),this.insertMenuItem(F,{before:W})}},{key:"moveToSubmenu",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,ee=F.parentElement;if(!(ee instanceof j))throw new Error("current parent(id=".concat(ee.id,") is not a submenu"));if(!this.contains(ee))throw new Error("parent of the menu item(id=".concat(ee.id,") is not in the context menu"));if(W!==null){if(!this.contains(W))throw new Error("parent(id=".concat(W.id,") is not in the context menu"));ee._detachImmediateMenuItem(F),W.appendSubmenuItem(F)}else Z!==null&&(F.selector=Z.selector,F.coreAsWell=Z.coreAsWell),ee._detachImmediateMenuItem(F),this.appendMenuItem(F)}},{key:"ensureDoesntContain",value:function(F){var W=document.getElementById(F);if(W!==void 0&&this.contains(W))throw new Error("There is already an element with id=".concat(F," in the context menu"))}}],[{key:"define",value:function(){c("ctx-menu",L,"div")}}]),L}(j);function X(T,M){(M==null||M>T.length)&&(M=T.length);for(var L=0,F=new Array(M);L<M;L++)F[L]=T[L];return F}function K(T){var M=this;M.scratch("cycontextmenus")||M.scratch("cycontextmenus",{});var L,F,W=function(_e){return M.scratch("cycontextmenus")[_e]},Z=function(_e,we){return M.scratch("cycontextmenus")[_e]=we},ee=W("options"),Q=W("cxtMenu"),oe=function(_e){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,xe=ce(_e);if(we!==void 0){var Ne=De(we);Q.insertMenuItem(xe,{parent:Ne})}else Q.insertMenuItem(xe)},fe=function(_e){for(var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,xe=0;xe<_e.length;xe++)oe(_e[xe],we)},ce=function(_e){var we=M.scratch("cycontextmenus");return new Y(_e,Q.onMenuItemClick,we)},Se=function(){W("active")&&(Q.removeAllMenuItems(),M.off("tapstart",W("eventCyTapStart")),M.off(ee.evtType,W("onCxttap")),M.off("viewport",W("onViewport")),document.removeEventListener("mouseup",W("hideOnNonCyClick")),Q.parentNode.removeChild(Q),Q=void 0,Z("cxtMenu",void 0),Z("active",!1),Z("anyVisibleChild",!1),Z("onCxttap",void 0),Z("onViewport",void 0),Z("hideOnNonCyClick",void 0))},De=function(_e){var we=document.getElementById(_e);if(we instanceof Y)return we;throw new Error("The item with id=".concat(_e," is not a menu item"))};if(T!=="get"){Y.define(),j.define(),q.define(),ee=function(_e,we){var xe={};for(var Ne in _e)xe[Ne]=_e[Ne];for(var qe in we)xe[qe]instanceof Array?xe[qe]=xe[qe].concat(we[qe]):xe[qe]=we[qe];return xe}(g,T),Z("options",ee),W("active")&&Se(),Z("active",!0),Z("submenuIndicatorGen",function(_e){var we=document.createElement("img");return we.src=_e.src,we.width=_e.width,we.height=_e.height,we.classList.add("cy-context-menus-submenu-indicator"),we}.bind(void 0,ee.submenuIndicator));var Le=u(ee.contextMenuClasses);Z("cxtMenuClasses",Le);var ke=M.scratch("cycontextmenus");Q=new q(function(){return Z("cxtMenuPosition",void 0)},ke),Z("cxtMenu",Q),M.container().appendChild(Q),Z("cxtMenuItemClasses",u(ee.menuItemClasses));var me=ee.menuItems;fe(me),F=function(_e){Z("currentCyEvent",_e),function(Re){var ge,z=M.container(),V=W("cxtMenuPosition"),ne=Re.position||Re.cyPosition;if(V!=ne){Q.hideMenuItems(),Z("anyVisibleChild",!1),Z("cxtMenuPosition",ne);var te={top:(ge=z.getBoundingClientRect()).top,left:ge.left},ie=Re.renderedPosition||Re.cyRenderedPosition,ve=getComputedStyle(z)["border-width"],ue=parseInt(ve.replace("px",""))||0;ue>0&&(te.top+=ue,te.left+=ue);var Ce=z.clientHeight,Fe=z.clientWidth,ze=Ce/2,Oe=Fe/2;ie.y>ze&&ie.x<=Oe?(Q.style.left=ie.x+"px",Q.style.bottom=Ce-ie.y+"px",Q.style.right="auto",Q.style.top="auto"):ie.y>ze&&ie.x>Oe?(Q.style.right=Fe-ie.x+"px",Q.style.bottom=Ce-ie.y+"px",Q.style.left="auto",Q.style.top="auto"):ie.y<=ze&&ie.x<=Oe?(Q.style.left=ie.x+"px",Q.style.top=ie.y+"px",Q.style.right="auto",Q.style.bottom="auto"):(Q.style.right=Fe-ie.x+"px",Q.style.top=ie.y+"px",Q.style.left="auto",Q.style.bottom="auto")}}(_e);var we,xe=_e.target||_e.cyTarget,Ne=function(Re,ge){var z;if(typeof Symbol=="undefined"||Re[Symbol.iterator]==null){if(Array.isArray(Re)||(z=function(ue,Ce){if(ue){if(typeof ue=="string")return X(ue,Ce);var Fe=Object.prototype.toString.call(ue).slice(8,-1);return Fe==="Object"&&ue.constructor&&(Fe=ue.constructor.name),Fe==="Map"||Fe==="Set"?Array.from(ue):Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe)?X(ue,Ce):void 0}}(Re))||ge&&Re&&typeof Re.length=="number"){z&&(Re=z);var V=0,ne=function(){};return{s:ne,n:function(){return V>=Re.length?{done:!0}:{done:!1,value:Re[V++]}},e:function(ue){throw ue},f:ne}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ie=!0,ve=!1;return{s:function(){z=Re[Symbol.iterator]()},n:function(){var ue=z.next();return ie=ue.done,ue},e:function(ue){ve=!0,te=ue},f:function(){try{ie||z.return==null||z.return()}finally{if(ve)throw te}}}}(Q.children);try{for(Ne.s();!(we=Ne.n()).done;){var qe=we.value;qe instanceof Y&&(xe===M?qe.coreAsWell:xe.is(qe.selector))&&qe.show&&(Q.display(),Z("anyVisibleChild",!0),qe.display())}}catch(Re){Ne.e(Re)}finally{Ne.f()}var at=Array.from(Q.children).filter(function(Re){if(Re instanceof Y)return Re.isVisible()}),We=at.length;at.forEach(function(Re,ge){Re instanceof Y&&(ge<We-1&&Re.getHasTrailingDivider()?Re.classList.add(p):Re.getHasTrailingDivider()&&Re.classList.remove(p))}),!W("anyVisibleChild")&&!function(Re){return Re.offsetWidth<=0&&Re.offsetHeight<=0||Re.style&&Re.style.display||getComputedStyle(Re).display}(Q)&&Q.hide()},M.on(ee.evtType,F),Z("onCxttap",F),function(){var _e=function(xe){if(Q.contains(xe.originalEvent.target))return!1;Q.hide(),Z("cxtMenuPosition",void 0),Z("currentCyEvent",void 0)};M.on("tapstart",_e),Z("eventCyTapStart",_e);var we=function(){Q.hide()};M.on("viewport",we),Z("onViewport",we)}(),L=function(_e){M.container().contains(_e.target)||Q.contains(_e.target)||(Q.hide(),Z("cxtMenuPosition",void 0))},document.addEventListener("mouseup",L),Z("hideOnNonCyClick",L),function(){var _e,we=function(xe,Ne){var qe;if(typeof Symbol=="undefined"||xe[Symbol.iterator]==null){if(Array.isArray(xe)||(qe=function(V,ne){if(V){if(typeof V=="string")return l(V,ne);var te=Object.prototype.toString.call(V).slice(8,-1);return te==="Object"&&V.constructor&&(te=V.constructor.name),te==="Map"||te==="Set"?Array.from(V):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?l(V,ne):void 0}}(xe))||Ne&&xe&&typeof xe.length=="number"){qe&&(xe=qe);var at=0,We=function(){};return{s:We,n:function(){return at>=xe.length?{done:!0}:{done:!1,value:xe[at++]}},e:function(V){throw V},f:We}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Re,ge=!0,z=!1;return{s:function(){qe=xe[Symbol.iterator]()},n:function(){var V=qe.next();return ge=V.done,V},e:function(V){z=!0,Re=V},f:function(){try{ge||qe.return==null||qe.return()}finally{if(z)throw Re}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(we.s();!(_e=we.n()).done;)_e.value.addEventListener("contextmenu",function(xe){return xe.preventDefault()})}catch(xe){we.e(xe)}finally{we.f()}}()}return function(_e){return{isActive:function(){return W("active")},appendMenuItem:function(we){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return oe(we,xe),_e},appendMenuItems:function(we){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return fe(we,xe),_e},removeMenuItem:function(we){var xe=De(we);return Q.removeMenuItem(xe),_e},setTrailingDivider:function(we,xe){var Ne=De(we);return Ne.setHasTrailingDivider(xe),xe?Ne.classList.add(p):Ne.classList.remove(p),_e},insertBeforeMenuItem:function(we,xe){var Ne=ce(we),qe=De(xe);return Q.insertMenuItem(Ne,{before:qe}),_e},moveToSubmenu:function(we){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Ne=De(we);if(xe===null)Q.moveToSubmenu(Ne);else if(typeof xe=="string"){var qe=De(xe.toString());Q.moveToSubmenu(Ne,qe)}else xe.coreAsWell!==void 0||xe.selector!==void 0?Q.moveToSubmenu(Ne,null,xe):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return _e},moveBeforeOtherMenuItem:function(we,xe){var Ne=De(we),qe=De(xe);return Q.moveBefore(Ne,qe),_e},disableMenuItem:function(we){return De(we).disable(),_e},enableMenuItem:function(we){return De(we).enable(),_e},hideMenuItem:function(we){return De(we).hide(),_e},showMenuItem:function(we){return De(we).display(),_e},destroy:function(){return Se(),_e}}}(this)}},579:(i,o,s)=>{var l=s(621).contextMenus,u=function(f){f&&f("core","contextMenus",l)};typeof cytoscape!="undefined"&&u(cytoscape),i.exports=u}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})})(dg);var SE=Hx(dg.exports);const CE={class:"q-pa-md"},_E={class:""},EE=Ar("div",{class:"text-h6"},"Selected Node",-1),TE=["innerHTML"],PE=Ar("div",{class:"text-h6"},"Ancestor Nodes",-1),kE={class:"text-h6"},AE=["innerHTML"],DE={class:"text-caption"},ME=["innerHTML"],OE=["innerHTML"],LE=["innerHTML"],FE=Object.assign({name:"IndexPage"},{__name:"GraphComponent",emits:["nodeSelected"],setup(r,{expose:e,emit:t}){window.jQuery=wl,window.$=wl,En.use(SE),$x(En),Ux(En,wl,xE);const n=ea([]),a=t,i=ea(50),o=ea("nodes"),s=ea(null),l=ea(null),u=ea([]),f=ea([]);var c=null;class p{constructor(v,E,k,N,O,I,H,G,Y){this.zoomLevels=["test","summary","title"],this.currentZoomLevel=0,this.graphWithStyle=v,this.graph=v.graph,this.nodeStyles=v.style,this.elements=this.graph,this.display_main_text=G,this.zoomLevelsChanges=O,this.fontSizeSection=I,this.fontsSize=H,this.divsToTypeset=[],this.styleAlreadySet=!1,this.hasMathML=N,this.move_nodes=k,this.graph_fileName=Y,this.selectedNode=null,this.layout_name=E,c=this,this.max_display_order=0,this.current_display_order=c.max_display_order,this.titleNamesList=["section","sectionTitle","subsection","subsectionTitle"],c.hasMathML&&c.computeNodeSizes(!1),c.cyInstance=En({container:s.value,layout:{name:E},elements:c.elements,wheelSensitivity:.2,autoungrabify:!k}),c.cyInstance.nodeHtmlLabel([{query:".l0",valign:"center",halign:"left",valignBox:"center",halignBox:"right",tpl:function(X){let K=c.nodeStyles[X.name].nodeStyle["node-width"];return K||(K=500),X.name=="sectionTitle"?c.getLabelFromText(X.text,X.id,K,c.fontSizeSection.section):X.name=="subsectionTitle"?c.getLabelFromText(X.text,X.id,K,c.fontSizeSection.subsection):c.currentZoomLevel==1&&X.hasSummary?c.getLabelFromText(X.summary,X.id,K,c.fontsSize[1]):c.currentZoomLevel>=1&&X.hasTitle?c.getLabelFromText(X.title,X.id,K,c.fontsSize[2],!0):!c.display_main_text&&X.hasSummary?c.getLabelFromText(X.summary,X.id,K,c.fontsSize[1]):!c.display_main_text&&X.hasTitle?c.getLabelFromText(X.title,X.id,K,c.fontsSize[2],!0):c.getLabelFromText(X.text,X.id,K,c.fontsSize[0])}},{query:".l1",valign:"center",halign:"left",valignBox:"top",halignBox:"left",tpl:function(X){return display_summary&&X.hasOwnProperty("summary")?getLabelFromText(X.summary,X.id,c.nodeStyles[X.name].nodeStyle["node-width"]):getLabelFromText(X.text,X.id,c.nodeStyles[X.name].nodeStyle["node-width"])}},{query:".l2",valign:"center",halign:"center",valignBox:"center",halignBox:"center",tpl:function(X){return c.styleAlreadySet=!0,"prout"}}]),setTimeout(c.setStyle,500),c.move_nodes||c.cyInstance.filter("node").panify(),c.cyInstance.on("mouseover","node",function(X){N||(c.divsToTypeset=c.divsToTypeset.concat(getDivsToTypeset(X.target)))}),c.cyInstance.filter("node").addClass("highlight"),c.cyNodes=c.cyInstance.filter("node"),c.highlighted_items=[];for(var j=0;j<c.cyNodes.length;j++)c.highlighted_items.push(c.cyNodes[j]);c.cyInstance.on("click","node",function(X){c.selectNode(X.target)}),c.cyInstance.on("zoom",function(X){var K=!1;if(console.log(c.currentZoomLevel,c.styleAlreadySet,c.cyInstance.zoom()),c.styleAlreadySet){c.currentZoomLevel==0&&c.cyInstance.zoom()<c.zoomLevelsChanges[0]&&(c.currentZoomLevel=1,K=!0),c.currentZoomLevel==2&&c.cyInstance.zoom()>c.zoomLevelsChanges[1]&&(c.currentZoomLevel=1,K=!0),c.currentZoomLevel==1&&(c.cyInstance.zoom()>c.zoomLevelsChanges[0]&&(c.currentZoomLevel=0,K=!0),c.cyInstance.zoom()<c.zoomLevelsChanges[1]&&(c.currentZoomLevel=2,K=!0));let M=c.cyInstance.nodes();if(K==!0){console.log("zoomLevel",c.currentZoomLevel,c.cyInstance.zoom(),c.styleAlreadySet);for(var T=0;T<M.length;T++)M[T].addClass(".highlight"),M[T].removeClass(".highlight");N||(c.divsToTypeset=["cy"]),c.updateStyle()}}});for(var j=0;j<c.graph.length;j++){var q=c.graph[j];console.log(q),q.group=="nodes"&&(c.max_display_order=Math.max(c.max_display_order,q.data.display_order))}c.current_display_order=c.max_display_order}computeNodeSizes(v){var E=[],k=[];console.log(c);for(var N=0;N<c.graph.length;N++){var O=c.graph[N];if(console.log(O),O.group=="nodes"){O.data.height=0,O.data.width=0,console.log("SIZE:",c.nodeStyles[O.data.name].nodeStyle["node-width"]);let Y=c.nodeStyles[O.data.name].nodeStyle["node-width"];switch(Y||(Y=500),O.data.name){case"sectionTitle":var I=document.createElement("div");I.style.width=Y.toString()+"px",I.style.fontSize=c.fontSizeSection.section.toString()+"px",console.log("fontsize",c.fontSizeSection.section.toString(),O.data.id),I.innerHTML=O.data.text,l.value.appendChild(I),E.push(O),k.push(I),console.log("height",I.offsetHeight,I.getBoundingClientRect().height),console.log(O.data.height);break;case"subsectionTitle":var I=document.createElement("div");I.style.width=Y.toString()+"px",I.style.fontSize=c.fontSizeSection.subsection.toString()+"px",I.innerHTML=O.data.text,l.value.appendChild(I),E.push(O),k.push(I),console.log("height",I.offsetHeight);break;default:if(O.data.height=0,O.data.width=0,console.log(O.data.id,O.data.hasSummary,O.data.hasTitle,!O.data.hasSummary&&!O.data.hasTitle),c.display_main_text||!O.data.hasSummary&&!O.data.hasTitle){var I=document.createElement("div");I.style.width=Y.toString()+"px",I.style.fontSize=c.fontsSize[0].toString()+"px",I.innerHTML=O.data.text,l.value.appendChild(I),E.push(O),k.push(I),console.log("BUGGG",c.display_main_text,O.data.hasSummary,O.data.hasTitle,O.data.id)}if(O.data.hasSummary){var H=document.createElement("div");H.style.width=Y.toString()+"px",H.style.fontSize=c.fontsSize[1].toString()+"px",H.style.border="2px solid black",H.innerHTML=O.data.summary,l.value.appendChild(H),E.push(O),k.push(H)}if(O.data.hasTitle){var G=document.createElement("div");G.style.width=Y.toString()+"px",G.style.fontSize=c.fontsSize[2].toString()+"px",G.innerHTML=O.data.title,l.value.appendChild(G),E.push(O),k.push(G)}}}}v&&(console.log("using MATHKAX!"),MathJax.typeset(k));for(var N=0;N<E.length;N++){var O=E[N],I=k[N];switch(O.data.name){case"sectionTitle":O.data.height=I.scrollHeight+100,O.data.width=I.scrollWidth+350,console.log(O.data.height);break;case"subsectionTitle":console.log("height",I.offsetHeight),O.data.height=I.scrollHeight+100,O.data.width=I.scrollWidth+80;break;default:O.data.height=Math.max(O.data.height,I.scrollHeight+50),O.data.width=Math.max(O.data.width,I.scrollWidth+80)}I.remove()}}async asyncSetStyle(){for(;typeof c.cyInstance=="undefined";)await sleep(100);c.setStyle()}setStyle(){console.log(c),console.log("cuurentZoom",c.currentZoomLevel);for(var v=[{selector:'edge[type="strong"]',style:{width:2,"target-arrow-shape":"triangle","line-color":"yellow","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"black blue","line-style":"dashed","line-dash-offset":500,"line-gradient-stop-positions":"0 100"}},{selector:'edge[type="strong"][visibility=0]',style:{display:"none",width:6,"target-arrow-shape":"triangle","line-color":"yellow","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"black blue","line-gradient-stop-positions":"0 100"}},{selector:'edge[type="strong"].highlight',style:{display:"element",width:15,"target-arrow-shape":"triangle","line-color":"black","target-arrow-color":"black","arrow-scale":2,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"red red","line-style":"solid","line-gradient-stop-positions":"0 100"}},{selector:'edge[type="weak"]',style:{display:"none",width:2,"target-arrow-shape":"triangle","line-color":"red","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"black blue","line-style":"dashed","line-gradient-stop-positions":"0 100"}},{selector:'edge[type="weak"].highlight',style:{display:"element",width:8,"target-arrow-shape":"triangle","line-color":"red","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"red red","line-style":"dashed","line-gradient-stop-positions":"0 100"}}],E=0;E<c.graph.length;E++)if(c.graph[E].group=="nodes"){""+c.graph[E].data.id;var k={selector:'node[id = "'+c.graph[E].data.id+'"]',style:{width:c.graph[E].data.width,height:c.graph[E].data.height}};Object.assign(k.style,c.nodeStyles[c.graph[E].data.name].nodeStyle),k.style.width=c.graph[E].data.width,k.style.height=c.graph[E].data.height,k.style["background-opacity"]=k.style["background-opacity"]/4,k.style["border-width"]=k.style["border-width"]/4,k.style["border-style"]="dashed",v.push(k);var N={selector:'node[id = "'+c.graph[E].data.id+'"].highlight',style:{width:c.graph[E].data.width,height:c.graph[E].data.height}};Object.assign(N.style,c.nodeStyles[c.graph[E].data.name].nodeStyle),N.style.width=c.graph[E].data.width,N.style.height=c.graph[E].data.height,v.push(N)}c.cyInstance.style().fromJson(v).update(),c.cyInstance.edgeEditing({undoable:!1,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!1}),c.cyInstance.style().update(),c.cyInstance.layout({name:c.layout_name}).run(),c.currentZoomLevel=0,c.styleAlreadySet=!0}getLabelFromText(v,E,k,N=20,O=!1){return O?String.raw`<div id= '`+"_graph_internal_"+E+String.raw`' style = "font-size:`+N.toString()+String.raw`px;width:`+k.toString()+String.raw`px;margin:30px;"><b>`+v+String.raw`</b></div>`:String.raw`<div id= '`+"_graph_internal_"+E+String.raw`' style = "font-size:`+N.toString()+String.raw`px;width:`+k.toString()+String.raw`px;margin:30px;">`+v+String.raw`</div>`}getCyNode(v){let E=c.cyInstance.nodes();for(var k=0;k<E.length;k++)if(E[k].id()==v)return E[k]}getDivsToTypeset(v){divName="_graph_internal_"+v.id();for(var E=[divName],k=v.children(),N=0;N<k.length;N++)E=E.concat(getDivsToTypeset(k[N]));return E}getGraphJSON(){for(var v=0;v<c.graph.length;v++)if(c.graph[v].group=="nodes"){let k=c.getCyNode(c.graph[v].data.id);c.graph[v].position=k.position()}else"cyedgebendeditingWeights"in c.graph[v].data&&c.graph[v].data.cyedgebendeditingWeights.length>0&&(c.graph[v].classes="edgebendediting-hasbendpoints"),"cyedgecontroleditingWeights"in c.graph[v].data&&c.graph[v].data.cyedgecontroleditingWeights.length>0&&(c.graph[v].classes="edgecontrolediting-hascontrolpoints");return{graph:c.graph,style:c.nodeStyles,full_text:c.graphWithStyle.full_text}}getAncestors(v,E,k){for(var N=0;N<E.length;N++)if(E[N]==v)return[E,k];E.push(v);for(var O=v.incomers('edge[type="strong"]'),N=0;N<O.size();N++){k.push(O[N]);var I=O[N].source();E.includes(I)||c.getAncestors(I,E,k)}return[E,k]}static sleep(v){return new Promise(E=>setTimeout(E,v))}selectNode(v,E=!1){let k=c.getCyNode(v.id());var N=v;let O=k.parent();a("nodeSelected",v.id());for(var I=0;I<c.highlighted_items.length;I++){if(c.highlighted_items[I].removeClass("highlight"),!c.hasMathML){let X="_graph_internal_"+c.highlighted_items[I].id();c.divsToTypeset.includes(X)||c.divsToTypeset.push(X)}E==!0&&c.cyInstance.center(k)}if(k==c.selectedNode){c.selectedNode=null,c.highlighted_items=[];for(var I=0;I<c.cyNodes.length;I++)c.highlighted_items.push(c.cyNodes[I])}else{var H=c.getAncestors(N,[],[]);c.highlighted_items=H[0].concat(H[1]);var G=k.incomers();c.highlighted_items=c.highlighted_items.concat(G);var Y=c.getAncestors(O,[],[]);c.highlighted_items=c.highlighted_items.concat(Y[0].concat(Y[1])),c.selectedNode=k}for(var I=0;I<c.highlighted_items.length;I++)c.highlighted_items[I].addClass("highlight"),c.hasMathML||(c.divsToTypeset=c.divsToTypeset.concat(c.getDivsToTypeset(c.highlighted_items[I])));u.value=[{title:k.data().title,summary:k.data().summary,content:k.data().text,expanded:!1}],f.value=[];for(var j=k.incomers(),I=0;I<j.size();I++){var q=j[I];f.value.push({title:q.data().title,summary:q.data().summary,content:q.data().text,expanded:!1})}}set_display_order(v){let E=c.cyInstance.nodes();console.log(v),c.current_display_order=v;for(var k=0;k<E.length;k++)console.log("a",v,E[k].data().display_order,E[k].data().display_order<=c.display_order),console.log("style",E[k].style),E[k].data().display_order<=c.current_display_order?(E[k].addClass("l0"),E[k].style("display","element")):(E[k].removeClass("l0"),E[k].style("display","none")),E[k].data().display_order==c.current_display_order&&(console.log("selecting node",E[k].data().name,c.titleNamesList.includes(E[k].data().name)),c.titleNamesList.includes(E[k].data().name)||c.selectNode(E[k]));c.updateStyle()}updateStyle(){let v=c.cyInstance.nodes();for(var E=0;E<v.length;E++)v[E].data("display_order",v[E].data().display_order)}}const g=ea([]);function d(D,v){let E=["section","subsection"],k=[{},{},{}];for(let G=0;G<D.length;G++)if(D[G].group=="nodes"){let Y=D[G],j=!0;for(var N=0;N<E.length;N++)Y.data.name==E[N]&&(console.log("section"),k[N][Y.data.id]={title:"",order:Y.data.order,parent:Y.data.parent},j=!1),Y.data.name==E[N]+"Title"&&(console.log("sectionTitle"),k[N][Y.data.parent].title=Y.data.text,j=!1);j==!0&&(k[E.length][Y.data.id]={title:Y.data.title,order:Y.data.order,parent:Y.data.parent})}function O(G){let Y=Object.keys(G).map(q=>[q,G[q]]);return Y.sort((q,X)=>q[1].order-X[1].order),Y.map(q=>q[0])}function I(G){if(G[0]=="<"){let Y=G.indexOf(">"),j=G.lastIndexOf("<");G.length,G=G.substring(Y+1,j)}return G}function H(G,Y,j){if(document.createElement("div"),G>2)return[];let q=[];if(G==0){let X=O(k[0]);for(let K=0;K<X.length;K++){let T=I(k[0][X[K]].title),M=H(k.length-1,X[K],j).concat(H(G+1,X[K],j));q.push({label:T,children:M})}}else{let X={};for(let T in k[G])k[G][T].parent==Y&&(X[T]=k[G][T]);let K=O(X);for(let T=0;T<K.length;T++)if(G+1<k.length-1){let M=H(k.length-1,K[T]).concat(H(G+1,K[T],j));q.push({label:I(X[K[T]].title),children:M})}else{let M=H(k.length-1,K[T],j);q.push({label:I(X[K[T]].title),children:M,id:K[T],handler:j})}}return q}g.value=H(0,"",v),console.log("TOC",g.value)}function b(D,v){d(D.graph,v),n.value=D,console.log("graph changed",D),u.value=[],console.log("cy",s.value),k=!0;var E=!0,k=!0,N=!1,O=[.4,.2],I=[20,40,60],H={section:80,subsection:60};new p(n.value,"preset",k,E,O,H,I,N,"")}function x(){if(c!=null)return c.getGraphJSON()}function w(D){c!=null&&c.selectNode(c.getCyNode(D),!0)}function C(){c.current_display_order=Math.min(c.current_display_order+1,c.max_display_order),c.set_display_order(c.current_display_order)}function m(){console.log("b"),c.current_display_order=Math.max(c.current_display_order-1,0),c.set_display_order(c.current_display_order)}function S(){c.current_display_order=c.max_display_order,c.set_display_order(c.current_display_order)}function P(){c.current_display_order=0,c.set_display_order(c.current_display_order)}return e({graphContent:n,ToC:g,updateGraph:b,getGraphJSON:x,selectNode:w,forward:C,backward:m,fastForward:S,fastBackward:P}),(D,v)=>{const E=Qg("qpage");return Qa(),nl(E,null,{default:kr(()=>[Ar("div",null,[pr(ip,{modelValue:i.value,"onUpdate:modelValue":v[3]||(v[3]=k=>i.value=k),style:{height:"100vh"}},{before:kr(()=>[Ar("div",CE,[Ar("div",{id:"testdiv",ref_key:"testdiv",ref:l},null,512),v[0]||(Jf(-1),v[0]=Ar("div",{id:"cy",ref_key:"cy",ref:s},null,512),Jf(1),v[0])])]),separator:kr(()=>[pr(sp,{color:"primary","text-color":"white",size:"40px",icon:"drag_indicator"})]),after:kr(()=>[Ar("div",_E,[pr(np,{modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=k=>o.value=k),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:kr(()=>[pr(ec,{name:"nodes",label:"Nodes"}),pr(ec,{name:"fullText",label:"Full Text"})]),_:1},8,["modelValue"]),pr(ol),pr(ap,{modelValue:o.value,"onUpdate:modelValue":v[2]||(v[2]=k=>o.value=k),animated:""},{default:kr(()=>[pr(tc,{name:"nodes"},{default:kr(()=>[EE,(Qa(!0),al(il,null,Zf(u.value,k=>(Qa(),nl(rc,{key:k.title,class:"my-card",flat:"",bordered:""},{default:kr(()=>[pr(Bo,null,{default:kr(()=>[Ar("div",null,[pr(ol),pr(Bo,{class:"text-subtitle2"},{default:kr(()=>[Ar("div",{innerHTML:k.content},null,8,TE)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128)),PE,(Qa(!0),al(il,null,Zf(f.value,k=>(Qa(),al(il,{key:k.title},[k.title?(Qa(),nl(rc,{key:0,class:"my-card",flat:"",bordered:""},{default:kr(()=>[pr(Bo,null,{default:kr(()=>[Ar("div",kE,[Ar("div",{innerHTML:k.title},null,8,AE)]),Ar("div",DE,[Ar("div",{innerHTML:k.summary},null,8,ME)])]),_:2},1024),pr(up,null,{default:kr(()=>[pr(Yg,{color:"grey",round:"",flat:"",dense:"",icon:k.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:N=>k.expanded=!k.expanded},null,8,["icon","onClick"])]),_:2},1024),pr(op,null,{default:kr(()=>[Zg(Ar("div",null,[pr(ol),pr(Bo,{class:"text-subtitle2"},{default:kr(()=>[Ar("div",{innerHTML:k.content},null,8,OE)]),_:2},1024)],512),[[Jg,k.expanded]])]),_:2},1024)]),_:2},1024)):ep("",!0)],64))),128))]),_:1}),pr(tc,{name:"fullText"},{default:kr(()=>[Ar("div",{innerHTML:n.value.full_text},null,8,LE)]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])]),_:1})}}});export{FE as default};
