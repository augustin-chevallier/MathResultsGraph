import{R as Lp,Q as po,d as xh,l as Ch,b as On,m as Np,i as Sh,u as Rp,a as Ip,h as Bp,n as Fp,o as zp,k as Gp}from"./QBtn.aae9cc57.js";import{r as Ht,D as Vp,k as Ps,c as on,o as Va,C as Tf,n as yo,h as Pt,g as Nn,p as Tc,i as $p,e as Cl,a as lt,Z as _h,f as Th,s as mi,y as qp,d as Hp,$ as Up,a0 as Ef,w as za,A as Wp,a1 as Kp,z as Eh,a2 as jp,S as Ph,m as kn,a3 as kh,U as ca,a4 as bi,X as mo,V as wi,a5 as Yp,Y as Ec,W as Sl,F as Xp,G as si,I as _l,J as Or,P as Lr,K as br,O as Tl,a6 as Pc,a7 as El,a8 as kc,v as Qp,L as Zp}from"./index.a179918a.js";function Jp(){const r=Ht(!Vp.value);return r.value===!1&&Ps(()=>{r.value=!0}),{isHydrated:r}}const Ah=typeof ResizeObserver<"u",Ac=Ah===!0?{}:{style:"display:block;position:absolute;top:0;left:0;right:0;bottom:0;height:100%;width:100%;overflow:hidden;pointer-events:none;z-index:-1;",url:"about:blank"};var ey=on({name:"QResizeObserver",props:{debounce:{type:[String,Number],default:100}},emits:["resize"],setup(r,{emit:e}){let t=null,n,a={width:-1,height:-1};function i(l){l===!0||r.debounce===0||r.debounce==="0"?o():t===null&&(t=setTimeout(o,r.debounce))}function o(){if(t!==null&&(clearTimeout(t),t=null),n){const{offsetWidth:l,offsetHeight:u}=n;(l!==a.width||u!==a.height)&&(a={width:l,height:u},e("resize",a))}}const{proxy:s}=Nn();if(s.trigger=i,Ah===!0){let l;const u=f=>{n=s.$el.parentNode,n?(l=new ResizeObserver(i),l.observe(n),o()):f!==!0&&yo(()=>{u(!0)})};return Ps(()=>{u()}),Va(()=>{t!==null&&clearTimeout(t),l!==void 0&&(l.disconnect!==void 0?l.disconnect():n&&l.unobserve(n))}),Tf}else{let f=function(){t!==null&&(clearTimeout(t),t=null),u!==void 0&&(u.removeEventListener!==void 0&&u.removeEventListener("resize",i,Tc.passive),u=void 0)},c=function(){f(),n&&n.contentDocument&&(u=n.contentDocument.defaultView,u.addEventListener("resize",i,Tc.passive),o())};const{isHydrated:l}=Jp();let u;return Ps(()=>{yo(()=>{n=s.$el,n&&c()})}),Va(f),()=>{if(l.value===!0)return Pt("object",{class:"q--avoid-card-border",style:Ac.style,tabindex:-1,type:"text/html",data:Ac.url,"aria-hidden":"true",onLoad:c})}}}});let Pl,Zo=0;const _r=new Array(256);for(let r=0;r<256;r++)_r[r]=(r+256).toString(16).substring(1);const ty=(()=>{const r=typeof crypto<"u"?crypto:typeof window<"u"?window.crypto||window.msCrypto:void 0;if(r!==void 0){if(r.randomBytes!==void 0)return r.randomBytes;if(r.getRandomValues!==void 0)return e=>{const t=new Uint8Array(e);return r.getRandomValues(t),t}}return e=>{const t=[];for(let n=e;n>0;n--)t.push(Math.floor(Math.random()*256));return t}})(),Mc=4096;function ry(){(Pl===void 0||Zo+16>Mc)&&(Zo=0,Pl=ty(Mc));const r=Array.prototype.slice.call(Pl,Zo,Zo+=16);return r[6]=r[6]&15|64,r[8]=r[8]&63|128,_r[r[0]]+_r[r[1]]+_r[r[2]]+_r[r[3]]+"-"+_r[r[4]]+_r[r[5]]+"-"+_r[r[6]]+_r[r[7]]+"-"+_r[r[8]]+_r[r[9]]+"-"+_r[r[10]]+_r[r[11]]+_r[r[12]]+_r[r[13]]+_r[r[14]]+_r[r[15]]}let ny=0;const ay=["click","keydown"],iy={icon:String,label:[Number,String],alert:[Boolean,String],alertIcon:String,name:{type:[Number,String],default:()=>`t_${ny++}`},noCaps:Boolean,tabindex:[String,Number],disable:Boolean,contentClass:String,ripple:{type:[Boolean,Object],default:!0}};function oy(r,e,t,n){const a=$p(_h,Cl);if(a===Cl)return console.error("QTab/QRouteTab component needs to be child of QTabs"),Cl;const{proxy:i}=Nn(),o=Ht(null),s=Ht(null),l=Ht(null),u=lt(()=>r.disable===!0||r.ripple===!1?!1:Object.assign({keyCodes:[13,32],early:!0},r.ripple===!0?{}:r.ripple)),f=lt(()=>a.currentModel.value===r.name),c=lt(()=>"q-tab relative-position self-stretch flex flex-center text-center"+(f.value===!0?" q-tab--active"+(a.tabProps.value.activeClass?" "+a.tabProps.value.activeClass:"")+(a.tabProps.value.activeColor?` text-${a.tabProps.value.activeColor}`:"")+(a.tabProps.value.activeBgColor?` bg-${a.tabProps.value.activeBgColor}`:""):" q-tab--inactive")+(r.icon&&r.label&&a.tabProps.value.inlineLabel===!1?" q-tab--full":"")+(r.noCaps===!0||a.tabProps.value.noCaps===!0?" q-tab--no-caps":"")+(r.disable===!0?" disabled":" q-focusable q-hoverable cursor-pointer")+(n!==void 0?n.linkClass.value:"")),p=lt(()=>"q-tab__content self-stretch flex-center relative-position q-anchor--skip non-selectable "+(a.tabProps.value.inlineLabel===!0?"row no-wrap q-tab__content--inline":"column")+(r.contentClass!==void 0?` ${r.contentClass}`:"")),g=lt(()=>r.disable===!0||a.hasFocus.value===!0||f.value===!1&&a.hasActiveTab.value===!0?-1:r.tabindex||0);function h(y,C){if(C!==!0&&o.value!==null&&o.value.focus(),r.disable===!0){n!==void 0&&n.hasRouterLink.value===!0&&mi(y);return}if(n===void 0){a.updateModel({name:r.name}),t("click",y);return}if(n.hasRouterLink.value===!0){const E=(M={})=>{let v;const T=M.to===void 0||Up(M.to,r.to)===!0?a.avoidRouteWatcher=ry():null;return n.navigateToRouterLink(y,{...M,returnRouterError:!0}).catch(k=>{v=k}).then(k=>{if(T===a.avoidRouteWatcher&&(a.avoidRouteWatcher=!1,v===void 0&&(k===void 0||k.message!==void 0&&k.message.startsWith("Avoided redundant navigation")===!0)&&a.updateModel({name:r.name})),M.returnRouterError===!0)return v!==void 0?Promise.reject(v):k})};t("click",y,E),y.defaultPrevented!==!0&&E();return}t("click",y)}function m(y){qp(y,[13,32])?h(y,!0):Hp(y)!==!0&&y.keyCode>=35&&y.keyCode<=40&&y.altKey!==!0&&y.metaKey!==!0&&a.onKbdNavigate(y.keyCode,i.$el)===!0&&mi(y),t("keydown",y)}function x(){const y=a.tabProps.value.narrowIndicator,C=[],E=Pt("div",{ref:l,class:["q-tab__indicator",a.tabProps.value.indicatorClass]});r.icon!==void 0&&C.push(Pt(po,{class:"q-tab__icon",name:r.icon})),r.label!==void 0&&C.push(Pt("div",{class:"q-tab__label"},r.label)),r.alert!==!1&&C.push(r.alertIcon!==void 0?Pt(po,{class:"q-tab__alert-icon",color:r.alert!==!0?r.alert:void 0,name:r.alertIcon}):Pt("div",{class:"q-tab__alert"+(r.alert!==!0?` text-${r.alert}`:"")})),y===!0&&C.push(E);const M=[Pt("div",{class:"q-focus-helper",tabindex:-1,ref:o}),Pt("div",{class:p.value},xh(e.default,C))];return y===!1&&M.push(E),M}const w={name:lt(()=>r.name),rootRef:s,tabIndicatorRef:l,routeData:n};Va(()=>{a.unregisterTab(w)}),Ps(()=>{a.registerTab(w)});function S(y,C){const E={ref:s,class:c.value,tabindex:g.value,role:"tab","aria-selected":f.value===!0?"true":"false","aria-disabled":r.disable===!0?"true":void 0,onClick:h,onKeydown:m,...C};return Th(Pt(y,E,x()),[[Lp,u.value]])}return{renderTab:S,$tabs:a}}var Dc=on({name:"QTab",props:iy,emits:ay,setup(r,{slots:e,emit:t}){const{renderTab:n}=oy(r,e,t);return()=>n("div")}});function kl(){let r;const e=Nn();function t(){r=void 0}return Ef(t),Va(t),{removeTick:t,registerTick(n){r=n,yo(()=>{r===n&&(Ch(e)===!1&&r(),r=void 0)})}}}function Oc(){let r=null;const e=Nn();function t(){r!==null&&(clearTimeout(r),r=null)}return Ef(t),Va(t),{removeTimeout:t,registerTimeout(n,a){t(),Ch(e)===!1&&(r=setTimeout(()=>{r=null,n()},a))}}}let Mh=!1;{const r=document.createElement("div");r.setAttribute("dir","rtl"),Object.assign(r.style,{width:"1px",height:"1px",overflow:"auto"});const e=document.createElement("div");Object.assign(e.style,{width:"1000px",height:"1px"}),document.body.appendChild(r),r.appendChild(e),r.scrollLeft=-1e3,Mh=r.scrollLeft>=0,r.remove()}function sy(r,e,t){const n=t===!0?["left","right"]:["top","bottom"];return`absolute-${e===!0?n[0]:n[1]}${r?` text-${r}`:""}`}const uy=["left","center","right","justify"];var ly=on({name:"QTabs",props:{modelValue:[Number,String],align:{type:String,default:"center",validator:r=>uy.includes(r)},breakpoint:{type:[String,Number],default:600},vertical:Boolean,shrink:Boolean,stretch:Boolean,activeClass:String,activeColor:String,activeBgColor:String,indicatorColor:String,leftIcon:String,rightIcon:String,outsideArrows:Boolean,mobileArrows:Boolean,switchIndicator:Boolean,narrowIndicator:Boolean,inlineLabel:Boolean,noCaps:Boolean,dense:Boolean,contentClass:String,"onUpdate:modelValue":[Function,Array]},setup(r,{slots:e,emit:t}){const{proxy:n}=Nn(),{$q:a}=n,{registerTick:i}=kl(),{registerTick:o}=kl(),{registerTick:s}=kl(),{registerTimeout:l,removeTimeout:u}=Oc(),{registerTimeout:f,removeTimeout:c}=Oc(),p=Ht(null),g=Ht(null),h=Ht(r.modelValue),m=Ht(!1),x=Ht(!0),w=Ht(!1),S=Ht(!1),y=[],C=Ht(0),E=Ht(!1);let M=null,v=null,T;const k=lt(()=>({activeClass:r.activeClass,activeColor:r.activeColor,activeBgColor:r.activeBgColor,indicatorClass:sy(r.indicatorColor,r.switchIndicator,r.vertical),narrowIndicator:r.narrowIndicator,inlineLabel:r.inlineLabel,noCaps:r.noCaps})),N=lt(()=>{const Ee=C.value,Me=h.value;for(let ke=0;ke<Ee;ke++)if(y[ke].name.value===Me)return!0;return!1}),O=lt(()=>`q-tabs__content--align-${m.value===!0?"left":S.value===!0?"justify":r.align}`),I=lt(()=>`q-tabs row no-wrap items-center q-tabs--${m.value===!0?"":"not-"}scrollable q-tabs--${r.vertical===!0?"vertical":"horizontal"} q-tabs__arrows--${r.outsideArrows===!0?"outside":"inside"} q-tabs--mobile-with${r.mobileArrows===!0?"":"out"}-arrows`+(r.dense===!0?" q-tabs--dense":"")+(r.shrink===!0?" col-shrink":"")+(r.stretch===!0?" self-stretch":"")),q=lt(()=>"q-tabs__content scroll--mobile row no-wrap items-center self-stretch hide-scrollbar relative-position "+O.value+(r.contentClass!==void 0?` ${r.contentClass}`:"")),B=lt(()=>r.vertical===!0?{container:"height",content:"offsetHeight",scroll:"scrollHeight"}:{container:"width",content:"offsetWidth",scroll:"scrollWidth"}),j=lt(()=>r.vertical!==!0&&a.lang.rtl===!0),Y=lt(()=>Mh===!1&&j.value===!0);za(j,L),za(()=>r.modelValue,Ee=>{U({name:Ee,setCurrent:!0,skipEmit:!0})}),za(()=>r.outsideArrows,X);function U({name:Ee,setCurrent:Me,skipEmit:ke}){h.value!==Ee&&(ke!==!0&&r["onUpdate:modelValue"]!==void 0&&t("update:modelValue",Ee),(Me===!0||r["onUpdate:modelValue"]===void 0)&&(P(h.value,Ee),h.value=Ee))}function X(){i(()=>{K({width:p.value.offsetWidth,height:p.value.offsetHeight})})}function K(Ee){if(B.value===void 0||g.value===null)return;const Me=Ee[B.value.container],ke=Math.min(g.value[B.value.scroll],Array.prototype.reduce.call(g.value.children,(R,G)=>R+(G[B.value.content]||0),0)),de=Me>0&&ke>Me;m.value=de,de===!0&&o(L),S.value=Me<parseInt(r.breakpoint,10)}function P(Ee,Me){const ke=Ee!=null&&Ee!==""?y.find(R=>R.name.value===Ee):null,de=Me!=null&&Me!==""?y.find(R=>R.name.value===Me):null;if(ke&&de){const R=ke.tabIndicatorRef.value,G=de.tabIndicatorRef.value;M!==null&&(clearTimeout(M),M=null),R.style.transition="none",R.style.transform="none",G.style.transition="none",G.style.transform="none";const re=R.getBoundingClientRect(),te=G.getBoundingClientRect();G.style.transform=r.vertical===!0?`translate3d(0,${re.top-te.top}px,0) scale3d(1,${te.height?re.height/te.height:1},1)`:`translate3d(${re.left-te.left}px,0,0) scale3d(${te.width?re.width/te.width:1},1,1)`,s(()=>{M=setTimeout(()=>{M=null,G.style.transition="transform .25s cubic-bezier(.4, 0, .2, 1)",G.style.transform="none"},70)})}de&&m.value===!0&&D(de.rootRef.value)}function D(Ee){const{left:Me,width:ke,top:de,height:R}=g.value.getBoundingClientRect(),G=Ee.getBoundingClientRect();let re=r.vertical===!0?G.top-de:G.left-Me;if(re<0){g.value[r.vertical===!0?"scrollTop":"scrollLeft"]+=Math.floor(re),L();return}re+=r.vertical===!0?G.height-R:G.width-ke,re>0&&(g.value[r.vertical===!0?"scrollTop":"scrollLeft"]+=Math.ceil(re),L())}function L(){const Ee=g.value;if(Ee===null)return;const Me=Ee.getBoundingClientRect(),ke=r.vertical===!0?Ee.scrollTop:Math.abs(Ee.scrollLeft);j.value===!0?(x.value=Math.ceil(ke+Me.width)<Ee.scrollWidth-1,w.value=ke>0):(x.value=ke>0,w.value=r.vertical===!0?Math.ceil(ke+Me.height)<Ee.scrollHeight:Math.ceil(ke+Me.width)<Ee.scrollWidth)}function F(Ee){v!==null&&clearInterval(v),v=setInterval(()=>{fe(Ee)===!0&&J()},5)}function W(){F(Y.value===!0?Number.MAX_SAFE_INTEGER:0)}function Z(){F(Y.value===!0?0:Number.MAX_SAFE_INTEGER)}function J(){v!==null&&(clearInterval(v),v=null)}function Q(Ee,Me){const ke=Array.prototype.filter.call(g.value.children,te=>te===Me||te.matches&&te.matches(".q-tab.q-focusable")===!0),de=ke.length;if(de===0)return;if(Ee===36)return D(ke[0]),ke[0].focus(),!0;if(Ee===35)return D(ke[de-1]),ke[de-1].focus(),!0;const R=Ee===(r.vertical===!0?38:37),G=Ee===(r.vertical===!0?40:39),re=R===!0?-1:G===!0?1:void 0;if(re!==void 0){const te=j.value===!0?-1:1,ie=ke.indexOf(Me)+re*te;return ie>=0&&ie<de&&(D(ke[ie]),ke[ie].focus({preventScroll:!0})),!0}}const oe=lt(()=>Y.value===!0?{get:Ee=>Math.abs(Ee.scrollLeft),set:(Ee,Me)=>{Ee.scrollLeft=-Me}}:r.vertical===!0?{get:Ee=>Ee.scrollTop,set:(Ee,Me)=>{Ee.scrollTop=Me}}:{get:Ee=>Ee.scrollLeft,set:(Ee,Me)=>{Ee.scrollLeft=Me}});function fe(Ee){const Me=g.value,{get:ke,set:de}=oe.value;let R=!1,G=ke(Me);const re=Ee<G?-1:1;return G+=re*5,G<0?(R=!0,G=0):(re===-1&&G<=Ee||re===1&&G>=Ee)&&(R=!0,G=Ee),de(Me,G),L(),R}function ce(Ee,Me){for(const ke in Ee)if(Ee[ke]!==Me[ke])return!1;return!0}function Ce(){let Ee=null,Me={matchedLen:0,queryDiff:9999,hrefLen:0};const ke=y.filter(re=>re.routeData!==void 0&&re.routeData.hasRouterLink.value===!0),{hash:de,query:R}=n.$route,G=Object.keys(R).length;for(const re of ke){const te=re.routeData.exact.value===!0;if(re.routeData[te===!0?"linkIsExactActive":"linkIsActive"].value!==!0)continue;const{hash:ie,query:ge,matched:ue,href:Se}=re.routeData.resolvedLink.value,Fe=Object.keys(ge).length;if(te===!0){if(ie!==de||Fe!==G||ce(R,ge)===!1)continue;Ee=re.name.value;break}if(ie!==""&&ie!==de||Fe!==0&&ce(ge,R)===!1)continue;const ze={matchedLen:ue.length,queryDiff:G-Fe,hrefLen:Se.length-ie.length};if(ze.matchedLen>Me.matchedLen){Ee=re.name.value,Me=ze;continue}else if(ze.matchedLen!==Me.matchedLen)continue;if(ze.queryDiff<Me.queryDiff)Ee=re.name.value,Me=ze;else if(ze.queryDiff!==Me.queryDiff)continue;ze.hrefLen>Me.hrefLen&&(Ee=re.name.value,Me=ze)}Ee===null&&y.some(re=>re.routeData===void 0&&re.name.value===h.value)===!0||U({name:Ee,setCurrent:!0})}function Le(Ee){if(u(),E.value!==!0&&p.value!==null&&Ee.target&&typeof Ee.target.closest=="function"){const Me=Ee.target.closest(".q-tab");Me&&p.value.contains(Me)===!0&&(E.value=!0,m.value===!0&&D(Me))}}function Re(){l(()=>{E.value=!1},30)}function De(){xe.avoidRouteWatcher===!1?f(Ce):c()}function me(){if(T===void 0){const Ee=za(()=>n.$route.fullPath,De);T=()=>{Ee(),T=void 0}}}function _e(Ee){y.push(Ee),C.value++,X(),Ee.routeData===void 0||n.$route===void 0?f(()=>{if(m.value===!0){const Me=h.value,ke=Me!=null&&Me!==""?y.find(de=>de.name.value===Me):null;ke&&D(ke.rootRef.value)}}):(me(),Ee.routeData.hasRouterLink.value===!0&&De())}function we(Ee){y.splice(y.indexOf(Ee),1),C.value--,X(),T!==void 0&&Ee.routeData!==void 0&&(y.every(Me=>Me.routeData===void 0)===!0&&T(),De())}const xe={currentModel:h,tabProps:k,hasFocus:E,hasActiveTab:N,registerTab:_e,unregisterTab:we,verifyRouteModel:De,updateModel:U,onKbdNavigate:Q,avoidRouteWatcher:!1};Wp(_h,xe);function Be(){M!==null&&clearTimeout(M),J(),T!==void 0&&T()}let Ue;return Va(Be),Ef(()=>{Ue=T!==void 0,Be()}),Kp(()=>{Ue===!0&&me(),X()}),()=>Pt("div",{ref:p,class:I.value,role:"tablist",onFocusin:Le,onFocusout:Re},[Pt(ey,{onResize:K}),Pt("div",{ref:g,class:q.value,onScroll:L},On(e.default)),Pt(po,{class:"q-tabs__arrow q-tabs__arrow--left absolute q-tab__icon"+(x.value===!0?"":" q-tabs__arrow--faded"),name:r.leftIcon||a.iconSet.tabs[r.vertical===!0?"up":"left"],onMousedownPassive:W,onTouchstartPassive:W,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J}),Pt(po,{class:"q-tabs__arrow q-tabs__arrow--right absolute q-tab__icon"+(w.value===!0?"":" q-tabs__arrow--faded"),name:r.rightIcon||a.iconSet.tabs[r.vertical===!0?"down":"right"],onMousedownPassive:Z,onTouchstartPassive:Z,onMouseupPassive:J,onMouseleavePassive:J,onTouchendPassive:J})])}});const Ws={dark:{type:Boolean,default:null}};function Ks(r,e){return lt(()=>r.dark===null?e.dark.isActive:r.dark)}const fy={true:"inset",item:"item-inset","item-thumbnail":"item-thumbnail-inset"},Al={xs:2,sm:4,md:8,lg:16,xl:24};var Ml=on({name:"QSeparator",props:{...Ws,spaced:[Boolean,String],inset:[Boolean,String],vertical:Boolean,color:String,size:String},setup(r){const e=Nn(),t=Ks(r,e.proxy.$q),n=lt(()=>r.vertical===!0?"vertical":"horizontal"),a=lt(()=>` q-separator--${n.value}`),i=lt(()=>r.inset!==!1?`${a.value}-${fy[r.inset]}`:""),o=lt(()=>`q-separator${a.value}${i.value}`+(r.color!==void 0?` bg-${r.color}`:"")+(t.value===!0?" q-separator--dark":"")),s=lt(()=>{const l={};if(r.size!==void 0&&(l[r.vertical===!0?"width":"height"]=r.size),r.spaced!==!1){const u=r.spaced===!0?`${Al.md}px`:r.spaced in Al?`${Al[r.spaced]}px`:r.spaced,f=r.vertical===!0?["Left","Right"]:["Top","Bottom"];l[`margin${f[0]}`]=l[`margin${f[1]}`]=u}return l});return()=>Pt("hr",{class:o.value,style:s.value,"aria-orientation":n.value})}}),cy=on({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(r,{slots:e,emit:t}){let n=!1,a,i,o=null,s=null,l,u;function f(){a&&a(),a=null,n=!1,o!==null&&(clearTimeout(o),o=null),s!==null&&(clearTimeout(s),s=null),i!==void 0&&i.removeEventListener("transitionend",l),l=null}function c(m,x,w){x!==void 0&&(m.style.height=`${x}px`),m.style.transition=`height ${r.duration}ms cubic-bezier(.25, .8, .50, 1)`,n=!0,a=w}function p(m,x){m.style.overflowY=null,m.style.height=null,m.style.transition=null,f(),x!==u&&t(x)}function g(m,x){let w=0;i=m,n===!0?(f(),w=m.offsetHeight===m.scrollHeight?0:void 0):(u="hide",m.style.overflowY="hidden"),c(m,w,x),o=setTimeout(()=>{o=null,m.style.height=`${m.scrollHeight}px`,l=S=>{s=null,(Object(S)!==S||S.target===m)&&p(m,"show")},m.addEventListener("transitionend",l),s=setTimeout(l,r.duration*1.1)},100)}function h(m,x){let w;i=m,n===!0?f():(u="show",m.style.overflowY="hidden",w=m.scrollHeight),c(m,w,x),o=setTimeout(()=>{o=null,m.style.height=0,l=S=>{s=null,(Object(S)!==S||S.target===m)&&p(m,"hide")},m.addEventListener("transitionend",l),s=setTimeout(l,r.duration*1.1)},100)}return Va(()=>{n===!0&&f()}),()=>Pt(Eh,{css:!1,appear:r.appear,onEnter:g,onLeave:h},e.default)}});const Pf={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},dy=Object.keys(Pf);Pf.all=!0;function ks(r){const e={};for(const t of dy)r[t]===!0&&(e[t]=!0);return Object.keys(e).length===0?Pf:(e.horizontal===!0?e.left=e.right=!0:e.left===!0&&e.right===!0&&(e.horizontal=!0),e.vertical===!0?e.up=e.down=!0:e.up===!0&&e.down===!0&&(e.vertical=!0),e.horizontal===!0&&e.vertical===!0&&(e.all=!0),e)}const hy=["INPUT","TEXTAREA"];function As(r,e){return e.event===void 0&&r.target!==void 0&&r.target.draggable!==!0&&typeof e.handler=="function"&&hy.includes(r.target.nodeName.toUpperCase())===!1&&(r.qClonedBy===void 0||r.qClonedBy.indexOf(e.uid)===-1)}function Dh(){if(window.getSelection!==void 0){const r=window.getSelection();r.empty!==void 0?r.empty():r.removeAllRanges!==void 0&&(r.removeAllRanges(),jp.is.mobile!==!0&&r.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function vy(r){const e=[.06,6,50];return typeof r=="string"&&r.length&&r.split(":").forEach((t,n)=>{const a=parseFloat(t);a&&(e[n]=a)}),e}var gy=Ph({name:"touch-swipe",beforeMount(r,{value:e,arg:t,modifiers:n}){if(n.mouse!==!0&&kn.has.touch!==!0)return;const a=n.mouseCapture===!0?"Capture":"",i={handler:e,sensitivity:vy(t),direction:ks(n),noop:Tf,mouseStart(o){As(o,i)&&kh(o)&&(ca(i,"temp",[[document,"mousemove","move",`notPassive${a}`],[document,"mouseup","end","notPassiveCapture"]]),i.start(o,!0))},touchStart(o){if(As(o,i)){const s=o.target;ca(i,"temp",[[s,"touchmove","move","notPassiveCapture"],[s,"touchcancel","end","notPassiveCapture"],[s,"touchend","end","notPassiveCapture"]]),i.start(o)}},start(o,s){kn.is.firefox===!0&&bi(r,!0);const l=mo(o);i.event={x:l.left,y:l.top,time:Date.now(),mouse:s===!0,dir:!1}},move(o){if(i.event===void 0)return;if(i.event.dir!==!1){mi(o);return}const s=Date.now()-i.event.time;if(s===0)return;const l=mo(o),u=l.left-i.event.x,f=Math.abs(u),c=l.top-i.event.y,p=Math.abs(c);if(i.event.mouse!==!0){if(f<i.sensitivity[1]&&p<i.sensitivity[1]){i.end(o);return}}else if(window.getSelection().toString()!==""){i.end(o);return}else if(f<i.sensitivity[2]&&p<i.sensitivity[2])return;const g=f/s,h=p/s;i.direction.vertical===!0&&f<p&&f<100&&h>i.sensitivity[0]&&(i.event.dir=c<0?"up":"down"),i.direction.horizontal===!0&&f>p&&p<100&&g>i.sensitivity[0]&&(i.event.dir=u<0?"left":"right"),i.direction.up===!0&&f<p&&c<0&&f<100&&h>i.sensitivity[0]&&(i.event.dir="up"),i.direction.down===!0&&f<p&&c>0&&f<100&&h>i.sensitivity[0]&&(i.event.dir="down"),i.direction.left===!0&&f>p&&u<0&&p<100&&g>i.sensitivity[0]&&(i.event.dir="left"),i.direction.right===!0&&f>p&&u>0&&p<100&&g>i.sensitivity[0]&&(i.event.dir="right"),i.event.dir!==!1?(mi(o),i.event.mouse===!0&&(document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Dh(),i.styleCleanup=m=>{i.styleCleanup=void 0,document.body.classList.remove("non-selectable");const x=()=>{document.body.classList.remove("no-pointer-events--children")};m===!0?setTimeout(x,50):x()}),i.handler({evt:o,touch:i.event.mouse!==!0,mouse:i.event.mouse,direction:i.event.dir,duration:s,distance:{x:f,y:p}})):i.end(o)},end(o){i.event!==void 0&&(wi(i,"temp"),kn.is.firefox===!0&&bi(r,!1),i.styleCleanup!==void 0&&i.styleCleanup(!0),o!==void 0&&i.event.dir!==!1&&mi(o),i.event=void 0)}};if(r.__qtouchswipe=i,n.mouse===!0){const o=n.mouseCapture===!0||n.mousecapture===!0?"Capture":"";ca(i,"main",[[r,"mousedown","mouseStart",`passive${o}`]])}kn.has.touch===!0&&ca(i,"main",[[r,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[r,"touchmove","noop","notPassiveCapture"]])},updated(r,e){const t=r.__qtouchswipe;t!==void 0&&(e.oldValue!==e.value&&(typeof e.value!="function"&&t.end(),t.handler=e.value),t.direction=ks(e.modifiers))},beforeUnmount(r){const e=r.__qtouchswipe;e!==void 0&&(wi(e,"main"),wi(e,"temp"),kn.is.firefox===!0&&bi(r,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete r.__qtouchswipe)}});function py(){let r=Object.create(null);return{getCache:(e,t)=>r[e]===void 0?r[e]=typeof t=="function"?t():t:r[e],setCache(e,t){r[e]=t},hasCache(e){return r.hasOwnProperty(e)},clearCache(e){e!==void 0?delete r[e]:r={}}}}const yy={name:{required:!0},disable:Boolean},Lc={setup(r,{slots:e}){return()=>Pt("div",{class:"q-panel scroll",role:"tabpanel"},On(e.default))}},my={modelValue:{required:!0},animated:Boolean,infinite:Boolean,swipeable:Boolean,vertical:Boolean,transitionPrev:String,transitionNext:String,transitionDuration:{type:[String,Number],default:300},keepAlive:Boolean,keepAliveInclude:[String,Array,RegExp],keepAliveExclude:[String,Array,RegExp],keepAliveMax:Number},by=["update:modelValue","beforeTransition","transition"];function wy(){const{props:r,emit:e,proxy:t}=Nn(),{getCache:n}=py();let a,i;const o=Ht(null),s=Ht(null);function l(q){const B=r.vertical===!0?"up":"left";v((t.$q.lang.rtl===!0?-1:1)*(q.direction===B?1:-1))}const u=lt(()=>[[gy,l,void 0,{horizontal:r.vertical!==!0,vertical:r.vertical,mouse:!0}]]),f=lt(()=>r.transitionPrev||`slide-${r.vertical===!0?"down":"right"}`),c=lt(()=>r.transitionNext||`slide-${r.vertical===!0?"up":"left"}`),p=lt(()=>`--q-transition-duration: ${r.transitionDuration}ms`),g=lt(()=>typeof r.modelValue=="string"||typeof r.modelValue=="number"?r.modelValue:String(r.modelValue)),h=lt(()=>({include:r.keepAliveInclude,exclude:r.keepAliveExclude,max:r.keepAliveMax})),m=lt(()=>r.keepAliveInclude!==void 0||r.keepAliveExclude!==void 0);za(()=>r.modelValue,(q,B)=>{const j=y(q)===!0?C(q):-1;i!==!0&&M(j===-1?0:j<C(B)?-1:1),o.value!==j&&(o.value=j,e("beforeTransition",q,B),yo(()=>{e("transition",q,B)}))});function x(){v(1)}function w(){v(-1)}function S(q){e("update:modelValue",q)}function y(q){return q!=null&&q!==""}function C(q){return a.findIndex(B=>B.props.name===q&&B.props.disable!==""&&B.props.disable!==!0)}function E(){return a.filter(q=>q.props.disable!==""&&q.props.disable!==!0)}function M(q){const B=q!==0&&r.animated===!0&&o.value!==-1?"q-transition--"+(q===-1?f.value:c.value):null;s.value!==B&&(s.value=B)}function v(q,B=o.value){let j=B+q;for(;j!==-1&&j<a.length;){const Y=a[j];if(Y!==void 0&&Y.props.disable!==""&&Y.props.disable!==!0){M(q),i=!0,e("update:modelValue",Y.props.name),setTimeout(()=>{i=!1});return}j+=q}r.infinite===!0&&a.length!==0&&B!==-1&&B!==a.length&&v(q,q===-1?a.length:-1)}function T(){const q=C(r.modelValue);return o.value!==q&&(o.value=q),!0}function k(){const q=y(r.modelValue)===!0&&T()&&a[o.value];return r.keepAlive===!0?[Pt(Yp,h.value,[Pt(m.value===!0?n(g.value,()=>({...Lc,name:g.value})):Lc,{key:g.value,style:p.value},()=>q)])]:[Pt("div",{class:"q-panel scroll",style:p.value,key:g.value,role:"tabpanel"},[q])]}function N(){if(a.length!==0)return r.animated===!0?[Pt(Eh,{name:s.value},k)]:k()}function O(q){return a=Np(On(q.default,[])).filter(B=>B.props!==null&&B.props.slot===void 0&&y(B.props.name)===!0),a.length}function I(){return a}return Object.assign(t,{next:x,previous:w,goTo:S}),{panelIndex:o,panelDirectives:u,updatePanelsList:O,updatePanelIndex:T,getPanelContent:N,getEnabledPanels:E,getPanels:I,isValidPanelName:y,keepAliveProps:h,needsUniqueKeepAliveWrapper:m,goToPanelByOffset:v,goToPanel:S,nextPanel:x,previousPanel:w}}var Nc=on({name:"QTabPanel",props:yy,setup(r,{slots:e}){return()=>Pt("div",{class:"q-tab-panel",role:"tabpanel"},On(e.default))}}),xy=on({name:"QTabPanels",props:{...my,...Ws},emits:by,setup(r,{slots:e}){const t=Nn(),n=Ks(r,t.proxy.$q),{updatePanelsList:a,getPanelContent:i,panelDirectives:o}=wy(),s=lt(()=>"q-tab-panels q-panel-parent"+(n.value===!0?" q-tab-panels--dark q-dark":""));return()=>(a(e),Sh("div",{class:s.value},i(),"pan",r.swipeable,()=>o.value))}});function Dl(r,e,t){const n=mo(r);let a,i=n.left-e.event.x,o=n.top-e.event.y,s=Math.abs(i),l=Math.abs(o);const u=e.direction;u.horizontal===!0&&u.vertical!==!0?a=i<0?"left":"right":u.horizontal!==!0&&u.vertical===!0?a=o<0?"up":"down":u.up===!0&&o<0?(a="up",s>l&&(u.left===!0&&i<0?a="left":u.right===!0&&i>0&&(a="right"))):u.down===!0&&o>0?(a="down",s>l&&(u.left===!0&&i<0?a="left":u.right===!0&&i>0&&(a="right"))):u.left===!0&&i<0?(a="left",s<l&&(u.up===!0&&o<0?a="up":u.down===!0&&o>0&&(a="down"))):u.right===!0&&i>0&&(a="right",s<l&&(u.up===!0&&o<0?a="up":u.down===!0&&o>0&&(a="down")));let f=!1;if(a===void 0&&t===!1){if(e.event.isFirst===!0||e.event.lastDir===void 0)return{};a=e.event.lastDir,f=!0,a==="left"||a==="right"?(n.left-=i,s=0,i=0):(n.top-=o,l=0,o=0)}return{synthetic:f,payload:{evt:r,touch:e.event.mouse!==!0,mouse:e.event.mouse===!0,position:n,direction:a,isFirst:e.event.isFirst,isFinal:t===!0,duration:Date.now()-e.event.time,distance:{x:s,y:l},offset:{x:i,y:o},delta:{x:n.left-e.event.lastX,y:n.top-e.event.lastY}}}}let Cy=0;var Sy=Ph({name:"touch-pan",beforeMount(r,{value:e,modifiers:t}){if(t.mouse!==!0&&kn.has.touch!==!0)return;function n(i,o){t.mouse===!0&&o===!0?mi(i):(t.stop===!0&&Sl(i),t.prevent===!0&&Ec(i))}const a={uid:"qvtp_"+Cy++,handler:e,modifiers:t,direction:ks(t),noop:Tf,mouseStart(i){As(i,a)&&kh(i)&&(ca(a,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),a.start(i,!0))},touchStart(i){if(As(i,a)){const o=i.target;ca(a,"temp",[[o,"touchmove","move","notPassiveCapture"],[o,"touchcancel","end","passiveCapture"],[o,"touchend","end","passiveCapture"]]),a.start(i)}},start(i,o){if(kn.is.firefox===!0&&bi(r,!0),a.lastEvt=i,o===!0||t.stop===!0){if(a.direction.all!==!0&&(o!==!0||a.modifiers.mouseAllDir!==!0&&a.modifiers.mousealldir!==!0)){const u=i.type.indexOf("mouse")!==-1?new MouseEvent(i.type,i):new TouchEvent(i.type,i);i.defaultPrevented===!0&&Ec(u),i.cancelBubble===!0&&Sl(u),Object.assign(u,{qKeyEvent:i.qKeyEvent,qClickOutside:i.qClickOutside,qAnchorHandled:i.qAnchorHandled,qClonedBy:i.qClonedBy===void 0?[a.uid]:i.qClonedBy.concat(a.uid)}),a.initialEvent={target:i.target,event:u}}Sl(i)}const{left:s,top:l}=mo(i);a.event={x:s,y:l,time:Date.now(),mouse:o===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:s,lastY:l}},move(i){if(a.event===void 0)return;const o=mo(i),s=o.left-a.event.x,l=o.top-a.event.y;if(s===0&&l===0)return;a.lastEvt=i;const u=a.event.mouse===!0,f=()=>{n(i,u);let g;t.preserveCursor!==!0&&t.preservecursor!==!0&&(g=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),u===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Dh(),a.styleCleanup=h=>{if(a.styleCleanup=void 0,g!==void 0&&(document.documentElement.style.cursor=g),document.body.classList.remove("non-selectable"),u===!0){const m=()=>{document.body.classList.remove("no-pointer-events--children")};h!==void 0?setTimeout(()=>{m(),h()},50):m()}else h!==void 0&&h()}};if(a.event.detected===!0){a.event.isFirst!==!0&&n(i,a.event.mouse);const{payload:g,synthetic:h}=Dl(i,a,!1);g!==void 0&&(a.handler(g)===!1?a.end(i):(a.styleCleanup===void 0&&a.event.isFirst===!0&&f(),a.event.lastX=g.position.left,a.event.lastY=g.position.top,a.event.lastDir=h===!0?void 0:g.direction,a.event.isFirst=!1));return}if(a.direction.all===!0||u===!0&&(a.modifiers.mouseAllDir===!0||a.modifiers.mousealldir===!0)){f(),a.event.detected=!0,a.move(i);return}const c=Math.abs(s),p=Math.abs(l);c!==p&&(a.direction.horizontal===!0&&c>p||a.direction.vertical===!0&&c<p||a.direction.up===!0&&c<p&&l<0||a.direction.down===!0&&c<p&&l>0||a.direction.left===!0&&c>p&&s<0||a.direction.right===!0&&c>p&&s>0?(a.event.detected=!0,a.move(i)):a.end(i,!0))},end(i,o){if(a.event!==void 0){if(wi(a,"temp"),kn.is.firefox===!0&&bi(r,!1),o===!0)a.styleCleanup!==void 0&&a.styleCleanup(),a.event.detected!==!0&&a.initialEvent!==void 0&&a.initialEvent.target.dispatchEvent(a.initialEvent.event);else if(a.event.detected===!0){a.event.isFirst===!0&&a.handler(Dl(i===void 0?a.lastEvt:i,a).payload);const{payload:s}=Dl(i===void 0?a.lastEvt:i,a,!0),l=()=>{a.handler(s)};a.styleCleanup!==void 0?a.styleCleanup(l):l()}a.event=void 0,a.initialEvent=void 0,a.lastEvt=void 0}}};if(r.__qtouchpan=a,t.mouse===!0){const i=t.mouseCapture===!0||t.mousecapture===!0?"Capture":"";ca(a,"main",[[r,"mousedown","mouseStart",`passive${i}`]])}kn.has.touch===!0&&ca(a,"main",[[r,"touchstart","touchStart",`passive${t.capture===!0?"Capture":""}`],[r,"touchmove","noop","notPassiveCapture"]])},updated(r,e){const t=r.__qtouchpan;t!==void 0&&(e.oldValue!==e.value&&(typeof value!="function"&&t.end(),t.handler=e.value),t.direction=ks(e.modifiers))},beforeUnmount(r){const e=r.__qtouchpan;e!==void 0&&(e.event!==void 0&&e.end(),wi(e,"main"),wi(e,"temp"),kn.is.firefox===!0&&bi(r,!1),e.styleCleanup!==void 0&&e.styleCleanup(),delete r.__qtouchpan)}}),_y=on({name:"QSplitter",props:{...Ws,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:r=>["%","px"].includes(r)},limits:{type:Array,validator:r=>r.length!==2||typeof r[0]!="number"||typeof r[1]!="number"?!1:r[0]>=0&&r[0]<=r[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(r,{slots:e,emit:t}){const{proxy:{$q:n}}=Nn(),a=Ks(r,n),i=Ht(null),o={before:Ht(null),after:Ht(null)},s=lt(()=>`q-splitter no-wrap ${r.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${r.disable===!0?"disabled":"workable"}`+(a.value===!0?" q-splitter--dark":"")),l=lt(()=>r.horizontal===!0?"height":"width"),u=lt(()=>r.reverse!==!0?"before":"after"),f=lt(()=>r.limits!==void 0?r.limits:r.unit==="%"?[10,90]:[50,1/0]);function c(E){return(r.unit==="%"?E:Math.round(E))+r.unit}const p=lt(()=>({[u.value]:{[l.value]:c(r.modelValue)}}));let g,h,m,x,w;function S(E){if(E.isFirst===!0){const v=i.value.getBoundingClientRect()[l.value];g=r.horizontal===!0?"up":"left",h=r.unit==="%"?100:v,m=Math.min(h,f.value[1],Math.max(f.value[0],r.modelValue)),x=(r.reverse!==!0?1:-1)*(r.horizontal===!0?1:n.lang.rtl===!0?-1:1)*(r.unit==="%"?v===0?0:100/v:1),i.value.classList.add("q-splitter--active");return}if(E.isFinal===!0){w!==r.modelValue&&t("update:modelValue",w),i.value.classList.remove("q-splitter--active");return}const M=m+x*(E.direction===g?-1:1)*E.distance[r.horizontal===!0?"y":"x"];w=Math.min(h,f.value[1],Math.max(f.value[0],M)),o[u.value].value.style[l.value]=c(w),r.emitImmediately===!0&&r.modelValue!==w&&t("update:modelValue",w)}const y=lt(()=>[[Sy,S,void 0,{[r.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function C(E,M){E<M[0]?t("update:modelValue",M[0]):E>M[1]&&t("update:modelValue",M[1])}return za(()=>r.modelValue,E=>{C(E,f.value)}),za(()=>r.limits,()=>{yo(()=>{C(r.modelValue,f.value)})}),()=>{const E=[Pt("div",{ref:o.before,class:["q-splitter__panel q-splitter__before"+(r.reverse===!0?" col":""),r.beforeClass],style:p.value.before},On(e.before)),Pt("div",{class:["q-splitter__separator",r.separatorClass],style:r.separatorStyle,"aria-disabled":r.disable===!0?"true":void 0},[Sh("div",{class:"q-splitter__separator-area absolute-full"},On(e.separator),"sep",r.disable!==!0,()=>y.value)]),Pt("div",{ref:o.after,class:["q-splitter__panel q-splitter__after"+(r.reverse===!0?"":" col"),r.afterClass],style:p.value.after},On(e.after))];return Pt("div",{class:s.value,ref:i},xh(e.default,E))}}}),Jo=on({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(r,{slots:e}){const t=lt(()=>`q-card__section q-card__section--${r.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>Pt(r.tag,{class:t.value},On(e.default))}}),Rc=on({name:"QCard",props:{...Ws,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(r,{slots:e}){const{proxy:{$q:t}}=Nn(),n=Ks(r,t),a=lt(()=>"q-card"+(n.value===!0?" q-card--dark q-dark":"")+(r.bordered===!0?" q-card--bordered":"")+(r.square===!0?" q-card--square no-border-radius":"")+(r.flat===!0?" q-card--flat no-shadow":""));return()=>Pt(r.tag,{class:a.value},On(e.default))}}),Ty=on({name:"QAvatar",props:{...Rp,fontSize:String,color:String,textColor:String,icon:String,square:Boolean,rounded:Boolean},setup(r,{slots:e}){const t=Ip(r),n=lt(()=>"q-avatar"+(r.color?` bg-${r.color}`:"")+(r.textColor?` text-${r.textColor} q-chip--colored`:"")+(r.square===!0?" q-avatar--square":r.rounded===!0?" rounded-borders":"")),a=lt(()=>r.fontSize?{fontSize:r.fontSize}:null);return()=>{const i=r.icon!==void 0?[Pt(po,{name:r.icon})]:void 0;return Pt("div",{class:n.value,style:t.value},[Pt("div",{class:"q-avatar__content row flex-center overflow-hidden",style:a.value},Bp(e.default,i))])}}}),Ey=on({name:"QCardActions",props:{...Fp,vertical:Boolean},setup(r,{slots:e}){const t=zp(r),n=lt(()=>`q-card__actions ${t.value} q-card__actions--${r.vertical===!0?"vert column":"horiz row"}`);return()=>Pt("div",{class:n.value},On(e.default))}});function vr(r){return vr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vr(r)}function kf(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}function Ic(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function Af(r,e,t){return e&&Ic(r.prototype,e),t&&Ic(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}function Oh(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}function cn(r,e){return Py(r)||ky(r,e)||Lh(r,e)||Ay()}function Py(r){if(Array.isArray(r))return r}function ky(r,e){var t=r==null?null:typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(t!=null){var n=[],a=!0,i=!1,o,s;try{for(t=t.call(r);!(a=(o=t.next()).done)&&(n.push(o.value),!(e&&n.length===e));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw s}}return n}}function Lh(r,e){if(!!r){if(typeof r=="string")return Bc(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);if(t==="Object"&&r.constructor&&(t=r.constructor.name),t==="Map"||t==="Set")return Array.from(r);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Bc(r,e)}}function Bc(r,e){(e==null||e>r.length)&&(e=r.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=r[t];return n}function Ay(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function My(r,e){var t=typeof Symbol<"u"&&r[Symbol.iterator]||r["@@iterator"];if(!t){if(Array.isArray(r)||(t=Lh(r))||e&&r&&typeof r.length=="number"){t&&(r=t);var n=0,a=function(){};return{s:a,n:function(){return n>=r.length?{done:!0}:{done:!1,value:r[n++]}},e:function(l){throw l},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){t=t.call(r)},n:function(){var l=t.next();return i=l.done,l},e:function(l){o=!0,s=l},f:function(){try{!i&&t.return!=null&&t.return()}finally{if(o)throw s}}}}var dr=typeof window>"u"?null:window,Fc=dr?dr.navigator:null;dr&&dr.document;var Dy=vr(""),Nh=vr({}),Oy=vr(function(){}),Ly=typeof HTMLElement>"u"?"undefined":vr(HTMLElement),Oo=function(e){return e&&e.instanceString&&tr(e.instanceString)?e.instanceString():null},Ze=function(e){return e!=null&&vr(e)==Dy},tr=function(e){return e!=null&&vr(e)===Oy},Vt=function(e){return!Qr(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},Tt=function(e){return e!=null&&vr(e)===Nh&&!Vt(e)&&e.constructor===Object},Ny=function(e){return e!=null&&vr(e)===Nh},Ve=function(e){return e!=null&&vr(e)===vr(1)&&!isNaN(e)},Ry=function(e){return Ve(e)&&Math.floor(e)===e},Ms=function(e){if(Ly!=="undefined")return e!=null&&e instanceof HTMLElement},Qr=function(e){return Lo(e)||Rh(e)},Lo=function(e){return Oo(e)==="collection"&&e._private.single},Rh=function(e){return Oo(e)==="collection"&&!e._private.single},Mf=function(e){return Oo(e)==="core"},Ih=function(e){return Oo(e)==="stylesheet"},Iy=function(e){return Oo(e)==="event"},ga=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},By=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},Fy=function(e){return Tt(e)&&Ve(e.x1)&&Ve(e.x2)&&Ve(e.y1)&&Ve(e.y2)},zy=function(e){return Ny(e)&&tr(e.then)},Gy=function(){return Fc&&Fc.userAgent.match(/msie|trident|edge/i)},bo=function(e,t){t||(t=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var i=[],o=0;o<arguments.length;o++)i.push(arguments[o]);return i.join("$")});var n=function a(){var i=this,o=arguments,s,l=t.apply(i,o),u=a.cache;return(s=u[l])||(s=u[l]=e.apply(i,o)),s};return n.cache={},n},Df=bo(function(r){return r.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),js=bo(function(r){return r.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Bh=bo(function(r,e){return r+e[0].toUpperCase()+e.substring(1)},function(r,e){return r+"$"+e}),zc=function(e){return ga(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},hr="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",Vy="rgb[a]?\\(("+hr+"[%]?)\\s*,\\s*("+hr+"[%]?)\\s*,\\s*("+hr+"[%]?)(?:\\s*,\\s*("+hr+"))?\\)",$y="rgb[a]?\\((?:"+hr+"[%]?)\\s*,\\s*(?:"+hr+"[%]?)\\s*,\\s*(?:"+hr+"[%]?)(?:\\s*,\\s*(?:"+hr+"))?\\)",qy="hsl[a]?\\(("+hr+")\\s*,\\s*("+hr+"[%])\\s*,\\s*("+hr+"[%])(?:\\s*,\\s*("+hr+"))?\\)",Hy="hsl[a]?\\((?:"+hr+")\\s*,\\s*(?:"+hr+"[%])\\s*,\\s*(?:"+hr+"[%])(?:\\s*,\\s*(?:"+hr+"))?\\)",Uy="\\#[0-9a-fA-F]{3}",Wy="\\#[0-9a-fA-F]{6}",Fh=function(e,t){return e<t?-1:e>t?1:0},Ky=function(e,t){return-1*Fh(e,t)},rt=Object.assign!=null?Object.assign.bind(Object):function(r){for(var e=arguments,t=1;t<e.length;t++){var n=e[t];if(n!=null)for(var a=Object.keys(n),i=0;i<a.length;i++){var o=a[i];r[o]=n[o]}}return r},jy=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var t=e.length===4,n,a,i,o=16;return t?(n=parseInt(e[1]+e[1],o),a=parseInt(e[2]+e[2],o),i=parseInt(e[3]+e[3],o)):(n=parseInt(e[1]+e[2],o),a=parseInt(e[3]+e[4],o),i=parseInt(e[5]+e[6],o)),[n,a,i]}},Yy=function(e){var t,n,a,i,o,s,l,u;function f(h,m,x){return x<0&&(x+=1),x>1&&(x-=1),x<1/6?h+(m-h)*6*x:x<1/2?m:x<2/3?h+(m-h)*(2/3-x)*6:h}var c=new RegExp("^"+qy+"$").exec(e);if(c){if(n=parseInt(c[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,a=parseFloat(c[2]),a<0||a>100||(a=a/100,i=parseFloat(c[3]),i<0||i>100)||(i=i/100,o=c[4],o!==void 0&&(o=parseFloat(o),o<0||o>1)))return;if(a===0)s=l=u=Math.round(i*255);else{var p=i<.5?i*(1+a):i+a-i*a,g=2*i-p;s=Math.round(255*f(g,p,n+1/3)),l=Math.round(255*f(g,p,n)),u=Math.round(255*f(g,p,n-1/3))}t=[s,l,u,o]}return t},Xy=function(e){var t,n=new RegExp("^"+Vy+"$").exec(e);if(n){t=[];for(var a=[],i=1;i<=3;i++){var o=n[i];if(o[o.length-1]==="%"&&(a[i]=!0),o=parseFloat(o),a[i]&&(o=o/100*255),o<0||o>255)return;t.push(Math.floor(o))}var s=a[1]||a[2]||a[3],l=a[1]&&a[2]&&a[3];if(s&&!l)return;var u=n[4];if(u!==void 0){if(u=parseFloat(u),u<0||u>1)return;t.push(u)}}return t},Qy=function(e){return Jy[e.toLowerCase()]},Zy=function(e){return(Vt(e)?e:null)||Qy(e)||jy(e)||Xy(e)||Yy(e)},Jy={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},zh=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Tt(o))throw Error("Tried to set map with object key");i<n.length-1?(t[o]==null&&(t[o]={}),t=t[o]):t[o]=e.value}},Gh=function(e){for(var t=e.map,n=e.keys,a=n.length,i=0;i<a;i++){var o=n[i];if(Tt(o))throw Error("Tried to get map with object key");if(t=t[o],t==null)return t}return t};function em(r){var e=typeof r;return r!=null&&(e=="object"||e=="function")}var $a=em,so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function tm(r,e){return e={exports:{}},r(e,e.exports),e.exports}var rm=typeof so=="object"&&so&&so.Object===Object&&so,nm=rm,am=typeof self=="object"&&self&&self.Object===Object&&self,im=nm||am||Function("return this")(),Ys=im,om=function(){return Ys.Date.now()},Ol=om,sm=/\s/;function um(r){for(var e=r.length;e--&&sm.test(r.charAt(e)););return e}var lm=um,fm=/^\s+/;function cm(r){return r&&r.slice(0,lm(r)+1).replace(fm,"")}var dm=cm,hm=Ys.Symbol,Ti=hm,Vh=Object.prototype,vm=Vh.hasOwnProperty,gm=Vh.toString,Ji=Ti?Ti.toStringTag:void 0;function pm(r){var e=vm.call(r,Ji),t=r[Ji];try{r[Ji]=void 0;var n=!0}catch{}var a=gm.call(r);return n&&(e?r[Ji]=t:delete r[Ji]),a}var ym=pm,mm=Object.prototype,bm=mm.toString;function wm(r){return bm.call(r)}var xm=wm,Cm="[object Null]",Sm="[object Undefined]",Gc=Ti?Ti.toStringTag:void 0;function _m(r){return r==null?r===void 0?Sm:Cm:Gc&&Gc in Object(r)?ym(r):xm(r)}var $h=_m;function Tm(r){return r!=null&&typeof r=="object"}var Em=Tm,Pm="[object Symbol]";function km(r){return typeof r=="symbol"||Em(r)&&$h(r)==Pm}var No=km,Vc=0/0,Am=/^[-+]0x[0-9a-f]+$/i,Mm=/^0b[01]+$/i,Dm=/^0o[0-7]+$/i,Om=parseInt;function Lm(r){if(typeof r=="number")return r;if(No(r))return Vc;if($a(r)){var e=typeof r.valueOf=="function"?r.valueOf():r;r=$a(e)?e+"":e}if(typeof r!="string")return r===0?r:+r;r=dm(r);var t=Mm.test(r);return t||Dm.test(r)?Om(r.slice(2),t?2:8):Am.test(r)?Vc:+r}var $c=Lm,Nm="Expected a function",Rm=Math.max,Im=Math.min;function Bm(r,e,t){var n,a,i,o,s,l,u=0,f=!1,c=!1,p=!0;if(typeof r!="function")throw new TypeError(Nm);e=$c(e)||0,$a(t)&&(f=!!t.leading,c="maxWait"in t,i=c?Rm($c(t.maxWait)||0,e):i,p="trailing"in t?!!t.trailing:p);function g(M){var v=n,T=a;return n=a=void 0,u=M,o=r.apply(T,v),o}function h(M){return u=M,s=setTimeout(w,e),f?g(M):o}function m(M){var v=M-l,T=M-u,k=e-v;return c?Im(k,i-T):k}function x(M){var v=M-l,T=M-u;return l===void 0||v>=e||v<0||c&&T>=i}function w(){var M=Ol();if(x(M))return S(M);s=setTimeout(w,m(M))}function S(M){return s=void 0,p&&n?g(M):(n=a=void 0,o)}function y(){s!==void 0&&clearTimeout(s),u=0,n=l=a=s=void 0}function C(){return s===void 0?o:S(Ol())}function E(){var M=Ol(),v=x(M);if(n=arguments,a=this,l=M,v){if(s===void 0)return h(l);if(c)return clearTimeout(s),s=setTimeout(w,e),g(l)}return s===void 0&&(s=setTimeout(w,e)),o}return E.cancel=y,E.flush=C,E}var Xs=Bm,Ll=dr?dr.performance:null,qh=Ll&&Ll.now?function(){return Ll.now()}:function(){return Date.now()},Fm=function(){if(dr){if(dr.requestAnimationFrame)return function(r){dr.requestAnimationFrame(r)};if(dr.mozRequestAnimationFrame)return function(r){dr.mozRequestAnimationFrame(r)};if(dr.webkitRequestAnimationFrame)return function(r){dr.webkitRequestAnimationFrame(r)};if(dr.msRequestAnimationFrame)return function(r){dr.msRequestAnimationFrame(r)}}return function(r){r&&setTimeout(function(){r(qh())},1e3/60)}}(),Ds=function(e){return Fm(e)},Kn=qh,gi=9261,Hh=65599,uo=5381,Uh=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gi,n=t,a;a=e.next(),!a.done;)n=n*Hh+a.value|0;return n},wo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:gi;return t*Hh+e|0},xo=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:uo;return(t<<5)+t+e|0},zm=function(e,t){return e*2097152+t},ua=function(e){return e[0]*2097152+e[1]},es=function(e,t){return[wo(e[0],t[0]),xo(e[1],t[1])]},Gm=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e[a++]:n.done=!0,n}};return Uh(o,t)},qa=function(e,t){var n={value:0,done:!1},a=0,i=e.length,o={next:function(){return a<i?n.value=e.charCodeAt(a++):n.done=!0,n}};return Uh(o,t)},Wh=function(){return Vm(arguments)},Vm=function(e){for(var t,n=0;n<e.length;n++){var a=e[n];n===0?t=qa(a):t=qa(a,t)}return t},qc=!0,$m=console.warn!=null,qm=console.trace!=null,Of=Number.MAX_SAFE_INTEGER||9007199254740991,Kh=function(){return!0},Os=function(){return!1},Hc=function(){return 0},Lf=function(){},nr=function(e){throw new Error(e)},jh=function(e){if(e!==void 0)qc=!!e;else return qc},Dt=function(e){!jh()||($m?console.warn(e):(console.log(e),qm&&console.trace()))},Hm=function(e){return rt({},e)},An=function(e){return e==null?e:Vt(e)?e.slice():Tt(e)?Hm(e):e},Um=function(e){return e.slice()},Yh=function(e,t){for(t=e="";e++<36;t+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return t},Wm={},Xh=function(){return Wm},kr=function(e){var t=Object.keys(e);return function(n){for(var a={},i=0;i<t.length;i++){var o=t[i],s=n==null?void 0:n[o];a[o]=s===void 0?e[o]:s}return a}},pa=function(e,t,n){for(var a=e.length-1;a>=0&&!(e[a]===t&&(e.splice(a,1),n));a--);},Nf=function(e){e.splice(0,e.length)},Km=function(e,t){for(var n=0;n<t.length;n++){var a=t[n];e.push(a)}},hn=function(e,t,n){return n&&(t=Bh(n,t)),e[t]},fa=function(e,t,n,a){n&&(t=Bh(n,t)),e[t]=a},jm=function(){function r(){kf(this,r),this._obj={}}return Af(r,[{key:"set",value:function(t,n){return this._obj[t]=n,this}},{key:"delete",value:function(t){return this._obj[t]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(t){return this._obj[t]!==void 0}},{key:"get",value:function(t){return this._obj[t]}}]),r}(),Mn=typeof Map<"u"?Map:jm,Ym="undefined",Xm=function(){function r(e){if(kf(this,r),this._obj=Object.create(null),this.size=0,e!=null){var t;e.instanceString!=null&&e.instanceString()===this.instanceString()?t=e.toArray():t=e;for(var n=0;n<t.length;n++)this.add(t[n])}}return Af(r,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(t){var n=this._obj;n[t]!==1&&(n[t]=1,this.size++)}},{key:"delete",value:function(t){var n=this._obj;n[t]===1&&(n[t]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(t){return this._obj[t]===1}},{key:"toArray",value:function(){var t=this;return Object.keys(this._obj).filter(function(n){return t.has(n)})}},{key:"forEach",value:function(t,n){return this.toArray().forEach(t,n)}}]),r}(),Oi=(typeof Set>"u"?"undefined":vr(Set))!==Ym?Set:Xm,Qs=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||t===void 0||!Mf(e)){nr("An element must have a core reference and parameters set");return}var a=t.group;if(a==null&&(t.data&&t.data.source!=null&&t.data.target!=null?a="edges":a="nodes"),a!=="nodes"&&a!=="edges"){nr("An element must be of type `nodes` or `edges`; you specified `"+a+"`");return}this.length=1,this[0]=this;var i=this._private={cy:e,single:!0,data:t.data||{},position:t.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:a,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!t.selected,selectable:t.selectable===void 0?!0:!!t.selectable,locked:!!t.locked,grabbed:!1,grabbable:t.grabbable===void 0?!0:!!t.grabbable,pannable:t.pannable===void 0?a==="edges":!!t.pannable,active:!1,classes:new Oi,animation:{current:[],queue:[]},rscratch:{},scratch:t.scratch||{},edges:[],children:[],parent:t.parent&&t.parent.isNode()?t.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(i.position.x==null&&(i.position.x=0),i.position.y==null&&(i.position.y=0),t.renderedPosition){var o=t.renderedPosition,s=e.pan(),l=e.zoom();i.position={x:(o.x-s.x)/l,y:(o.y-s.y)/l}}var u=[];Vt(t.classes)?u=t.classes:Ze(t.classes)&&(u=t.classes.split(/\s+/));for(var f=0,c=u.length;f<c;f++){var p=u[f];!p||p===""||i.classes.add(p)}this.createEmitter();var g=t.style||t.css;g&&(Dt("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(g)),(n===void 0||n)&&this.restore()},Uc=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,a,i){var o;Tt(n)&&!Qr(n)&&(o=n,n=o.roots||o.root,a=o.visit,i=o.directed),i=arguments.length===2&&!tr(a)?a:i,a=tr(a)?a:function(){};for(var s=this._private.cy,l=n=Ze(n)?this.filter(n):n,u=[],f=[],c={},p={},g={},h=0,m,x=this.byGroup(),w=x.nodes,S=x.edges,y=0;y<l.length;y++){var C=l[y],E=C.id();C.isNode()&&(u.unshift(C),e.bfs&&(g[E]=!0,f.push(C)),p[E]=0)}for(var M=function(){var q=e.bfs?u.shift():u.pop(),B=q.id();if(e.dfs){if(g[B])return"continue";g[B]=!0,f.push(q)}var j=p[B],Y=c[B],U=Y!=null?Y.source():null,X=Y!=null?Y.target():null,K=Y==null?void 0:q.same(U)?X[0]:U[0],P=void 0;if(P=a(q,Y,K,h++,j),P===!0)return m=q,"break";if(P===!1)return"break";for(var D=q.connectedEdges().filter(function(J){return(!i||J.source().same(q))&&S.has(J)}),L=0;L<D.length;L++){var F=D[L],W=F.connectedNodes().filter(function(J){return!J.same(q)&&w.has(J)}),Z=W.id();W.length!==0&&!g[Z]&&(W=W[0],u.push(W),e.bfs&&(g[Z]=!0,f.push(W)),c[Z]=F,p[Z]=p[B]+1)}};u.length!==0;){var v=M();if(v!=="continue"&&v==="break")break}for(var T=s.collection(),k=0;k<f.length;k++){var N=f[k],O=c[N.id()];O!=null&&T.push(O),T.push(N)}return{path:s.collection(T),found:s.collection(m)}}},Co={breadthFirstSearch:Uc({bfs:!0}),depthFirstSearch:Uc({dfs:!0})};Co.bfs=Co.breadthFirstSearch;Co.dfs=Co.depthFirstSearch;var Qm=tm(function(r,e){(function(){var t,n,a,i,o,s,l,u,f,c,p,g,h,m,x;a=Math.floor,c=Math.min,n=function(w,S){return w<S?-1:w>S?1:0},f=function(w,S,y,C,E){var M;if(y==null&&(y=0),E==null&&(E=n),y<0)throw new Error("lo must be non-negative");for(C==null&&(C=w.length);y<C;)M=a((y+C)/2),E(S,w[M])<0?C=M:y=M+1;return[].splice.apply(w,[y,y-y].concat(S)),S},s=function(w,S,y){return y==null&&(y=n),w.push(S),m(w,0,w.length-1,y)},o=function(w,S){var y,C;return S==null&&(S=n),y=w.pop(),w.length?(C=w[0],w[0]=y,x(w,0,S)):C=y,C},u=function(w,S,y){var C;return y==null&&(y=n),C=w[0],w[0]=S,x(w,0,y),C},l=function(w,S,y){var C;return y==null&&(y=n),w.length&&y(w[0],S)<0&&(C=[w[0],S],S=C[0],w[0]=C[1],x(w,0,y)),S},i=function(w,S){var y,C,E,M,v,T;for(S==null&&(S=n),M=function(){T=[];for(var k=0,N=a(w.length/2);0<=N?k<N:k>N;0<=N?k++:k--)T.push(k);return T}.apply(this).reverse(),v=[],C=0,E=M.length;C<E;C++)y=M[C],v.push(x(w,y,S));return v},h=function(w,S,y){var C;if(y==null&&(y=n),C=w.indexOf(S),C!==-1)return m(w,0,C,y),x(w,C,y)},p=function(w,S,y){var C,E,M,v,T;if(y==null&&(y=n),E=w.slice(0,S),!E.length)return E;for(i(E,y),T=w.slice(S),M=0,v=T.length;M<v;M++)C=T[M],l(E,C,y);return E.sort(y).reverse()},g=function(w,S,y){var C,E,M,v,T,k,N,O,I;if(y==null&&(y=n),S*10<=w.length){if(M=w.slice(0,S).sort(y),!M.length)return M;for(E=M[M.length-1],N=w.slice(S),v=0,k=N.length;v<k;v++)C=N[v],y(C,E)<0&&(f(M,C,0,null,y),M.pop(),E=M[M.length-1]);return M}for(i(w,y),I=[],T=0,O=c(S,w.length);0<=O?T<O:T>O;0<=O?++T:--T)I.push(o(w,y));return I},m=function(w,S,y,C){var E,M,v;for(C==null&&(C=n),E=w[y];y>S;){if(v=y-1>>1,M=w[v],C(E,M)<0){w[y]=M,y=v;continue}break}return w[y]=E},x=function(w,S,y){var C,E,M,v,T;for(y==null&&(y=n),E=w.length,T=S,M=w[S],C=2*S+1;C<E;)v=C+1,v<E&&!(y(w[C],w[v])<0)&&(C=v),w[S]=w[C],S=C,C=2*S+1;return w[S]=M,m(w,T,S,y)},t=function(){w.push=s,w.pop=o,w.replace=u,w.pushpop=l,w.heapify=i,w.updateItem=h,w.nlargest=p,w.nsmallest=g;function w(S){this.cmp=S??n,this.nodes=[]}return w.prototype.push=function(S){return s(this.nodes,S,this.cmp)},w.prototype.pop=function(){return o(this.nodes,this.cmp)},w.prototype.peek=function(){return this.nodes[0]},w.prototype.contains=function(S){return this.nodes.indexOf(S)!==-1},w.prototype.replace=function(S){return u(this.nodes,S,this.cmp)},w.prototype.pushpop=function(S){return l(this.nodes,S,this.cmp)},w.prototype.heapify=function(){return i(this.nodes,this.cmp)},w.prototype.updateItem=function(S){return h(this.nodes,S,this.cmp)},w.prototype.clear=function(){return this.nodes=[]},w.prototype.empty=function(){return this.nodes.length===0},w.prototype.size=function(){return this.nodes.length},w.prototype.clone=function(){var S;return S=new w,S.nodes=this.nodes.slice(0),S},w.prototype.toArray=function(){return this.nodes.slice(0)},w.prototype.insert=w.prototype.push,w.prototype.top=w.prototype.peek,w.prototype.front=w.prototype.peek,w.prototype.has=w.prototype.contains,w.prototype.copy=w.prototype.clone,w}(),function(w,S){return r.exports=S()}(this,function(){return t})}).call(so)}),Ro=Qm,Zm=kr({root:null,weight:function(e){return 1},directed:!1}),Jm={dijkstra:function(e){if(!Tt(e)){var t=arguments;e={root:t[0],weight:t[1],directed:t[2]}}var n=Zm(e),a=n.root,i=n.weight,o=n.directed,s=this,l=i,u=Ze(a)?this.filter(a)[0]:a[0],f={},c={},p={},g=this.byGroup(),h=g.nodes,m=g.edges;m.unmergeBy(function(j){return j.isLoop()});for(var x=function(Y){return f[Y.id()]},w=function(Y,U){f[Y.id()]=U,S.updateItem(Y)},S=new Ro(function(j,Y){return x(j)-x(Y)}),y=0;y<h.length;y++){var C=h[y];f[C.id()]=C.same(u)?0:1/0,S.push(C)}for(var E=function(Y,U){for(var X=(o?Y.edgesTo(U):Y.edgesWith(U)).intersect(m),K=1/0,P,D=0;D<X.length;D++){var L=X[D],F=l(L);(F<K||!P)&&(K=F,P=L)}return{edge:P,dist:K}};S.size()>0;){var M=S.pop(),v=x(M),T=M.id();if(p[T]=v,v!==1/0)for(var k=M.neighborhood().intersect(h),N=0;N<k.length;N++){var O=k[N],I=O.id(),q=E(M,O),B=v+q.dist;B<x(O)&&(w(O,B),c[I]={node:M,edge:q.edge})}}return{distanceTo:function(Y){var U=Ze(Y)?h.filter(Y)[0]:Y[0];return p[U.id()]},pathTo:function(Y){var U=Ze(Y)?h.filter(Y)[0]:Y[0],X=[],K=U,P=K.id();if(U.length>0)for(X.unshift(U);c[P];){var D=c[P];X.unshift(D.edge),X.unshift(D.node),K=D.node,P=K.id()}return s.spawn(X)}}}},e0={kruskal:function(e){e=e||function(y){return 1};for(var t=this.byGroup(),n=t.nodes,a=t.edges,i=n.length,o=new Array(i),s=n,l=function(C){for(var E=0;E<o.length;E++){var M=o[E];if(M.has(C))return E}},u=0;u<i;u++)o[u]=this.spawn(n[u]);for(var f=a.sort(function(y,C){return e(y)-e(C)}),c=0;c<f.length;c++){var p=f[c],g=p.source()[0],h=p.target()[0],m=l(g),x=l(h),w=o[m],S=o[x];m!==x&&(s.merge(p),w.merge(S),o.splice(x,1))}return s}},t0=kr({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),r0={aStar:function(e){var t=this.cy(),n=t0(e),a=n.root,i=n.goal,o=n.heuristic,s=n.directed,l=n.weight;a=t.collection(a)[0],i=t.collection(i)[0];var u=a.id(),f=i.id(),c={},p={},g={},h=new Ro(function(P,D){return p[P.id()]-p[D.id()]}),m=new Oi,x={},w={},S=function(D,L){h.push(D),m.add(L)},y,C,E=function(){y=h.pop(),C=y.id(),m.delete(C)},M=function(D){return m.has(D)};S(a,u),c[u]=0,p[u]=o(a);for(var v=0;h.size()>0;){if(E(),v++,C===f){for(var T=[],k=i,N=f,O=w[N];T.unshift(k),O!=null&&T.unshift(O),k=x[N],k!=null;)N=k.id(),O=w[N];return{found:!0,distance:c[C],path:this.spawn(T),steps:v}}g[C]=!0;for(var I=y._private.edges,q=0;q<I.length;q++){var B=I[q];if(!!this.hasElementWithId(B.id())&&!(s&&B.data("source")!==C)){var j=B.source(),Y=B.target(),U=j.id()!==C?j:Y,X=U.id();if(!!this.hasElementWithId(X)&&!g[X]){var K=c[C]+l(B);if(!M(X)){c[X]=K,p[X]=K+o(U),S(U,X),x[X]=y,w[X]=B;continue}K<c[X]&&(c[X]=K,p[X]=K+o(U),x[X]=y,w[X]=B)}}}}return{found:!1,distance:void 0,path:void 0,steps:v}}},n0=kr({weight:function(e){return 1},directed:!1}),a0={floydWarshall:function(e){for(var t=this.cy(),n=n0(e),a=n.weight,i=n.directed,o=a,s=this.byGroup(),l=s.nodes,u=s.edges,f=l.length,c=f*f,p=function(F){return l.indexOf(F)},g=function(F){return l[F]},h=new Array(c),m=0;m<c;m++){var x=m%f,w=(m-x)/f;w===x?h[m]=0:h[m]=1/0}for(var S=new Array(c),y=new Array(c),C=0;C<u.length;C++){var E=u[C],M=E.source()[0],v=E.target()[0];if(M!==v){var T=p(M),k=p(v),N=T*f+k,O=o(E);if(h[N]>O&&(h[N]=O,S[N]=k,y[N]=E),!i){var I=k*f+T;!i&&h[I]>O&&(h[I]=O,S[I]=T,y[I]=E)}}}for(var q=0;q<f;q++)for(var B=0;B<f;B++)for(var j=B*f+q,Y=0;Y<f;Y++){var U=B*f+Y,X=q*f+Y;h[j]+h[X]<h[U]&&(h[U]=h[j]+h[X],S[U]=S[j])}var K=function(F){return(Ze(F)?t.filter(F):F)[0]},P=function(F){return p(K(F))},D={distance:function(F,W){var Z=P(F),J=P(W);return h[Z*f+J]},path:function(F,W){var Z=P(F),J=P(W),Q=g(Z);if(Z===J)return Q.collection();if(S[Z*f+J]==null)return t.collection();var oe=t.collection(),fe=Z,ce;for(oe.merge(Q);Z!==J;)fe=Z,Z=S[Z*f+J],ce=y[fe*f+Z],oe.merge(ce),oe.merge(g(Z));return oe}};return D}},i0=kr({weight:function(e){return 1},directed:!1,root:null}),o0={bellmanFord:function(e){var t=this,n=i0(e),a=n.weight,i=n.directed,o=n.root,s=a,l=this,u=this.cy(),f=this.byGroup(),c=f.edges,p=f.nodes,g=p.length,h=new Mn,m=!1,x=[];o=u.collection(o)[0],c.unmergeBy(function(we){return we.isLoop()});for(var w=c.length,S=function(xe){var Be=h.get(xe.id());return Be||(Be={},h.set(xe.id(),Be)),Be},y=function(xe){return(Ze(xe)?u.$(xe):xe)[0]},C=function(xe){return S(y(xe)).dist},E=function(xe){for(var Be=arguments.length>1&&arguments[1]!==void 0?arguments[1]:o,Ue=y(xe),Ee=[],Me=Ue;;){if(Me==null)return t.spawn();var ke=S(Me),de=ke.edge,R=ke.pred;if(Ee.unshift(Me[0]),Me.same(Be)&&Ee.length>0)break;de!=null&&Ee.unshift(de),Me=R}return l.spawn(Ee)},M=0;M<g;M++){var v=p[M],T=S(v);v.same(o)?T.dist=0:T.dist=1/0,T.pred=null,T.edge=null}for(var k=!1,N=function(xe,Be,Ue,Ee,Me,ke){var de=Ee.dist+ke;de<Me.dist&&!Ue.same(Ee.edge)&&(Me.dist=de,Me.pred=xe,Me.edge=Ue,k=!0)},O=1;O<g;O++){k=!1;for(var I=0;I<w;I++){var q=c[I],B=q.source(),j=q.target(),Y=s(q),U=S(B),X=S(j);N(B,j,q,U,X,Y),i||N(j,B,q,X,U,Y)}if(!k)break}if(k)for(var K=[],P=0;P<w;P++){var D=c[P],L=D.source(),F=D.target(),W=s(D),Z=S(L).dist,J=S(F).dist;if(Z+W<J||!i&&J+W<Z)if(m||(Dt("Graph contains a negative weight cycle for Bellman-Ford"),m=!0),e.findNegativeWeightCycles!==!1){var Q=[];Z+W<J&&Q.push(L),!i&&J+W<Z&&Q.push(F);for(var oe=Q.length,fe=0;fe<oe;fe++){var ce=Q[fe],Ce=[ce];Ce.push(S(ce).edge);for(var Le=S(ce).pred;Ce.indexOf(Le)===-1;)Ce.push(Le),Ce.push(S(Le).edge),Le=S(Le).pred;Ce=Ce.slice(Ce.indexOf(Le));for(var Re=Ce[0].id(),De=0,me=2;me<Ce.length;me+=2)Ce[me].id()<Re&&(Re=Ce[me].id(),De=me);Ce=Ce.slice(De).concat(Ce.slice(0,De)),Ce.push(Ce[0]);var _e=Ce.map(function(we){return we.id()}).join(",");K.indexOf(_e)===-1&&(x.push(l.spawn(Ce)),K.push(_e))}}else break}return{distanceTo:C,pathTo:E,hasNegativeWeightCycle:m,negativeWeightCycles:x}}},s0=Math.sqrt(2),u0=function(e,t,n){n.length===0&&nr("Karger-Stein must be run on a connected (sub)graph");for(var a=n[e],i=a[1],o=a[2],s=t[i],l=t[o],u=n,f=u.length-1;f>=0;f--){var c=u[f],p=c[1],g=c[2];(t[p]===s&&t[g]===l||t[p]===l&&t[g]===s)&&u.splice(f,1)}for(var h=0;h<u.length;h++){var m=u[h];m[1]===l?(u[h]=m.slice(),u[h][1]=s):m[2]===l&&(u[h]=m.slice(),u[h][2]=s)}for(var x=0;x<t.length;x++)t[x]===l&&(t[x]=s);return u},Nl=function(e,t,n,a){for(;n>a;){var i=Math.floor(Math.random()*t.length);t=u0(i,e,t),n--}return t},l0={kargerStein:function(){var e=this,t=this.byGroup(),n=t.nodes,a=t.edges;a.unmergeBy(function(X){return X.isLoop()});var i=n.length,o=a.length,s=Math.ceil(Math.pow(Math.log(i)/Math.LN2,2)),l=Math.floor(i/s0);if(i<2){nr("At least 2 nodes are required for Karger-Stein algorithm");return}for(var u=[],f=0;f<o;f++){var c=a[f];u.push([f,n.indexOf(c.source()),n.indexOf(c.target())])}for(var p=1/0,g=[],h=new Array(i),m=new Array(i),x=new Array(i),w=function(K,P){for(var D=0;D<i;D++)P[D]=K[D]},S=0;S<=s;S++){for(var y=0;y<i;y++)m[y]=y;var C=Nl(m,u.slice(),i,l),E=C.slice();w(m,x);var M=Nl(m,C,l,2),v=Nl(x,E,l,2);M.length<=v.length&&M.length<p?(p=M.length,g=M,w(m,h)):v.length<=M.length&&v.length<p&&(p=v.length,g=v,w(x,h))}for(var T=this.spawn(g.map(function(X){return a[X[0]]})),k=this.spawn(),N=this.spawn(),O=h[0],I=0;I<h.length;I++){var q=h[I],B=n[I];q===O?k.merge(B):N.merge(B)}var j=function(K){var P=e.spawn();return K.forEach(function(D){P.merge(D),D.connectedEdges().forEach(function(L){e.contains(L)&&!T.contains(L)&&P.merge(L)})}),P},Y=[j(k),j(N)],U={cut:T,components:Y,partition1:k,partition2:N};return U}},f0=function(e){return{x:e.x,y:e.y}},Zs=function(e,t,n){return{x:e.x*t+n.x,y:e.y*t+n.y}},Qh=function(e,t,n){return{x:(e.x-n.x)/t,y:(e.y-n.y)/t}},pi=function(e){return{x:e[0],y:e[1]}},c0=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.min(o,a))}return a},d0=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=-1/0,i=t;i<n;i++){var o=e[i];isFinite(o)&&(a=Math.max(o,a))}return a},h0=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=0,i=0,o=t;o<n;o++){var s=e[o];isFinite(s)&&(a+=s,i++)}return a/i},v0=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;a?e=e.slice(t,n):(n<e.length&&e.splice(n,e.length-n),t>0&&e.splice(0,t));for(var s=0,l=e.length-1;l>=0;l--){var u=e[l];o?isFinite(u)||(e[l]=-1/0,s++):e.splice(l,1)}i&&e.sort(function(p,g){return p-g});var f=e.length,c=Math.floor(f/2);return f%2!==0?e[c+1+s]:(e[c-1+s]+e[c+s])/2},g0=function(e){return Math.PI*e/180},ts=function(e,t){return Math.atan2(t,e)-Math.PI/2},Rf=Math.log2||function(r){return Math.log(r)/Math.log(2)},Zh=function(e){return e>0?1:e<0?-1:0},Ha=function(e,t){return Math.sqrt(Na(e,t))},Na=function(e,t){var n=t.x-e.x,a=t.y-e.y;return n*n+a*a},p0=function(e){for(var t=e.length,n=0,a=0;a<t;a++)n+=e[a];for(var i=0;i<t;i++)e[i]=e[i]/n;return e},wr=function(e,t,n,a){return(1-a)*(1-a)*e+2*(1-a)*a*t+a*a*n},xi=function(e,t,n,a){return{x:wr(e.x,t.x,n.x,a),y:wr(e.y,t.y,n.y,a)}},y0=function(e,t,n,a){var i={x:t.x-e.x,y:t.y-e.y},o=Ha(e,t),s={x:i.x/o,y:i.y/o};return n=n??0,a=a??n*o,{x:e.x+s.x*a,y:e.y+s.y*a}},So=function(e,t,n){return Math.max(e,Math.min(n,t))},Yr=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},m0=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},b0=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},w0=function(e,t,n){return{x1:e.x1+t,x2:e.x2+t,y1:e.y1+n,y2:e.y2+n,w:e.w,h:e.h}},Jh=function(e,t){e.x1=Math.min(e.x1,t.x1),e.x2=Math.max(e.x2,t.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,t.y1),e.y2=Math.max(e.y2,t.y2),e.h=e.y2-e.y1},x0=function(e,t,n){e.x1=Math.min(e.x1,t),e.x2=Math.max(e.x2,t),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},ys=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=t,e.x2+=t,e.y1-=t,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},ms=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,a,i,o;if(t.length===1)n=a=i=o=t[0];else if(t.length===2)n=i=t[0],o=a=t[1];else if(t.length===4){var s=cn(t,4);n=s[0],a=s[1],i=s[2],o=s[3]}return e.x1-=o,e.x2+=a,e.y1-=n,e.y2+=i,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},Wc=function(e,t){e.x1=t.x1,e.y1=t.y1,e.x2=t.x2,e.y2=t.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},If=function(e,t){return!(e.x1>t.x2||t.x1>e.x2||e.x2<t.x1||t.x2<e.x1||e.y2<t.y1||t.y2<e.y1||e.y1>t.y2||t.y1>e.y2)},Ei=function(e,t,n){return e.x1<=t&&t<=e.x2&&e.y1<=n&&n<=e.y2},C0=function(e,t){return Ei(e,t.x,t.y)},ev=function(e,t){return Ei(e,t.x1,t.y1)&&Ei(e,t.x2,t.y2)},tv=function(e,t,n,a,i,o,s){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",u=l==="auto"?Ua(i,o):l,f=i/2,c=o/2;u=Math.min(u,f,c);var p=u!==f,g=u!==c,h;if(p){var m=n-f+u-s,x=a-c-s,w=n+f-u+s,S=x;if(h=da(e,t,n,a,m,x,w,S,!1),h.length>0)return h}if(g){var y=n+f+s,C=a-c+u-s,E=y,M=a+c-u+s;if(h=da(e,t,n,a,y,C,E,M,!1),h.length>0)return h}if(p){var v=n-f+u-s,T=a+c+s,k=n+f-u+s,N=T;if(h=da(e,t,n,a,v,T,k,N,!1),h.length>0)return h}if(g){var O=n-f-s,I=a-c+u-s,q=O,B=a+c-u+s;if(h=da(e,t,n,a,O,I,q,B,!1),h.length>0)return h}var j;{var Y=n-f+u,U=a-c+u;if(j=lo(e,t,n,a,Y,U,u+s),j.length>0&&j[0]<=Y&&j[1]<=U)return[j[0],j[1]]}{var X=n+f-u,K=a-c+u;if(j=lo(e,t,n,a,X,K,u+s),j.length>0&&j[0]>=X&&j[1]<=K)return[j[0],j[1]]}{var P=n+f-u,D=a+c-u;if(j=lo(e,t,n,a,P,D,u+s),j.length>0&&j[0]>=P&&j[1]>=D)return[j[0],j[1]]}{var L=n-f+u,F=a+c-u;if(j=lo(e,t,n,a,L,F,u+s),j.length>0&&j[0]<=L&&j[1]>=F)return[j[0],j[1]]}return[]},S0=function(e,t,n,a,i,o,s){var l=s,u=Math.min(n,i),f=Math.max(n,i),c=Math.min(a,o),p=Math.max(a,o);return u-l<=e&&e<=f+l&&c-l<=t&&t<=p+l},_0=function(e,t,n,a,i,o,s,l,u){var f={x1:Math.min(n,s,i)-u,x2:Math.max(n,s,i)+u,y1:Math.min(a,l,o)-u,y2:Math.max(a,l,o)+u};return!(e<f.x1||e>f.x2||t<f.y1||t>f.y2)},T0=function(e,t,n,a){n-=a;var i=t*t-4*e*n;if(i<0)return[];var o=Math.sqrt(i),s=2*e,l=(-t+o)/s,u=(-t-o)/s;return[l,u]},E0=function(e,t,n,a,i){var o=1e-5;e===0&&(e=o),t/=e,n/=e,a/=e;var s,l,u,f,c,p,g,h;if(l=(3*n-t*t)/9,u=-(27*a)+t*(9*n-2*(t*t)),u/=54,s=l*l*l+u*u,i[1]=0,g=t/3,s>0){c=u+Math.sqrt(s),c=c<0?-Math.pow(-c,1/3):Math.pow(c,1/3),p=u-Math.sqrt(s),p=p<0?-Math.pow(-p,1/3):Math.pow(p,1/3),i[0]=-g+c+p,g+=(c+p)/2,i[4]=i[2]=-g,g=Math.sqrt(3)*(-p+c)/2,i[3]=g,i[5]=-g;return}if(i[5]=i[3]=0,s===0){h=u<0?-Math.pow(-u,1/3):Math.pow(u,1/3),i[0]=-g+2*h,i[4]=i[2]=-(h+g);return}l=-l,f=l*l*l,f=Math.acos(u/Math.sqrt(f)),h=2*Math.sqrt(l),i[0]=-g+h*Math.cos(f/3),i[2]=-g+h*Math.cos((f+2*Math.PI)/3),i[4]=-g+h*Math.cos((f+4*Math.PI)/3)},P0=function(e,t,n,a,i,o,s,l){var u=1*n*n-4*n*i+2*n*s+4*i*i-4*i*s+s*s+a*a-4*a*o+2*a*l+4*o*o-4*o*l+l*l,f=1*9*n*i-3*n*n-3*n*s-6*i*i+3*i*s+9*a*o-3*a*a-3*a*l-6*o*o+3*o*l,c=1*3*n*n-6*n*i+n*s-n*e+2*i*i+2*i*e-s*e+3*a*a-6*a*o+a*l-a*t+2*o*o+2*o*t-l*t,p=1*n*i-n*n+n*e-i*e+a*o-a*a+a*t-o*t,g=[];E0(u,f,c,p,g);for(var h=1e-7,m=[],x=0;x<6;x+=2)Math.abs(g[x+1])<h&&g[x]>=0&&g[x]<=1&&m.push(g[x]);m.push(1),m.push(0);for(var w=-1,S,y,C,E=0;E<m.length;E++)S=Math.pow(1-m[E],2)*n+2*(1-m[E])*m[E]*i+m[E]*m[E]*s,y=Math.pow(1-m[E],2)*a+2*(1-m[E])*m[E]*o+m[E]*m[E]*l,C=Math.pow(S-e,2)+Math.pow(y-t,2),w>=0?C<w&&(w=C):w=C;return w},k0=function(e,t,n,a,i,o){var s=[e-n,t-a],l=[i-n,o-a],u=l[0]*l[0]+l[1]*l[1],f=s[0]*s[0]+s[1]*s[1],c=s[0]*l[0]+s[1]*l[1],p=c*c/u;return c<0?f:p>u?(e-i)*(e-i)+(t-o)*(t-o):f-p},jr=function(e,t,n){for(var a,i,o,s,l,u=0,f=0;f<n.length/2;f++)if(a=n[f*2],i=n[f*2+1],f+1<n.length/2?(o=n[(f+1)*2],s=n[(f+1)*2+1]):(o=n[(f+1-n.length/2)*2],s=n[(f+1-n.length/2)*2+1]),!(a==e&&o==e))if(a>=e&&e>=o||a<=e&&e<=o)l=(e-a)/(o-a)*(s-i)+i,l>t&&u++;else continue;return u%2!==0},jn=function(e,t,n,a,i,o,s,l,u){var f=new Array(n.length),c;l[0]!=null?(c=Math.atan(l[1]/l[0]),l[0]<0?c=c+Math.PI/2:c=-c-Math.PI/2):c=l;for(var p=Math.cos(-c),g=Math.sin(-c),h=0;h<f.length/2;h++)f[h*2]=o/2*(n[h*2]*p-n[h*2+1]*g),f[h*2+1]=s/2*(n[h*2+1]*p+n[h*2]*g),f[h*2]+=a,f[h*2+1]+=i;var m;if(u>0){var x=Ns(f,-u);m=Ls(x)}else m=f;return jr(e,t,m)},A0=function(e,t,n,a,i,o,s,l){for(var u=new Array(n.length*2),f=0;f<l.length;f++){var c=l[f];u[f*4+0]=c.startX,u[f*4+1]=c.startY,u[f*4+2]=c.stopX,u[f*4+3]=c.stopY;var p=Math.pow(c.cx-e,2)+Math.pow(c.cy-t,2);if(p<=Math.pow(c.radius,2))return!0}return jr(e,t,u)},Ls=function(e){for(var t=new Array(e.length/2),n,a,i,o,s,l,u,f,c=0;c<e.length/4;c++){n=e[c*4],a=e[c*4+1],i=e[c*4+2],o=e[c*4+3],c<e.length/4-1?(s=e[(c+1)*4],l=e[(c+1)*4+1],u=e[(c+1)*4+2],f=e[(c+1)*4+3]):(s=e[0],l=e[1],u=e[2],f=e[3]);var p=da(n,a,i,o,s,l,u,f,!0);t[c*2]=p[0],t[c*2+1]=p[1]}return t},Ns=function(e,t){for(var n=new Array(e.length*2),a,i,o,s,l=0;l<e.length/2;l++){a=e[l*2],i=e[l*2+1],l<e.length/2-1?(o=e[(l+1)*2],s=e[(l+1)*2+1]):(o=e[0],s=e[1]);var u=s-i,f=-(o-a),c=Math.sqrt(u*u+f*f),p=u/c,g=f/c;n[l*4]=a+p*t,n[l*4+1]=i+g*t,n[l*4+2]=o+p*t,n[l*4+3]=s+g*t}return n},M0=function(e,t,n,a,i,o){var s=n-e,l=a-t;s/=i,l/=o;var u=Math.sqrt(s*s+l*l),f=u-1;if(f<0)return[];var c=f/u;return[(n-e)*c+e,(a-t)*c+t]},Ga=function(e,t,n,a,i,o,s){return e-=i,t-=o,e/=n/2+s,t/=a/2+s,e*e+t*t<=1},lo=function(e,t,n,a,i,o,s){var l=[n-e,a-t],u=[e-i,t-o],f=l[0]*l[0]+l[1]*l[1],c=2*(u[0]*l[0]+u[1]*l[1]),p=u[0]*u[0]+u[1]*u[1]-s*s,g=c*c-4*f*p;if(g<0)return[];var h=(-c+Math.sqrt(g))/(2*f),m=(-c-Math.sqrt(g))/(2*f),x=Math.min(h,m),w=Math.max(h,m),S=[];if(x>=0&&x<=1&&S.push(x),w>=0&&w<=1&&S.push(w),S.length===0)return[];var y=S[0]*l[0]+e,C=S[0]*l[1]+t;if(S.length>1){if(S[0]==S[1])return[y,C];var E=S[1]*l[0]+e,M=S[1]*l[1]+t;return[y,C,E,M]}else return[y,C]},Rl=function(e,t,n){return t<=e&&e<=n||n<=e&&e<=t?e:e<=t&&t<=n||n<=t&&t<=e?t:n},da=function(e,t,n,a,i,o,s,l,u){var f=e-i,c=n-e,p=s-i,g=t-o,h=a-t,m=l-o,x=p*g-m*f,w=c*g-h*f,S=m*c-p*h;if(S!==0){var y=x/S,C=w/S,E=.001,M=0-E,v=1+E;return M<=y&&y<=v&&M<=C&&C<=v?[e+y*c,t+y*h]:u?[e+y*c,t+y*h]:[]}else return x===0||w===0?Rl(e,n,s)===s?[s,l]:Rl(e,n,i)===i?[i,o]:Rl(i,s,n)===n?[n,a]:[]:[]},_o=function(e,t,n,a,i,o,s,l){var u=[],f,c=new Array(n.length),p=!0;o==null&&(p=!1);var g;if(p){for(var h=0;h<c.length/2;h++)c[h*2]=n[h*2]*o+a,c[h*2+1]=n[h*2+1]*s+i;if(l>0){var m=Ns(c,-l);g=Ls(m)}else g=c}else g=n;for(var x,w,S,y,C=0;C<g.length/2;C++)x=g[C*2],w=g[C*2+1],C<g.length/2-1?(S=g[(C+1)*2],y=g[(C+1)*2+1]):(S=g[0],y=g[1]),f=da(e,t,a,i,x,w,S,y),f.length!==0&&u.push(f[0],f[1]);return u},D0=function(e,t,n,a,i,o,s,l,u){var f=[],c,p=new Array(n.length*2);u.forEach(function(S,y){y===0?(p[p.length-2]=S.startX,p[p.length-1]=S.startY):(p[y*4-2]=S.startX,p[y*4-1]=S.startY),p[y*4]=S.stopX,p[y*4+1]=S.stopY,c=lo(e,t,a,i,S.cx,S.cy,S.radius),c.length!==0&&f.push(c[0],c[1])});for(var g=0;g<p.length/4;g++)c=da(e,t,a,i,p[g*4],p[g*4+1],p[g*4+2],p[g*4+3],!1),c.length!==0&&f.push(c[0],c[1]);if(f.length>2){for(var h=[f[0],f[1]],m=Math.pow(h[0]-e,2)+Math.pow(h[1]-t,2),x=1;x<f.length/2;x++){var w=Math.pow(f[x*2]-e,2)+Math.pow(f[x*2+1]-t,2);w<=m&&(h[0]=f[x*2],h[1]=f[x*2+1],m=w)}return h}return f},rs=function(e,t,n){var a=[e[0]-t[0],e[1]-t[1]],i=Math.sqrt(a[0]*a[0]+a[1]*a[1]),o=(i-n)/i;return o<0&&(o=1e-5),[t[0]+o*a[0],t[1]+o*a[1]]},Vr=function(e,t){var n=tf(e,t);return n=rv(n),n},rv=function(e){for(var t,n,a=e.length/2,i=1/0,o=1/0,s=-1/0,l=-1/0,u=0;u<a;u++)t=e[2*u],n=e[2*u+1],i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);for(var f=2/(s-i),c=2/(l-o),p=0;p<a;p++)t=e[2*p]=e[2*p]*f,n=e[2*p+1]=e[2*p+1]*c,i=Math.min(i,t),s=Math.max(s,t),o=Math.min(o,n),l=Math.max(l,n);if(o<-1)for(var g=0;g<a;g++)n=e[2*g+1]=e[2*g+1]+(-1-o);return e},tf=function(e,t){var n=1/e*2*Math.PI,a=e%2===0?Math.PI/2+n/2:Math.PI/2;a+=t;for(var i=new Array(e*2),o,s=0;s<e;s++)o=s*n+a,i[2*s]=Math.cos(o),i[2*s+1]=Math.sin(-o);return i},Ua=function(e,t){return Math.min(e/4,t/4,8)},nv=function(e,t){return Math.min(e/10,t/10,8)},Bf=function(){return 8},O0=function(e,t,n){return[e-2*t+n,2*(t-e),e]},rf=function(e,t){return{heightOffset:Math.min(15,.05*t),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}},L0=kr({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),N0={pageRank:function(e){for(var t=L0(e),n=t.dampingFactor,a=t.precision,i=t.iterations,o=t.weight,s=this._private.cy,l=this.byGroup(),u=l.nodes,f=l.edges,c=u.length,p=c*c,g=f.length,h=new Array(p),m=new Array(c),x=(1-n)/c,w=0;w<c;w++){for(var S=0;S<c;S++){var y=w*c+S;h[y]=0}m[w]=0}for(var C=0;C<g;C++){var E=f[C],M=E.data("source"),v=E.data("target");if(M!==v){var T=u.indexOfId(M),k=u.indexOfId(v),N=o(E),O=k*c+T;h[O]+=N,m[T]+=N}}for(var I=1/c+x,q=0;q<c;q++)if(m[q]===0)for(var B=0;B<c;B++){var j=B*c+q;h[j]=I}else for(var Y=0;Y<c;Y++){var U=Y*c+q;h[U]=h[U]/m[q]+x}for(var X=new Array(c),K=new Array(c),P,D=0;D<c;D++)X[D]=1;for(var L=0;L<i;L++){for(var F=0;F<c;F++)K[F]=0;for(var W=0;W<c;W++)for(var Z=0;Z<c;Z++){var J=W*c+Z;K[W]+=h[J]*X[Z]}p0(K),P=X,X=K,K=P;for(var Q=0,oe=0;oe<c;oe++){var fe=P[oe]-X[oe];Q+=fe*fe}if(Q<a)break}var ce={rank:function(Le){return Le=s.collection(Le)[0],X[u.indexOf(Le)]}};return ce}},Kc=kr({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Ci={degreeCentralityNormalized:function(e){e=Kc(e);var t=this.cy(),n=this.nodes(),a=n.length;if(e.directed){for(var f={},c={},p=0,g=0,h=0;h<a;h++){var m=n[h],x=m.id();e.root=m;var w=this.degreeCentrality(e);p<w.indegree&&(p=w.indegree),g<w.outdegree&&(g=w.outdegree),f[x]=w.indegree,c[x]=w.outdegree}return{indegree:function(y){return p==0?0:(Ze(y)&&(y=t.filter(y)),f[y.id()]/p)},outdegree:function(y){return g===0?0:(Ze(y)&&(y=t.filter(y)),c[y.id()]/g)}}}else{for(var i={},o=0,s=0;s<a;s++){var l=n[s];e.root=l;var u=this.degreeCentrality(e);o<u.degree&&(o=u.degree),i[l.id()]=u.degree}return{degree:function(y){return o===0?0:(Ze(y)&&(y=t.filter(y)),i[y.id()]/o)}}}},degreeCentrality:function(e){e=Kc(e);var t=this.cy(),n=this,a=e,i=a.root,o=a.weight,s=a.directed,l=a.alpha;if(i=t.collection(i)[0],s){for(var g=i.connectedEdges(),h=g.filter(function(M){return M.target().same(i)&&n.has(M)}),m=g.filter(function(M){return M.source().same(i)&&n.has(M)}),x=h.length,w=m.length,S=0,y=0,C=0;C<h.length;C++)S+=o(h[C]);for(var E=0;E<m.length;E++)y+=o(m[E]);return{indegree:Math.pow(x,1-l)*Math.pow(S,l),outdegree:Math.pow(w,1-l)*Math.pow(y,l)}}else{for(var u=i.connectedEdges().intersection(n),f=u.length,c=0,p=0;p<u.length;p++)c+=o(u[p]);return{degree:Math.pow(f,1-l)*Math.pow(c,l)}}}};Ci.dc=Ci.degreeCentrality;Ci.dcn=Ci.degreeCentralityNormalised=Ci.degreeCentralityNormalized;var jc=kr({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),Si={closenessCentralityNormalized:function(e){for(var t=jc(e),n=t.harmonic,a=t.weight,i=t.directed,o=this.cy(),s={},l=0,u=this.nodes(),f=this.floydWarshall({weight:a,directed:i}),c=0;c<u.length;c++){for(var p=0,g=u[c],h=0;h<u.length;h++)if(c!==h){var m=f.distance(g,u[h]);n?p+=1/m:p+=m}n||(p=1/p),l<p&&(l=p),s[g.id()]=p}return{closeness:function(w){return l==0?0:(Ze(w)?w=o.filter(w)[0].id():w=w.id(),s[w]/l)}}},closenessCentrality:function(e){var t=jc(e),n=t.root,a=t.weight,i=t.directed,o=t.harmonic;n=this.filter(n)[0];for(var s=this.dijkstra({root:n,weight:a,directed:i}),l=0,u=this.nodes(),f=0;f<u.length;f++){var c=u[f];if(!c.same(n)){var p=s.distanceTo(c);o?l+=1/p:l+=p}}return o?l:1/l}};Si.cc=Si.closenessCentrality;Si.ccn=Si.closenessCentralityNormalised=Si.closenessCentralityNormalized;var R0=kr({weight:null,directed:!1}),nf={betweennessCentrality:function(e){for(var t=R0(e),n=t.directed,a=t.weight,i=a!=null,o=this.cy(),s=this.nodes(),l={},u={},f=0,c={set:function(y,C){u[y]=C,C>f&&(f=C)},get:function(y){return u[y]}},p=0;p<s.length;p++){var g=s[p],h=g.id();n?l[h]=g.outgoers().nodes():l[h]=g.openNeighborhood().nodes(),c.set(h,0)}for(var m=function(y){for(var C=s[y].id(),E=[],M={},v={},T={},k=new Ro(function(Z,J){return T[Z]-T[J]}),N=0;N<s.length;N++){var O=s[N].id();M[O]=[],v[O]=0,T[O]=1/0}for(v[C]=1,T[C]=0,k.push(C);!k.empty();){var I=k.pop();if(E.push(I),i)for(var q=0;q<l[I].length;q++){var B=l[I][q],j=o.getElementById(I),Y=void 0;j.edgesTo(B).length>0?Y=j.edgesTo(B)[0]:Y=B.edgesTo(j)[0];var U=a(Y);B=B.id(),T[B]>T[I]+U&&(T[B]=T[I]+U,k.nodes.indexOf(B)<0?k.push(B):k.updateItem(B),v[B]=0,M[B]=[]),T[B]==T[I]+U&&(v[B]=v[B]+v[I],M[B].push(I))}else for(var X=0;X<l[I].length;X++){var K=l[I][X].id();T[K]==1/0&&(k.push(K),T[K]=T[I]+1),T[K]==T[I]+1&&(v[K]=v[K]+v[I],M[K].push(I))}}for(var P={},D=0;D<s.length;D++)P[s[D].id()]=0;for(;E.length>0;){for(var L=E.pop(),F=0;F<M[L].length;F++){var W=M[L][F];P[W]=P[W]+v[W]/v[L]*(1+P[L])}L!=s[y].id()&&c.set(L,c.get(L)+P[L])}},x=0;x<s.length;x++)m(x);var w={betweenness:function(y){var C=o.collection(y).id();return c.get(C)},betweennessNormalized:function(y){if(f==0)return 0;var C=o.collection(y).id();return c.get(C)/f}};return w.betweennessNormalised=w.betweennessNormalized,w}};nf.bc=nf.betweennessCentrality;var I0=kr({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(r){return 1}]}),B0=function(e){return I0(e)},F0=function(e,t){for(var n=0,a=0;a<t.length;a++)n+=t[a](e);return n},z0=function(e,t,n){for(var a=0;a<t;a++)e[a*t+a]=n},av=function(e,t){for(var n,a=0;a<t;a++){n=0;for(var i=0;i<t;i++)n+=e[i*t+a];for(var o=0;o<t;o++)e[o*t+a]=e[o*t+a]/n}},G0=function(e,t,n){for(var a=new Array(n*n),i=0;i<n;i++){for(var o=0;o<n;o++)a[i*n+o]=0;for(var s=0;s<n;s++)for(var l=0;l<n;l++)a[i*n+l]+=e[i*n+s]*t[s*n+l]}return a},V0=function(e,t,n){for(var a=e.slice(0),i=1;i<n;i++)e=G0(e,a,t);return e},$0=function(e,t,n){for(var a=new Array(t*t),i=0;i<t*t;i++)a[i]=Math.pow(e[i],n);return av(a,t),a},q0=function(e,t,n,a){for(var i=0;i<n;i++){var o=Math.round(e[i]*Math.pow(10,a))/Math.pow(10,a),s=Math.round(t[i]*Math.pow(10,a))/Math.pow(10,a);if(o!==s)return!1}return!0},H0=function(e,t,n,a){for(var i=[],o=0;o<t;o++){for(var s=[],l=0;l<t;l++)Math.round(e[o*t+l]*1e3)/1e3>0&&s.push(n[l]);s.length!==0&&i.push(a.collection(s))}return i},U0=function(e,t){for(var n=0;n<e.length;n++)if(!t[n]||e[n].id()!==t[n].id())return!1;return!0},W0=function(e){for(var t=0;t<e.length;t++)for(var n=0;n<e.length;n++)t!=n&&U0(e[t],e[n])&&e.splice(n,1);return e},Yc=function(e){for(var t=this.nodes(),n=this.edges(),a=this.cy(),i=B0(e),o={},s=0;s<t.length;s++)o[t[s].id()]=s;for(var l=t.length,u=l*l,f=new Array(u),c,p=0;p<u;p++)f[p]=0;for(var g=0;g<n.length;g++){var h=n[g],m=o[h.source().id()],x=o[h.target().id()],w=F0(h,i.attributes);f[m*l+x]+=w,f[x*l+m]+=w}z0(f,l,i.multFactor),av(f,l);for(var S=!0,y=0;S&&y<i.maxIterations;)S=!1,c=V0(f,l,i.expandFactor),f=$0(c,l,i.inflateFactor),q0(f,c,u,4)||(S=!0),y++;var C=H0(f,l,t,a);return C=W0(C),C},K0={markovClustering:Yc,mcl:Yc},j0=function(e){return e},iv=function(e,t){return Math.abs(t-e)},Xc=function(e,t,n){return e+iv(t,n)},Qc=function(e,t,n){return e+Math.pow(n-t,2)},Y0=function(e){return Math.sqrt(e)},X0=function(e,t,n){return Math.max(e,iv(t,n))},eo=function(e,t,n,a,i){for(var o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:j0,s=a,l,u,f=0;f<e;f++)l=t(f),u=n(f),s=i(s,l,u);return o(s)},Pi={euclidean:function(e,t,n){return e>=2?eo(e,t,n,0,Qc,Y0):eo(e,t,n,0,Xc)},squaredEuclidean:function(e,t,n){return eo(e,t,n,0,Qc)},manhattan:function(e,t,n){return eo(e,t,n,0,Xc)},max:function(e,t,n){return eo(e,t,n,-1/0,X0)}};Pi["squared-euclidean"]=Pi.squaredEuclidean;Pi.squaredeuclidean=Pi.squaredEuclidean;function Js(r,e,t,n,a,i){var o;return tr(r)?o=r:o=Pi[r]||Pi.euclidean,e===0&&tr(r)?o(a,i):o(e,t,n,a,i)}var Q0=kr({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),Ff=function(e){return Q0(e)},Rs=function(e,t,n,a,i){var o=i!=="kMedoids",s=o?function(c){return n[c]}:function(c){return a[c](n)},l=function(p){return a[p](t)},u=n,f=t;return Js(e,a.length,s,l,u,f)},Il=function(e,t,n){for(var a=n.length,i=new Array(a),o=new Array(a),s=new Array(t),l=null,u=0;u<a;u++)i[u]=e.min(n[u]).value,o[u]=e.max(n[u]).value;for(var f=0;f<t;f++){l=[];for(var c=0;c<a;c++)l[c]=Math.random()*(o[c]-i[c])+i[c];s[f]=l}return s},ov=function(e,t,n,a,i){for(var o=1/0,s=0,l=0;l<t.length;l++){var u=Rs(n,e,t[l],a,i);u<o&&(o=u,s=l)}return s},sv=function(e,t,n){for(var a=[],i=null,o=0;o<t.length;o++)i=t[o],n[i.id()]===e&&a.push(i);return a},Z0=function(e,t,n){return Math.abs(t-e)<=n},J0=function(e,t,n){for(var a=0;a<e.length;a++)for(var i=0;i<e[a].length;i++){var o=Math.abs(e[a][i]-t[a][i]);if(o>n)return!1}return!0},eb=function(e,t,n){for(var a=0;a<n;a++)if(e===t[a])return!0;return!1},Zc=function(e,t){var n=new Array(t);if(e.length<50)for(var a=0;a<t;a++){for(var i=e[Math.floor(Math.random()*e.length)];eb(i,n,a);)i=e[Math.floor(Math.random()*e.length)];n[a]=i}else for(var o=0;o<t;o++)n[o]=e[Math.floor(Math.random()*e.length)];return n},Jc=function(e,t,n){for(var a=0,i=0;i<t.length;i++)a+=Rs("manhattan",t[i],e,n,"kMedoids");return a},tb=function(e){var t=this.cy(),n=this.nodes(),a=null,i=Ff(e),o=new Array(i.k),s={},l;i.testMode?typeof i.testCentroids=="number"?(i.testCentroids,l=Il(n,i.k,i.attributes)):vr(i.testCentroids)==="object"?l=i.testCentroids:l=Il(n,i.k,i.attributes):l=Il(n,i.k,i.attributes);for(var u=!0,f=0;u&&f<i.maxIterations;){for(var c=0;c<n.length;c++)a=n[c],s[a.id()]=ov(a,l,i.distance,i.attributes,"kMeans");u=!1;for(var p=0;p<i.k;p++){var g=sv(p,n,s);if(g.length!==0){for(var h=i.attributes.length,m=l[p],x=new Array(h),w=new Array(h),S=0;S<h;S++){w[S]=0;for(var y=0;y<g.length;y++)a=g[y],w[S]+=i.attributes[S](a);x[S]=w[S]/g.length,Z0(x[S],m[S],i.sensitivityThreshold)||(u=!0)}l[p]=x,o[p]=t.collection(g)}}f++}return o},rb=function(e){var t=this.cy(),n=this.nodes(),a=null,i=Ff(e),o=new Array(i.k),s,l={},u,f=new Array(i.k);i.testMode?typeof i.testCentroids=="number"||(vr(i.testCentroids)==="object"?s=i.testCentroids:s=Zc(n,i.k)):s=Zc(n,i.k);for(var c=!0,p=0;c&&p<i.maxIterations;){for(var g=0;g<n.length;g++)a=n[g],l[a.id()]=ov(a,s,i.distance,i.attributes,"kMedoids");c=!1;for(var h=0;h<s.length;h++){var m=sv(h,n,l);if(m.length!==0){f[h]=Jc(s[h],m,i.attributes);for(var x=0;x<m.length;x++)u=Jc(m[x],m,i.attributes),u<f[h]&&(f[h]=u,s[h]=m[x],c=!0);o[h]=t.collection(m)}}p++}return o},nb=function(e,t,n,a,i){for(var o,s,l=0;l<t.length;l++)for(var u=0;u<e.length;u++)a[l][u]=Math.pow(n[l][u],i.m);for(var f=0;f<e.length;f++)for(var c=0;c<i.attributes.length;c++){o=0,s=0;for(var p=0;p<t.length;p++)o+=a[p][f]*i.attributes[c](t[p]),s+=a[p][f];e[f][c]=o/s}},ab=function(e,t,n,a,i){for(var o=0;o<e.length;o++)t[o]=e[o].slice();for(var s,l,u,f=2/(i.m-1),c=0;c<n.length;c++)for(var p=0;p<a.length;p++){s=0;for(var g=0;g<n.length;g++)l=Rs(i.distance,a[p],n[c],i.attributes,"cmeans"),u=Rs(i.distance,a[p],n[g],i.attributes,"cmeans"),s+=Math.pow(l/u,f);e[p][c]=1/s}},ib=function(e,t,n,a){for(var i=new Array(n.k),o=0;o<i.length;o++)i[o]=[];for(var s,l,u=0;u<t.length;u++){s=-1/0,l=-1;for(var f=0;f<t[0].length;f++)t[u][f]>s&&(s=t[u][f],l=f);i[l].push(e[u])}for(var c=0;c<i.length;c++)i[c]=a.collection(i[c]);return i},ed=function(e){var t=this.cy(),n=this.nodes(),a=Ff(e),i,o,s,l,u;l=new Array(n.length);for(var f=0;f<n.length;f++)l[f]=new Array(a.k);s=new Array(n.length);for(var c=0;c<n.length;c++)s[c]=new Array(a.k);for(var p=0;p<n.length;p++){for(var g=0,h=0;h<a.k;h++)s[p][h]=Math.random(),g+=s[p][h];for(var m=0;m<a.k;m++)s[p][m]=s[p][m]/g}o=new Array(a.k);for(var x=0;x<a.k;x++)o[x]=new Array(a.attributes.length);u=new Array(n.length);for(var w=0;w<n.length;w++)u[w]=new Array(a.k);for(var S=!0,y=0;S&&y<a.maxIterations;)S=!1,nb(o,n,s,u,a),ab(s,l,o,n,a),J0(s,l,a.sensitivityThreshold)||(S=!0),y++;return i=ib(n,s,a,t),{clusters:i,degreeOfMembership:s}},ob={kMeans:tb,kMedoids:rb,fuzzyCMeans:ed,fcm:ed},sb=kr({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),ub={single:"min",complete:"max"},lb=function(e){var t=sb(e),n=ub[t.linkage];return n!=null&&(t.linkage=n),t},td=function(e,t,n,a,i){for(var o=0,s=1/0,l,u=i.attributes,f=function(k,N){return Js(i.distance,u.length,function(O){return u[O](k)},function(O){return u[O](N)},k,N)},c=0;c<e.length;c++){var p=e[c].key,g=n[p][a[p]];g<s&&(o=p,s=g)}if(i.mode==="threshold"&&s>=i.threshold||i.mode==="dendrogram"&&e.length===1)return!1;var h=t[o],m=t[a[o]],x;i.mode==="dendrogram"?x={left:h,right:m,key:h.key}:x={value:h.value.concat(m.value),key:h.key},e[h.index]=x,e.splice(m.index,1),t[h.key]=x;for(var w=0;w<e.length;w++){var S=e[w];h.key===S.key?l=1/0:i.linkage==="min"?(l=n[h.key][S.key],n[h.key][S.key]>n[m.key][S.key]&&(l=n[m.key][S.key])):i.linkage==="max"?(l=n[h.key][S.key],n[h.key][S.key]<n[m.key][S.key]&&(l=n[m.key][S.key])):i.linkage==="mean"?l=(n[h.key][S.key]*h.size+n[m.key][S.key]*m.size)/(h.size+m.size):i.mode==="dendrogram"?l=f(S.value,h.value):l=f(S.value[0],h.value[0]),n[h.key][S.key]=n[S.key][h.key]=l}for(var y=0;y<e.length;y++){var C=e[y].key;if(a[C]===h.key||a[C]===m.key){for(var E=C,M=0;M<e.length;M++){var v=e[M].key;n[C][v]<n[C][E]&&(E=v)}a[C]=E}e[y].index=y}return h.key=m.key=h.index=m.index=null,!0},ns=function r(e,t,n){!e||(e.value?t.push(e.value):(e.left&&r(e.left,t),e.right&&r(e.right,t)))},fb=function r(e,t){if(!e)return"";if(e.left&&e.right){var n=r(e.left,t),a=r(e.right,t),i=t.add({group:"nodes",data:{id:n+","+a}});return t.add({group:"edges",data:{source:n,target:i.id()}}),t.add({group:"edges",data:{source:a,target:i.id()}}),i.id()}else if(e.value)return e.value.id()},cb=function r(e,t,n){if(!e)return[];var a=[],i=[],o=[];return t===0?(e.left&&ns(e.left,a),e.right&&ns(e.right,i),o=a.concat(i),[n.collection(o)]):t===1?e.value?[n.collection(e.value)]:(e.left&&ns(e.left,a),e.right&&ns(e.right,i),[n.collection(a),n.collection(i)]):e.value?[n.collection(e.value)]:(e.left&&(a=r(e.left,t-1,n)),e.right&&(i=r(e.right,t-1,n)),a.concat(i))},rd=function(e){for(var t=this.cy(),n=this.nodes(),a=lb(e),i=a.attributes,o=function(y,C){return Js(a.distance,i.length,function(E){return i[E](y)},function(E){return i[E](C)},y,C)},s=[],l=[],u=[],f=[],c=0;c<n.length;c++){var p={value:a.mode==="dendrogram"?n[c]:[n[c]],key:c,index:c};s[c]=p,f[c]=p,l[c]=[],u[c]=0}for(var g=0;g<s.length;g++)for(var h=0;h<=g;h++){var m=void 0;a.mode==="dendrogram"?m=g===h?1/0:o(s[g].value,s[h].value):m=g===h?1/0:o(s[g].value[0],s[h].value[0]),l[g][h]=m,l[h][g]=m,m<l[g][u[g]]&&(u[g]=h)}for(var x=td(s,f,l,u,a);x;)x=td(s,f,l,u,a);var w;return a.mode==="dendrogram"?(w=cb(s[0],a.dendrogramDepth,t),a.addDendrogram&&fb(s[0],t)):(w=new Array(s.length),s.forEach(function(S,y){S.key=S.index=null,w[y]=t.collection(S.value)})),w},db={hierarchicalClustering:rd,hca:rd},hb=kr({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),vb=function(e){var t=e.damping,n=e.preference;.5<=t&&t<1||nr("Damping must range on [0.5, 1).  Got: ".concat(t));var a=["median","mean","min","max"];return a.some(function(i){return i===n})||Ve(n)||nr("Preference must be one of [".concat(a.map(function(i){return"'".concat(i,"'")}).join(", "),"] or a number.  Got: ").concat(n)),hb(e)},gb=function(e,t,n,a){var i=function(s,l){return a[l](s)};return-Js(e,a.length,function(o){return i(t,o)},function(o){return i(n,o)},t,n)},pb=function(e,t){var n=null;return t==="median"?n=v0(e):t==="mean"?n=h0(e):t==="min"?n=c0(e):t==="max"?n=d0(e):n=t,n},yb=function(e,t,n){for(var a=[],i=0;i<e;i++)t[i*e+i]+n[i*e+i]>0&&a.push(i);return a},nd=function(e,t,n){for(var a=[],i=0;i<e;i++){for(var o=-1,s=-1/0,l=0;l<n.length;l++){var u=n[l];t[i*e+u]>s&&(o=u,s=t[i*e+u])}o>0&&a.push(o)}for(var f=0;f<n.length;f++)a[n[f]]=n[f];return a},mb=function(e,t,n){for(var a=nd(e,t,n),i=0;i<n.length;i++){for(var o=[],s=0;s<a.length;s++)a[s]===n[i]&&o.push(s);for(var l=-1,u=-1/0,f=0;f<o.length;f++){for(var c=0,p=0;p<o.length;p++)c+=t[o[p]*e+o[f]];c>u&&(l=f,u=c)}n[i]=o[l]}return a=nd(e,t,n),a},ad=function(e){for(var t=this.cy(),n=this.nodes(),a=vb(e),i={},o=0;o<n.length;o++)i[n[o].id()]=o;var s,l,u,f,c,p;s=n.length,l=s*s,u=new Array(l);for(var g=0;g<l;g++)u[g]=-1/0;for(var h=0;h<s;h++)for(var m=0;m<s;m++)h!==m&&(u[h*s+m]=gb(a.distance,n[h],n[m],a.attributes));f=pb(u,a.preference);for(var x=0;x<s;x++)u[x*s+x]=f;c=new Array(l);for(var w=0;w<l;w++)c[w]=0;p=new Array(l);for(var S=0;S<l;S++)p[S]=0;for(var y=new Array(s),C=new Array(s),E=new Array(s),M=0;M<s;M++)y[M]=0,C[M]=0,E[M]=0;for(var v=new Array(s*a.minIterations),T=0;T<v.length;T++)v[T]=0;var k;for(k=0;k<a.maxIterations;k++){for(var N=0;N<s;N++){for(var O=-1/0,I=-1/0,q=-1,B=0,j=0;j<s;j++)y[j]=c[N*s+j],B=p[N*s+j]+u[N*s+j],B>=O?(I=O,O=B,q=j):B>I&&(I=B);for(var Y=0;Y<s;Y++)c[N*s+Y]=(1-a.damping)*(u[N*s+Y]-O)+a.damping*y[Y];c[N*s+q]=(1-a.damping)*(u[N*s+q]-I)+a.damping*y[q]}for(var U=0;U<s;U++){for(var X=0,K=0;K<s;K++)y[K]=p[K*s+U],C[K]=Math.max(0,c[K*s+U]),X+=C[K];X-=C[U],C[U]=c[U*s+U],X+=C[U];for(var P=0;P<s;P++)p[P*s+U]=(1-a.damping)*Math.min(0,X-C[P])+a.damping*y[P];p[U*s+U]=(1-a.damping)*(X-C[U])+a.damping*y[U]}for(var D=0,L=0;L<s;L++){var F=p[L*s+L]+c[L*s+L]>0?1:0;v[k%a.minIterations*s+L]=F,D+=F}if(D>0&&(k>=a.minIterations-1||k==a.maxIterations-1)){for(var W=0,Z=0;Z<s;Z++){E[Z]=0;for(var J=0;J<a.minIterations;J++)E[Z]+=v[J*s+Z];(E[Z]===0||E[Z]===a.minIterations)&&W++}if(W===s)break}}for(var Q=yb(s,c,p),oe=mb(s,u,Q),fe={},ce=0;ce<Q.length;ce++)fe[Q[ce]]=[];for(var Ce=0;Ce<n.length;Ce++){var Le=i[n[Ce].id()],Re=oe[Le];Re!=null&&fe[Re].push(n[Ce])}for(var De=new Array(Q.length),me=0;me<Q.length;me++)De[me]=t.collection(fe[Q[me]]);return De},bb={affinityPropagation:ad,ap:ad},wb=kr({root:void 0,directed:!1}),xb={hierholzer:function(e){if(!Tt(e)){var t=arguments;e={root:t[0],directed:t[1]}}var n=wb(e),a=n.root,i=n.directed,o=this,s=!1,l,u,f;a&&(f=Ze(a)?this.filter(a)[0].id():a[0].id());var c={},p={};i?o.forEach(function(S){var y=S.id();if(S.isNode()){var C=S.indegree(!0),E=S.outdegree(!0),M=C-E,v=E-C;M==1?l?s=!0:l=y:v==1?u?s=!0:u=y:(v>1||M>1)&&(s=!0),c[y]=[],S.outgoers().forEach(function(T){T.isEdge()&&c[y].push(T.id())})}else p[y]=[void 0,S.target().id()]}):o.forEach(function(S){var y=S.id();if(S.isNode()){var C=S.degree(!0);C%2&&(l?u?s=!0:u=y:l=y),c[y]=[],S.connectedEdges().forEach(function(E){return c[y].push(E.id())})}else p[y]=[S.source().id(),S.target().id()]});var g={found:!1,trail:void 0};if(s)return g;if(u&&l)if(i){if(f&&u!=f)return g;f=u}else{if(f&&u!=f&&l!=f)return g;f||(f=u)}else f||(f=o[0].id());var h=function(y){for(var C=y,E=[y],M,v,T;c[C].length;)M=c[C].shift(),v=p[M][0],T=p[M][1],C!=T?(c[T]=c[T].filter(function(k){return k!=M}),C=T):!i&&C!=v&&(c[v]=c[v].filter(function(k){return k!=M}),C=v),E.unshift(M),E.unshift(C);return E},m=[],x=[];for(x=h(f);x.length!=1;)c[x[0]].length==0?(m.unshift(o.getElementById(x.shift())),m.unshift(o.getElementById(x.shift()))):x=h(x.shift()).concat(x);m.unshift(o.getElementById(x.shift()));for(var w in c)if(c[w].length)return g;return g.found=!0,g.trail=this.spawn(m,!0),g}},as=function(){var e=this,t={},n=0,a=0,i=[],o=[],s={},l=function(p,g){for(var h=o.length-1,m=[],x=e.spawn();o[h].x!=p||o[h].y!=g;)m.push(o.pop().edge),h--;m.push(o.pop().edge),m.forEach(function(w){var S=w.connectedNodes().intersection(e);x.merge(w),S.forEach(function(y){var C=y.id(),E=y.connectedEdges().intersection(e);x.merge(y),t[C].cutVertex?x.merge(E.filter(function(M){return M.isLoop()})):x.merge(E)})}),i.push(x)},u=function c(p,g,h){p===h&&(a+=1),t[g]={id:n,low:n++,cutVertex:!1};var m=e.getElementById(g).connectedEdges().intersection(e);if(m.size()===0)i.push(e.spawn(e.getElementById(g)));else{var x,w,S,y;m.forEach(function(C){x=C.source().id(),w=C.target().id(),S=x===g?w:x,S!==h&&(y=C.id(),s[y]||(s[y]=!0,o.push({x:g,y:S,edge:C})),S in t?t[g].low=Math.min(t[g].low,t[S].id):(c(p,S,g),t[g].low=Math.min(t[g].low,t[S].low),t[g].id<=t[S].low&&(t[g].cutVertex=!0,l(g,S))))})}};e.forEach(function(c){if(c.isNode()){var p=c.id();p in t||(a=0,u(p,p),t[p].cutVertex=a>1)}});var f=Object.keys(t).filter(function(c){return t[c].cutVertex}).map(function(c){return e.getElementById(c)});return{cut:e.spawn(f),components:i}},Cb={hopcroftTarjanBiconnected:as,htbc:as,htb:as,hopcroftTarjanBiconnectedComponents:as},is=function(){var e=this,t={},n=0,a=[],i=[],o=e.spawn(e),s=function l(u){i.push(u),t[u]={index:n,low:n++,explored:!1};var f=e.getElementById(u).connectedEdges().intersection(e);if(f.forEach(function(m){var x=m.target().id();x!==u&&(x in t||l(x),t[x].explored||(t[u].low=Math.min(t[u].low,t[x].low)))}),t[u].index===t[u].low){for(var c=e.spawn();;){var p=i.pop();if(c.merge(e.getElementById(p)),t[p].low=t[u].index,t[p].explored=!0,p===u)break}var g=c.edgesWith(c),h=c.merge(g);a.push(h),o=o.difference(h)}};return e.forEach(function(l){if(l.isNode()){var u=l.id();u in t||s(u)}}),{cut:o,components:a}},Sb={tarjanStronglyConnected:is,tsc:is,tscc:is,tarjanStronglyConnectedComponents:is},uv={};[Co,Jm,e0,r0,a0,o0,l0,N0,Ci,Si,nf,K0,ob,db,bb,xb,Cb,Sb].forEach(function(r){rt(uv,r)});/*!
Embeddable Minimum Strictly-Compliant Promises/A+ 1.1.1 Thenable
Copyright (c) 2013-2014 Ralf S. Engelschall (http://engelschall.com)
Licensed under The MIT License (http://opensource.org/licenses/MIT)
*/var lv=0,fv=1,cv=2,Yn=function r(e){if(!(this instanceof r))return new r(e);this.id="Thenable/1.0.7",this.state=lv,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};Yn.prototype={fulfill:function(e){return id(this,fv,"fulfillValue",e)},reject:function(e){return id(this,cv,"rejectReason",e)},then:function(e,t){var n=this,a=new Yn;return n.onFulfilled.push(sd(e,a,"fulfill")),n.onRejected.push(sd(t,a,"reject")),dv(n),a.proxy}};var id=function(e,t,n,a){return e.state===lv&&(e.state=t,e[n]=a,dv(e)),e},dv=function(e){e.state===fv?od(e,"onFulfilled",e.fulfillValue):e.state===cv&&od(e,"onRejected",e.rejectReason)},od=function(e,t,n){if(e[t].length!==0){var a=e[t];e[t]=[];var i=function(){for(var s=0;s<a.length;s++)a[s](n)};typeof setImmediate=="function"?setImmediate(i):setTimeout(i,0)}},sd=function(e,t,n){return function(a){if(typeof e!="function")t[n].call(t,a);else{var i;try{i=e(a)}catch(o){t.reject(o);return}_b(t,i)}}},_b=function r(e,t){if(e===t||e.proxy===t){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(vr(t)==="object"&&t!==null||typeof t=="function")try{n=t.then}catch(i){e.reject(i);return}if(typeof n=="function"){var a=!1;try{n.call(t,function(i){a||(a=!0,i===t?e.reject(new TypeError("circular thenable chain")):r(e,i))},function(i){a||(a=!0,e.reject(i))})}catch(i){a||e.reject(i)}return}e.fulfill(t)};Yn.all=function(r){return new Yn(function(e,t){for(var n=new Array(r.length),a=0,i=function(l,u){n[l]=u,a++,a===r.length&&e(n)},o=0;o<r.length;o++)(function(s){var l=r[s],u=l!=null&&l.then!=null;if(u)l.then(function(c){i(s,c)},function(c){t(c)});else{var f=l;i(s,f)}})(o)})};Yn.resolve=function(r){return new Yn(function(e,t){e(r)})};Yn.reject=function(r){return new Yn(function(e,t){t(r)})};var Li=typeof Promise<"u"?Promise:Yn,af=function(e,t,n){var a=Mf(e),i=!a,o=this._private=rt({duration:1e3},t,n);if(o.target=e,o.style=o.style||o.css,o.started=!1,o.playing=!1,o.hooked=!1,o.applying=!1,o.progress=0,o.completes=[],o.frames=[],o.complete&&tr(o.complete)&&o.completes.push(o.complete),i){var s=e.position();o.startPosition=o.startPosition||{x:s.x,y:s.y},o.startStyle=o.startStyle||e.cy().style().getAnimationStartStyle(e,o.style)}if(a){var l=e.pan();o.startPan={x:l.x,y:l.y},o.startZoom=e.zoom()}this.length=1,this[0]=this},Wa=af.prototype;rt(Wa,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var t,n=e.target._private.animation;e.queue?t=n.queue:t=n.current,t.push(this),Qr(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var t=this._private;return e===void 0?t.progress*t.duration:this.progress(e/t.duration)},progress:function(e){var t=this._private,n=t.playing;return e===void 0?t.progress:(n&&this.pause(),t.progress=e,t.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,t=e.playing;t&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(u,f){var c=e[u];c!=null&&(e[u]=e[f],e[f]=c)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var a=0;a<e.style.length;a++){var i=e.style[a],o=i.name,s=e.startStyle[o];e.startStyle[o]=i,e.style[a]=s}return t&&this.play(),this},promise:function(e){var t=this._private,n;switch(e){case"frame":n=t.frames;break;default:case"complete":case"completed":n=t.completes}return new Li(function(a,i){n.push(function(){a()})})}});Wa.complete=Wa.completed;Wa.run=Wa.play;Wa.running=Wa.playing;var Tb={animated:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return!1;var o=a[0];if(o)return o._private.animation.current.length>0}},clearQueue:function(){return function(){var t=this,n=t.length!==void 0,a=n?t:[t],i=this._private.cy||this;if(!i.styleEnabled())return this;for(var o=0;o<a.length;o++){var s=a[o];s._private.animation.queue=[]}return this}},delay:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animate({delay:t,duration:t,complete:n}):this}},delayAnimation:function(){return function(t,n){var a=this._private.cy||this;return a.styleEnabled()?this.animation({delay:t,duration:t,complete:n}):this}},animation:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this,l=!i,u=!l;if(!s.styleEnabled())return this;var f=s.style();t=rt({},t,n);var c=Object.keys(t).length===0;if(c)return new af(o[0],t);switch(t.duration===void 0&&(t.duration=400),t.duration){case"slow":t.duration=600;break;case"fast":t.duration=200;break}if(u&&(t.style=f.getPropsList(t.style||t.css),t.css=void 0),u&&t.renderedPosition!=null){var p=t.renderedPosition,g=s.pan(),h=s.zoom();t.position=Qh(p,h,g)}if(l&&t.panBy!=null){var m=t.panBy,x=s.pan();t.pan={x:x.x+m.x,y:x.y+m.y}}var w=t.center||t.centre;if(l&&w!=null){var S=s.getCenterPan(w.eles,t.zoom);S!=null&&(t.pan=S)}if(l&&t.fit!=null){var y=t.fit,C=s.getFitViewport(y.eles||y.boundingBox,y.padding);C!=null&&(t.pan=C.pan,t.zoom=C.zoom)}if(l&&Tt(t.zoom)){var E=s.getZoomedViewport(t.zoom);E!=null?(E.zoomed&&(t.zoom=E.zoom),E.panned&&(t.pan=E.pan)):t.zoom=null}return new af(o[0],t)}},animate:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;n&&(t=rt({},t,n));for(var l=0;l<o.length;l++){var u=o[l],f=u.animated()&&(t.queue===void 0||t.queue),c=u.animation(t,f?{queue:!0}:void 0);c.play()}return this}},stop:function(){return function(t,n){var a=this,i=a.length!==void 0,o=i?a:[a],s=this._private.cy||this;if(!s.styleEnabled())return this;for(var l=0;l<o.length;l++){for(var u=o[l],f=u._private,c=f.animation.current,p=0;p<c.length;p++){var g=c[p],h=g._private;n&&(h.duration=0)}t&&(f.animation.queue=[]),n||(f.animation.current=[])}return s.notify("draw"),this}}},Eb=Array.isArray,eu=Eb,Pb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kb=/^\w*$/;function Ab(r,e){if(eu(r))return!1;var t=typeof r;return t=="number"||t=="symbol"||t=="boolean"||r==null||No(r)?!0:kb.test(r)||!Pb.test(r)||e!=null&&r in Object(e)}var Mb=Ab,Db="[object AsyncFunction]",Ob="[object Function]",Lb="[object GeneratorFunction]",Nb="[object Proxy]";function Rb(r){if(!$a(r))return!1;var e=$h(r);return e==Ob||e==Lb||e==Db||e==Nb}var Ib=Rb,Bb=Ys["__core-js_shared__"],Bl=Bb,ud=function(){var r=/[^.]+$/.exec(Bl&&Bl.keys&&Bl.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function Fb(r){return!!ud&&ud in r}var zb=Fb,Gb=Function.prototype,Vb=Gb.toString;function $b(r){if(r!=null){try{return Vb.call(r)}catch{}try{return r+""}catch{}}return""}var qb=$b,Hb=/[\\^$.*+?()[\]{}|]/g,Ub=/^\[object .+?Constructor\]$/,Wb=Function.prototype,Kb=Object.prototype,jb=Wb.toString,Yb=Kb.hasOwnProperty,Xb=RegExp("^"+jb.call(Yb).replace(Hb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Qb(r){if(!$a(r)||zb(r))return!1;var e=Ib(r)?Xb:Ub;return e.test(qb(r))}var Zb=Qb;function Jb(r,e){return r==null?void 0:r[e]}var e1=Jb;function t1(r,e){var t=e1(r,e);return Zb(t)?t:void 0}var zf=t1,r1=zf(Object,"create"),To=r1;function n1(){this.__data__=To?To(null):{},this.size=0}var a1=n1;function i1(r){var e=this.has(r)&&delete this.__data__[r];return this.size-=e?1:0,e}var o1=i1,s1="__lodash_hash_undefined__",u1=Object.prototype,l1=u1.hasOwnProperty;function f1(r){var e=this.__data__;if(To){var t=e[r];return t===s1?void 0:t}return l1.call(e,r)?e[r]:void 0}var c1=f1,d1=Object.prototype,h1=d1.hasOwnProperty;function v1(r){var e=this.__data__;return To?e[r]!==void 0:h1.call(e,r)}var g1=v1,p1="__lodash_hash_undefined__";function y1(r,e){var t=this.__data__;return this.size+=this.has(r)?0:1,t[r]=To&&e===void 0?p1:e,this}var m1=y1;function Ni(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ni.prototype.clear=a1;Ni.prototype.delete=o1;Ni.prototype.get=c1;Ni.prototype.has=g1;Ni.prototype.set=m1;var ld=Ni;function b1(){this.__data__=[],this.size=0}var w1=b1;function x1(r,e){return r===e||r!==r&&e!==e}var hv=x1;function C1(r,e){for(var t=r.length;t--;)if(hv(r[t][0],e))return t;return-1}var tu=C1,S1=Array.prototype,_1=S1.splice;function T1(r){var e=this.__data__,t=tu(e,r);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():_1.call(e,t,1),--this.size,!0}var E1=T1;function P1(r){var e=this.__data__,t=tu(e,r);return t<0?void 0:e[t][1]}var k1=P1;function A1(r){return tu(this.__data__,r)>-1}var M1=A1;function D1(r,e){var t=this.__data__,n=tu(t,r);return n<0?(++this.size,t.push([r,e])):t[n][1]=e,this}var O1=D1;function Ri(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ri.prototype.clear=w1;Ri.prototype.delete=E1;Ri.prototype.get=k1;Ri.prototype.has=M1;Ri.prototype.set=O1;var L1=Ri,N1=zf(Ys,"Map"),R1=N1;function I1(){this.size=0,this.__data__={hash:new ld,map:new(R1||L1),string:new ld}}var B1=I1;function F1(r){var e=typeof r;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?r!=="__proto__":r===null}var z1=F1;function G1(r,e){var t=r.__data__;return z1(e)?t[typeof e=="string"?"string":"hash"]:t.map}var ru=G1;function V1(r){var e=ru(this,r).delete(r);return this.size-=e?1:0,e}var $1=V1;function q1(r){return ru(this,r).get(r)}var H1=q1;function U1(r){return ru(this,r).has(r)}var W1=U1;function K1(r,e){var t=ru(this,r),n=t.size;return t.set(r,e),this.size+=t.size==n?0:1,this}var j1=K1;function Ii(r){var e=-1,t=r==null?0:r.length;for(this.clear();++e<t;){var n=r[e];this.set(n[0],n[1])}}Ii.prototype.clear=B1;Ii.prototype.delete=$1;Ii.prototype.get=H1;Ii.prototype.has=W1;Ii.prototype.set=j1;var vv=Ii,Y1="Expected a function";function Gf(r,e){if(typeof r!="function"||e!=null&&typeof e!="function")throw new TypeError(Y1);var t=function(){var n=arguments,a=e?e.apply(this,n):n[0],i=t.cache;if(i.has(a))return i.get(a);var o=r.apply(this,n);return t.cache=i.set(a,o)||i,o};return t.cache=new(Gf.Cache||vv),t}Gf.Cache=vv;var X1=Gf,Q1=500;function Z1(r){var e=X1(r,function(n){return t.size===Q1&&t.clear(),n}),t=e.cache;return e}var J1=Z1,ew=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,tw=/\\(\\)?/g,rw=J1(function(r){var e=[];return r.charCodeAt(0)===46&&e.push(""),r.replace(ew,function(t,n,a,i){e.push(a?i.replace(tw,"$1"):n||t)}),e}),gv=rw;function nw(r,e){for(var t=-1,n=r==null?0:r.length,a=Array(n);++t<n;)a[t]=e(r[t],t,r);return a}var pv=nw,aw=1/0,fd=Ti?Ti.prototype:void 0,cd=fd?fd.toString:void 0;function yv(r){if(typeof r=="string")return r;if(eu(r))return pv(r,yv)+"";if(No(r))return cd?cd.call(r):"";var e=r+"";return e=="0"&&1/r==-aw?"-0":e}var iw=yv;function ow(r){return r==null?"":iw(r)}var mv=ow;function sw(r,e){return eu(r)?r:Mb(r,e)?[r]:gv(mv(r))}var bv=sw,uw=1/0;function lw(r){if(typeof r=="string"||No(r))return r;var e=r+"";return e=="0"&&1/r==-uw?"-0":e}var Vf=lw;function fw(r,e){e=bv(e,r);for(var t=0,n=e.length;r!=null&&t<n;)r=r[Vf(e[t++])];return t&&t==n?r:void 0}var cw=fw;function dw(r,e,t){var n=r==null?void 0:cw(r,e);return n===void 0?t:n}var hw=dw,vw=function(){try{var r=zf(Object,"defineProperty");return r({},"",{}),r}catch{}}(),dd=vw;function gw(r,e,t){e=="__proto__"&&dd?dd(r,e,{configurable:!0,enumerable:!0,value:t,writable:!0}):r[e]=t}var pw=gw,yw=Object.prototype,mw=yw.hasOwnProperty;function bw(r,e,t){var n=r[e];(!(mw.call(r,e)&&hv(n,t))||t===void 0&&!(e in r))&&pw(r,e,t)}var ww=bw,xw=9007199254740991,Cw=/^(?:0|[1-9]\d*)$/;function Sw(r,e){var t=typeof r;return e=e??xw,!!e&&(t=="number"||t!="symbol"&&Cw.test(r))&&r>-1&&r%1==0&&r<e}var _w=Sw;function Tw(r,e,t,n){if(!$a(r))return r;e=bv(e,r);for(var a=-1,i=e.length,o=i-1,s=r;s!=null&&++a<i;){var l=Vf(e[a]),u=t;if(l==="__proto__"||l==="constructor"||l==="prototype")return r;if(a!=o){var f=s[l];u=n?n(f,l,s):void 0,u===void 0&&(u=$a(f)?f:_w(e[a+1])?[]:{})}ww(s,l,u),s=s[l]}return r}var Ew=Tw;function Pw(r,e,t){return r==null?r:Ew(r,e,t)}var kw=Pw;function Aw(r,e){var t=-1,n=r.length;for(e||(e=Array(n));++t<n;)e[t]=r[t];return e}var Mw=Aw;function Dw(r){return eu(r)?pv(r,Vf):No(r)?[r]:Mw(gv(mv(r)))}var Ow=Dw,Lw={data:function(e){var t={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(a){},beforeSet:function(a,i){},onSet:function(a){},canSet:function(a){return!0}};return e=rt({},t,e),function(a,i){var o=e,s=this,l=s.length!==void 0,u=l?s:[s],f=l?s[0]:s;if(Ze(a)){var c=a.indexOf(".")!==-1,p=c&&Ow(a);if(o.allowGetting&&i===void 0){var g;return f&&(o.beforeGet(f),p&&f._private[o.field][a]===void 0?g=hw(f._private[o.field],p):g=f._private[o.field][a]),g}else if(o.allowSetting&&i!==void 0){var h=!o.immutableKeys[a];if(h){var m=Oh({},a,i);o.beforeSet(s,m);for(var x=0,w=u.length;x<w;x++){var S=u[x];o.canSet(S)&&(p&&f._private[o.field][a]===void 0?kw(S._private[o.field],p,i):S._private[o.field][a]=i)}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}}}else if(o.allowSetting&&Tt(a)){var y=a,C,E,M=Object.keys(y);o.beforeSet(s,y);for(var v=0;v<M.length;v++){C=M[v],E=y[C];var T=!o.immutableKeys[C];if(T)for(var k=0;k<u.length;k++){var N=u[k];o.canSet(N)&&(N._private[o.field][C]=E)}}o.updateStyle&&s.updateStyle(),o.onSet(s),o.settingTriggersEvent&&s[o.triggerFnName](o.settingEvent)}else if(o.allowBinding&&tr(a)){var O=a;s.on(o.bindingEvent,O)}else if(o.allowGetting&&a===void 0){var I;return f&&(o.beforeGet(f),I=f._private[o.field]),I}return s}},removeData:function(e){var t={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=rt({},t,e),function(a){var i=e,o=this,s=o.length!==void 0,l=s?o:[o];if(Ze(a)){for(var u=a.split(/\s+/),f=u.length,c=0;c<f;c++){var p=u[c];if(!ga(p)){var g=!i.immutableKeys[p];if(g)for(var h=0,m=l.length;h<m;h++)l[h]._private[i.field][p]=void 0}}i.triggerEvent&&o[i.triggerFnName](i.event)}else if(a===void 0){for(var x=0,w=l.length;x<w;x++)for(var S=l[x]._private[i.field],y=Object.keys(S),C=0;C<y.length;C++){var E=y[C],M=!i.immutableKeys[E];M&&(S[E]=void 0)}i.triggerEvent&&o[i.triggerFnName](i.event)}return o}}},Nw={eventAliasesOn:function(e){var t=e;t.addListener=t.listen=t.bind=t.on,t.unlisten=t.unbind=t.off=t.removeListener,t.trigger=t.emit,t.pon=t.promiseOn=function(n,a){var i=this,o=Array.prototype.slice.call(arguments,0);return new Li(function(s,l){var u=function(g){i.off.apply(i,c),s(g)},f=o.concat([u]),c=f.concat([]);i.on.apply(i,f)})}}},Mt={};[Tb,Lw,Nw].forEach(function(r){rt(Mt,r)});var Rw={animate:Mt.animate(),animation:Mt.animation(),animated:Mt.animated(),clearQueue:Mt.clearQueue(),delay:Mt.delay(),delayAnimation:Mt.delayAnimation(),stop:Mt.stop()},bs={classes:function(e){var t=this;if(e===void 0){var n=[];return t[0]._private.classes.forEach(function(h){return n.push(h)}),n}else Vt(e)||(e=(e||"").match(/\S+/g)||[]);for(var a=[],i=new Oi(e),o=0;o<t.length;o++){for(var s=t[o],l=s._private,u=l.classes,f=!1,c=0;c<e.length;c++){var p=e[c],g=u.has(p);if(!g){f=!0;break}}f||(f=u.size!==e.length),f&&(l.classes=i,a.push(s))}return a.length>0&&this.spawn(a).updateStyle().emit("class"),t},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var t=this[0];return t!=null&&t._private.classes.has(e)},toggleClass:function(e,t){Vt(e)||(e=e.match(/\S+/g)||[]);for(var n=this,a=t===void 0,i=[],o=0,s=n.length;o<s;o++)for(var l=n[o],u=l._private.classes,f=!1,c=0;c<e.length;c++){var p=e[c],g=u.has(p),h=!1;t||a&&!g?(u.add(p),h=!0):(!t||a&&g)&&(u.delete(p),h=!0),!f&&h&&(i.push(l),f=!0)}return i.length>0&&this.spawn(i).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,t){var n=this;if(t==null)t=250;else if(t===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},t),n}};bs.className=bs.classNames=bs.classes;var _t={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:hr,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};_t.variable="(?:[\\w-.]|(?:\\\\"+_t.metaChar+"))+";_t.className="(?:[\\w-]|(?:\\\\"+_t.metaChar+"))+";_t.value=_t.string+"|"+_t.number;_t.id=_t.variable;(function(){var r,e,t;for(r=_t.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],_t.comparatorOp+="|@"+e;for(r=_t.comparatorOp.split("|"),t=0;t<r.length;t++)e=r[t],!(e.indexOf("!")>=0)&&e!=="="&&(_t.comparatorOp+="|\\!"+e)})();var It=function(){return{checks:[]}},Ke={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},of=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(r,e){return Ky(r.selector,e.selector)}),Iw=function(){for(var r={},e,t=0;t<of.length;t++)e=of[t],r[e.selector]=e.matches;return r}(),Bw=function(e,t){return Iw[e](t)},Fw="("+of.map(function(r){return r.selector}).join("|")+")",ui=function(e){return e.replace(new RegExp("\\\\("+_t.metaChar+")","g"),function(t,n){return n})},la=function(e,t,n){e[e.length-1]=n},sf=[{name:"group",query:!0,regex:"("+_t.group+")",populate:function(e,t,n){var a=cn(n,1),i=a[0];t.checks.push({type:Ke.GROUP,value:i==="*"?i:i+"s"})}},{name:"state",query:!0,regex:Fw,populate:function(e,t,n){var a=cn(n,1),i=a[0];t.checks.push({type:Ke.STATE,value:i})}},{name:"id",query:!0,regex:"\\#("+_t.id+")",populate:function(e,t,n){var a=cn(n,1),i=a[0];t.checks.push({type:Ke.ID,value:ui(i)})}},{name:"className",query:!0,regex:"\\.("+_t.className+")",populate:function(e,t,n){var a=cn(n,1),i=a[0];t.checks.push({type:Ke.CLASS,value:ui(i)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+_t.variable+")\\s*\\]",populate:function(e,t,n){var a=cn(n,1),i=a[0];t.checks.push({type:Ke.DATA_EXIST,field:ui(i)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+_t.variable+")\\s*("+_t.comparatorOp+")\\s*("+_t.value+")\\s*\\]",populate:function(e,t,n){var a=cn(n,3),i=a[0],o=a[1],s=a[2],l=new RegExp("^"+_t.string+"$").exec(s)!=null;l?s=s.substring(1,s.length-1):s=parseFloat(s),t.checks.push({type:Ke.DATA_COMPARE,field:ui(i),operator:o,value:s})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+_t.boolOp+")\\s*("+_t.variable+")\\s*\\]",populate:function(e,t,n){var a=cn(n,2),i=a[0],o=a[1];t.checks.push({type:Ke.DATA_BOOL,field:ui(o),operator:i})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+_t.meta+")\\s*("+_t.comparatorOp+")\\s*("+_t.number+")\\s*\\]\\]",populate:function(e,t,n){var a=cn(n,3),i=a[0],o=a[1],s=a[2];t.checks.push({type:Ke.META_COMPARE,field:ui(i),operator:o,value:parseFloat(s)})}},{name:"nextQuery",separator:!0,regex:_t.separator,populate:function(e,t){var n=e.currentSubject,a=e.edgeCount,i=e.compoundCount,o=e[e.length-1];n!=null&&(o.subject=n,e.currentSubject=null),o.edgeCount=a,o.compoundCount=i,e.edgeCount=0,e.compoundCount=0;var s=e[e.length++]=It();return s}},{name:"directedEdge",separator:!0,regex:_t.directedEdge,populate:function(e,t){if(e.currentSubject==null){var n=It(),a=t,i=It();return n.checks.push({type:Ke.DIRECTED_EDGE,source:a,target:i}),la(e,t,n),e.edgeCount++,i}else{var o=It(),s=t,l=It();return o.checks.push({type:Ke.NODE_SOURCE,source:s,target:l}),la(e,t,o),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:_t.undirectedEdge,populate:function(e,t){if(e.currentSubject==null){var n=It(),a=t,i=It();return n.checks.push({type:Ke.UNDIRECTED_EDGE,nodes:[a,i]}),la(e,t,n),e.edgeCount++,i}else{var o=It(),s=t,l=It();return o.checks.push({type:Ke.NODE_NEIGHBOR,node:s,neighbor:l}),la(e,t,o),l}}},{name:"child",separator:!0,regex:_t.child,populate:function(e,t){if(e.currentSubject==null){var n=It(),a=It(),i=e[e.length-1];return n.checks.push({type:Ke.CHILD,parent:i,child:a}),la(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=It(),s=e[e.length-1],l=It(),u=It(),f=It(),c=It();return o.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:Ke.TRUE}],c.checks.push({type:Ke.TRUE}),l.checks.push({type:Ke.PARENT,parent:c,child:f}),la(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var p=It(),g=It(),h=[{type:Ke.PARENT,parent:p,child:g}];return p.checks=t.checks,t.checks=h,e.compoundCount++,g}}},{name:"descendant",separator:!0,regex:_t.descendant,populate:function(e,t){if(e.currentSubject==null){var n=It(),a=It(),i=e[e.length-1];return n.checks.push({type:Ke.DESCENDANT,ancestor:i,descendant:a}),la(e,t,n),e.compoundCount++,a}else if(e.currentSubject===t){var o=It(),s=e[e.length-1],l=It(),u=It(),f=It(),c=It();return o.checks.push({type:Ke.COMPOUND_SPLIT,left:s,right:l,subject:u}),u.checks=t.checks,t.checks=[{type:Ke.TRUE}],c.checks.push({type:Ke.TRUE}),l.checks.push({type:Ke.ANCESTOR,ancestor:c,descendant:f}),la(e,s,o),e.currentSubject=u,e.compoundCount++,f}else{var p=It(),g=It(),h=[{type:Ke.ANCESTOR,ancestor:p,descendant:g}];return p.checks=t.checks,t.checks=h,e.compoundCount++,g}}},{name:"subject",modifier:!0,regex:_t.subject,populate:function(e,t){if(e.currentSubject!=null&&e.currentSubject!==t)return Dt("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=t;var n=e[e.length-1],a=n.checks[0],i=a==null?null:a.type;i===Ke.DIRECTED_EDGE?a.type=Ke.NODE_TARGET:i===Ke.UNDIRECTED_EDGE&&(a.type=Ke.NODE_NEIGHBOR,a.node=a.nodes[1],a.neighbor=a.nodes[0],a.nodes=null)}}];sf.forEach(function(r){return r.regexObj=new RegExp("^"+r.regex)});var zw=function(e){for(var t,n,a,i=0;i<sf.length;i++){var o=sf[i],s=o.name,l=e.match(o.regexObj);if(l!=null){n=l,t=o,a=s;var u=l[0];e=e.substring(u.length);break}}return{expr:t,match:n,name:a,remaining:e}},Gw=function(e){var t=e.match(/^\s+/);if(t){var n=t[0];e=e.substring(n.length)}return e},Vw=function(e){var t=this,n=t.inputText=e,a=t[0]=It();for(t.length=1,n=Gw(n);;){var i=zw(n);if(i.expr==null)return Dt("The selector `"+e+"`is invalid"),!1;var o=i.match.slice(1),s=i.expr.populate(t,a,o);if(s===!1)return!1;if(s!=null&&(a=s),n=i.remaining,n.match(/^\s*$/))break}var l=t[t.length-1];t.currentSubject!=null&&(l.subject=t.currentSubject),l.edgeCount=t.edgeCount,l.compoundCount=t.compoundCount;for(var u=0;u<t.length;u++){var f=t[u];if(f.compoundCount>0&&f.edgeCount>0)return Dt("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(f.edgeCount>1)return Dt("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;f.edgeCount===1&&Dt("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},$w=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(f){return f??""},t=function(f){return Ze(f)?'"'+f+'"':e(f)},n=function(f){return" "+f+" "},a=function(f,c){var p=f.type,g=f.value;switch(p){case Ke.GROUP:{var h=e(g);return h.substring(0,h.length-1)}case Ke.DATA_COMPARE:{var m=f.field,x=f.operator;return"["+m+n(e(x))+t(g)+"]"}case Ke.DATA_BOOL:{var w=f.operator,S=f.field;return"["+e(w)+S+"]"}case Ke.DATA_EXIST:{var y=f.field;return"["+y+"]"}case Ke.META_COMPARE:{var C=f.operator,E=f.field;return"[["+E+n(e(C))+t(g)+"]]"}case Ke.STATE:return g;case Ke.ID:return"#"+g;case Ke.CLASS:return"."+g;case Ke.PARENT:case Ke.CHILD:return i(f.parent,c)+n(">")+i(f.child,c);case Ke.ANCESTOR:case Ke.DESCENDANT:return i(f.ancestor,c)+" "+i(f.descendant,c);case Ke.COMPOUND_SPLIT:{var M=i(f.left,c),v=i(f.subject,c),T=i(f.right,c);return M+(M.length>0?" ":"")+v+T}case Ke.TRUE:return""}},i=function(f,c){return f.checks.reduce(function(p,g,h){return p+(c===f&&h===0?"$":"")+a(g,c)},"")},o="",s=0;s<this.length;s++){var l=this[s];o+=i(l,l.subject),this.length>1&&s<this.length-1&&(o+=", ")}return this.toStringCache=o,o},qw={parse:Vw,toString:$w},wv=function(e,t,n){var a,i=Ze(e),o=Ve(e),s=Ze(n),l,u,f=!1,c=!1,p=!1;switch(t.indexOf("!")>=0&&(t=t.replace("!",""),c=!0),t.indexOf("@")>=0&&(t=t.replace("@",""),f=!0),(i||s||f)&&(l=!i&&!o?"":""+e,u=""+n),f&&(e=l=l.toLowerCase(),n=u=u.toLowerCase()),t){case"*=":a=l.indexOf(u)>=0;break;case"$=":a=l.indexOf(u,l.length-u.length)>=0;break;case"^=":a=l.indexOf(u)===0;break;case"=":a=e===n;break;case">":p=!0,a=e>n;break;case">=":p=!0,a=e>=n;break;case"<":p=!0,a=e<n;break;case"<=":p=!0,a=e<=n;break;default:a=!1;break}return c&&(e!=null||!p)&&(a=!a),a},Hw=function(e,t){switch(t){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},Uw=function(e){return e!==void 0},$f=function(e,t){return e.data(t)},Ww=function(e,t){return e[t]()},ir=[],Kt=function(e,t){return e.checks.every(function(n){return ir[n.type](n,t)})};ir[Ke.GROUP]=function(r,e){var t=r.value;return t==="*"||t===e.group()};ir[Ke.STATE]=function(r,e){var t=r.value;return Bw(t,e)};ir[Ke.ID]=function(r,e){var t=r.value;return e.id()===t};ir[Ke.CLASS]=function(r,e){var t=r.value;return e.hasClass(t)};ir[Ke.META_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return wv(Ww(e,t),n,a)};ir[Ke.DATA_COMPARE]=function(r,e){var t=r.field,n=r.operator,a=r.value;return wv($f(e,t),n,a)};ir[Ke.DATA_BOOL]=function(r,e){var t=r.field,n=r.operator;return Hw($f(e,t),n)};ir[Ke.DATA_EXIST]=function(r,e){var t=r.field;return r.operator,Uw($f(e,t))};ir[Ke.UNDIRECTED_EDGE]=function(r,e){var t=r.nodes[0],n=r.nodes[1],a=e.source(),i=e.target();return Kt(t,a)&&Kt(n,i)||Kt(n,a)&&Kt(t,i)};ir[Ke.NODE_NEIGHBOR]=function(r,e){return Kt(r.node,e)&&e.neighborhood().some(function(t){return t.isNode()&&Kt(r.neighbor,t)})};ir[Ke.DIRECTED_EDGE]=function(r,e){return Kt(r.source,e.source())&&Kt(r.target,e.target())};ir[Ke.NODE_SOURCE]=function(r,e){return Kt(r.source,e)&&e.outgoers().some(function(t){return t.isNode()&&Kt(r.target,t)})};ir[Ke.NODE_TARGET]=function(r,e){return Kt(r.target,e)&&e.incomers().some(function(t){return t.isNode()&&Kt(r.source,t)})};ir[Ke.CHILD]=function(r,e){return Kt(r.child,e)&&Kt(r.parent,e.parent())};ir[Ke.PARENT]=function(r,e){return Kt(r.parent,e)&&e.children().some(function(t){return Kt(r.child,t)})};ir[Ke.DESCENDANT]=function(r,e){return Kt(r.descendant,e)&&e.ancestors().some(function(t){return Kt(r.ancestor,t)})};ir[Ke.ANCESTOR]=function(r,e){return Kt(r.ancestor,e)&&e.descendants().some(function(t){return Kt(r.descendant,t)})};ir[Ke.COMPOUND_SPLIT]=function(r,e){return Kt(r.subject,e)&&Kt(r.left,e)&&Kt(r.right,e)};ir[Ke.TRUE]=function(){return!0};ir[Ke.COLLECTION]=function(r,e){var t=r.value;return t.has(e)};ir[Ke.FILTER]=function(r,e){var t=r.value;return t(e)};var Kw=function(e){var t=this;if(t.length===1&&t[0].checks.length===1&&t[0].checks[0].type===Ke.ID)return e.getElementById(t[0].checks[0].value).collection();var n=function(i){for(var o=0;o<t.length;o++){var s=t[o];if(Kt(s,i))return!0}return!1};return t.text()==null&&(n=function(){return!0}),e.filter(n)},jw=function(e){for(var t=this,n=0;n<t.length;n++){var a=t[n];if(Kt(a,e))return!0}return!1},Yw={matches:jw,filter:Kw},ya=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Ze(e)&&e.match(/^\s*$/)||(Qr(e)?this.addQuery({checks:[{type:Ke.COLLECTION,value:e.collection()}]}):tr(e)?this.addQuery({checks:[{type:Ke.FILTER,value:e}]}):Ze(e)?this.parse(e)||(this.invalid=!0):nr("A selector must be created from a string; found "))},ma=ya.prototype;[qw,Yw].forEach(function(r){return rt(ma,r)});ma.text=function(){return this.inputText};ma.size=function(){return this.length};ma.eq=function(r){return this[r]};ma.sameText=function(r){return!this.invalid&&!r.invalid&&this.text()===r.text()};ma.addQuery=function(r){this[this.length++]=r};ma.selector=ma.toString;var ha={allAre:function(e){var t=new ya(e);return this.every(function(n){return t.matches(n)})},is:function(e){var t=new ya(e);return this.some(function(n){return t.matches(n)})},some:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(a)return!0}return!1},every:function(e,t){for(var n=0;n<this.length;n++){var a=t?e.apply(t,[this[n],n,this]):e(this[n],n,this);if(!a)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var t=this.length,n=e.length;return t!==n?!1:t===1?this[0]===e[0]:this.every(function(a){return e.hasElementWithId(a.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(t){return e.hasElementWithId(t.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var t=this.neighborhood();return e.every(function(n){return t.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var t=this;return e.every(function(n){return t.hasElementWithId(n.id())})}};ha.allAreNeighbours=ha.allAreNeighbors;ha.has=ha.contains;ha.equal=ha.equals=ha.same;var an=function(e,t){return function(a,i,o,s){var l=a,u=this,f;if(l==null?f="":Qr(l)&&l.length===1&&(f=l.id()),u.length===1&&f){var c=u[0]._private,p=c.traversalCache=c.traversalCache||{},g=p[t]=p[t]||[],h=qa(f),m=g[h];return m||(g[h]=e.call(u,a,i,o,s))}else return e.call(u,a,i,o,s)}},ki={parent:function(e){var t=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var a=0;a<this.length;a++){var i=this[a],o=i._private.parent;o&&t.push(o)}return this.spawn(t,!0).filter(e)},parents:function(e){for(var t=[],n=this.parent();n.nonempty();){for(var a=0;a<n.length;a++){var i=n[a];t.push(i)}n=n.parent()}return this.spawn(t,!0).filter(e)},commonAncestors:function(e){for(var t,n=0;n<this.length;n++){var a=this[n],i=a.parents();t=t||i,t=t.intersect(i)}return t.filter(e)},orphans:function(e){return this.stdFilter(function(t){return t.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(t){return t.isChild()}).filter(e)},children:an(function(r){for(var e=[],t=0;t<this.length;t++)for(var n=this[t],a=n._private.children,i=0;i<a.length;i++)e.push(a[i]);return this.spawn(e,!0).filter(r)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var t=[];function n(a){for(var i=0;i<a.length;i++){var o=a[i];t.push(o),o.children().nonempty()&&n(o.children())}}return n(this.children()),this.spawn(t,!0).filter(e)}};function qf(r,e,t,n){for(var a=[],i=new Oi,o=r.cy(),s=o.hasCompoundNodes(),l=0;l<r.length;l++){var u=r[l];t?a.push(u):s&&n(a,i,u)}for(;a.length>0;){var f=a.shift();e(f),i.add(f.id()),s&&n(a,i,f)}return r}function xv(r,e,t){if(t.isParent())for(var n=t._private.children,a=0;a<n.length;a++){var i=n[a];e.has(i.id())||r.push(i)}}ki.forEachDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return qf(this,r,e,xv)};function Cv(r,e,t){if(t.isChild()){var n=t._private.parent;e.has(n.id())||r.push(n)}}ki.forEachUp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return qf(this,r,e,Cv)};function Xw(r,e,t){Cv(r,e,t),xv(r,e,t)}ki.forEachUpAndDown=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return qf(this,r,e,Xw)};ki.ancestors=ki.parents;var Eo,Sv;Eo=Sv={data:Mt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Mt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Mt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Mt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Mt.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Mt.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};Eo.attr=Eo.data;Eo.removeAttr=Eo.removeData;var Qw=Sv,nu={};function Fl(r){return function(e){var t=this;if(e===void 0&&(e=!0),t.length!==0)if(t.isNode()&&!t.removed()){for(var n=0,a=t[0],i=a._private.edges,o=0;o<i.length;o++){var s=i[o];!e&&s.isLoop()||(n+=r(a,s))}return n}else return}}rt(nu,{degree:Fl(function(r,e){return e.source().same(e.target())?2:1}),indegree:Fl(function(r,e){return e.target().same(r)?1:0}),outdegree:Fl(function(r,e){return e.source().same(r)?1:0})});function li(r,e){return function(t){for(var n,a=this.nodes(),i=0;i<a.length;i++){var o=a[i],s=o[r](t);s!==void 0&&(n===void 0||e(s,n))&&(n=s)}return n}}rt(nu,{minDegree:li("degree",function(r,e){return r<e}),maxDegree:li("degree",function(r,e){return r>e}),minIndegree:li("indegree",function(r,e){return r<e}),maxIndegree:li("indegree",function(r,e){return r>e}),minOutdegree:li("outdegree",function(r,e){return r<e}),maxOutdegree:li("outdegree",function(r,e){return r>e})});rt(nu,{totalDegree:function(e){for(var t=0,n=this.nodes(),a=0;a<n.length;a++)t+=n[a].degree(e);return t}});var vn,_v,Tv=function(e,t,n){for(var a=0;a<e.length;a++){var i=e[a];if(!i.locked()){var o=i._private.position,s={x:t.x!=null?t.x-o.x:0,y:t.y!=null?t.y-o.y:0};i.isParent()&&!(s.x===0&&s.y===0)&&i.children().shift(s,n),i.dirtyBoundingBoxCache()}}},hd={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,t){Tv(e,t,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};vn=_v={position:Mt.data(hd),silentPosition:Mt.data(rt({},hd,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,t){Tv(e,t,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,t){if(Tt(e))t?this.silentPosition(e):this.position(e);else if(tr(e)){var n=e,a=this.cy();a.startBatch();for(var i=0;i<this.length;i++){var o=this[i],s=void 0;(s=n(o,i))&&(t?o.silentPosition(s):o.position(s))}a.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,t,n){var a;if(Tt(e)?(a={x:Ve(e.x)?e.x:0,y:Ve(e.y)?e.y:0},n=t):Ze(e)&&Ve(t)&&(a={x:0,y:0},a[e]=t),a!=null){var i=this.cy();i.startBatch();for(var o=0;o<this.length;o++){var s=this[o];if(!(i.hasCompoundNodes()&&s.isChild()&&s.ancestors().anySame(this))){var l=s.position(),u={x:l.x+a.x,y:l.y+a.y};n?s.silentPosition(u):s.position(u)}}i.endBatch()}return this},silentShift:function(e,t){return Tt(e)?this.shift(e,!0):Ze(e)&&Ve(t)&&this.shift(e,t,!0),this},renderedPosition:function(e,t){var n=this[0],a=this.cy(),i=a.zoom(),o=a.pan(),s=Tt(e)?e:void 0,l=s!==void 0||t!==void 0&&Ze(e);if(n&&n.isNode())if(l)for(var u=0;u<this.length;u++){var f=this[u];t!==void 0?f.position(e,(t-o[e])/i):s!==void 0&&f.position(Qh(s,i,o))}else{var c=n.position();return s=Zs(c,i,o),e===void 0?s:s[e]}else if(!l)return;return this},relativePosition:function(e,t){var n=this[0],a=this.cy(),i=Tt(e)?e:void 0,o=i!==void 0||t!==void 0&&Ze(e),s=a.hasCompoundNodes();if(n&&n.isNode())if(o)for(var l=0;l<this.length;l++){var u=this[l],f=s?u.parent():null,c=f&&f.length>0,p=c;c&&(f=f[0]);var g=p?f.position():{x:0,y:0};t!==void 0?u.position(e,t+g[e]):i!==void 0&&u.position({x:i.x+g.x,y:i.y+g.y})}else{var h=n.position(),m=s?n.parent():null,x=m&&m.length>0,w=x;x&&(m=m[0]);var S=w?m.position():{x:0,y:0};return i={x:h.x-S.x,y:h.y-S.y},e===void 0?i:i[e]}else if(!o)return;return this}};vn.modelPosition=vn.point=vn.position;vn.modelPositions=vn.points=vn.positions;vn.renderedPoint=vn.renderedPosition;vn.relativePoint=vn.relativePosition;var Zw=_v,_i,xa;_i=xa={};xa.renderedBoundingBox=function(r){var e=this.boundingBox(r),t=this.cy(),n=t.zoom(),a=t.pan(),i=e.x1*n+a.x,o=e.x2*n+a.x,s=e.y1*n+a.y,l=e.y2*n+a.y;return{x1:i,x2:o,y1:s,y2:l,w:o-i,h:l-s}};xa.dirtyCompoundBoundsCache=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(t){if(t.isParent()){var n=t._private;n.compoundBoundsClean=!1,n.bbCache=null,r||t.emitAndNotify("bounds")}}),this)};xa.updateCompoundBounds=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!r&&e.batching())return this;function t(o){if(!o.isParent())return;var s=o._private,l=o.children(),u=o.pstyle("compound-sizing-wrt-labels").value==="include",f={width:{val:o.pstyle("min-width").pfValue,left:o.pstyle("min-width-bias-left"),right:o.pstyle("min-width-bias-right")},height:{val:o.pstyle("min-height").pfValue,top:o.pstyle("min-height-bias-top"),bottom:o.pstyle("min-height-bias-bottom")}},c=l.boundingBox({includeLabels:u,includeOverlays:!1,useCache:!1}),p=s.position;(c.w===0||c.h===0)&&(c={w:o.pstyle("width").pfValue,h:o.pstyle("height").pfValue},c.x1=p.x-c.w/2,c.x2=p.x+c.w/2,c.y1=p.y-c.h/2,c.y2=p.y+c.h/2);function g(k,N,O){var I=0,q=0,B=N+O;return k>0&&B>0&&(I=N/B*k,q=O/B*k),{biasDiff:I,biasComplementDiff:q}}function h(k,N,O,I){if(O.units==="%")switch(I){case"width":return k>0?O.pfValue*k:0;case"height":return N>0?O.pfValue*N:0;case"average":return k>0&&N>0?O.pfValue*(k+N)/2:0;case"min":return k>0&&N>0?k>N?O.pfValue*N:O.pfValue*k:0;case"max":return k>0&&N>0?k>N?O.pfValue*k:O.pfValue*N:0;default:return 0}else return O.units==="px"?O.pfValue:0}var m=f.width.left.value;f.width.left.units==="px"&&f.width.val>0&&(m=m*100/f.width.val);var x=f.width.right.value;f.width.right.units==="px"&&f.width.val>0&&(x=x*100/f.width.val);var w=f.height.top.value;f.height.top.units==="px"&&f.height.val>0&&(w=w*100/f.height.val);var S=f.height.bottom.value;f.height.bottom.units==="px"&&f.height.val>0&&(S=S*100/f.height.val);var y=g(f.width.val-c.w,m,x),C=y.biasDiff,E=y.biasComplementDiff,M=g(f.height.val-c.h,w,S),v=M.biasDiff,T=M.biasComplementDiff;s.autoPadding=h(c.w,c.h,o.pstyle("padding"),o.pstyle("padding-relative-to").value),s.autoWidth=Math.max(c.w,f.width.val),p.x=(-C+c.x1+c.x2+E)/2,s.autoHeight=Math.max(c.h,f.height.val),p.y=(-v+c.y1+c.y2+T)/2}for(var n=0;n<this.length;n++){var a=this[n],i=a._private;(!i.compoundBoundsClean||r)&&(t(a),e.batching()||(i.compoundBoundsClean=!0))}return this};var nn=function(e){return e===1/0||e===-1/0?0:e},dn=function(e,t,n,a,i){a-t===0||i-n===0||t==null||n==null||a==null||i==null||(e.x1=t<e.x1?t:e.x1,e.x2=a>e.x2?a:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=i>e.y2?i:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},Ra=function(e,t){return t==null?e:dn(e,t.x1,t.y1,t.x2,t.y2)},to=function(e,t,n){return hn(e,t,n)},os=function(e,t,n){if(!t.cy().headless()){var a=t._private,i=a.rstyle,o=i.arrowWidth/2,s=t.pstyle(n+"-arrow-shape").value,l,u;if(s!=="none"){n==="source"?(l=i.srcX,u=i.srcY):n==="target"?(l=i.tgtX,u=i.tgtY):(l=i.midX,u=i.midY);var f=a.arrowBounds=a.arrowBounds||{},c=f[n]=f[n]||{};c.x1=l-o,c.y1=u-o,c.x2=l+o,c.y2=u+o,c.w=c.x2-c.x1,c.h=c.y2-c.y1,ys(c,1),dn(e,c.x1,c.y1,c.x2,c.y2)}}},zl=function(e,t,n){if(!t.cy().headless()){var a;n?a=n+"-":a="";var i=t._private,o=i.rstyle,s=t.pstyle(a+"label").strValue;if(s){var l=t.pstyle("text-halign"),u=t.pstyle("text-valign"),f=to(o,"labelWidth",n),c=to(o,"labelHeight",n),p=to(o,"labelX",n),g=to(o,"labelY",n),h=t.pstyle(a+"text-margin-x").pfValue,m=t.pstyle(a+"text-margin-y").pfValue,x=t.isEdge(),w=t.pstyle(a+"text-rotation"),S=t.pstyle("text-outline-width").pfValue,y=t.pstyle("text-border-width").pfValue,C=y/2,E=t.pstyle("text-background-padding").pfValue,M=2,v=c,T=f,k=T/2,N=v/2,O,I,q,B;if(x)O=p-k,I=p+k,q=g-N,B=g+N;else{switch(l.value){case"left":O=p-T,I=p;break;case"center":O=p-k,I=p+k;break;case"right":O=p,I=p+T;break}switch(u.value){case"top":q=g-v,B=g;break;case"center":q=g-N,B=g+N;break;case"bottom":q=g,B=g+v;break}}O+=h-Math.max(S,C)-E-M,I+=h+Math.max(S,C)+E+M,q+=m-Math.max(S,C)-E-M,B+=m+Math.max(S,C)+E+M;var j=n||"main",Y=i.labelBounds,U=Y[j]=Y[j]||{};U.x1=O,U.y1=q,U.x2=I,U.y2=B,U.w=I-O,U.h=B-q;var X=x&&w.strValue==="autorotate",K=w.pfValue!=null&&w.pfValue!==0;if(X||K){var P=X?to(i.rstyle,"labelAngle",n):w.pfValue,D=Math.cos(P),L=Math.sin(P),F=(O+I)/2,W=(q+B)/2;if(!x){switch(l.value){case"left":F=I;break;case"right":F=O;break}switch(u.value){case"top":W=B;break;case"bottom":W=q;break}}var Z=function(Re,De){return Re=Re-F,De=De-W,{x:Re*D-De*L+F,y:Re*L+De*D+W}},J=Z(O,q),Q=Z(O,B),oe=Z(I,q),fe=Z(I,B);O=Math.min(J.x,Q.x,oe.x,fe.x),I=Math.max(J.x,Q.x,oe.x,fe.x),q=Math.min(J.y,Q.y,oe.y,fe.y),B=Math.max(J.y,Q.y,oe.y,fe.y)}var ce=j+"Rot",Ce=Y[ce]=Y[ce]||{};Ce.x1=O,Ce.y1=q,Ce.x2=I,Ce.y2=B,Ce.w=I-O,Ce.h=B-q,dn(e,O,q,I,B),dn(i.labelBounds.all,O,q,I,B)}return e}},Jw=function(e,t){if(!t.cy().headless()){var n=t.pstyle("outline-opacity").value,a=t.pstyle("outline-width").value;if(n>0&&a>0){var i=t.pstyle("outline-offset").value,o=t.pstyle("shape").value,s=a+i,l=(e.w+s*2)/e.w,u=(e.h+s*2)/e.h,f=0,c=0;["diamond","pentagon","round-triangle"].includes(o)?(l=(e.w+s*2.4)/e.w,c=-s/3.6):["concave-hexagon","rhomboid","right-rhomboid"].includes(o)?l=(e.w+s*2.4)/e.w:o==="star"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.6)/e.h,c=-s/3.8):o==="triangle"?(l=(e.w+s*2.8)/e.w,u=(e.h+s*2.4)/e.h,c=-s/1.4):o==="vee"&&(l=(e.w+s*4.4)/e.w,u=(e.h+s*3.8)/e.h,c=-s*.5);var p=e.h*u-e.h,g=e.w*l-e.w;if(ms(e,[Math.ceil(p/2),Math.ceil(g/2)]),f!=0||c!==0){var h=w0(e,f,c);Jh(e,h)}}}},ex=function(e,t){var n=e._private.cy,a=n.styleEnabled(),i=n.headless(),o=Yr(),s=e._private,l=e.isNode(),u=e.isEdge(),f,c,p,g,h,m,x=s.rstyle,w=l&&a?e.pstyle("bounds-expansion").pfValue:[0],S=function(_e){return _e.pstyle("display").value!=="none"},y=!a||S(e)&&(!u||S(e.source())&&S(e.target()));if(y){var C=0,E=0;a&&t.includeOverlays&&(C=e.pstyle("overlay-opacity").value,C!==0&&(E=e.pstyle("overlay-padding").value));var M=0,v=0;a&&t.includeUnderlays&&(M=e.pstyle("underlay-opacity").value,M!==0&&(v=e.pstyle("underlay-padding").value));var T=Math.max(E,v),k=0,N=0;if(a&&(k=e.pstyle("width").pfValue,N=k/2),l&&t.includeNodes){var O=e.position();h=O.x,m=O.y;var I=e.outerWidth(),q=I/2,B=e.outerHeight(),j=B/2;f=h-q,c=h+q,p=m-j,g=m+j,dn(o,f,p,c,g),a&&t.includeOutlines&&Jw(o,e)}else if(u&&t.includeEdges)if(a&&!i){var Y=e.pstyle("curve-style").strValue;if(f=Math.min(x.srcX,x.midX,x.tgtX),c=Math.max(x.srcX,x.midX,x.tgtX),p=Math.min(x.srcY,x.midY,x.tgtY),g=Math.max(x.srcY,x.midY,x.tgtY),f-=N,c+=N,p-=N,g+=N,dn(o,f,p,c,g),Y==="haystack"){var U=x.haystackPts;if(U&&U.length===2){if(f=U[0].x,p=U[0].y,c=U[1].x,g=U[1].y,f>c){var X=f;f=c,c=X}if(p>g){var K=p;p=g,g=K}dn(o,f-N,p-N,c+N,g+N)}}else if(Y==="bezier"||Y==="unbundled-bezier"||Y.endsWith("segments")||Y.endsWith("taxi")){var P;switch(Y){case"bezier":case"unbundled-bezier":P=x.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":P=x.linePts;break}if(P!=null)for(var D=0;D<P.length;D++){var L=P[D];f=L.x-N,c=L.x+N,p=L.y-N,g=L.y+N,dn(o,f,p,c,g)}}}else{var F=e.source(),W=F.position(),Z=e.target(),J=Z.position();if(f=W.x,c=J.x,p=W.y,g=J.y,f>c){var Q=f;f=c,c=Q}if(p>g){var oe=p;p=g,g=oe}f-=N,c+=N,p-=N,g+=N,dn(o,f,p,c,g)}if(a&&t.includeEdges&&u&&(os(o,e,"mid-source"),os(o,e,"mid-target"),os(o,e,"source"),os(o,e,"target")),a){var fe=e.pstyle("ghost").value==="yes";if(fe){var ce=e.pstyle("ghost-offset-x").pfValue,Ce=e.pstyle("ghost-offset-y").pfValue;dn(o,o.x1+ce,o.y1+Ce,o.x2+ce,o.y2+Ce)}}var Le=s.bodyBounds=s.bodyBounds||{};Wc(Le,o),ms(Le,w),ys(Le,1),a&&(f=o.x1,c=o.x2,p=o.y1,g=o.y2,dn(o,f-T,p-T,c+T,g+T));var Re=s.overlayBounds=s.overlayBounds||{};Wc(Re,o),ms(Re,w),ys(Re,1);var De=s.labelBounds=s.labelBounds||{};De.all!=null?b0(De.all):De.all=Yr(),a&&t.includeLabels&&(t.includeMainLabels&&zl(o,e,null),u&&(t.includeSourceLabels&&zl(o,e,"source"),t.includeTargetLabels&&zl(o,e,"target")))}return o.x1=nn(o.x1),o.y1=nn(o.y1),o.x2=nn(o.x2),o.y2=nn(o.y2),o.w=nn(o.x2-o.x1),o.h=nn(o.y2-o.y1),o.w>0&&o.h>0&&y&&(ms(o,w),ys(o,1)),o},Ev=function(e){var t=0,n=function(o){return(o?1:0)<<t++},a=0;return a+=n(e.incudeNodes),a+=n(e.includeEdges),a+=n(e.includeLabels),a+=n(e.includeMainLabels),a+=n(e.includeSourceLabels),a+=n(e.includeTargetLabels),a+=n(e.includeOverlays),a+=n(e.includeOutlines),a},Pv=function(e){if(e.isEdge()){var t=e.source().position(),n=e.target().position(),a=function(o){return Math.round(o)};return Gm([a(t.x),a(t.y),a(n.x),a(n.y)])}else return 0},vd=function(e,t){var n=e._private,a,i=e.isEdge(),o=t==null?gd:Ev(t),s=o===gd,l=Pv(e),u=n.bbCachePosKey===l,f=t.useCache&&u,c=function(m){return m._private.bbCache==null||m._private.styleDirty},p=!f||c(e)||i&&c(e.source())||c(e.target());if(p?(u||e.recalculateRenderedStyle(f),a=ex(e,Po),n.bbCache=a,n.bbCachePosKey=l):a=n.bbCache,!s){var g=e.isNode();a=Yr(),(t.includeNodes&&g||t.includeEdges&&!g)&&(t.includeOverlays?Ra(a,n.overlayBounds):Ra(a,n.bodyBounds)),t.includeLabels&&(t.includeMainLabels&&(!i||t.includeSourceLabels&&t.includeTargetLabels)?Ra(a,n.labelBounds.all):(t.includeMainLabels&&Ra(a,n.labelBounds.mainRot),t.includeSourceLabels&&Ra(a,n.labelBounds.sourceRot),t.includeTargetLabels&&Ra(a,n.labelBounds.targetRot))),a.w=a.x2-a.x1,a.h=a.y2-a.y1}return a},Po={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},gd=Ev(Po),pd=kr(Po);xa.boundingBox=function(r){var e;if(this.length===1&&this[0]._private.bbCache!=null&&!this[0]._private.styleDirty&&(r===void 0||r.useCache===void 0||r.useCache===!0))r===void 0?r=Po:r=pd(r),e=vd(this[0],r);else{e=Yr(),r=r||Po;var t=pd(r),n=this,a=n.cy(),i=a.styleEnabled();if(i)for(var o=0;o<n.length;o++){var s=n[o],l=s._private,u=Pv(s),f=l.bbCachePosKey===u,c=t.useCache&&f&&!l.styleDirty;s.recalculateRenderedStyle(c)}this.updateCompoundBounds(!r.useCache);for(var p=0;p<n.length;p++){var g=n[p];Ra(e,vd(g,t))}}return e.x1=nn(e.x1),e.y1=nn(e.y1),e.x2=nn(e.x2),e.y2=nn(e.y2),e.w=nn(e.x2-e.x1),e.h=nn(e.y2-e.y1),e};xa.dirtyBoundingBoxCache=function(){for(var r=0;r<this.length;r++){var e=this[r]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};xa.boundingBoxAt=function(r){var e=this.nodes(),t=this.cy(),n=t.hasCompoundNodes(),a=t.collection();if(n&&(a=e.filter(function(u){return u.isParent()}),e=e.not(a)),Tt(r)){var i=r;r=function(){return i}}var o=function(f,c){return f._private.bbAtOldPos=r(f,c)},s=function(f){return f._private.bbAtOldPos};t.startBatch(),e.forEach(o).silentPositions(r),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0));var l=m0(this.boundingBox({useCache:!1}));return e.silentPositions(s),n&&(a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache(),a.updateCompoundBounds(!0)),t.endBatch(),l};_i.boundingbox=_i.bb=_i.boundingBox;_i.renderedBoundingbox=_i.renderedBoundingBox;var tx=xa,fo,Io;fo=Io={};var kv=function(e){e.uppercaseName=zc(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=zc(e.outerName),fo[e.name]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){if(n.isParent())return n.updateCompoundBounds(),a[e.autoName]||0;var s=n.pstyle(e.name);switch(s.strValue){case"label":return n.recalculateRenderedStyle(),a.rstyle[e.labelName]||0;default:return s.pfValue}}else return 1},fo["outer"+e.uppercaseName]=function(){var n=this[0],a=n._private,i=a.cy,o=i._private.styleEnabled;if(n)if(o){var s=n[e.name](),l=n.pstyle("border-width").pfValue,u=2*n.padding();return s+l+u}else return 1},fo["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var a=n[e.name]();return a*this.cy().zoom()}},fo["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var a=n[e.outerName]();return a*this.cy().zoom()}}};kv({name:"width"});kv({name:"height"});Io.padding=function(){var r=this[0],e=r._private;return r.isParent()?(r.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:r.pstyle("padding").pfValue):r.pstyle("padding").pfValue};Io.paddedHeight=function(){var r=this[0];return r.height()+2*r.padding()};Io.paddedWidth=function(){var r=this[0];return r.width()+2*r.padding()};var rx=Io,nx=function(e,t){if(e.isEdge())return t(e)},ax=function(e,t){if(e.isEdge()){var n=e.cy();return Zs(t(e),n.zoom(),n.pan())}},ix=function(e,t){if(e.isEdge()){var n=e.cy(),a=n.pan(),i=n.zoom();return t(e).map(function(o){return Zs(o,i,a)})}},ox=function(e){return e.renderer().getControlPoints(e)},sx=function(e){return e.renderer().getSegmentPoints(e)},ux=function(e){return e.renderer().getSourceEndpoint(e)},lx=function(e){return e.renderer().getTargetEndpoint(e)},fx=function(e){return e.renderer().getEdgeMidpoint(e)},yd={controlPoints:{get:ox,mult:!0},segmentPoints:{get:sx,mult:!0},sourceEndpoint:{get:ux},targetEndpoint:{get:lx},midpoint:{get:fx}},cx=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},dx=Object.keys(yd).reduce(function(r,e){var t=yd[e],n=cx(e);return r[e]=function(){return nx(this,t.get)},t.mult?r[n]=function(){return ix(this,t.get)}:r[n]=function(){return ax(this,t.get)},r},{}),hx=rt({},Zw,tx,rx,dx);/*!
Event object based on jQuery events, MIT license

https://jquery.org/license/
https://tldrlegal.com/license/mit-license
https://github.com/jquery/jquery/blob/master/src/event.js
*/var Av=function(e,t){this.recycle(e,t)};function ro(){return!1}function ss(){return!0}Av.prototype={instanceString:function(){return"event"},recycle:function(e,t){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=ro,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?ss:ro):e!=null&&e.type?t=e:this.type=e,t!=null&&(this.originalEvent=t.originalEvent,this.type=t.type!=null?t.type:this.type,this.cy=t.cy,this.target=t.target,this.position=t.position,this.renderedPosition=t.renderedPosition,this.namespace=t.namespace,this.layout=t.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,a=this.cy.zoom(),i=this.cy.pan();this.renderedPosition={x:n.x*a+i.x,y:n.y*a+i.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=ss;var e=this.originalEvent;!e||e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=ss;var e=this.originalEvent;!e||e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=ss,this.stopPropagation()},isDefaultPrevented:ro,isPropagationStopped:ro,isImmediatePropagationStopped:ro};var Mv=/^([^.]+)(\.(?:[^.]+))?$/,vx=".*",Dv={qualifierCompare:function(e,t){return e===t},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},md=Object.keys(Dv),gx={};function au(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:gx,e=arguments.length>1?arguments[1]:void 0,t=0;t<md.length;t++){var n=md[t];this[n]=r[n]||Dv[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ba=au.prototype,Ov=function(e,t,n,a,i,o,s){tr(a)&&(i=a,a=null),s&&(o==null?o=s:o=rt({},o,s));for(var l=Vt(n)?n:n.split(/\s+/),u=0;u<l.length;u++){var f=l[u];if(!ga(f)){var c=f.match(Mv);if(c){var p=c[1],g=c[2]?c[2]:null,h=t(e,f,p,g,a,i,o);if(h===!1)break}}}},bd=function(e,t){return e.addEventFields(e.context,t),new Av(t.type,t)},px=function(e,t,n){if(Iy(n)){t(e,n);return}else if(Tt(n)){t(e,bd(e,n));return}for(var a=Vt(n)?n:n.split(/\s+/),i=0;i<a.length;i++){var o=a[i];if(!ga(o)){var s=o.match(Mv);if(s){var l=s[1],u=s[2]?s[2]:null,f=bd(e,{type:l,namespace:u,target:e.context});t(e,f)}}}};ba.on=ba.addListener=function(r,e,t,n,a){return Ov(this,function(i,o,s,l,u,f,c){tr(f)&&i.listeners.push({event:o,callback:f,type:s,namespace:l,qualifier:u,conf:c})},r,e,t,n,a),this};ba.one=function(r,e,t,n){return this.on(r,e,t,n,{one:!0})};ba.removeListener=ba.off=function(r,e,t,n){var a=this;this.emitting!==0&&(this.listeners=Um(this.listeners));for(var i=this.listeners,o=function(u){var f=i[u];Ov(a,function(c,p,g,h,m,x){if((f.type===g||r==="*")&&(!h&&f.namespace!==".*"||f.namespace===h)&&(!m||c.qualifierCompare(f.qualifier,m))&&(!x||f.callback===x))return i.splice(u,1),!1},r,e,t,n)},s=i.length-1;s>=0;s--)o(s);return this};ba.removeAllListeners=function(){return this.removeListener("*")};ba.emit=ba.trigger=function(r,e,t){var n=this.listeners,a=n.length;return this.emitting++,Vt(e)||(e=[e]),px(this,function(i,o){t!=null&&(n=[{event:o.event,type:o.type,namespace:o.namespace,callback:t}],a=n.length);for(var s=function(f){var c=n[f];if(c.type===o.type&&(!c.namespace||c.namespace===o.namespace||c.namespace===vx)&&i.eventMatches(i.context,c,o)){var p=[o];e!=null&&Km(p,e),i.beforeEmit(i.context,c,o),c.conf&&c.conf.one&&(i.listeners=i.listeners.filter(function(m){return m!==c}));var g=i.callbackContext(i.context,c,o),h=c.callback.apply(g,p);i.afterEmit(i.context,c,o),h===!1&&(o.stopPropagation(),o.preventDefault())}},l=0;l<a;l++)s(l);i.bubble(i.context)&&!o.isPropagationStopped()&&i.parent(i.context).emit(o,e)},r),this.emitting--,this};var yx={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Lo(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e.cy(),t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e},beforeEmit:function(e,t){t.conf&&t.conf.once&&t.conf.onceCollection.removeListener(t.event,t.qualifier,t.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},us=function(e){return Ze(e)?new ya(e):e},Lv={createEmitter:function(){for(var e=0;e<this.length;e++){var t=this[e],n=t._private;n.emitter||(n.emitter=new au(yx,t))}return this},emitter:function(){return this._private.emitter},on:function(e,t,n){for(var a=us(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n)}return this},removeListener:function(e,t,n){for(var a=us(t),i=0;i<this.length;i++){var o=this[i];o.emitter().removeListener(e,a,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var t=this[e];t.emitter().removeAllListeners()}return this},one:function(e,t,n){for(var a=us(t),i=0;i<this.length;i++){var o=this[i];o.emitter().one(e,a,n)}return this},once:function(e,t,n){for(var a=us(t),i=0;i<this.length;i++){var o=this[i];o.emitter().on(e,a,n,{once:!0,onceCollection:this})}},emit:function(e,t){for(var n=0;n<this.length;n++){var a=this[n];a.emitter().emit(e,t)}return this},emitAndNotify:function(e,t){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,t),this}};Mt.eventAliasesOn(Lv);var Nv={nodes:function(e){return this.filter(function(t){return t.isNode()}).filter(e)},edges:function(e){return this.filter(function(t){return t.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),t=this.spawn(),n=0;n<this.length;n++){var a=this[n];a.isNode()?e.push(a):t.push(a)}return{nodes:e,edges:t}},filter:function(e,t){if(e===void 0)return this;if(Ze(e)||Qr(e))return new ya(e).filter(this);if(tr(e)){for(var n=this.spawn(),a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);s&&n.push(o)}return n}return this.spawn()},not:function(e){if(e){Ze(e)&&(e=this.filter(e));for(var t=this.spawn(),n=0;n<this.length;n++){var a=this[n],i=e.has(a);i||t.push(a)}return t}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Ze(e)){var t=e;return this.filter(t)}for(var n=this.spawn(),a=this,i=e,o=this.length<e.length,s=o?a:i,l=o?i:a,u=0;u<s.length;u++){var f=s[u];l.has(f)&&n.push(f)}return n},xor:function(e){var t=this._private.cy;Ze(e)&&(e=t.$(e));var n=this.spawn(),a=this,i=e,o=function(l,u){for(var f=0;f<l.length;f++){var c=l[f],p=c._private.data.id,g=u.hasElementWithId(p);g||n.push(c)}};return o(a,i),o(i,a),n},diff:function(e){var t=this._private.cy;Ze(e)&&(e=t.$(e));var n=this.spawn(),a=this.spawn(),i=this.spawn(),o=this,s=e,l=function(f,c,p){for(var g=0;g<f.length;g++){var h=f[g],m=h._private.data.id,x=c.hasElementWithId(m);x?i.merge(h):p.push(h)}};return l(o,s,n),l(s,o,a),{left:n,right:a,both:i}},add:function(e){var t=this._private.cy;if(!e)return this;if(Ze(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=this.spawnSelf(),i=0;i<e.length;i++){var o=e[i],s=!this.has(o);s&&a.push(o)}return a},merge:function(e){var t=this._private,n=t.cy;if(!e)return this;if(e&&Ze(e)){var a=e;e=n.mutableElements().filter(a)}for(var i=t.map,o=0;o<e.length;o++){var s=e[o],l=s._private.data.id,u=!i.has(l);if(u){var f=this.length++;this[f]=s,i.set(l,{ele:s,index:f})}}return this},unmergeAt:function(e){var t=this[e],n=t.id(),a=this._private,i=a.map;this[e]=void 0,i.delete(n);var o=e===this.length-1;if(this.length>1&&!o){var s=this.length-1,l=this[s],u=l._private.data.id;this[s]=void 0,this[e]=l,i.set(u,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var t=this._private,n=e._private.data.id,a=t.map,i=a.get(n);if(!i)return this;var o=i.index;return this.unmergeAt(o),this},unmerge:function(e){var t=this._private.cy;if(!e)return this;if(e&&Ze(e)){var n=e;e=t.mutableElements().filter(n)}for(var a=0;a<e.length;a++)this.unmergeOne(e[a]);return this},unmergeBy:function(e){for(var t=this.length-1;t>=0;t--){var n=this[t];e(n)&&this.unmergeAt(t)}return this},map:function(e,t){for(var n=[],a=this,i=0;i<a.length;i++){var o=a[i],s=t?e.apply(t,[o,i,a]):e(o,i,a);n.push(s)}return n},reduce:function(e,t){for(var n=t,a=this,i=0;i<a.length;i++)n=e(n,a[i],i,a);return n},max:function(e,t){for(var n=-1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=t?e.apply(t,[s,o,i]):e(s,o,i);l>n&&(n=l,a=s)}return{value:n,ele:a}},min:function(e,t){for(var n=1/0,a,i=this,o=0;o<i.length;o++){var s=i[o],l=t?e.apply(t,[s,o,i]):e(s,o,i);l<n&&(n=l,a=s)}return{value:n,ele:a}}},kt=Nv;kt.u=kt["|"]=kt["+"]=kt.union=kt.or=kt.add;kt["\\"]=kt["!"]=kt["-"]=kt.difference=kt.relativeComplement=kt.subtract=kt.not;kt.n=kt["&"]=kt["."]=kt.and=kt.intersection=kt.intersect;kt["^"]=kt["(+)"]=kt["(-)"]=kt.symmetricDifference=kt.symdiff=kt.xor;kt.fnFilter=kt.filterFn=kt.stdFilter=kt.filter;kt.complement=kt.abscomp=kt.absoluteComplement;var mx={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},Rv=function(e,t){var n=e.cy(),a=n.hasCompoundNodes();function i(f){var c=f.pstyle("z-compound-depth");return c.value==="auto"?a?f.zDepth():0:c.value==="bottom"?-1:c.value==="top"?Of:0}var o=i(e)-i(t);if(o!==0)return o;function s(f){var c=f.pstyle("z-index-compare");return c.value==="auto"&&f.isNode()?1:0}var l=s(e)-s(t);if(l!==0)return l;var u=e.pstyle("z-index").value-t.pstyle("z-index").value;return u!==0?u:e.poolIndex()-t.poolIndex()},Is={forEach:function(e,t){if(tr(e))for(var n=this.length,a=0;a<n;a++){var i=this[a],o=t?e.apply(t,[i,a,this]):e(i,a,this);if(o===!1)break}return this},toArray:function(){for(var e=[],t=0;t<this.length;t++)e.push(this[t]);return e},slice:function(e,t){var n=[],a=this.length;t==null&&(t=a),e==null&&(e=0),e<0&&(e=a+e),t<0&&(t=a+t);for(var i=e;i>=0&&i<t&&i<a;i++)n.push(this[i]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!tr(e))return this;var t=this.toArray().sort(e);return this.spawn(t)},sortByZIndex:function(){return this.sort(Rv)},zDepth:function(){var e=this[0];if(!!e){var t=e._private,n=t.group;if(n==="nodes"){var a=t.data.parent?e.parents().size():0;return e.isParent()?a:Of-1}else{var i=t.source,o=t.target,s=i.zDepth(),l=o.zDepth();return Math.max(s,l,0)}}}};Is.each=Is.forEach;var bx=function(){var e="undefined",t=(typeof Symbol>"u"?"undefined":vr(Symbol))!=e&&vr(Symbol.iterator)!=e;t&&(Is[Symbol.iterator]=function(){var n=this,a={value:void 0,done:!1},i=0,o=this.length;return Oh({next:function(){return i<o?a.value=n[i++]:(a.value=void 0,a.done=!0),a}},Symbol.iterator,function(){return this})})};bx();var wx=kr({nodeDimensionsIncludeLabels:!1}),ws={layoutDimensions:function(e){e=wx(e);var t;if(!this.takesUpSpace())t={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();t={w:n.w,h:n.h}}else t={w:this.outerWidth(),h:this.outerHeight()};return(t.w===0||t.h===0)&&(t.w=t.h=1),t},layoutPositions:function(e,t,n){var a=this.nodes().filter(function(E){return!E.isParent()}),i=this.cy(),o=t.eles,s=function(M){return M.id()},l=bo(n,s);e.emit({type:"layoutstart",layout:e}),e.animations=[];var u=function(M,v,T){var k={x:v.x1+v.w/2,y:v.y1+v.h/2},N={x:(T.x-k.x)*M,y:(T.y-k.y)*M};return{x:k.x+N.x,y:k.y+N.y}},f=t.spacingFactor&&t.spacingFactor!==1,c=function(){if(!f)return null;for(var M=Yr(),v=0;v<a.length;v++){var T=a[v],k=l(T,v);x0(M,k.x,k.y)}return M},p=c(),g=bo(function(E,M){var v=l(E,M);if(f){var T=Math.abs(t.spacingFactor);v=u(T,p,v)}return t.transform!=null&&(v=t.transform(E,v)),v},s);if(t.animate){for(var h=0;h<a.length;h++){var m=a[h],x=g(m,h),w=t.animateFilter==null||t.animateFilter(m,h);if(w){var S=m.animation({position:x,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(S)}else m.position(x)}if(t.fit){var y=i.animation({fit:{boundingBox:o.boundingBoxAt(g),padding:t.padding},duration:t.animationDuration,easing:t.animationEasing});e.animations.push(y)}else if(t.zoom!==void 0&&t.pan!==void 0){var C=i.animation({zoom:t.zoom,pan:t.pan,duration:t.animationDuration,easing:t.animationEasing});e.animations.push(C)}e.animations.forEach(function(E){return E.play()}),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),Li.all(e.animations.map(function(E){return E.promise()})).then(function(){e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e})})}else a.positions(g),t.fit&&i.fit(t.eles,t.padding),t.zoom!=null&&i.zoom(t.zoom),t.pan&&i.pan(t.pan),e.one("layoutready",t.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",t.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var t=this.cy();return t.makeLayout(rt({},e,{eles:this}))}};ws.createLayout=ws.makeLayout=ws.layout;function Iv(r,e,t){var n=t._private,a=n.styleCache=n.styleCache||[],i;return(i=a[r])!=null||(i=a[r]=e(t)),i}function iu(r,e){return r=qa(r),function(n){return Iv(r,e,n)}}function ou(r,e){r=qa(r);var t=function(a){return e.call(a)};return function(){var a=this[0];if(a)return Iv(r,t,a)}}var Er={recalculateRenderedStyle:function(e){var t=this.cy(),n=t.renderer(),a=t.styleEnabled();return n&&a&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),t=function(i){return i._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(t)}else this.forEach(function(a){t(a),a.connectedEdges().forEach(t)});return this},updateStyle:function(e){var t=this._private.cy;if(!t.styleEnabled())return this;if(t.batching()){var n=t._private.batchStyleEles;return n.merge(this),this}var a=t.hasCompoundNodes(),i=this;e=!!(e||e===void 0),a&&(i=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var o=i;return e?o.emitAndNotify("style"):o.emit("style"),i.forEach(function(s){return s._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(!!e.styleEnabled())for(var t=0;t<this.length;t++){var n=this[t];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],a=n.cy();if(!!a.styleEnabled()&&n){this.cleanStyle();var i=n._private.style[e];return i??(t?a.style().getDefaultProperty(e):null)}},numericStyle:function(e){var t=this[0];if(!!t.cy().styleEnabled()&&t){var n=t.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var t=this[0];if(!!t.cy().styleEnabled()&&t)return t.pstyle(e).units},renderedStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=this[0];if(n)return t.style().getRenderedStyle(n,e)},style:function(e,t){var n=this.cy();if(!n.styleEnabled())return this;var a=!1,i=n.style();if(Tt(e)){var o=e;i.applyBypass(this,o,a),this.emitAndNotify("style")}else if(Ze(e))if(t===void 0){var s=this[0];return s?i.getStylePropertyValue(s,e):void 0}else i.applyBypass(this,e,t,a),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?i.getRawStyle(l):void 0}return this},removeStyle:function(e){var t=this.cy();if(!t.styleEnabled())return this;var n=!1,a=t.style(),i=this;if(e===void 0)for(var o=0;o<i.length;o++){var s=i[o];a.removeAllBypasses(s,n)}else{e=e.split(/\s+/);for(var l=0;l<i.length;l++){var u=i[l];a.removeBypasses(u,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var t=e.hasCompoundNodes(),n=this[0];if(n){var a=n._private,i=n.pstyle("opacity").value;if(!t)return i;var o=a.data.parent?n.parents():null;if(o)for(var s=0;s<o.length;s++){var l=o[s],u=l.pstyle("opacity").value;i=u*i}return i}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0],n=t.cy().hasCompoundNodes();if(t)return n?t.effectiveOpacity()===0:t.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var t=this[0];return!!t._private.backgrounding}};function Gl(r,e){var t=r._private,n=t.data.parent?r.parents():null;if(n)for(var a=0;a<n.length;a++){var i=n[a];if(!e(i))return!1}return!0}function Hf(r){var e=r.ok,t=r.edgeOkViaNode||r.ok,n=r.parentOk||r.ok;return function(){var a=this.cy();if(!a.styleEnabled())return!0;var i=this[0],o=a.hasCompoundNodes();if(i){var s=i._private;if(!e(i))return!1;if(i.isNode())return!o||Gl(i,n);var l=s.source,u=s.target;return t(l)&&(!o||Gl(l,t))&&(l===u||t(u)&&(!o||Gl(u,t)))}}}var Bi=iu("eleTakesUpSpace",function(r){return r.pstyle("display").value==="element"&&r.width()!==0&&(r.isNode()?r.height()!==0:!0)});Er.takesUpSpace=ou("takesUpSpace",Hf({ok:Bi}));var xx=iu("eleInteractive",function(r){return r.pstyle("events").value==="yes"&&r.pstyle("visibility").value==="visible"&&Bi(r)}),Cx=iu("parentInteractive",function(r){return r.pstyle("visibility").value==="visible"&&Bi(r)});Er.interactive=ou("interactive",Hf({ok:xx,parentOk:Cx,edgeOkViaNode:Bi}));Er.noninteractive=function(){var r=this[0];if(r)return!r.interactive()};var Sx=iu("eleVisible",function(r){return r.pstyle("visibility").value==="visible"&&r.pstyle("opacity").pfValue!==0&&Bi(r)}),_x=Bi;Er.visible=ou("visible",Hf({ok:Sx,edgeOkViaNode:_x}));Er.hidden=function(){var r=this[0];if(r)return!r.visible()};Er.isBundledBezier=ou("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Er.bypass=Er.css=Er.style;Er.renderedCss=Er.renderedStyle;Er.removeBypass=Er.removeCss=Er.removeStyle;Er.pstyle=Er.parsedStyle;var va={};function wd(r){return function(){var e=arguments,t=[];if(e.length===2){var n=e[0],a=e[1];this.on(r.event,n,a)}else if(e.length===1&&tr(e[0])){var i=e[0];this.on(r.event,i)}else if(e.length===0||e.length===1&&Vt(e[0])){for(var o=e.length===1?e[0]:null,s=0;s<this.length;s++){var l=this[s],u=!r.ableField||l._private[r.ableField],f=l._private[r.field]!=r.value;if(r.overrideAble){var c=r.overrideAble(l);if(c!==void 0&&(u=c,!c))return this}u&&(l._private[r.field]=r.value,f&&t.push(l))}var p=this.spawn(t);p.updateStyle(),p.emit(r.event),o&&p.emit(o)}return this}}function Fi(r){va[r.field]=function(){var e=this[0];if(e){if(r.overrideField){var t=r.overrideField(e);if(t!==void 0)return t}return e._private[r.field]}},va[r.on]=wd({event:r.on,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!0}),va[r.off]=wd({event:r.off,field:r.field,ableField:r.ableField,overrideAble:r.overrideAble,value:!1})}Fi({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});Fi({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});Fi({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});Fi({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});va.deselect=va.unselect;va.grabbed=function(){var r=this[0];if(r)return r._private.grabbed};Fi({field:"active",on:"activate",off:"unactivate"});Fi({field:"pannable",on:"panify",off:"unpanify"});va.inactive=function(){var r=this[0];if(r)return!r._private.active};var Rr={},xd=function(e){return function(n){for(var a=this,i=[],o=0;o<a.length;o++){var s=a[o];if(!!s.isNode()){for(var l=!1,u=s.connectedEdges(),f=0;f<u.length;f++){var c=u[f],p=c.source(),g=c.target();if(e.noIncomingEdges&&g===s&&p!==s||e.noOutgoingEdges&&p===s&&g!==s){l=!0;break}}l||i.push(s)}}return this.spawn(i,!0).filter(n)}},Cd=function(e){return function(t){for(var n=this,a=[],i=0;i<n.length;i++){var o=n[i];if(!!o.isNode())for(var s=o.connectedEdges(),l=0;l<s.length;l++){var u=s[l],f=u.source(),c=u.target();e.outgoing&&f===o?(a.push(u),a.push(c)):e.incoming&&c===o&&(a.push(u),a.push(f))}}return this.spawn(a,!0).filter(t)}},Sd=function(e){return function(t){for(var n=this,a=[],i={};;){var o=e.outgoing?n.outgoers():n.incomers();if(o.length===0)break;for(var s=!1,l=0;l<o.length;l++){var u=o[l],f=u.id();i[f]||(i[f]=!0,a.push(u),s=!0)}if(!s)break;n=o}return this.spawn(a,!0).filter(t)}};Rr.clearTraversalCache=function(){for(var r=0;r<this.length;r++)this[r]._private.traversalCache=null};rt(Rr,{roots:xd({noIncomingEdges:!0}),leaves:xd({noOutgoingEdges:!0}),outgoers:an(Cd({outgoing:!0}),"outgoers"),successors:Sd({outgoing:!0}),incomers:an(Cd({incoming:!0}),"incomers"),predecessors:Sd({incoming:!0})});rt(Rr,{neighborhood:an(function(r){for(var e=[],t=this.nodes(),n=0;n<t.length;n++)for(var a=t[n],i=a.connectedEdges(),o=0;o<i.length;o++){var s=i[o],l=s.source(),u=s.target(),f=a===l?u:l;f.length>0&&e.push(f[0]),e.push(s[0])}return this.spawn(e,!0).filter(r)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});Rr.neighbourhood=Rr.neighborhood;Rr.closedNeighbourhood=Rr.closedNeighborhood;Rr.openNeighbourhood=Rr.openNeighborhood;rt(Rr,{source:an(function(e){var t=this[0],n;return t&&(n=t._private.source||t.cy().collection()),n&&e?n.filter(e):n},"source"),target:an(function(e){var t=this[0],n;return t&&(n=t._private.target||t.cy().collection()),n&&e?n.filter(e):n},"target"),sources:_d({attr:"source"}),targets:_d({attr:"target"})});function _d(r){return function(t){for(var n=[],a=0;a<this.length;a++){var i=this[a],o=i._private[r.attr];o&&n.push(o)}return this.spawn(n,!0).filter(t)}}rt(Rr,{edgesWith:an(Td(),"edgesWith"),edgesTo:an(Td({thisIsSrc:!0}),"edgesTo")});function Td(r){return function(t){var n=[],a=this._private.cy,i=r||{};Ze(t)&&(t=a.$(t));for(var o=0;o<t.length;o++)for(var s=t[o]._private.edges,l=0;l<s.length;l++){var u=s[l],f=u._private.data,c=this.hasElementWithId(f.source)&&t.hasElementWithId(f.target),p=t.hasElementWithId(f.source)&&this.hasElementWithId(f.target),g=c||p;!g||(i.thisIsSrc||i.thisIsTgt)&&(i.thisIsSrc&&!c||i.thisIsTgt&&!p)||n.push(u)}return this.spawn(n,!0)}}rt(Rr,{connectedEdges:an(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];if(!!a.isNode())for(var i=a._private.edges,o=0;o<i.length;o++){var s=i[o];e.push(s)}}return this.spawn(e,!0).filter(r)},"connectedEdges"),connectedNodes:an(function(r){for(var e=[],t=this,n=0;n<t.length;n++){var a=t[n];!a.isEdge()||(e.push(a.source()[0]),e.push(a.target()[0]))}return this.spawn(e,!0).filter(r)},"connectedNodes"),parallelEdges:an(Ed(),"parallelEdges"),codirectedEdges:an(Ed({codirected:!0}),"codirectedEdges")});function Ed(r){var e={codirected:!1};return r=rt({},e,r),function(n){for(var a=[],i=this.edges(),o=r,s=0;s<i.length;s++)for(var l=i[s],u=l._private,f=u.source,c=f._private.data.id,p=u.data.target,g=f._private.edges,h=0;h<g.length;h++){var m=g[h],x=m._private.data,w=x.target,S=x.source,y=w===p&&S===c,C=c===w&&p===S;(o.codirected&&y||!o.codirected&&(y||C))&&a.push(m)}return this.spawn(a,!0).filter(n)}}rt(Rr,{components:function(e){var t=this,n=t.cy(),a=n.collection(),i=e==null?t.nodes():e.nodes(),o=[];e!=null&&i.empty()&&(i=e.sources());var s=function(f,c){a.merge(f),i.unmerge(f),c.merge(f)};if(i.empty())return t.spawn();var l=function(){var f=n.collection();o.push(f);var c=i[0];s(c,f),t.bfs({directed:!1,roots:c,visit:function(g){return s(g,f)}}),f.forEach(function(p){p.connectedEdges().forEach(function(g){t.has(g)&&f.has(g.source())&&f.has(g.target())&&f.merge(g)})})};do l();while(i.length>0);return o},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});Rr.componentsOf=Rr.components;var Pr=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){nr("A collection must have a reference to the core");return}var i=new Mn,o=!1;if(!t)t=[];else if(t.length>0&&Tt(t[0])&&!Lo(t[0])){o=!0;for(var s=[],l=new Oi,u=0,f=t.length;u<f;u++){var c=t[u];c.data==null&&(c.data={});var p=c.data;if(p.id==null)p.id=Yh();else if(e.hasElementWithId(p.id)||l.has(p.id))continue;var g=new Qs(e,c,!1);s.push(g),l.add(p.id)}t=s}this.length=0;for(var h=0,m=t.length;h<m;h++){var x=t[h][0];if(x!=null){var w=x._private.data.id;(!n||!i.has(w))&&(n&&i.set(w,{index:this.length,ele:x}),this[this.length]=x,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(S){this.lazyMap=S},rebuildMap:function(){for(var y=this.lazyMap=new Mn,C=this.eles,E=0;E<C.length;E++){var M=C[E];y.set(M.id(),{index:E,ele:M})}}},n&&(this._private.map=i),o&&!a&&this.restore()},Ut=Qs.prototype=Pr.prototype=Object.create(Array.prototype);Ut.instanceString=function(){return"collection"};Ut.spawn=function(r,e){return new Pr(this.cy(),r,e)};Ut.spawnSelf=function(){return this.spawn(this)};Ut.cy=function(){return this._private.cy};Ut.renderer=function(){return this._private.cy.renderer()};Ut.element=function(){return this[0]};Ut.collection=function(){return Rh(this)?this:new Pr(this._private.cy,[this])};Ut.unique=function(){return new Pr(this._private.cy,this,!0)};Ut.hasElementWithId=function(r){return r=""+r,this._private.map.has(r)};Ut.getElementById=function(r){r=""+r;var e=this._private.cy,t=this._private.map.get(r);return t?t.ele:new Pr(e)};Ut.$id=Ut.getElementById;Ut.poolIndex=function(){var r=this._private.cy,e=r._private.elements,t=this[0]._private.data.id;return e._private.map.get(t).index};Ut.indexOf=function(r){var e=r[0]._private.data.id;return this._private.map.get(e).index};Ut.indexOfId=function(r){return r=""+r,this._private.map.get(r).index};Ut.json=function(r){var e=this.element(),t=this.cy();if(e==null&&r)return this;if(e!=null){var n=e._private;if(Tt(r)){if(t.startBatch(),r.data){e.data(r.data);var a=n.data;if(e.isEdge()){var i=!1,o={},s=r.data.source,l=r.data.target;s!=null&&s!=a.source&&(o.source=""+s,i=!0),l!=null&&l!=a.target&&(o.target=""+l,i=!0),i&&(e=e.move(o))}else{var u="parent"in r.data,f=r.data.parent;u&&(f!=null||a.parent!=null)&&f!=a.parent&&(f===void 0&&(f=null),f!=null&&(f=""+f),e=e.move({parent:f}))}}r.position&&e.position(r.position);var c=function(m,x,w){var S=r[m];S!=null&&S!==n[m]&&(S?e[x]():e[w]())};return c("removed","remove","restore"),c("selected","select","unselect"),c("selectable","selectify","unselectify"),c("locked","lock","unlock"),c("grabbable","grabify","ungrabify"),c("pannable","panify","unpanify"),r.classes!=null&&e.classes(r.classes),t.endBatch(),this}else if(r===void 0){var p={data:An(n.data),position:An(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};p.classes="";var g=0;return n.classes.forEach(function(h){return p.classes+=g++===0?h:" "+h}),p}}};Ut.jsons=function(){for(var r=[],e=0;e<this.length;e++){var t=this[e],n=t.json();r.push(n)}return r};Ut.clone=function(){for(var r=this.cy(),e=[],t=0;t<this.length;t++){var n=this[t],a=n.json(),i=new Qs(r,a,!1);e.push(i)}return new Pr(r,e)};Ut.copy=Ut.clone;Ut.restore=function(){for(var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=t.cy(),a=n._private,i=[],o=[],s,l=0,u=t.length;l<u;l++){var f=t[l];e&&!f.removed()||(f.isNode()?i.push(f):o.push(f))}s=i.concat(o);var c,p=function(){s.splice(c,1),c--};for(c=0;c<s.length;c++){var g=s[c],h=g._private,m=h.data;if(g.clearTraversalCache(),!(!e&&!h.removed)){if(m.id===void 0)m.id=Yh();else if(Ve(m.id))m.id=""+m.id;else if(ga(m.id)||!Ze(m.id)){nr("Can not create element with invalid string ID `"+m.id+"`"),p();continue}else if(n.hasElementWithId(m.id)){nr("Can not create second element with ID `"+m.id+"`"),p();continue}}var x=m.id;if(g.isNode()){var w=h.position;w.x==null&&(w.x=0),w.y==null&&(w.y=0)}if(g.isEdge()){for(var S=g,y=["source","target"],C=y.length,E=!1,M=0;M<C;M++){var v=y[M],T=m[v];Ve(T)&&(T=m[v]=""+m[v]),T==null||T===""?(nr("Can not create edge `"+x+"` with unspecified "+v),E=!0):n.hasElementWithId(T)||(nr("Can not create edge `"+x+"` with nonexistant "+v+" `"+T+"`"),E=!0)}if(E){p();continue}var k=n.getElementById(m.source),N=n.getElementById(m.target);k.same(N)?k._private.edges.push(S):(k._private.edges.push(S),N._private.edges.push(S)),S._private.source=k,S._private.target=N}h.map=new Mn,h.map.set(x,{ele:g,index:0}),h.removed=!1,e&&n.addToPool(g)}for(var O=0;O<i.length;O++){var I=i[O],q=I._private.data;Ve(q.parent)&&(q.parent=""+q.parent);var B=q.parent,j=B!=null;if(j||I._private.parent){var Y=I._private.parent?n.collection().merge(I._private.parent):n.getElementById(B);if(Y.empty())q.parent=void 0;else if(Y[0].removed())Dt("Node added with missing parent, reference to parent removed"),q.parent=void 0,I._private.parent=null;else{for(var U=!1,X=Y;!X.empty();){if(I.same(X)){U=!0,q.parent=void 0;break}X=X.parent()}U||(Y[0]._private.children.push(I),I._private.parent=Y[0],a.hasCompoundNodes=!0)}}}if(s.length>0){for(var K=s.length===t.length?t:new Pr(n,s),P=0;P<K.length;P++){var D=K[P];D.isNode()||(D.parallelEdges().clearTraversalCache(),D.source().clearTraversalCache(),D.target().clearTraversalCache())}var L;a.hasCompoundNodes?L=n.collection().merge(K).merge(K.connectedNodes()).merge(K.parent()):L=K,L.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(r),r?K.emitAndNotify("add"):e&&K.emit("add")}return t};Ut.removed=function(){var r=this[0];return r&&r._private.removed};Ut.inside=function(){var r=this[0];return r&&!r._private.removed};Ut.remove=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,t=this,n=[],a={},i=t._private.cy;function o(B){for(var j=B._private.edges,Y=0;Y<j.length;Y++)l(j[Y])}function s(B){for(var j=B._private.children,Y=0;Y<j.length;Y++)l(j[Y])}function l(B){var j=a[B.id()];e&&B.removed()||j||(a[B.id()]=!0,B.isNode()?(n.push(B),o(B),s(B)):n.unshift(B))}for(var u=0,f=t.length;u<f;u++){var c=t[u];l(c)}function p(B,j){var Y=B._private.edges;pa(Y,j),B.clearTraversalCache()}function g(B){B.clearTraversalCache()}var h=[];h.ids={};function m(B,j){j=j[0],B=B[0];var Y=B._private.children,U=B.id();pa(Y,j),j._private.parent=null,h.ids[U]||(h.ids[U]=!0,h.push(B))}t.dirtyCompoundBoundsCache(),e&&i.removeFromPool(n);for(var x=0;x<n.length;x++){var w=n[x];if(w.isEdge()){var S=w.source()[0],y=w.target()[0];p(S,w),p(y,w);for(var C=w.parallelEdges(),E=0;E<C.length;E++){var M=C[E];g(M),M.isBundledBezier()&&M.dirtyBoundingBoxCache()}}else{var v=w.parent();v.length!==0&&m(v,w)}e&&(w._private.removed=!0)}var T=i._private.elements;i._private.hasCompoundNodes=!1;for(var k=0;k<T.length;k++){var N=T[k];if(N.isParent()){i._private.hasCompoundNodes=!0;break}}var O=new Pr(this.cy(),n);O.size()>0&&(r?O.emitAndNotify("remove"):e&&O.emit("remove"));for(var I=0;I<h.length;I++){var q=h[I];(!e||!q.removed())&&q.updateStyle()}return O};Ut.move=function(r){var e=this._private.cy,t=this,n=!1,a=!1,i=function(h){return h==null?h:""+h};if(r.source!==void 0||r.target!==void 0){var o=i(r.source),s=i(r.target),l=o!=null&&e.hasElementWithId(o),u=s!=null&&e.hasElementWithId(s);(l||u)&&(e.batch(function(){t.remove(n,a),t.emitAndNotify("moveout");for(var g=0;g<t.length;g++){var h=t[g],m=h._private.data;h.isEdge()&&(l&&(m.source=o),u&&(m.target=s))}t.restore(n,a)}),t.emitAndNotify("move"))}else if(r.parent!==void 0){var f=i(r.parent),c=f===null||e.hasElementWithId(f);if(c){var p=f===null?void 0:f;e.batch(function(){var g=t.remove(n,a);g.emitAndNotify("moveout");for(var h=0;h<t.length;h++){var m=t[h],x=m._private.data;m.isNode()&&(x.parent=p)}g.restore(n,a)}),t.emitAndNotify("move")}}return this};[uv,Rw,bs,ha,ki,Qw,nu,hx,Lv,Nv,mx,Is,ws,Er,va,Rr].forEach(function(r){rt(Ut,r)});var Tx={add:function(e){var t,n=this;if(Qr(e)){var a=e;if(a._private.cy===n)t=a.restore();else{for(var i=[],o=0;o<a.length;o++){var s=a[o];i.push(s.json())}t=new Pr(n,i)}}else if(Vt(e)){var l=e;t=new Pr(n,l)}else if(Tt(e)&&(Vt(e.nodes)||Vt(e.edges))){for(var u=e,f=[],c=["nodes","edges"],p=0,g=c.length;p<g;p++){var h=c[p],m=u[h];if(Vt(m))for(var x=0,w=m.length;x<w;x++){var S=rt({group:h},m[x]);f.push(S)}}t=new Pr(n,f)}else{var y=e;t=new Qs(n,y).collection()}return t},remove:function(e){if(!Qr(e)){if(Ze(e)){var t=e;e=this.$(t)}}return e.remove()}};/*! Bezier curve function generator. Copyright Gaetan Renaudeau. MIT License: http://en.wikipedia.org/wiki/MIT_License */function Ex(r,e,t,n){var a=4,i=.001,o=1e-7,s=10,l=11,u=1/(l-1),f=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var c=0;c<4;++c)if(typeof arguments[c]!="number"||isNaN(arguments[c])||!isFinite(arguments[c]))return!1;r=Math.min(r,1),t=Math.min(t,1),r=Math.max(r,0),t=Math.max(t,0);var p=f?new Float32Array(l):new Array(l);function g(N,O){return 1-3*O+3*N}function h(N,O){return 3*O-6*N}function m(N){return 3*N}function x(N,O,I){return((g(O,I)*N+h(O,I))*N+m(O))*N}function w(N,O,I){return 3*g(O,I)*N*N+2*h(O,I)*N+m(O)}function S(N,O){for(var I=0;I<a;++I){var q=w(O,r,t);if(q===0)return O;var B=x(O,r,t)-N;O-=B/q}return O}function y(){for(var N=0;N<l;++N)p[N]=x(N*u,r,t)}function C(N,O,I){var q,B,j=0;do B=O+(I-O)/2,q=x(B,r,t)-N,q>0?I=B:O=B;while(Math.abs(q)>o&&++j<s);return B}function E(N){for(var O=0,I=1,q=l-1;I!==q&&p[I]<=N;++I)O+=u;--I;var B=(N-p[I])/(p[I+1]-p[I]),j=O+B*u,Y=w(j,r,t);return Y>=i?S(N,j):Y===0?j:C(N,O,O+u)}var M=!1;function v(){M=!0,(r!==e||t!==n)&&y()}var T=function(O){return M||v(),r===e&&t===n?O:O===0?0:O===1?1:x(E(O),e,n)};T.getControlPoints=function(){return[{x:r,y:e},{x:t,y:n}]};var k="generateBezier("+[r,e,t,n]+")";return T.toString=function(){return k},T}/*! Runge-Kutta spring physics function generator. Adapted from Framer.js, copyright Koen Bok. MIT License: http://en.wikipedia.org/wiki/MIT_License */var Px=function(){function r(n){return-n.tension*n.x-n.friction*n.v}function e(n,a,i){var o={x:n.x+i.dx*a,v:n.v+i.dv*a,tension:n.tension,friction:n.friction};return{dx:o.v,dv:r(o)}}function t(n,a){var i={dx:n.v,dv:r(n)},o=e(n,a*.5,i),s=e(n,a*.5,o),l=e(n,a,s),u=1/6*(i.dx+2*(o.dx+s.dx)+l.dx),f=1/6*(i.dv+2*(o.dv+s.dv)+l.dv);return n.x=n.x+u*a,n.v=n.v+f*a,n}return function n(a,i,o){var s={x:-1,v:0,tension:null,friction:null},l=[0],u=0,f=1/1e4,c=16/1e3,p,g,h;for(a=parseFloat(a)||500,i=parseFloat(i)||20,o=o||null,s.tension=a,s.friction=i,p=o!==null,p?(u=n(a,i),g=u/o*c):g=c;h=t(h||s,g),l.push(1+h.x),u+=16,Math.abs(h.x)>f&&Math.abs(h.v)>f;);return p?function(m){return l[m*(l.length-1)|0]}:u}}(),qt=function(e,t,n,a){var i=Ex(e,t,n,a);return function(o,s,l){return o+(s-o)*i(l)}},xs={linear:function(e,t,n){return e+(t-e)*n},ease:qt(.25,.1,.25,1),"ease-in":qt(.42,0,1,1),"ease-out":qt(0,0,.58,1),"ease-in-out":qt(.42,0,.58,1),"ease-in-sine":qt(.47,0,.745,.715),"ease-out-sine":qt(.39,.575,.565,1),"ease-in-out-sine":qt(.445,.05,.55,.95),"ease-in-quad":qt(.55,.085,.68,.53),"ease-out-quad":qt(.25,.46,.45,.94),"ease-in-out-quad":qt(.455,.03,.515,.955),"ease-in-cubic":qt(.55,.055,.675,.19),"ease-out-cubic":qt(.215,.61,.355,1),"ease-in-out-cubic":qt(.645,.045,.355,1),"ease-in-quart":qt(.895,.03,.685,.22),"ease-out-quart":qt(.165,.84,.44,1),"ease-in-out-quart":qt(.77,0,.175,1),"ease-in-quint":qt(.755,.05,.855,.06),"ease-out-quint":qt(.23,1,.32,1),"ease-in-out-quint":qt(.86,0,.07,1),"ease-in-expo":qt(.95,.05,.795,.035),"ease-out-expo":qt(.19,1,.22,1),"ease-in-out-expo":qt(1,0,0,1),"ease-in-circ":qt(.6,.04,.98,.335),"ease-out-circ":qt(.075,.82,.165,1),"ease-in-out-circ":qt(.785,.135,.15,.86),spring:function(e,t,n){if(n===0)return xs.linear;var a=Px(e,t,n);return function(i,o,s){return i+(o-i)*a(s)}},"cubic-bezier":qt};function Pd(r,e,t,n,a){if(n===1||e===t)return t;var i=a(e,t,n);return r==null||((r.roundValue||r.color)&&(i=Math.round(i)),r.min!==void 0&&(i=Math.max(i,r.min)),r.max!==void 0&&(i=Math.min(i,r.max))),i}function kd(r,e){return r.pfValue!=null||r.value!=null?r.pfValue!=null&&(e==null||e.type.units!=="%")?r.pfValue:r.value:r}function fi(r,e,t,n,a){var i=a!=null?a.type:null;t<0?t=0:t>1&&(t=1);var o=kd(r,a),s=kd(e,a);if(Ve(o)&&Ve(s))return Pd(i,o,s,t,n);if(Vt(o)&&Vt(s)){for(var l=[],u=0;u<s.length;u++){var f=o[u],c=s[u];if(f!=null&&c!=null){var p=Pd(i,f,c,t,n);l.push(p)}else l.push(c)}return l}}function kx(r,e,t,n){var a=!n,i=r._private,o=e._private,s=o.easing,l=o.startTime,u=n?r:r.cy(),f=u.style();if(!o.easingImpl)if(s==null)o.easingImpl=xs.linear;else{var c;if(Ze(s)){var p=f.parse("transition-timing-function",s);c=p.value}else c=s;var g,h;Ze(c)?(g=c,h=[]):(g=c[1],h=c.slice(2).map(function(K){return+K})),h.length>0?(g==="spring"&&h.push(o.duration),o.easingImpl=xs[g].apply(null,h)):o.easingImpl=xs[g]}var m=o.easingImpl,x;if(o.duration===0?x=1:x=(t-l)/o.duration,o.applying&&(x=o.progress),x<0?x=0:x>1&&(x=1),o.delay==null){var w=o.startPosition,S=o.position;if(S&&a&&!r.locked()){var y={};no(w.x,S.x)&&(y.x=fi(w.x,S.x,x,m)),no(w.y,S.y)&&(y.y=fi(w.y,S.y,x,m)),r.position(y)}var C=o.startPan,E=o.pan,M=i.pan,v=E!=null&&n;v&&(no(C.x,E.x)&&(M.x=fi(C.x,E.x,x,m)),no(C.y,E.y)&&(M.y=fi(C.y,E.y,x,m)),r.emit("pan"));var T=o.startZoom,k=o.zoom,N=k!=null&&n;N&&(no(T,k)&&(i.zoom=So(i.minZoom,fi(T,k,x,m),i.maxZoom)),r.emit("zoom")),(v||N)&&r.emit("viewport");var O=o.style;if(O&&O.length>0&&a){for(var I=0;I<O.length;I++){var q=O[I],B=q.name,j=q,Y=o.startStyle[B],U=f.properties[Y.name],X=fi(Y,j,x,m,U);f.overrideBypass(r,B,X)}r.emit("style")}}return o.progress=x,x}function no(r,e){return r==null||e==null?!1:Ve(r)&&Ve(e)?!0:!!(r&&e)}function Ax(r,e,t,n){var a=e._private;a.started=!0,a.startTime=t-a.progress*a.duration}function Ad(r,e){var t=e._private.aniEles,n=[];function a(f,c){var p=f._private,g=p.animation.current,h=p.animation.queue,m=!1;if(g.length===0){var x=h.shift();x&&g.push(x)}for(var w=function(M){for(var v=M.length-1;v>=0;v--){var T=M[v];T()}M.splice(0,M.length)},S=g.length-1;S>=0;S--){var y=g[S],C=y._private;if(C.stopped){g.splice(S,1),C.hooked=!1,C.playing=!1,C.started=!1,w(C.frames);continue}!C.playing&&!C.applying||(C.playing&&C.applying&&(C.applying=!1),C.started||Ax(f,y,r),kx(f,y,r,c),C.applying&&(C.applying=!1),w(C.frames),C.step!=null&&C.step(r),y.completed()&&(g.splice(S,1),C.hooked=!1,C.playing=!1,C.started=!1,w(C.completes)),m=!0)}return!c&&g.length===0&&h.length===0&&n.push(f),m}for(var i=!1,o=0;o<t.length;o++){var s=t[o],l=a(s);i=i||l}var u=a(e,!0);(i||u)&&(t.length>0?e.notify("draw",t):e.notify("draw")),t.unmerge(n),e.emit("step")}var Mx={animate:Mt.animate(),animation:Mt.animation(),animated:Mt.animated(),clearQueue:Mt.clearQueue(),delay:Mt.delay(),delayAnimation:Mt.delayAnimation(),stop:Mt.stop(),addToAnimationPool:function(e){var t=this;!t.styleEnabled()||t._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function t(){!e._private.animationsRunning||Ds(function(i){Ad(i,e),t()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(i,o){Ad(o,e)},n.beforeRenderPriorities.animations):t()}},Dx={qualifierCompare:function(e,t){return e==null||t==null?e==null&&t==null:e.sameText(t)},eventMatches:function(e,t,n){var a=t.qualifier;return a!=null?e!==n.target&&Lo(n.target)&&a.matches(n.target):!0},addEventFields:function(e,t){t.cy=e,t.target=e},callbackContext:function(e,t,n){return t.qualifier!=null?n.target:e}},ls=function(e){return Ze(e)?new ya(e):e},Bv={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new au(Dx,this)),this},emitter:function(){return this._private.emitter},on:function(e,t,n){return this.emitter().on(e,ls(t),n),this},removeListener:function(e,t,n){return this.emitter().removeListener(e,ls(t),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,t,n){return this.emitter().one(e,ls(t),n),this},once:function(e,t,n){return this.emitter().one(e,ls(t),n),this},emit:function(e,t){return this.emitter().emit(e,t),this},emitAndNotify:function(e,t){return this.emit(e),this.notify(e,t),this}};Mt.eventAliasesOn(Bv);var uf={png:function(e){var t=this._private.renderer;return e=e||{},t.png(e)},jpg:function(e){var t=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",t.jpg(e)}};uf.jpeg=uf.jpg;var Cs={layout:function(e){var t=this;if(e==null){nr("Layout options must be specified to make a layout");return}if(e.name==null){nr("A `name` must be specified to make a layout");return}var n=e.name,a=t.extension("layout",n);if(a==null){nr("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var i;Ze(e.eles)?i=t.$(e.eles):i=e.eles!=null?e.eles:t.$();var o=new a(rt({},e,{cy:t,eles:i}));return o}};Cs.createLayout=Cs.makeLayout=Cs.layout;var Ox={notify:function(e,t){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var a=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();t!=null&&a.merge(t);return}if(!!n.notificationsEnabled){var i=this.renderer();this.destroyed()||!i||i.notify(e,t)}},notifications:function(e){var t=this._private;return e===void 0?t.notificationsEnabled:(t.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var t=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var a=e.batchNotifications[n];a.empty()?t.notify(n):t.notify(n,a)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var t=this;return this.batch(function(){for(var n=Object.keys(e),a=0;a<n.length;a++){var i=n[a],o=e[i],s=t.getElementById(i);s.data(o)}})}},Lx=kr({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1}),lf={renderTo:function(e,t,n,a){var i=this._private.renderer;return i.renderTo(e,t,n,a),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var t=this,n=t.extension("renderer",e.name);if(n==null){nr("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Dt("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var a=Lx(e);a.cy=t,t._private.renderer=new n(a),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var t=e.container();if(t)for(t._cyreg=null;t.childNodes.length>0;)t.removeChild(t.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var a=n._private;a.rscratch={},a.rstyle={},a.animation.current=[],a.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};lf.invalidateDimensions=lf.resize;var Ss={collection:function(e,t){return Ze(e)?this.$(e):Qr(e)?e.collection():Vt(e)?(t||(t={}),new Pr(this,e,t.unique,t.removed)):new Pr(this)},nodes:function(e){var t=this.$(function(n){return n.isNode()});return e?t.filter(e):t},edges:function(e){var t=this.$(function(n){return n.isEdge()});return e?t.filter(e):t},$:function(e){var t=this._private.elements;return e?t.filter(e):t.spawnSelf()},mutableElements:function(){return this._private.elements}};Ss.elements=Ss.filter=Ss.$;var Br={},vo="t",Nx="f";Br.apply=function(r){for(var e=this,t=e._private,n=t.cy,a=n.collection(),i=0;i<r.length;i++){var o=r[i],s=e.getContextMeta(o);if(!s.empty){var l=e.getContextStyle(s),u=e.applyContextStyle(s,l,o);o._private.appliedInitStyle?e.updateTransitions(o,u.diffProps):o._private.appliedInitStyle=!0;var f=e.updateStyleHints(o);f&&a.push(o)}}return a};Br.getPropertiesDiff=function(r,e){var t=this,n=t._private.propDiffs=t._private.propDiffs||{},a=r+"-"+e,i=n[a];if(i)return i;for(var o=[],s={},l=0;l<t.length;l++){var u=t[l],f=r[l]===vo,c=e[l]===vo,p=f!==c,g=u.mappedProperties.length>0;if(p||c&&g){var h=void 0;p&&g||p?h=u.properties:g&&(h=u.mappedProperties);for(var m=0;m<h.length;m++){for(var x=h[m],w=x.name,S=!1,y=l+1;y<t.length;y++){var C=t[y],E=e[y]===vo;if(!!E&&(S=C.properties[x.name]!=null,S))break}!s[w]&&!S&&(s[w]=!0,o.push(w))}}}return n[a]=o,o};Br.getContextMeta=function(r){for(var e=this,t="",n,a=r._private.styleCxtKey||"",i=0;i<e.length;i++){var o=e[i],s=o.selector&&o.selector.matches(r);s?t+=vo:t+=Nx}return n=e.getPropertiesDiff(a,t),r._private.styleCxtKey=t,{key:t,diffPropNames:n,empty:n.length===0}};Br.getContextStyle=function(r){var e=r.key,t=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var a={_private:{key:e}},i=0;i<t.length;i++){var o=t[i],s=e[i]===vo;if(!!s)for(var l=0;l<o.properties.length;l++){var u=o.properties[l];a[u.name]=u}}return n[e]=a,a};Br.applyContextStyle=function(r,e,t){for(var n=this,a=r.diffPropNames,i={},o=n.types,s=0;s<a.length;s++){var l=a[s],u=e[l],f=t.pstyle(l);if(!u)if(f)f.bypass?u={name:l,deleteBypassed:!0}:u={name:l,delete:!0};else continue;if(f!==u){if(u.mapped===o.fn&&f!=null&&f.mapping!=null&&f.mapping.value===u.value){var c=f.mapping,p=c.fnValue=u.value(t);if(p===c.prevFnValue)continue}var g=i[l]={prev:f};n.applyParsedProperty(t,u),g.next=t.pstyle(l),g.next&&g.next.bypass&&(g.next=g.next.bypassed)}}return{diffProps:i}};Br.updateStyleHints=function(r){var e=r._private,t=this,n=t.propertyGroupNames,a=t.propertyGroupKeys,i=function(Ce,Le,Re){return t.getPropertiesHash(Ce,Le,Re)},o=e.styleKey;if(r.removed())return!1;var s=e.group==="nodes",l=r._private.style;n=Object.keys(l);for(var u=0;u<a.length;u++){var f=a[u];e.styleKeys[f]=[gi,uo]}for(var c=function(Ce,Le){return e.styleKeys[Le][0]=wo(Ce,e.styleKeys[Le][0])},p=function(Ce,Le){return e.styleKeys[Le][1]=xo(Ce,e.styleKeys[Le][1])},g=function(Ce,Le){c(Ce,Le),p(Ce,Le)},h=function(Ce,Le){for(var Re=0;Re<Ce.length;Re++){var De=Ce.charCodeAt(Re);c(De,Le),p(De,Le)}},m=2e9,x=function(Ce){return-128<Ce&&Ce<128&&Math.floor(Ce)!==Ce?m-(Ce*1024|0):Ce},w=0;w<n.length;w++){var S=n[w],y=l[S];if(y!=null){var C=this.properties[S],E=C.type,M=C.groupKey,v=void 0;C.hashOverride!=null?v=C.hashOverride(r,y):y.pfValue!=null&&(v=y.pfValue);var T=C.enums==null?y.value:null,k=v!=null,N=T!=null,O=k||N,I=y.units;if(E.number&&O&&!E.multiple){var q=k?v:T;g(x(q),M),!k&&I!=null&&h(I,M)}else h(y.strValue,M)}}for(var B=[gi,uo],j=0;j<a.length;j++){var Y=a[j],U=e.styleKeys[Y];B[0]=wo(U[0],B[0]),B[1]=xo(U[1],B[1])}e.styleKey=zm(B[0],B[1]);var X=e.styleKeys;e.labelDimsKey=ua(X.labelDimensions);var K=i(r,["label"],X.labelDimensions);if(e.labelKey=ua(K),e.labelStyleKey=ua(es(X.commonLabel,K)),!s){var P=i(r,["source-label"],X.labelDimensions);e.sourceLabelKey=ua(P),e.sourceLabelStyleKey=ua(es(X.commonLabel,P));var D=i(r,["target-label"],X.labelDimensions);e.targetLabelKey=ua(D),e.targetLabelStyleKey=ua(es(X.commonLabel,D))}if(s){var L=e.styleKeys,F=L.nodeBody,W=L.nodeBorder,Z=L.nodeOutline,J=L.backgroundImage,Q=L.compound,oe=L.pie,fe=[F,W,Z,J,Q,oe].filter(function(ce){return ce!=null}).reduce(es,[gi,uo]);e.nodeKey=ua(fe),e.hasPie=oe!=null&&oe[0]!==gi&&oe[1]!==uo}return o!==e.styleKey};Br.clearStyleHints=function(r){var e=r._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null};Br.applyParsedProperty=function(r,e){var t=this,n=e,a=r._private.style,i,o=t.types,s=t.properties[n.name].type,l=n.bypass,u=a[n.name],f=u&&u.bypass,c=r._private,p="mapping",g=function(F){return F==null?null:F.pfValue!=null?F.pfValue:F.value},h=function(){var F=g(u),W=g(n);t.checkTriggers(r,n.name,F,W)};if(e.name==="curve-style"&&r.isEdge()&&(e.value!=="bezier"&&r.isLoop()||e.value==="haystack"&&(r.source().isParent()||r.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return a[n.name]=void 0,h(),!0;if(n.deleteBypassed)return u?u.bypass?(u.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return u?u.bypass?(a[n.name]=u.bypassed,h(),!0):!1:(h(),!0);var m=function(){Dt("Do not assign mappings to elements without corresponding data (i.e. ele `"+r.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case o.mapData:{for(var x=n.field.split("."),w=c.data,S=0;S<x.length&&w;S++){var y=x[S];w=w[y]}if(w==null)return m(),!1;var C;if(Ve(w)){var E=n.fieldMax-n.fieldMin;E===0?C=0:C=(w-n.fieldMin)/E}else return Dt("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+w+"` for `"+r.id()+"` is non-numeric)"),!1;if(C<0?C=0:C>1&&(C=1),s.color){var M=n.valueMin[0],v=n.valueMax[0],T=n.valueMin[1],k=n.valueMax[1],N=n.valueMin[2],O=n.valueMax[2],I=n.valueMin[3]==null?1:n.valueMin[3],q=n.valueMax[3]==null?1:n.valueMax[3],B=[Math.round(M+(v-M)*C),Math.round(T+(k-T)*C),Math.round(N+(O-N)*C),Math.round(I+(q-I)*C)];i={bypass:n.bypass,name:n.name,value:B,strValue:"rgb("+B[0]+", "+B[1]+", "+B[2]+")"}}else if(s.number){var j=n.valueMin+(n.valueMax-n.valueMin)*C;i=this.parse(n.name,j,n.bypass,p)}else return!1;if(!i)return m(),!1;i.mapping=n,n=i;break}case o.data:{for(var Y=n.field.split("."),U=c.data,X=0;X<Y.length&&U;X++){var K=Y[X];U=U[K]}if(U!=null&&(i=this.parse(n.name,U,n.bypass,p)),!i)return m(),!1;i.mapping=n,n=i;break}case o.fn:{var P=n.value,D=n.fnValue!=null?n.fnValue:P(r);if(n.prevFnValue=D,D==null)return Dt("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+r.id()+"` is null)"),!1;if(i=this.parse(n.name,D,n.bypass,p),!i)return Dt("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+r.id()+"` is invalid)"),!1;i.mapping=An(n),n=i;break}case void 0:break;default:return!1}return l?(f?n.bypassed=u.bypassed:n.bypassed=u,a[n.name]=n):f?u.bypassed=n:a[n.name]=n,h(),!0};Br.cleanElements=function(r,e){for(var t=0;t<r.length;t++){var n=r[t];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var a=n._private.style,i=Object.keys(a),o=0;o<i.length;o++){var s=i[o],l=a[s];l!=null&&(l.bypass?l.bypassed=null:a[s]=null)}}};Br.update=function(){var r=this._private.cy,e=r.mutableElements();e.updateStyle()};Br.updateTransitions=function(r,e){var t=this,n=r._private,a=r.pstyle("transition-property").value,i=r.pstyle("transition-duration").pfValue,o=r.pstyle("transition-delay").pfValue;if(a.length>0&&i>0){for(var s={},l=!1,u=0;u<a.length;u++){var f=a[u],c=r.pstyle(f),p=e[f];if(!!p){var g=p.prev,h=g,m=p.next!=null?p.next:c,x=!1,w=void 0,S=1e-6;!h||(Ve(h.pfValue)&&Ve(m.pfValue)?(x=m.pfValue-h.pfValue,w=h.pfValue+S*x):Ve(h.value)&&Ve(m.value)?(x=m.value-h.value,w=h.value+S*x):Vt(h.value)&&Vt(m.value)&&(x=h.value[0]!==m.value[0]||h.value[1]!==m.value[1]||h.value[2]!==m.value[2],w=h.strValue),x&&(s[f]=m.strValue,this.applyBypass(r,f,w),l=!0))}}if(!l)return;n.transitioning=!0,new Li(function(y){o>0?r.delayAnimation(o).play().promise().then(y):y()}).then(function(){return r.animation({style:s,duration:i,easing:r.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){t.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(r,a),r.emitAndNotify("style"),n.transitioning=!1)};Br.checkTrigger=function(r,e,t,n,a,i){var o=this.properties[e],s=a(o);s!=null&&s(t,n)&&i(o)};Br.checkZOrderTrigger=function(r,e,t,n){var a=this;this.checkTrigger(r,e,t,n,function(i){return i.triggersZOrder},function(){a._private.cy.notify("zorder",r)})};Br.checkBoundsTrigger=function(r,e,t,n){this.checkTrigger(r,e,t,n,function(a){return a.triggersBounds},function(a){r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),a.triggersBoundsOfParallelBeziers&&e==="curve-style"&&(t==="bezier"||n==="bezier")&&r.parallelEdges().forEach(function(i){i.isBundledBezier()&&i.dirtyBoundingBoxCache()}),a.triggersBoundsOfConnectedEdges&&e==="display"&&(t==="none"||n==="none")&&r.connectedEdges().forEach(function(i){i.dirtyBoundingBoxCache()})})};Br.checkTriggers=function(r,e,t,n){r.dirtyStyleCache(),this.checkZOrderTrigger(r,e,t,n),this.checkBoundsTrigger(r,e,t,n)};var Bo={};Bo.applyBypass=function(r,e,t,n){var a=this,i=[],o=!0;if(e==="*"||e==="**"){if(t!==void 0)for(var s=0;s<a.properties.length;s++){var l=a.properties[s],u=l.name,f=this.parse(u,t,!0);f&&i.push(f)}}else if(Ze(e)){var c=this.parse(e,t,!0);c&&i.push(c)}else if(Tt(e)){var p=e;n=t;for(var g=Object.keys(p),h=0;h<g.length;h++){var m=g[h],x=p[m];if(x===void 0&&(x=p[js(m)]),x!==void 0){var w=this.parse(m,x,!0);w&&i.push(w)}}}else return!1;if(i.length===0)return!1;for(var S=!1,y=0;y<r.length;y++){for(var C=r[y],E={},M=void 0,v=0;v<i.length;v++){var T=i[v];if(n){var k=C.pstyle(T.name);M=E[T.name]={prev:k}}S=this.applyParsedProperty(C,An(T))||S,n&&(M.next=C.pstyle(T.name))}S&&this.updateStyleHints(C),n&&this.updateTransitions(C,E,o)}return S};Bo.overrideBypass=function(r,e,t){e=Df(e);for(var n=0;n<r.length;n++){var a=r[n],i=a._private.style[e],o=this.properties[e].type,s=o.color,l=o.mutiple,u=i?i.pfValue!=null?i.pfValue:i.value:null;!i||!i.bypass?this.applyBypass(a,e,t):(i.value=t,i.pfValue!=null&&(i.pfValue=t),s?i.strValue="rgb("+t.join(",")+")":l?i.strValue=t.join(" "):i.strValue=""+t,this.updateStyleHints(a)),this.checkTriggers(a,e,u,t)}};Bo.removeAllBypasses=function(r,e){return this.removeBypasses(r,this.propertyNames,e)};Bo.removeBypasses=function(r,e,t){for(var n=!0,a=0;a<r.length;a++){for(var i=r[a],o={},s=0;s<e.length;s++){var l=e[s],u=this.properties[l],f=i.pstyle(u.name);if(!(!f||!f.bypass)){var c="",p=this.parse(l,c,!0),g=o[u.name]={prev:f};this.applyParsedProperty(i,p),g.next=i.pstyle(u.name)}}this.updateStyleHints(i),t&&this.updateTransitions(i,o,n)}};var Uf={};Uf.getEmSizeInPixels=function(){var r=this.containerCss("font-size");return r!=null?parseFloat(r):1};Uf.containerCss=function(r){var e=this._private.cy,t=e.container(),n=e.window();if(n&&t&&n.getComputedStyle)return n.getComputedStyle(t).getPropertyValue(r)};var Ln={};Ln.getRenderedStyle=function(r,e){return e?this.getStylePropertyValue(r,e,!0):this.getRawStyle(r,!0)};Ln.getRawStyle=function(r,e){var t=this;if(r=r[0],r){for(var n={},a=0;a<t.properties.length;a++){var i=t.properties[a],o=t.getStylePropertyValue(r,i.name,e);o!=null&&(n[i.name]=o,n[js(i.name)]=o)}return n}};Ln.getIndexedStyle=function(r,e,t,n){var a=r.pstyle(e)[t][n];return a??r.cy().style().getDefaultProperty(e)[t][0]};Ln.getStylePropertyValue=function(r,e,t){var n=this;if(r=r[0],r){var a=n.properties[e];a.alias&&(a=a.pointsTo);var i=a.type,o=r.pstyle(a.name);if(o){var s=o.value,l=o.units,u=o.strValue;if(t&&i.number&&s!=null&&Ve(s)){var f=r.cy().zoom(),c=function(x){return x*f},p=function(x,w){return c(x)+w},g=Vt(s),h=g?l.every(function(m){return m!=null}):l!=null;return h?g?s.map(function(m,x){return p(m,l[x])}).join(" "):p(s,l):g?s.map(function(m){return Ze(m)?m:""+c(m)}).join(" "):""+c(s)}else if(u!=null)return u}return null}};Ln.getAnimationStartStyle=function(r,e){for(var t={},n=0;n<e.length;n++){var a=e[n],i=a.name,o=r.pstyle(i);o!==void 0&&(Tt(o)?o=this.parse(i,o.strValue):o=this.parse(i,o)),o&&(t[i]=o)}return t};Ln.getPropsList=function(r){var e=this,t=[],n=r,a=e.properties;if(n)for(var i=Object.keys(n),o=0;o<i.length;o++){var s=i[o],l=n[s],u=a[s]||a[Df(s)],f=this.parse(u.name,l);f&&t.push(f)}return t};Ln.getNonDefaultPropertiesHash=function(r,e,t){var n=t.slice(),a,i,o,s,l,u;for(l=0;l<e.length;l++)if(a=e[l],i=r.pstyle(a,!1),i!=null)if(i.pfValue!=null)n[0]=wo(s,n[0]),n[1]=xo(s,n[1]);else for(o=i.strValue,u=0;u<o.length;u++)s=o.charCodeAt(u),n[0]=wo(s,n[0]),n[1]=xo(s,n[1]);return n};Ln.getPropertiesHash=Ln.getNonDefaultPropertiesHash;var su={};su.appendFromJson=function(r){for(var e=this,t=0;t<r.length;t++){var n=r[t],a=n.selector,i=n.style||n.css,o=Object.keys(i);e.selector(a);for(var s=0;s<o.length;s++){var l=o[s],u=i[l];e.css(l,u)}}return e};su.fromJson=function(r){var e=this;return e.resetToDefault(),e.appendFromJson(r),e};su.json=function(){for(var r=[],e=this.defaultLength;e<this.length;e++){for(var t=this[e],n=t.selector,a=t.properties,i={},o=0;o<a.length;o++){var s=a[o];i[s.name]=s.strValue}r.push({selector:n?n.toString():"core",style:i})}return r};var Wf={};Wf.appendFromString=function(r){var e=this,t=this,n=""+r,a,i,o;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function s(){n.length>a.length?n=n.substr(a.length):n=""}function l(){i.length>o.length?i=i.substr(o.length):i=""}for(;;){var u=n.match(/^\s*$/);if(u)break;var f=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!f){Dt("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}a=f[0];var c=f[1];if(c!=="core"){var p=new ya(c);if(p.invalid){Dt("Skipping parsing of block: Invalid selector found in string stylesheet: "+c),s();continue}}var g=f[2],h=!1;i=g;for(var m=[];;){var x=i.match(/^\s*$/);if(x)break;var w=i.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!w){Dt("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+g),h=!0;break}o=w[0];var S=w[1],y=w[2],C=e.properties[S];if(!C){Dt("Skipping property: Invalid property name in: "+o),l();continue}var E=t.parse(S,y);if(!E){Dt("Skipping property: Invalid property definition in: "+o),l();continue}m.push({name:S,val:y}),l()}if(h){s();break}t.selector(c);for(var M=0;M<m.length;M++){var v=m[M];t.css(v.name,v.val)}s()}return t};Wf.fromString=function(r){var e=this;return e.resetToDefault(),e.appendFromString(r),e};var Tr={};(function(){var r=hr,e=$y,t=Hy,n=Uy,a=Wy,i=function(fe){return"^"+fe+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},o=function(fe){var ce=r+"|\\w+|"+e+"|"+t+"|"+n+"|"+a;return"^"+fe+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+r+")\\s*\\,\\s*("+r+")\\s*,\\s*("+ce+")\\s*\\,\\s*("+ce+")\\)$"},s=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];Tr.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:i("data")},layoutData:{mapping:!0,regex:i("layoutData")},scratch:{mapping:!0,regex:i("scratch")},mapData:{mapping:!0,regex:o("mapData")},mapLayoutData:{mapping:!0,regex:o("mapLayoutData")},mapScratch:{mapping:!0,regex:o("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:s,singleRegexMatchValue:!0},urls:{regexes:s,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(fe,ce){switch(fe.length){case 2:return ce[0]!=="deg"&&ce[0]!=="rad"&&ce[1]!=="deg"&&ce[1]!=="rad";case 1:return Ze(fe[0])||ce[0]==="deg"||ce[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*,\\s*("+r+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(fe){var ce=fe.length;return ce===1||ce===2||ce===4}}};var l={zeroNonZero:function(fe,ce){return(fe==null||ce==null)&&fe!==ce||fe==0&&ce!=0?!0:fe!=0&&ce==0},any:function(fe,ce){return fe!=ce},emptyNonEmpty:function(fe,ce){var Ce=ga(fe),Le=ga(ce);return Ce&&!Le||!Ce&&Le}},u=Tr.types,f=[{name:"label",type:u.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any}],c=[{name:"source-label",type:u.text,triggersBounds:l.any},{name:"source-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:u.size,triggersBounds:l.any}],p=[{name:"target-label",type:u.text,triggersBounds:l.any},{name:"target-text-rotation",type:u.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:u.size,triggersBounds:l.any}],g=[{name:"font-family",type:u.fontFamily,triggersBounds:l.any},{name:"font-style",type:u.fontStyle,triggersBounds:l.any},{name:"font-weight",type:u.fontWeight,triggersBounds:l.any},{name:"font-size",type:u.size,triggersBounds:l.any},{name:"text-transform",type:u.textTransform,triggersBounds:l.any},{name:"text-wrap",type:u.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:u.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:u.size,triggersBounds:l.any},{name:"text-outline-width",type:u.size,triggersBounds:l.any},{name:"line-height",type:u.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:u.valign,triggersBounds:l.any},{name:"text-halign",type:u.halign,triggersBounds:l.any},{name:"color",type:u.color},{name:"text-outline-color",type:u.color},{name:"text-outline-opacity",type:u.zeroOneNumber},{name:"text-background-color",type:u.color},{name:"text-background-opacity",type:u.zeroOneNumber},{name:"text-background-padding",type:u.size,triggersBounds:l.any},{name:"text-border-opacity",type:u.zeroOneNumber},{name:"text-border-color",type:u.color},{name:"text-border-width",type:u.size,triggersBounds:l.any},{name:"text-border-style",type:u.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:u.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:u.justification}],m=[{name:"events",type:u.bool,triggersZOrder:l.any},{name:"text-events",type:u.bool,triggersZOrder:l.any}],x=[{name:"display",type:u.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:!0},{name:"visibility",type:u.visibility,triggersZOrder:l.any},{name:"opacity",type:u.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:u.zeroOneNumber},{name:"min-zoomed-font-size",type:u.size},{name:"z-compound-depth",type:u.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:u.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:u.number,triggersZOrder:l.any}],w=[{name:"overlay-padding",type:u.size,triggersBounds:l.any},{name:"overlay-color",type:u.color},{name:"overlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:u.cornerRadius}],S=[{name:"underlay-padding",type:u.size,triggersBounds:l.any},{name:"underlay-color",type:u.color},{name:"underlay-opacity",type:u.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:u.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:u.cornerRadius}],y=[{name:"transition-property",type:u.propList},{name:"transition-duration",type:u.time},{name:"transition-delay",type:u.time},{name:"transition-timing-function",type:u.easing}],C=function(fe,ce){return ce.value==="label"?-fe.poolIndex():ce.pfValue},E=[{name:"height",type:u.nodeSize,triggersBounds:l.any,hashOverride:C},{name:"width",type:u.nodeSize,triggersBounds:l.any,hashOverride:C},{name:"shape",type:u.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:u.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:u.cornerRadius},{name:"background-color",type:u.color},{name:"background-fill",type:u.fill},{name:"background-opacity",type:u.zeroOneNumber},{name:"background-blacken",type:u.nOneOneNumber},{name:"background-gradient-stop-colors",type:u.colors},{name:"background-gradient-stop-positions",type:u.percentages},{name:"background-gradient-direction",type:u.gradientDirection},{name:"padding",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:u.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:u.boundsExpansion,triggersBounds:l.any}],M=[{name:"border-color",type:u.color},{name:"border-opacity",type:u.zeroOneNumber},{name:"border-width",type:u.size,triggersBounds:l.any},{name:"border-style",type:u.borderStyle},{name:"border-cap",type:u.lineCap},{name:"border-join",type:u.lineJoin},{name:"border-dash-pattern",type:u.numbers},{name:"border-dash-offset",type:u.number},{name:"border-position",type:u.linePosition}],v=[{name:"outline-color",type:u.color},{name:"outline-opacity",type:u.zeroOneNumber},{name:"outline-width",type:u.size,triggersBounds:l.any},{name:"outline-style",type:u.borderStyle},{name:"outline-offset",type:u.size,triggersBounds:l.any}],T=[{name:"background-image",type:u.urls},{name:"background-image-crossorigin",type:u.bgCrossOrigin},{name:"background-image-opacity",type:u.zeroOneNumbers},{name:"background-image-containment",type:u.bgContainment},{name:"background-image-smoothing",type:u.bools},{name:"background-position-x",type:u.bgPos},{name:"background-position-y",type:u.bgPos},{name:"background-width-relative-to",type:u.bgRelativeTo},{name:"background-height-relative-to",type:u.bgRelativeTo},{name:"background-repeat",type:u.bgRepeat},{name:"background-fit",type:u.bgFit},{name:"background-clip",type:u.bgClip},{name:"background-width",type:u.bgWH},{name:"background-height",type:u.bgWH},{name:"background-offset-x",type:u.bgPos},{name:"background-offset-y",type:u.bgPos}],k=[{name:"position",type:u.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:u.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:u.size,triggersBounds:l.any},{name:"min-width-bias-left",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:u.size,triggersBounds:l.any},{name:"min-height-bias-top",type:u.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:u.sizeMaybePercent,triggersBounds:l.any}],N=[{name:"line-style",type:u.lineStyle},{name:"line-color",type:u.color},{name:"line-fill",type:u.fill},{name:"line-cap",type:u.lineCap},{name:"line-opacity",type:u.zeroOneNumber},{name:"line-dash-pattern",type:u.numbers},{name:"line-dash-offset",type:u.number},{name:"line-gradient-stop-colors",type:u.colors},{name:"line-gradient-stop-positions",type:u.percentages},{name:"curve-style",type:u.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelBeziers:!0},{name:"haystack-radius",type:u.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:u.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:u.size,triggersBounds:l.any},{name:"control-point-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-distances",type:u.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:u.numbers,triggersBounds:l.any},{name:"segment-radii",type:u.numbers,triggersBounds:l.any},{name:"radius-type",type:u.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:u.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:u.size,triggersBounds:l.any},{name:"taxi-direction",type:u.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:u.number,triggersBounds:l.any},{name:"edge-distances",type:u.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:u.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:u.angle,triggersBounds:l.any},{name:"loop-sweep",type:u.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:u.size,triggersBounds:l.any},{name:"target-distance-from-node",type:u.size,triggersBounds:l.any}],O=[{name:"ghost",type:u.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:u.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:u.zeroOneNumber}],I=[{name:"selection-box-color",type:u.color},{name:"selection-box-opacity",type:u.zeroOneNumber},{name:"selection-box-border-color",type:u.color},{name:"selection-box-border-width",type:u.size},{name:"active-bg-color",type:u.color},{name:"active-bg-opacity",type:u.zeroOneNumber},{name:"active-bg-size",type:u.size},{name:"outside-texture-bg-color",type:u.color},{name:"outside-texture-bg-opacity",type:u.zeroOneNumber}],q=[];Tr.pieBackgroundN=16,q.push({name:"pie-size",type:u.sizeMaybePercent});for(var B=1;B<=Tr.pieBackgroundN;B++)q.push({name:"pie-"+B+"-background-color",type:u.color}),q.push({name:"pie-"+B+"-background-size",type:u.percent}),q.push({name:"pie-"+B+"-background-opacity",type:u.zeroOneNumber});var j=[],Y=Tr.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:u.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:u.color},{name:"arrow-fill",type:u.arrowFill},{name:"arrow-width",type:u.arrowWidth}].forEach(function(oe){Y.forEach(function(fe){var ce=fe+"-"+oe.name,Ce=oe.type,Le=oe.triggersBounds;j.push({name:ce,type:Ce,triggersBounds:Le})})},{});var U=Tr.properties=[].concat(m,y,x,w,S,O,h,g,f,c,p,E,M,v,T,q,k,N,j,I),X=Tr.propertyGroups={behavior:m,transition:y,visibility:x,overlay:w,underlay:S,ghost:O,commonLabel:h,labelDimensions:g,mainLabel:f,sourceLabel:c,targetLabel:p,nodeBody:E,nodeBorder:M,nodeOutline:v,backgroundImage:T,pie:q,compound:k,edgeLine:N,edgeArrow:j,core:I},K=Tr.propertyGroupNames={},P=Tr.propertyGroupKeys=Object.keys(X);P.forEach(function(oe){K[oe]=X[oe].map(function(fe){return fe.name}),X[oe].forEach(function(fe){return fe.groupKey=oe})});var D=Tr.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];Tr.propertyNames=U.map(function(oe){return oe.name});for(var L=0;L<U.length;L++){var F=U[L];U[F.name]=F}for(var W=0;W<D.length;W++){var Z=D[W],J=U[Z.pointsTo],Q={name:Z.name,alias:!0,pointsTo:J};U.push(Q),U[Z.name]=Q}})();Tr.getDefaultProperty=function(r){return this.getDefaultProperties()[r]};Tr.getDefaultProperties=function(){var r=this._private;if(r.defaultProperties!=null)return r.defaultProperties;for(var e=rt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,u){for(var f=1;f<=Tr.pieBackgroundN;f++){var c=u.name.replace("{{i}}",f),p=u.value;l[c]=p}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,u){return Tr.arrowPrefixes.forEach(function(f){var c=f+"-"+u.name,p=u.value;l[c]=p}),l},{})),t={},n=0;n<this.properties.length;n++){var a=this.properties[n];if(!a.pointsTo){var i=a.name,o=e[i],s=this.parse(i,o);t[i]=s}}return r.defaultProperties=t,r.defaultProperties};Tr.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var uu={};uu.parse=function(r,e,t,n){var a=this;if(tr(e))return a.parseImplWarn(r,e,t,n);var i=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,o=t?"t":"f",s=""+e,l=Wh(r,s,o,i),u=a.propCache=a.propCache||[],f;return(f=u[l])||(f=u[l]=a.parseImplWarn(r,e,t,n)),(t||n==="mapping")&&(f=An(f),f&&(f.value=An(f.value))),f};uu.parseImplWarn=function(r,e,t,n){var a=this.parseImpl(r,e,t,n);return!a&&e!=null&&Dt("The style property `".concat(r,": ").concat(e,"` is invalid")),a&&(a.name==="width"||a.name==="height")&&e==="label"&&Dt("The style value of `label` is deprecated for `"+a.name+"`"),a};uu.parseImpl=function(r,e,t,n){var a=this;r=Df(r);var i=a.properties[r],o=e,s=a.types;if(!i||e===void 0)return null;i.alias&&(i=i.pointsTo,r=i.name);var l=Ze(e);l&&(e=e.trim());var u=i.type;if(!u)return null;if(t&&(e===""||e===null))return{name:r,value:e,bypass:!0,deleteBypass:!0};if(tr(e))return{name:r,value:e,strValue:"fn",mapped:s.fn,bypass:t};var f,c;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(f=new RegExp(s.data.regex).exec(e))){if(t)return!1;var p=s.data;return{name:r,value:f,strValue:""+e,mapped:p,field:f[1],bypass:t}}else if(e.length>=10&&e[0]==="m"&&(c=new RegExp(s.mapData.regex).exec(e))){if(t||u.multiple)return!1;var g=s.mapData;if(!(u.color||u.number))return!1;var h=this.parse(r,c[4]);if(!h||h.mapped)return!1;var m=this.parse(r,c[5]);if(!m||m.mapped)return!1;if(h.pfValue===m.pfValue||h.strValue===m.strValue)return Dt("`"+r+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+r+": "+h.strValue+"`"),this.parse(r,h.strValue);if(u.color){var x=h.value,w=m.value,S=x[0]===w[0]&&x[1]===w[1]&&x[2]===w[2]&&(x[3]===w[3]||(x[3]==null||x[3]===1)&&(w[3]==null||w[3]===1));if(S)return!1}return{name:r,value:c,strValue:""+e,mapped:g,field:c[1],fieldMin:parseFloat(c[2]),fieldMax:parseFloat(c[3]),valueMin:h.value,valueMax:m.value,bypass:t}}}if(u.multiple&&n!=="multiple"){var y;if(l?y=e.split(/\s+/):Vt(e)?y=e:y=[e],u.evenMultiple&&y.length%2!==0)return null;for(var C=[],E=[],M=[],v="",T=!1,k=0;k<y.length;k++){var N=a.parse(r,y[k],t,"multiple");T=T||Ze(N.value),C.push(N.value),M.push(N.pfValue!=null?N.pfValue:N.value),E.push(N.units),v+=(k>0?" ":"")+N.strValue}return u.validate&&!u.validate(C,E)?null:u.singleEnum&&T?C.length===1&&Ze(C[0])?{name:r,value:C[0],strValue:C[0],bypass:t}:null:{name:r,value:C,pfValue:M,strValue:v,bypass:t,units:E}}var O=function(){for(var fe=0;fe<u.enums.length;fe++){var ce=u.enums[fe];if(ce===e)return{name:r,value:e,strValue:""+e,bypass:t}}return null};if(u.number){var I,q="px";if(u.units&&(I=u.units),u.implicitUnits&&(q=u.implicitUnits),!u.unitless)if(l){var B="px|em"+(u.allowPercent?"|\\%":"");I&&(B=I);var j=e.match("^("+hr+")("+B+")?$");j&&(e=j[1],I=j[2]||q)}else(!I||u.implicitUnits)&&(I=q);if(e=parseFloat(e),isNaN(e)&&u.enums===void 0)return null;if(isNaN(e)&&u.enums!==void 0)return e=o,O();if(u.integer&&!Ry(e)||u.min!==void 0&&(e<u.min||u.strictMin&&e===u.min)||u.max!==void 0&&(e>u.max||u.strictMax&&e===u.max))return null;var Y={name:r,value:e,strValue:""+e+(I||""),units:I,bypass:t};return u.unitless||I!=="px"&&I!=="em"?Y.pfValue=e:Y.pfValue=I==="px"||!I?e:this.getEmSizeInPixels()*e,(I==="ms"||I==="s")&&(Y.pfValue=I==="ms"?e:1e3*e),(I==="deg"||I==="rad")&&(Y.pfValue=I==="rad"?e:g0(e)),I==="%"&&(Y.pfValue=e/100),Y}else if(u.propList){var U=[],X=""+e;if(X!=="none"){for(var K=X.split(/\s*,\s*|\s+/),P=0;P<K.length;P++){var D=K[P].trim();a.properties[D]?U.push(D):Dt("`"+D+"` is not a valid property name")}if(U.length===0)return null}return{name:r,value:U,strValue:U.length===0?"none":U.join(" "),bypass:t}}else if(u.color){var L=Zy(e);return L?{name:r,value:L,pfValue:L,strValue:"rgb("+L[0]+","+L[1]+","+L[2]+")",bypass:t}:null}else if(u.regex||u.regexes){if(u.enums){var F=O();if(F)return F}for(var W=u.regexes?u.regexes:[u.regex],Z=0;Z<W.length;Z++){var J=new RegExp(W[Z]),Q=J.exec(e);if(Q)return{name:r,value:u.singleRegexMatchValue?Q[1]:Q,strValue:""+e,bypass:t}}return null}else return u.string?{name:r,value:""+e,strValue:""+e,bypass:t}:u.enums?O():null};var Nr=function r(e){if(!(this instanceof r))return new r(e);if(!Mf(e)){nr("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Ir=Nr.prototype;Ir.instanceString=function(){return"style"};Ir.clear=function(){for(var r=this._private,e=r.cy,t=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,r.contextStyles={},r.propDiffs={},this.cleanElements(t,!0),t.forEach(function(a){var i=a[0]._private;i.styleDirty=!0,i.appliedInitStyle=!1}),this};Ir.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Ir.core=function(r){return this._private.coreStyle[r]||this.getDefaultProperty(r)};Ir.selector=function(r){var e=r==="core"?null:new ya(r),t=this.length++;return this[t]={selector:e,properties:[],mappedProperties:[],index:t},this};Ir.css=function(){var r=this,e=arguments;if(e.length===1)for(var t=e[0],n=0;n<r.properties.length;n++){var a=r.properties[n],i=t[a.name];i===void 0&&(i=t[js(a.name)]),i!==void 0&&this.cssRule(a.name,i)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Ir.style=Ir.css;Ir.cssRule=function(r,e){var t=this.parse(r,e);if(t){var n=this.length-1;this[n].properties.push(t),this[n].properties[t.name]=t,t.name.match(/pie-(\d+)-background-size/)&&t.value&&(this._private.hasPie=!0),t.mapped&&this[n].mappedProperties.push(t);var a=!this[n].selector;a&&(this._private.coreStyle[t.name]=t)}return this};Ir.append=function(r){return Ih(r)?r.appendToStyle(this):Vt(r)?this.appendFromJson(r):Ze(r)&&this.appendFromString(r),this};Nr.fromJson=function(r,e){var t=new Nr(r);return t.fromJson(e),t};Nr.fromString=function(r,e){return new Nr(r).fromString(e)};[Br,Bo,Uf,Ln,su,Wf,Tr,uu].forEach(function(r){rt(Ir,r)});Nr.types=Ir.types;Nr.properties=Ir.properties;Nr.propertyGroups=Ir.propertyGroups;Nr.propertyGroupNames=Ir.propertyGroupNames;Nr.propertyGroupKeys=Ir.propertyGroupKeys;var Rx={style:function(e){if(e){var t=this.setStyle(e);t.update()}return this._private.style},setStyle:function(e){var t=this._private;return Ih(e)?t.style=e.generateStyle(this):Vt(e)?t.style=Nr.fromJson(this,e):Ze(e)?t.style=Nr.fromString(this,e):t.style=Nr(this),t.style},updateStyle:function(){this.mutableElements().updateStyle()}},Ix="single",Ka={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var t=this._private;if(t.selectionType==null&&(t.selectionType=Ix),e!==void 0)(e==="additive"||e==="single")&&(t.selectionType=e);else return t.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,t=this._private.pan,n,a,i,o,s;switch(e.length){case 0:return t;case 1:if(Ze(e[0]))return n=e[0],t[n];if(Tt(e[0])){if(!this._private.panningEnabled)return this;i=e[0],o=i.x,s=i.y,Ve(o)&&(t.x=o),Ve(s)&&(t.y=s),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],a=e[1],(n==="x"||n==="y")&&Ve(a)&&(t[n]=a),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,t){var n=arguments,a=this._private.pan,i,o,s,l,u;if(!this._private.panningEnabled)return this;switch(n.length){case 1:Tt(e)&&(s=n[0],l=s.x,u=s.y,Ve(l)&&(a.x+=l),Ve(u)&&(a.y+=u),this.emit("pan viewport"));break;case 2:i=e,o=t,(i==="x"||i==="y")&&Ve(o)&&(a[i]+=o),this.emit("pan viewport");break}return this.notify("viewport"),this},fit:function(e,t){var n=this.getFitViewport(e,t);if(n){var a=this._private;a.zoom=n.zoom,a.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,t){if(Ve(e)&&t===void 0&&(t=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Ze(e)){var a=e;e=this.$(a)}else if(Fy(e)){var i=e;n={x1:i.x1,y1:i.y1,x2:i.x2,y2:i.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Qr(e)||(e=this.mutableElements());if(!(Qr(e)&&e.empty())){n=n||e.boundingBox();var o=this.width(),s=this.height(),l;if(t=Ve(t)?t:0,!isNaN(o)&&!isNaN(s)&&o>0&&s>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((o-2*t)/n.w,(s-2*t)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var u={x:(o-l*(n.x1+n.x2))/2,y:(s-l*(n.y1+n.y2))/2};return{zoom:l,pan:u}}}}},zoomRange:function(e,t){var n=this._private;if(t==null){var a=e;e=a.min,t=a.max}return Ve(e)&&Ve(t)&&e<=t?(n.minZoom=e,n.maxZoom=t):Ve(e)&&t===void 0&&e<=n.maxZoom?n.minZoom=e:Ve(t)&&e===void 0&&t>=n.minZoom&&(n.maxZoom=t),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var t=this._private,n=t.pan,a=t.zoom,i,o,s=!1;if(t.zoomingEnabled||(s=!0),Ve(e)?o=e:Tt(e)&&(o=e.level,e.position!=null?i=Zs(e.position,a,n):e.renderedPosition!=null&&(i=e.renderedPosition),i!=null&&!t.panningEnabled&&(s=!0)),o=o>t.maxZoom?t.maxZoom:o,o=o<t.minZoom?t.minZoom:o,s||!Ve(o)||o===a||i!=null&&(!Ve(i.x)||!Ve(i.y)))return null;if(i!=null){var l=n,u=a,f=o,c={x:-f/u*(i.x-l.x)+i.x,y:-f/u*(i.y-l.y)+i.y};return{zoomed:!0,panned:!0,zoom:f,pan:c}}else return{zoomed:!0,panned:!1,zoom:o,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var t=this.getZoomedViewport(e),n=this._private;return t==null||!t.zoomed?this:(n.zoom=t.zoom,t.panned&&(n.pan.x=t.pan.x,n.pan.y=t.pan.y),this.emit("zoom"+(t.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var t=this._private,n=!0,a=!0,i=[],o=!1,s=!1;if(!e)return this;if(Ve(e.zoom)||(n=!1),Tt(e.pan)||(a=!1),!n&&!a)return this;if(n){var l=e.zoom;l<t.minZoom||l>t.maxZoom||!t.zoomingEnabled?o=!0:(t.zoom=l,i.push("zoom"))}if(a&&(!o||!e.cancelOnFailedZoom)&&t.panningEnabled){var u=e.pan;Ve(u.x)&&(t.pan.x=u.x,s=!1),Ve(u.y)&&(t.pan.y=u.y,s=!1),s||i.push("pan")}return i.length>0&&(i.push("viewport"),this.emit(i.join(" ")),this.notify("viewport")),this},center:function(e){var t=this.getCenterPan(e);return t&&(this._private.pan=t,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,t){if(!!this._private.panningEnabled){if(Ze(e)){var n=e;e=this.mutableElements().filter(n)}else Qr(e)||(e=this.mutableElements());if(e.length!==0){var a=e.boundingBox(),i=this.width(),o=this.height();t=t===void 0?this._private.zoom:t;var s={x:(i-t*(a.x1+a.x2))/2,y:(o-t*(a.y1+a.y2))/2};return s}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,t=e.container,n=this;return e.sizeCache=e.sizeCache||(t?function(){var a=n.window().getComputedStyle(t),i=function(s){return parseFloat(a.getPropertyValue(s))};return{width:t.clientWidth-i("padding-left")-i("padding-right"),height:t.clientHeight-i("padding-top")-i("padding-bottom")}}():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,t=this._private.zoom,n=this.renderedExtent(),a={x1:(n.x1-e.x)/t,x2:(n.x2-e.x)/t,y1:(n.y1-e.y)/t,y2:(n.y2-e.y)/t};return a.w=a.x2-a.x1,a.h=a.y2-a.y1,a},renderedExtent:function(){var e=this.width(),t=this.height();return{x1:0,y1:0,x2:e,y2:t,w:e,h:t}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};Ka.centre=Ka.center;Ka.autolockNodes=Ka.autolock;Ka.autoungrabifyNodes=Ka.autoungrabify;var ko={data:Mt.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Mt.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Mt.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Mt.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};ko.attr=ko.data;ko.removeAttr=ko.removeData;var Ao=function(e){var t=this;e=rt({},e);var n=e.container;n&&!Ms(n)&&Ms(n[0])&&(n=n[0]);var a=n?n._cyreg:null;a=a||{},a&&a.cy&&(a.cy.destroy(),a={});var i=a.readies=a.readies||[];n&&(n._cyreg=a),a.cy=t;var o=dr!==void 0&&n!==void 0&&!e.headless,s=e;s.layout=rt({name:o?"grid":"null"},s.layout),s.renderer=rt({name:o?"canvas":"null"},s.renderer);var l=function(h,m,x){return m!==void 0?m:x!==void 0?x:h},u=this._private={container:n,ready:!1,options:s,elements:new Pr(this),listeners:[],aniEles:new Pr(this),data:s.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,s.zoomingEnabled),userZoomingEnabled:l(!0,s.userZoomingEnabled),panningEnabled:l(!0,s.panningEnabled),userPanningEnabled:l(!0,s.userPanningEnabled),boxSelectionEnabled:l(!0,s.boxSelectionEnabled),autolock:l(!1,s.autolock,s.autolockNodes),autoungrabify:l(!1,s.autoungrabify,s.autoungrabifyNodes),autounselectify:l(!1,s.autounselectify),styleEnabled:s.styleEnabled===void 0?o:s.styleEnabled,zoom:Ve(s.zoom)?s.zoom:1,pan:{x:Tt(s.pan)&&Ve(s.pan.x)?s.pan.x:0,y:Tt(s.pan)&&Ve(s.pan.y)?s.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,s.multiClickDebounceTime)};this.createEmitter(),this.selectionType(s.selectionType),this.zoomRange({min:s.minZoom,max:s.maxZoom});var f=function(h,m){var x=h.some(zy);if(x)return Li.all(h).then(m);m(h)};u.styleEnabled&&t.setStyle([]);var c=rt({},s,s.renderer);t.initRenderer(c);var p=function(h,m,x){t.notifications(!1);var w=t.mutableElements();w.length>0&&w.remove(),h!=null&&(Tt(h)||Vt(h))&&t.add(h),t.one("layoutready",function(y){t.notifications(!0),t.emit(y),t.one("load",m),t.emitAndNotify("load")}).one("layoutstop",function(){t.one("done",x),t.emit("done")});var S=rt({},t._private.options.layout);S.eles=t.elements(),t.layout(S).run()};f([s.style,s.elements],function(g){var h=g[0],m=g[1];u.styleEnabled&&t.style().append(h),p(m,function(){t.startAnimationLoop(),u.ready=!0,tr(s.ready)&&t.on("ready",s.ready);for(var x=0;x<i.length;x++){var w=i[x];t.on("ready",w)}a&&(a.readies=[]),t.emit("ready")},s.done)})},Bs=Ao.prototype;rt(Bs,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return dr;var t=this._private.container.ownerDocument;return t===void 0||t==null?dr:t.defaultView||dr},mount:function(e){if(e!=null){var t=this,n=t._private,a=n.options;return!Ms(e)&&Ms(e[0])&&(e=e[0]),t.stopAnimationLoop(),t.destroyRenderer(),n.container=e,n.styleEnabled=!0,t.invalidateSize(),t.initRenderer(rt({},a,a.renderer,{name:a.renderer.name==="null"?"canvas":a.renderer.name})),t.startAnimationLoop(),t.style(a.style),t.emit("mount"),t}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return An(this._private.options)},json:function(e){var t=this,n=t._private,a=t.mutableElements(),i=function(C){return t.getElementById(C.id())};if(Tt(e)){if(t.startBatch(),e.elements){var o={},s=function(C,E){for(var M=[],v=[],T=0;T<C.length;T++){var k=C[T];if(!k.data.id){Dt("cy.json() cannot handle elements without an ID attribute");continue}var N=""+k.data.id,O=t.getElementById(N);o[N]=!0,O.length!==0?v.push({ele:O,json:k}):(E&&(k.group=E),M.push(k))}t.add(M);for(var I=0;I<v.length;I++){var q=v[I],B=q.ele,j=q.json;B.json(j)}};if(Vt(e.elements))s(e.elements);else for(var l=["nodes","edges"],u=0;u<l.length;u++){var f=l[u],c=e.elements[f];Vt(c)&&s(c,f)}var p=t.collection();a.filter(function(y){return!o[y.id()]}).forEach(function(y){y.isParent()?p.merge(y):y.remove()}),p.forEach(function(y){return y.children().move({parent:null})}),p.forEach(function(y){return i(y).remove()})}e.style&&t.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&t.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&t.pan(e.pan),e.data&&t.data(e.data);for(var g=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<g.length;h++){var m=g[h];e[m]!=null&&t[m](e[m])}return t.endBatch(),this}else{var x=!!e,w={};x?w.elements=this.elements().map(function(y){return y.json()}):(w.elements={},a.forEach(function(y){var C=y.group();w.elements[C]||(w.elements[C]=[]),w.elements[C].push(y.json())})),this._private.styleEnabled&&(w.style=t.style().json()),w.data=An(t.data());var S=n.options;return w.zoomingEnabled=n.zoomingEnabled,w.userZoomingEnabled=n.userZoomingEnabled,w.zoom=n.zoom,w.minZoom=n.minZoom,w.maxZoom=n.maxZoom,w.panningEnabled=n.panningEnabled,w.userPanningEnabled=n.userPanningEnabled,w.pan=An(n.pan),w.boxSelectionEnabled=n.boxSelectionEnabled,w.renderer=An(S.renderer),w.hideEdgesOnViewport=S.hideEdgesOnViewport,w.textureOnViewport=S.textureOnViewport,w.wheelSensitivity=S.wheelSensitivity,w.motionBlur=S.motionBlur,w.multiClickDebounceTime=S.multiClickDebounceTime,w}}});Bs.$id=Bs.getElementById;[Tx,Mx,Bv,uf,Cs,Ox,lf,Ss,Rx,Ka,ko].forEach(function(r){rt(Bs,r)});var Bx={fit:!0,directed:!1,padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}},Fx={maximal:!1,acyclic:!1},ci=function(e){return e.scratch("breadthfirst")},Md=function(e,t){return e.scratch("breadthfirst",t)};function Fv(r){this.options=rt({},Bx,Fx,r)}Fv.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().filter(function(De){return!De.isParent()}),i=n,o=e.directed,s=e.acyclic||e.maximal||e.maximalAdjustments>0,l=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),u;if(Qr(e.roots))u=e.roots;else if(Vt(e.roots)){for(var f=[],c=0;c<e.roots.length;c++){var p=e.roots[c],g=t.getElementById(p);f.push(g)}u=t.collection(f)}else if(Ze(e.roots))u=t.$(e.roots);else if(o)u=a.roots();else{var h=n.components();u=t.collection();for(var m=function(me){var _e=h[me],we=_e.maxDegree(!1),xe=_e.filter(function(Be){return Be.degree(!1)===we});u=u.add(xe)},x=0;x<h.length;x++)m(x)}var w=[],S={},y=function(me,_e){w[_e]==null&&(w[_e]=[]);var we=w[_e].length;w[_e].push(me),Md(me,{index:we,depth:_e})},C=function(me,_e){var we=ci(me),xe=we.depth,Be=we.index;w[xe][Be]=null,y(me,_e)};i.bfs({roots:u,directed:e.directed,visit:function(me,_e,we,xe,Be){var Ue=me[0],Ee=Ue.id();y(Ue,Be),S[Ee]=!0}});for(var E=[],M=0;M<a.length;M++){var v=a[M];S[v.id()]||E.push(v)}var T=function(me){for(var _e=w[me],we=0;we<_e.length;we++){var xe=_e[we];if(xe==null){_e.splice(we,1),we--;continue}Md(xe,{depth:me,index:we})}},k=function(){for(var me=0;me<w.length;me++)T(me)},N=function(me,_e){for(var we=ci(me),xe=me.incomers().filter(function(R){return R.isNode()&&n.has(R)}),Be=-1,Ue=me.id(),Ee=0;Ee<xe.length;Ee++){var Me=xe[Ee],ke=ci(Me);Be=Math.max(Be,ke.depth)}if(we.depth<=Be){if(!e.acyclic&&_e[Ue])return null;var de=Be+1;return C(me,de),_e[Ue]=de,!0}return!1};if(o&&s){var O=[],I={},q=function(me){return O.push(me)},B=function(){return O.shift()};for(a.forEach(function(De){return O.push(De)});O.length>0;){var j=B(),Y=N(j,I);if(Y)j.outgoers().filter(function(De){return De.isNode()&&n.has(De)}).forEach(q);else if(Y===null){Dt("Detected double maximal shift for node `"+j.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}k();var U=0;if(e.avoidOverlap)for(var X=0;X<a.length;X++){var K=a[X],P=K.layoutDimensions(e),D=P.w,L=P.h;U=Math.max(U,D,L)}var F={},W=function(me){if(F[me.id()])return F[me.id()];for(var _e=ci(me).depth,we=me.neighborhood(),xe=0,Be=0,Ue=0;Ue<we.length;Ue++){var Ee=we[Ue];if(!(Ee.isEdge()||Ee.isParent()||!a.has(Ee))){var Me=ci(Ee);if(Me!=null){var ke=Me.index,de=Me.depth;if(!(ke==null||de==null)){var R=w[de].length;de<_e&&(xe+=ke/R,Be++)}}}}return Be=Math.max(1,Be),xe=xe/Be,Be===0&&(xe=0),F[me.id()]=xe,xe},Z=function(me,_e){var we=W(me),xe=W(_e),Be=we-xe;return Be===0?Fh(me.id(),_e.id()):Be};e.depthSort!==void 0&&(Z=e.depthSort);for(var J=0;J<w.length;J++)w[J].sort(Z),T(J);for(var Q=[],oe=0;oe<E.length;oe++)Q.push(E[oe]);w.unshift(Q),k();for(var fe=0,ce=0;ce<w.length;ce++)fe=Math.max(w[ce].length,fe);var Ce={x:l.x1+l.w/2,y:l.x1+l.h/2},Le=w.reduce(function(De,me){return Math.max(De,me.length)},0),Re=function(me){var _e=ci(me),we=_e.depth,xe=_e.index,Be=w[we].length,Ue=Math.max(l.w/((e.grid?Le:Be)+1),U),Ee=Math.max(l.h/(w.length+1),U),Me=Math.min(l.w/2/w.length,l.h/2/w.length);if(Me=Math.max(Me,U),e.circle){var de=Me*we+Me-(w.length>0&&w[0].length<=3?Me/2:0),R=2*Math.PI/w[we].length*xe;return we===0&&w[0].length===1&&(de=1),{x:Ce.x+de*Math.cos(R),y:Ce.y+de*Math.sin(R)}}else{var ke={x:Ce.x+(xe+1-(Be+1)/2)*Ue,y:(we+1)*Ee};return ke}};return n.nodes().layoutPositions(this,e,Re),this};var zx={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function zv(r){this.options=rt({},zx,r)}zv.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,i=n.nodes().not(":parent");e.sort&&(i=i.sort(e.sort));for(var o=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/i.length:e.sweep,u=l/Math.max(1,i.length-1),f,c=0,p=0;p<i.length;p++){var g=i[p],h=g.layoutDimensions(e),m=h.w,x=h.h;c=Math.max(c,m,x)}if(Ve(e.radius)?f=e.radius:i.length<=1?f=0:f=Math.min(o.h,o.w)/2-c,i.length>1&&e.avoidOverlap){c*=1.75;var w=Math.cos(u)-Math.cos(0),S=Math.sin(u)-Math.sin(0),y=Math.sqrt(c*c/(w*w+S*S));f=Math.max(y,f)}var C=function(M,v){var T=e.startAngle+v*u*(a?1:-1),k=f*Math.cos(T),N=f*Math.sin(T),O={x:s.x+k,y:s.y+N};return O};return n.nodes().layoutPositions(this,e,C),this};var Gx={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Gv(r){this.options=rt({},Gx,r)}Gv.prototype.run=function(){for(var r=this.options,e=r,t=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=r.cy,a=e.eles,i=a.nodes().not(":parent"),o=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),s={x:o.x1+o.w/2,y:o.y1+o.h/2},l=[],u=0,f=0;f<i.length;f++){var c=i[f],p=void 0;p=e.concentric(c),l.push({value:p,node:c}),c._private.scratch.concentric=p}i.updateStyle();for(var g=0;g<i.length;g++){var h=i[g],m=h.layoutDimensions(e);u=Math.max(u,m.w,m.h)}l.sort(function(De,me){return me.value-De.value});for(var x=e.levelWidth(i),w=[[]],S=w[0],y=0;y<l.length;y++){var C=l[y];if(S.length>0){var E=Math.abs(S[0].value-C.value);E>=x&&(S=[],w.push(S))}S.push(C)}var M=u+e.minNodeSpacing;if(!e.avoidOverlap){var v=w.length>0&&w[0].length>1,T=Math.min(o.w,o.h)/2-M,k=T/(w.length+v?1:0);M=Math.min(M,k)}for(var N=0,O=0;O<w.length;O++){var I=w[O],q=e.sweep===void 0?2*Math.PI-2*Math.PI/I.length:e.sweep,B=I.dTheta=q/Math.max(1,I.length-1);if(I.length>1&&e.avoidOverlap){var j=Math.cos(B)-Math.cos(0),Y=Math.sin(B)-Math.sin(0),U=Math.sqrt(M*M/(j*j+Y*Y));N=Math.max(U,N)}I.r=N,N+=M}if(e.equidistant){for(var X=0,K=0,P=0;P<w.length;P++){var D=w[P],L=D.r-K;X=Math.max(X,L)}K=0;for(var F=0;F<w.length;F++){var W=w[F];F===0&&(K=W.r),W.r=K,K+=X}}for(var Z={},J=0;J<w.length;J++)for(var Q=w[J],oe=Q.dTheta,fe=Q.r,ce=0;ce<Q.length;ce++){var Ce=Q[ce],Le=e.startAngle+(t?1:-1)*oe*ce,Re={x:s.x+fe*Math.cos(Le),y:s.y+fe*Math.sin(Le)};Z[Ce.node.id()]=Re}return a.nodes().layoutPositions(this,e,function(De){var me=De.id();return Z[me]}),this};var Vl,Vx={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,t){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function lu(r){this.options=rt({},Vx,r),this.options.layout=this;var e=this.options.eles.nodes(),t=this.options.eles.edges(),n=t.filter(function(a){var i=a.source().data("id"),o=a.target().data("id"),s=e.some(function(u){return u.data("id")===i}),l=e.some(function(u){return u.data("id")===o});return!s||!l});this.options.eles=this.options.eles.not(n)}lu.prototype.run=function(){var r=this.options,e=r.cy,t=this;t.stopped=!1,(r.animate===!0||r.animate===!1)&&t.emit({type:"layoutstart",layout:t}),r.debug===!0?Vl=!0:Vl=!1;var n=$x(e,t,r);Vl&&Ux(n),r.randomize&&Wx(n);var a=Kn(),i=function(){Kx(n,e,r),r.fit===!0&&e.fit(r.padding)},o=function(p){return!(t.stopped||p>=r.numIter||(jx(n,r),n.temperature=n.temperature*r.coolingFactor,n.temperature<r.minTemp))},s=function(){if(r.animate===!0||r.animate===!1)i(),t.one("layoutstop",r.stop),t.emit({type:"layoutstop",layout:t});else{var p=r.eles.nodes(),g=Vv(n,r,p);p.layoutPositions(t,r,g)}},l=0,u=!0;if(r.animate===!0){var f=function c(){for(var p=0;u&&p<r.refresh;)u=o(l),l++,p++;if(!u)Od(n,r),s();else{var g=Kn();g-a>=r.animationThreshold&&i(),Ds(c)}};f()}else{for(;u;)u=o(l),l++;Od(n,r),s()}return this};lu.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};lu.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var $x=function(e,t,n){for(var a=n.eles.edges(),i=n.eles.nodes(),o=Yr(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),s={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:i.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:a.size(),temperature:n.initialTemp,clientWidth:o.w,clientHeight:o.h,boundingBox:o},l=n.eles.components(),u={},f=0;f<l.length;f++)for(var c=l[f],p=0;p<c.length;p++){var g=c[p];u[g.id()]=f}for(var f=0;f<s.nodeSize;f++){var h=i[f],m=h.layoutDimensions(n),x={};x.isLocked=h.locked(),x.id=h.data("id"),x.parentId=h.data("parent"),x.cmptId=u[h.id()],x.children=[],x.positionX=h.position("x"),x.positionY=h.position("y"),x.offsetX=0,x.offsetY=0,x.height=m.w,x.width=m.h,x.maxX=x.positionX+x.width/2,x.minX=x.positionX-x.width/2,x.maxY=x.positionY+x.height/2,x.minY=x.positionY-x.height/2,x.padLeft=parseFloat(h.style("padding")),x.padRight=parseFloat(h.style("padding")),x.padTop=parseFloat(h.style("padding")),x.padBottom=parseFloat(h.style("padding")),x.nodeRepulsion=tr(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,s.layoutNodes.push(x),s.idToIndex[x.id]=f}for(var w=[],S=0,y=-1,C=[],f=0;f<s.nodeSize;f++){var h=s.layoutNodes[f],E=h.parentId;E!=null?s.layoutNodes[s.idToIndex[E]].children.push(h.id):(w[++y]=h.id,C.push(h.id))}for(s.graphSet.push(C);S<=y;){var M=w[S++],v=s.idToIndex[M],g=s.layoutNodes[v],T=g.children;if(T.length>0){s.graphSet.push(T);for(var f=0;f<T.length;f++)w[++y]=T[f]}}for(var f=0;f<s.graphSet.length;f++)for(var k=s.graphSet[f],p=0;p<k.length;p++){var N=s.idToIndex[k[p]];s.indexToGraph[N]=f}for(var f=0;f<s.edgeSize;f++){var O=a[f],I={};I.id=O.data("id"),I.sourceId=O.data("source"),I.targetId=O.data("target");var q=tr(n.idealEdgeLength)?n.idealEdgeLength(O):n.idealEdgeLength,B=tr(n.edgeElasticity)?n.edgeElasticity(O):n.edgeElasticity,j=s.idToIndex[I.sourceId],Y=s.idToIndex[I.targetId],U=s.indexToGraph[j],X=s.indexToGraph[Y];if(U!=X){for(var K=qx(I.sourceId,I.targetId,s),P=s.graphSet[K],D=0,x=s.layoutNodes[j];P.indexOf(x.id)===-1;)x=s.layoutNodes[s.idToIndex[x.parentId]],D++;for(x=s.layoutNodes[Y];P.indexOf(x.id)===-1;)x=s.layoutNodes[s.idToIndex[x.parentId]],D++;q*=D*n.nestingFactor}I.idealLength=q,I.elasticity=B,s.layoutEdges.push(I)}return s},qx=function(e,t,n){var a=Hx(e,t,0,n);return 2>a.count?0:a.graph},Hx=function r(e,t,n,a){var i=a.graphSet[n];if(-1<i.indexOf(e)&&-1<i.indexOf(t))return{count:2,graph:n};for(var o=0,s=0;s<i.length;s++){var l=i[s],u=a.idToIndex[l],f=a.layoutNodes[u].children;if(f.length!==0){var c=a.indexToGraph[a.idToIndex[f[0]]],p=r(e,t,c,a);if(p.count!==0)if(p.count===1){if(o++,o===2)break}else return p}}return{count:o,graph:n}},Ux,Wx=function(e,t){for(var n=e.clientWidth,a=e.clientHeight,i=0;i<e.nodeSize;i++){var o=e.layoutNodes[i];o.children.length===0&&!o.isLocked&&(o.positionX=Math.random()*n,o.positionY=Math.random()*a)}},Vv=function(e,t,n){var a=e.boundingBox,i={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return t.boundingBox&&(n.forEach(function(o){var s=e.layoutNodes[e.idToIndex[o.data("id")]];i.x1=Math.min(i.x1,s.positionX),i.x2=Math.max(i.x2,s.positionX),i.y1=Math.min(i.y1,s.positionY),i.y2=Math.max(i.y2,s.positionY)}),i.w=i.x2-i.x1,i.h=i.y2-i.y1),function(o,s){var l=e.layoutNodes[e.idToIndex[o.data("id")]];if(t.boundingBox){var u=(l.positionX-i.x1)/i.w,f=(l.positionY-i.y1)/i.h;return{x:a.x1+u*a.w,y:a.y1+f*a.h}}else return{x:l.positionX,y:l.positionY}}},Kx=function(e,t,n){var a=n.layout,i=n.eles.nodes(),o=Vv(e,n,i);i.positions(o),e.ready!==!0&&(e.ready=!0,a.one("layoutready",n.ready),a.emit({type:"layoutready",layout:this}))},jx=function(e,t,n){Yx(e,t),Zx(e),Jx(e,t),eC(e),tC(e)},Yx=function(e,t){for(var n=0;n<e.graphSet.length;n++)for(var a=e.graphSet[n],i=a.length,o=0;o<i;o++)for(var s=e.layoutNodes[e.idToIndex[a[o]]],l=o+1;l<i;l++){var u=e.layoutNodes[e.idToIndex[a[l]]];Xx(s,u,e,t)}},Dd=function(e){return-e+2*e*Math.random()},Xx=function(e,t,n,a){var i=e.cmptId,o=t.cmptId;if(!(i!==o&&!n.isCompound)){var s=t.positionX-e.positionX,l=t.positionY-e.positionY,u=1;s===0&&l===0&&(s=Dd(u),l=Dd(u));var f=Qx(e,t,s,l);if(f>0)var c=a.nodeOverlap*f,p=Math.sqrt(s*s+l*l),g=c*s/p,h=c*l/p;else var m=Fs(e,s,l),x=Fs(t,-1*s,-1*l),w=x.x-m.x,S=x.y-m.y,y=w*w+S*S,p=Math.sqrt(y),c=(e.nodeRepulsion+t.nodeRepulsion)/y,g=c*w/p,h=c*S/p;e.isLocked||(e.offsetX-=g,e.offsetY-=h),t.isLocked||(t.offsetX+=g,t.offsetY+=h)}},Qx=function(e,t,n,a){if(n>0)var i=e.maxX-t.minX;else var i=t.maxX-e.minX;if(a>0)var o=e.maxY-t.minY;else var o=t.maxY-e.minY;return i>=0&&o>=0?Math.sqrt(i*i+o*o):0},Fs=function(e,t,n){var a=e.positionX,i=e.positionY,o=e.height||1,s=e.width||1,l=n/t,u=o/s,f={};return t===0&&0<n||t===0&&0>n?(f.x=a,f.y=i+o/2,f):0<t&&-1*u<=l&&l<=u?(f.x=a+s/2,f.y=i+s*n/2/t,f):0>t&&-1*u<=l&&l<=u?(f.x=a-s/2,f.y=i-s*n/2/t,f):0<n&&(l<=-1*u||l>=u)?(f.x=a+o*t/2/n,f.y=i+o/2,f):(0>n&&(l<=-1*u||l>=u)&&(f.x=a-o*t/2/n,f.y=i-o/2),f)},Zx=function(e,t){for(var n=0;n<e.edgeSize;n++){var a=e.layoutEdges[n],i=e.idToIndex[a.sourceId],o=e.layoutNodes[i],s=e.idToIndex[a.targetId],l=e.layoutNodes[s],u=l.positionX-o.positionX,f=l.positionY-o.positionY;if(!(u===0&&f===0)){var c=Fs(o,u,f),p=Fs(l,-1*u,-1*f),g=p.x-c.x,h=p.y-c.y,m=Math.sqrt(g*g+h*h),x=Math.pow(a.idealLength-m,2)/a.elasticity;if(m!==0)var w=x*g/m,S=x*h/m;else var w=0,S=0;o.isLocked||(o.offsetX+=w,o.offsetY+=S),l.isLocked||(l.offsetX-=w,l.offsetY-=S)}}},Jx=function(e,t){if(t.gravity!==0)for(var n=1,a=0;a<e.graphSet.length;a++){var i=e.graphSet[a],o=i.length;if(a===0)var s=e.clientHeight/2,l=e.clientWidth/2;else var u=e.layoutNodes[e.idToIndex[i[0]]],f=e.layoutNodes[e.idToIndex[u.parentId]],s=f.positionX,l=f.positionY;for(var c=0;c<o;c++){var p=e.layoutNodes[e.idToIndex[i[c]]];if(!p.isLocked){var g=s-p.positionX,h=l-p.positionY,m=Math.sqrt(g*g+h*h);if(m>n){var x=t.gravity*g/m,w=t.gravity*h/m;p.offsetX+=x,p.offsetY+=w}}}}},eC=function(e,t){var n=[],a=0,i=-1;for(n.push.apply(n,e.graphSet[0]),i+=e.graphSet[0].length;a<=i;){var o=n[a++],s=e.idToIndex[o],l=e.layoutNodes[s],u=l.children;if(0<u.length&&!l.isLocked){for(var f=l.offsetX,c=l.offsetY,p=0;p<u.length;p++){var g=e.layoutNodes[e.idToIndex[u[p]]];g.offsetX+=f,g.offsetY+=c,n[++i]=u[p]}l.offsetX=0,l.offsetY=0}}},tC=function(e,t){for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&(a.maxX=void 0,a.minX=void 0,a.maxY=void 0,a.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];if(!(0<a.children.length||a.isLocked)){var i=rC(a.offsetX,a.offsetY,e.temperature);a.positionX+=i.x,a.positionY+=i.y,a.offsetX=0,a.offsetY=0,a.minX=a.positionX-a.width,a.maxX=a.positionX+a.width,a.minY=a.positionY-a.height,a.maxY=a.positionY+a.height,nC(a,e)}}for(var n=0;n<e.nodeSize;n++){var a=e.layoutNodes[n];0<a.children.length&&!a.isLocked&&(a.positionX=(a.maxX+a.minX)/2,a.positionY=(a.maxY+a.minY)/2,a.width=a.maxX-a.minX,a.height=a.maxY-a.minY)}},rC=function(e,t,n){var a=Math.sqrt(e*e+t*t);if(a>n)var i={x:n*e/a,y:n*t/a};else var i={x:e,y:t};return i},nC=function r(e,t){var n=e.parentId;if(n!=null){var a=t.layoutNodes[t.idToIndex[n]],i=!1;if((a.maxX==null||e.maxX+a.padRight>a.maxX)&&(a.maxX=e.maxX+a.padRight,i=!0),(a.minX==null||e.minX-a.padLeft<a.minX)&&(a.minX=e.minX-a.padLeft,i=!0),(a.maxY==null||e.maxY+a.padBottom>a.maxY)&&(a.maxY=e.maxY+a.padBottom,i=!0),(a.minY==null||e.minY-a.padTop<a.minY)&&(a.minY=e.minY-a.padTop,i=!0),i)return r(a,t)}},Od=function(e,t){for(var n=e.layoutNodes,a=[],i=0;i<n.length;i++){var o=n[i],s=o.cmptId,l=a[s]=a[s]||[];l.push(o)}for(var u=0,i=0;i<a.length;i++){var f=a[i];if(!!f){f.x1=1/0,f.x2=-1/0,f.y1=1/0,f.y2=-1/0;for(var c=0;c<f.length;c++){var p=f[c];f.x1=Math.min(f.x1,p.positionX-p.width/2),f.x2=Math.max(f.x2,p.positionX+p.width/2),f.y1=Math.min(f.y1,p.positionY-p.height/2),f.y2=Math.max(f.y2,p.positionY+p.height/2)}f.w=f.x2-f.x1,f.h=f.y2-f.y1,u+=f.w*f.h}}a.sort(function(S,y){return y.w*y.h-S.w*S.h});for(var g=0,h=0,m=0,x=0,w=Math.sqrt(u)*e.clientWidth/e.clientHeight,i=0;i<a.length;i++){var f=a[i];if(!!f){for(var c=0;c<f.length;c++){var p=f[c];p.isLocked||(p.positionX+=g-f.x1,p.positionY+=h-f.y1)}g+=f.w+t.componentSpacing,m+=f.w+t.componentSpacing,x=Math.max(x,f.h),m>w&&(h+=x+t.componentSpacing,g=0,m=0,x=0)}}},aC={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function $v(r){this.options=rt({},aC,r)}$v.prototype.run=function(){var r=this.options,e=r,t=r.cy,n=e.eles,a=n.nodes().not(":parent");e.sort&&(a=a.sort(e.sort));var i=Yr(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:t.width(),h:t.height()});if(i.h===0||i.w===0)n.nodes().layoutPositions(this,e,function(F){return{x:i.x1,y:i.y1}});else{var o=a.size(),s=Math.sqrt(o*i.h/i.w),l=Math.round(s),u=Math.round(i.w/i.h*s),f=function(W){if(W==null)return Math.min(l,u);var Z=Math.min(l,u);Z==l?l=W:u=W},c=function(W){if(W==null)return Math.max(l,u);var Z=Math.max(l,u);Z==l?l=W:u=W},p=e.rows,g=e.cols!=null?e.cols:e.columns;if(p!=null&&g!=null)l=p,u=g;else if(p!=null&&g==null)l=p,u=Math.ceil(o/l);else if(p==null&&g!=null)u=g,l=Math.ceil(o/u);else if(u*l>o){var h=f(),m=c();(h-1)*m>=o?f(h-1):(m-1)*h>=o&&c(m-1)}else for(;u*l<o;){var x=f(),w=c();(w+1)*x>=o?c(w+1):f(x+1)}var S=i.w/u,y=i.h/l;if(e.condense&&(S=0,y=0),e.avoidOverlap)for(var C=0;C<a.length;C++){var E=a[C],M=E._private.position;(M.x==null||M.y==null)&&(M.x=0,M.y=0);var v=E.layoutDimensions(e),T=e.avoidOverlapPadding,k=v.w+T,N=v.h+T;S=Math.max(S,k),y=Math.max(y,N)}for(var O={},I=function(W,Z){return!!O["c-"+W+"-"+Z]},q=function(W,Z){O["c-"+W+"-"+Z]=!0},B=0,j=0,Y=function(){j++,j>=u&&(j=0,B++)},U={},X=0;X<a.length;X++){var K=a[X],P=e.position(K);if(P&&(P.row!==void 0||P.col!==void 0)){var D={row:P.row,col:P.col};if(D.col===void 0)for(D.col=0;I(D.row,D.col);)D.col++;else if(D.row===void 0)for(D.row=0;I(D.row,D.col);)D.row++;U[K.id()]=D,q(D.row,D.col)}}var L=function(W,Z){var J,Q;if(W.locked()||W.isParent())return!1;var oe=U[W.id()];if(oe)J=oe.col*S+S/2+i.x1,Q=oe.row*y+y/2+i.y1;else{for(;I(B,j);)Y();J=j*S+S/2+i.x1,Q=B*y+y/2+i.y1,q(B,j),Y()}return{x:J,y:Q}};a.layoutPositions(this,e,L)}return this};var iC={ready:function(){},stop:function(){}};function Kf(r){this.options=rt({},iC,r)}Kf.prototype.run=function(){var r=this.options,e=r.eles,t=this;return r.cy,t.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),t.one("layoutready",r.ready),t.emit("layoutready"),t.one("layoutstop",r.stop),t.emit("layoutstop"),this};Kf.prototype.stop=function(){return this};var oC={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function qv(r){this.options=rt({},oC,r)}qv.prototype.run=function(){var r=this.options,e=r.eles,t=e.nodes(),n=tr(r.positions);function a(i){if(r.positions==null)return f0(i.position());if(n)return r.positions(i);var o=r.positions[i._private.data.id];return o??null}return t.layoutPositions(this,r,function(i,o){var s=a(i);return i.locked()||s==null?!1:s}),this};var sC={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,t){return!0},ready:void 0,stop:void 0,transform:function(e,t){return t}};function Hv(r){this.options=rt({},sC,r)}Hv.prototype.run=function(){var r=this.options,e=r.cy,t=r.eles,n=Yr(r.boundingBox?r.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),a=function(o,s){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return t.nodes().layoutPositions(this,r,a),this};var uC=[{name:"breadthfirst",impl:Fv},{name:"circle",impl:zv},{name:"concentric",impl:Gv},{name:"cose",impl:lu},{name:"grid",impl:$v},{name:"null",impl:Kf},{name:"preset",impl:qv},{name:"random",impl:Hv}];function Uv(r){this.options=r,this.notifications=0}var Ld=function(){},Nd=function(){throw new Error("A headless instance can not render images")};Uv.prototype={recalculateRenderedStyle:Ld,notify:function(){this.notifications++},init:Ld,isHeadless:function(){return!0},png:Nd,jpg:Nd};var jf={};jf.arrowShapeWidth=.3;jf.registerArrowShapes=function(){var r=this.arrowShapes={},e=this,t=function(u,f,c,p,g,h,m){var x=g.x-c/2-m,w=g.x+c/2+m,S=g.y-c/2-m,y=g.y+c/2+m,C=x<=u&&u<=w&&S<=f&&f<=y;return C},n=function(u,f,c,p,g){var h=u*Math.cos(p)-f*Math.sin(p),m=u*Math.sin(p)+f*Math.cos(p),x=h*c,w=m*c,S=x+g.x,y=w+g.y;return{x:S,y}},a=function(u,f,c,p){for(var g=[],h=0;h<u.length;h+=2){var m=u[h],x=u[h+1];g.push(n(m,x,f,c,p))}return g},i=function(u){for(var f=[],c=0;c<u.length;c++){var p=u[c];f.push(p.x,p.y)}return f},o=function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").pfValue*2},s=function(u,f){Ze(f)&&(f=r[f]),r[u]=rt({name:u,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(p,g,h,m,x,w){var S=i(a(this.points,h+2*w,m,x)),y=jr(p,g,S);return y},roughCollide:t,draw:function(p,g,h,m){var x=a(this.points,g,h,m);e.arrowShapeImpl("polygon")(p,x)},spacing:function(p){return 0},gap:o},f)};s("none",{collide:Os,roughCollide:Os,draw:Lf,spacing:Hc,gap:Hc}),s("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),s("arrow","triangle"),s("triangle-backcurve",{points:r.triangle.points,controlPoint:[0,-.15],roughCollide:t,draw:function(u,f,c,p,g){var h=a(this.points,f,c,p),m=this.controlPoint,x=n(m[0],m[1],f,c,p);e.arrowShapeImpl(this.name)(u,h,x)},gap:function(u){return o(u)*.8}}),s("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(u,f,c,p,g,h,m){var x=i(a(this.points,c+2*m,p,g)),w=i(a(this.pointsTee,c+2*m,p,g)),S=jr(u,f,x)||jr(u,f,w);return S},draw:function(u,f,c,p,g){var h=a(this.points,f,c,p),m=a(this.pointsTee,f,c,p);e.arrowShapeImpl(this.name)(u,h,m)}}),s("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(u,f,c,p,g,h,m){var x=g,w=Math.pow(x.x-u,2)+Math.pow(x.y-f,2)<=Math.pow((c+2*m)*this.radius,2),S=i(a(this.points,c+2*m,p,g));return jr(u,f,S)||w},draw:function(u,f,c,p,g){var h=a(this.pointsTr,f,c,p);e.arrowShapeImpl(this.name)(u,h,p.x,p.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(u,f){var c=this.baseCrossLinePts.slice(),p=f/u,g=3,h=5;return c[g]=c[g]-p,c[h]=c[h]-p,c},collide:function(u,f,c,p,g,h,m){var x=i(a(this.points,c+2*m,p,g)),w=i(a(this.crossLinePts(c,h),c+2*m,p,g)),S=jr(u,f,x)||jr(u,f,w);return S},draw:function(u,f,c,p,g){var h=a(this.points,f,c,p),m=a(this.crossLinePts(f,g),f,c,p);e.arrowShapeImpl(this.name)(u,h,m)}}),s("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(u){return o(u)*.525}}),s("circle",{radius:.15,collide:function(u,f,c,p,g,h,m){var x=g,w=Math.pow(x.x-u,2)+Math.pow(x.y-f,2)<=Math.pow((c+2*m)*this.radius,2);return w},draw:function(u,f,c,p,g){e.arrowShapeImpl(this.name)(u,p.x,p.y,this.radius*f)},spacing:function(u){return e.getArrowWidth(u.pstyle("width").pfValue,u.pstyle("arrow-scale").value)*this.radius}}),s("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(u){return 1},gap:function(u){return 1}}),s("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),s("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(u){return u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}}),s("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(u){return .95*u.pstyle("width").pfValue*u.pstyle("arrow-scale").value}})};var Xa={};Xa.projectIntoViewport=function(r,e){var t=this.cy,n=this.findContainerClientCoords(),a=n[0],i=n[1],o=n[4],s=t.pan(),l=t.zoom(),u=((r-a)/o-s.x)/l,f=((e-i)/o-s.y)/l;return[u,f]};Xa.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var r=this.container,e=r.getBoundingClientRect(),t=this.cy.window().getComputedStyle(r),n=function(w){return parseFloat(t.getPropertyValue(w))},a={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},i={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},o=r.clientWidth,s=r.clientHeight,l=a.left+a.right,u=a.top+a.bottom,f=i.left+i.right,c=e.width/(o+f),p=o-l,g=s-u,h=e.left+a.left+i.left,m=e.top+a.top+i.top;return this.containerBB=[h,m,p,g,c]};Xa.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Xa.findNearestElement=function(r,e,t,n){return this.findNearestElements(r,e,t,n)[0]};Xa.findNearestElements=function(r,e,t,n){var a=this,i=this,o=i.getCachedZSortedEles(),s=[],l=i.cy.zoom(),u=i.cy.hasCompoundNodes(),f=(n?24:8)/l,c=(n?8:2)/l,p=(n?8:2)/l,g=1/0,h,m;t&&(o=o.interactive);function x(v,T){if(v.isNode()){if(m)return;m=v,s.push(v)}if(v.isEdge()&&(T==null||T<g))if(h){if(h.pstyle("z-compound-depth").value===v.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===v.pstyle("z-compound-depth").value){for(var k=0;k<s.length;k++)if(s[k].isEdge()){s[k]=v,h=v,g=T??g;break}}}else s.push(v),h=v,g=T??g}function w(v){var T=v.outerWidth()+2*c,k=v.outerHeight()+2*c,N=T/2,O=k/2,I=v.position(),q=v.pstyle("corner-radius").value==="auto"?"auto":v.pstyle("corner-radius").pfValue,B=v._private.rscratch;if(I.x-N<=r&&r<=I.x+N&&I.y-O<=e&&e<=I.y+O){var j=i.nodeShapes[a.getNodeShape(v)];if(j.checkPoint(r,e,0,T,k,I.x,I.y,q,B))return x(v,0),!0}}function S(v){var T=v._private,k=T.rscratch,N=v.pstyle("width").pfValue,O=v.pstyle("arrow-scale").value,I=N/2+f,q=I*I,B=I*2,X=T.source,K=T.target,j;if(k.edgeType==="segments"||k.edgeType==="straight"||k.edgeType==="haystack"){for(var Y=k.allpts,U=0;U+3<Y.length;U+=2)if(S0(r,e,Y[U],Y[U+1],Y[U+2],Y[U+3],B)&&q>(j=k0(r,e,Y[U],Y[U+1],Y[U+2],Y[U+3])))return x(v,j),!0}else if(k.edgeType==="bezier"||k.edgeType==="multibezier"||k.edgeType==="self"||k.edgeType==="compound"){for(var Y=k.allpts,U=0;U+5<k.allpts.length;U+=4)if(_0(r,e,Y[U],Y[U+1],Y[U+2],Y[U+3],Y[U+4],Y[U+5],B)&&q>(j=P0(r,e,Y[U],Y[U+1],Y[U+2],Y[U+3],Y[U+4],Y[U+5])))return x(v,j),!0}for(var X=X||T.source,K=K||T.target,P=a.getArrowWidth(N,O),D=[{name:"source",x:k.arrowStartX,y:k.arrowStartY,angle:k.srcArrowAngle},{name:"target",x:k.arrowEndX,y:k.arrowEndY,angle:k.tgtArrowAngle},{name:"mid-source",x:k.midX,y:k.midY,angle:k.midsrcArrowAngle},{name:"mid-target",x:k.midX,y:k.midY,angle:k.midtgtArrowAngle}],U=0;U<D.length;U++){var L=D[U],F=i.arrowShapes[v.pstyle(L.name+"-arrow-shape").value],W=v.pstyle("width").pfValue;if(F.roughCollide(r,e,P,L.angle,{x:L.x,y:L.y},W,f)&&F.collide(r,e,P,L.angle,{x:L.x,y:L.y},W,f))return x(v),!0}u&&s.length>0&&(w(X),w(K))}function y(v,T,k){return hn(v,T,k)}function C(v,T){var k=v._private,N=p,O;T?O=T+"-":O="",v.boundingBox();var I=k.labelBounds[T||"main"],q=v.pstyle(O+"label").value,B=v.pstyle("text-events").strValue==="yes";if(!(!B||!q)){var j=y(k.rscratch,"labelX",T),Y=y(k.rscratch,"labelY",T),U=y(k.rscratch,"labelAngle",T),X=v.pstyle(O+"text-margin-x").pfValue,K=v.pstyle(O+"text-margin-y").pfValue,P=I.x1-N-X,D=I.x2+N-X,L=I.y1-N-K,F=I.y2+N-K;if(U){var W=Math.cos(U),Z=Math.sin(U),J=function(Re,De){return Re=Re-j,De=De-Y,{x:Re*W-De*Z+j,y:Re*Z+De*W+Y}},Q=J(P,L),oe=J(P,F),fe=J(D,L),ce=J(D,F),Ce=[Q.x+X,Q.y+K,fe.x+X,fe.y+K,ce.x+X,ce.y+K,oe.x+X,oe.y+K];if(jr(r,e,Ce))return x(v),!0}else if(Ei(I,r,e))return x(v),!0}}for(var E=o.length-1;E>=0;E--){var M=o[E];M.isNode()?w(M)||C(M):S(M)||C(M)||C(M,"source")||C(M,"target")}return s};Xa.getAllInBox=function(r,e,t,n){var a=this.getCachedZSortedEles().interactive,i=[],o=Math.min(r,t),s=Math.max(r,t),l=Math.min(e,n),u=Math.max(e,n);r=o,t=s,e=l,n=u;for(var f=Yr({x1:r,y1:e,x2:t,y2:n}),c=0;c<a.length;c++){var p=a[c];if(p.isNode()){var g=p,h=g.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:!1});If(f,h)&&!ev(h,f)&&i.push(g)}else{var m=p,x=m._private,w=x.rscratch;if(w.startX!=null&&w.startY!=null&&!Ei(f,w.startX,w.startY)||w.endX!=null&&w.endY!=null&&!Ei(f,w.endX,w.endY))continue;if(w.edgeType==="bezier"||w.edgeType==="multibezier"||w.edgeType==="self"||w.edgeType==="compound"||w.edgeType==="segments"||w.edgeType==="haystack"){for(var S=x.rstyle.bezierPts||x.rstyle.linePts||x.rstyle.haystackPts,y=!0,C=0;C<S.length;C++)if(!C0(f,S[C])){y=!1;break}y&&i.push(m)}else(w.edgeType==="haystack"||w.edgeType==="straight")&&i.push(m)}}return i};var zs={};zs.calculateArrowAngles=function(r){var e=r._private.rscratch,t=e.edgeType==="haystack",n=e.edgeType==="bezier",a=e.edgeType==="multibezier",i=e.edgeType==="segments",o=e.edgeType==="compound",s=e.edgeType==="self",l,u,f,c,p,g,w,S;if(t?(f=e.haystackPts[0],c=e.haystackPts[1],p=e.haystackPts[2],g=e.haystackPts[3]):(f=e.arrowStartX,c=e.arrowStartY,p=e.arrowEndX,g=e.arrowEndY),w=e.midX,S=e.midY,i)l=f-e.segpts[0],u=c-e.segpts[1];else if(a||o||s||n){var h=e.allpts,m=wr(h[0],h[2],h[4],.1),x=wr(h[1],h[3],h[5],.1);l=f-m,u=c-x}else l=f-w,u=c-S;e.srcArrowAngle=ts(l,u);var w=e.midX,S=e.midY;if(t&&(w=(f+p)/2,S=(c+g)/2),l=p-f,u=g-c,i){var h=e.allpts;if(h.length/2%2===0){var y=h.length/2,C=y-2;l=h[y]-h[C],u=h[y+1]-h[C+1]}else if(e.isRound)l=e.midVector[1],u=-e.midVector[0];else{var y=h.length/2-1,C=y-2;l=h[y]-h[C],u=h[y+1]-h[C+1]}}else if(a||o||s){var h=e.allpts,E=e.ctrlpts,M,v,T,k;if(E.length/2%2===0){var N=h.length/2-1,O=N+2,I=O+2;M=wr(h[N],h[O],h[I],0),v=wr(h[N+1],h[O+1],h[I+1],0),T=wr(h[N],h[O],h[I],1e-4),k=wr(h[N+1],h[O+1],h[I+1],1e-4)}else{var O=h.length/2-1,N=O-2,I=O+2;M=wr(h[N],h[O],h[I],.4999),v=wr(h[N+1],h[O+1],h[I+1],.4999),T=wr(h[N],h[O],h[I],.5),k=wr(h[N+1],h[O+1],h[I+1],.5)}l=T-M,u=k-v}if(e.midtgtArrowAngle=ts(l,u),e.midDispX=l,e.midDispY=u,l*=-1,u*=-1,i){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var y=h.length/2-1,q=y+2;l=-(h[q]-h[y]),u=-(h[q+1]-h[y+1])}}}if(e.midsrcArrowAngle=ts(l,u),i)l=p-e.segpts[e.segpts.length-2],u=g-e.segpts[e.segpts.length-1];else if(a||o||s||n){var h=e.allpts,B=h.length,m=wr(h[B-6],h[B-4],h[B-2],.9),x=wr(h[B-5],h[B-3],h[B-1],.9);l=p-m,u=g-x}else l=p-w,u=g-S;e.tgtArrowAngle=ts(l,u)};zs.getArrowWidth=zs.getArrowHeight=function(r,e){var t=this.arrowWidthCache=this.arrowWidthCache||{},n=t[r+", "+e];return n||(n=Math.max(Math.pow(r*13.37,.9),29)*e,t[r+", "+e]=n,n)};var ff,cf,Pn={},rn={},Rd,Id,Fa,_s,qn,La,Ia,Tn,di,fs,Wv,Kv,df,hf,Bd,Fd=function(e,t,n){n.x=t.x-e.x,n.y=t.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},lC=function(e,t){t.x=e.x*-1,t.y=e.y*-1,t.nx=e.nx*-1,t.ny=e.ny*-1,t.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},fC=function(e,t,n,a,i){if(e!==Bd?Fd(t,e,Pn):lC(rn,Pn),Fd(t,n,rn),Rd=Pn.nx*rn.ny-Pn.ny*rn.nx,Id=Pn.nx*rn.nx-Pn.ny*-rn.ny,qn=Math.asin(Math.max(-1,Math.min(1,Rd))),Math.abs(qn)<1e-6){ff=t.x,cf=t.y,Ia=di=0;return}Fa=1,_s=!1,Id<0?qn<0?qn=Math.PI+qn:(qn=Math.PI-qn,Fa=-1,_s=!0):qn>0&&(Fa=-1,_s=!0),t.radius!==void 0?di=t.radius:di=a,La=qn/2,fs=Math.min(Pn.len/2,rn.len/2),i?(Tn=Math.abs(Math.cos(La)*di/Math.sin(La)),Tn>fs?(Tn=fs,Ia=Math.abs(Tn*Math.sin(La)/Math.cos(La))):Ia=di):(Tn=Math.min(fs,di),Ia=Math.abs(Tn*Math.sin(La)/Math.cos(La))),df=t.x+rn.nx*Tn,hf=t.y+rn.ny*Tn,ff=df-rn.ny*Ia*Fa,cf=hf+rn.nx*Ia*Fa,Wv=t.x+Pn.nx*Tn,Kv=t.y+Pn.ny*Tn,Bd=t};function jv(r,e){e.radius===0?r.lineTo(e.cx,e.cy):r.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function Yf(r,e,t,n){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(fC(r,e,t,n,a),{cx:ff,cy:cf,radius:Ia,startX:Wv,startY:Kv,stopX:df,stopY:hf,startAngle:Pn.ang+Math.PI/2*Fa,endAngle:rn.ang-Math.PI/2*Fa,counterClockwise:_s})}var Fr={};Fr.findMidptPtsEtc=function(r,e){var t=e.posPts,n=e.intersectionPts,a=e.vectorNormInverse,i,o=r.pstyle("source-endpoint"),s=r.pstyle("target-endpoint"),l=o.units!=null&&s.units!=null,u=function(E,M,v,T){var k=T-M,N=v-E,O=Math.sqrt(N*N+k*k);return{x:-k/O,y:N/O}},f=r.pstyle("edge-distances").value;switch(f){case"node-position":i=t;break;case"intersection":i=n;break;case"endpoints":{if(l){var c=this.manualEndptToPx(r.source()[0],o),p=cn(c,2),g=p[0],h=p[1],m=this.manualEndptToPx(r.target()[0],s),x=cn(m,2),w=x[0],S=x[1],y={x1:g,y1:h,x2:w,y2:S};a=u(g,h,w,S),i=y}else Dt("Edge ".concat(r.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),i=n;break}}return{midptPts:i,vectorNormInverse:a}};Fr.findHaystackPoints=function(r){for(var e=0;e<r.length;e++){var t=r[e],n=t._private,a=n.rscratch;if(!a.haystack){var i=Math.random()*2*Math.PI;a.source={x:Math.cos(i),y:Math.sin(i)},i=Math.random()*2*Math.PI,a.target={x:Math.cos(i),y:Math.sin(i)}}var o=n.source,s=n.target,l=o.position(),u=s.position(),f=o.width(),c=s.width(),p=o.height(),g=s.height(),h=t.pstyle("haystack-radius").value,m=h/2;a.haystackPts=a.allpts=[a.source.x*f*m+l.x,a.source.y*p*m+l.y,a.target.x*c*m+u.x,a.target.y*g*m+u.y],a.midX=(a.allpts[0]+a.allpts[2])/2,a.midY=(a.allpts[1]+a.allpts[3])/2,a.edgeType="haystack",a.haystack=!0,this.storeEdgeProjections(t),this.calculateArrowAngles(t),this.recalculateEdgeLabelProjections(t),this.calculateLabelAngles(t)}};Fr.findSegmentsPoints=function(r,e){var t=r._private.rscratch,n=r.pstyle("segment-weights"),a=r.pstyle("segment-distances"),i=r.pstyle("segment-radii"),o=r.pstyle("radius-type"),s=Math.min(n.pfValue.length,a.pfValue.length),l=i.pfValue[i.pfValue.length-1],u=o.pfValue[o.pfValue.length-1];t.edgeType="segments",t.segpts=[],t.radii=[],t.isArcRadius=[];for(var f=0;f<s;f++){var c=n.pfValue[f],p=a.pfValue[f],g=1-c,h=c,m=this.findMidptPtsEtc(r,e),x=m.midptPts,w=m.vectorNormInverse,S={x:x.x1*g+x.x2*h,y:x.y1*g+x.y2*h};t.segpts.push(S.x+w.x*p,S.y+w.y*p),t.radii.push(i.pfValue[f]!==void 0?i.pfValue[f]:l),t.isArcRadius.push((o.pfValue[f]!==void 0?o.pfValue[f]:u)==="arc-radius")}};Fr.findLoopPoints=function(r,e,t,n){var a=r._private.rscratch,i=e.dirCounts,o=e.srcPos,s=r.pstyle("control-point-distances"),l=s?s.pfValue[0]:void 0,u=r.pstyle("loop-direction").pfValue,f=r.pstyle("loop-sweep").pfValue,c=r.pstyle("control-point-step-size").pfValue;a.edgeType="self";var p=t,g=c;n&&(p=0,g=l);var h=u-Math.PI/2,m=h-f/2,x=h+f/2,w=String(u+"_"+f);p=i[w]===void 0?i[w]=0:++i[w],a.ctrlpts=[o.x+Math.cos(m)*1.4*g*(p/3+1),o.y+Math.sin(m)*1.4*g*(p/3+1),o.x+Math.cos(x)*1.4*g*(p/3+1),o.y+Math.sin(x)*1.4*g*(p/3+1)]};Fr.findCompoundLoopPoints=function(r,e,t,n){var a=r._private.rscratch;a.edgeType="compound";var i=e.srcPos,o=e.tgtPos,s=e.srcW,l=e.srcH,u=e.tgtW,f=e.tgtH,c=r.pstyle("control-point-step-size").pfValue,p=r.pstyle("control-point-distances"),g=p?p.pfValue[0]:void 0,h=t,m=c;n&&(h=0,m=g);var x=50,w={x:i.x-s/2,y:i.y-l/2},S={x:o.x-u/2,y:o.y-f/2},y={x:Math.min(w.x,S.x),y:Math.min(w.y,S.y)},C=.5,E=Math.max(C,Math.log(s*.01)),M=Math.max(C,Math.log(u*.01));a.ctrlpts=[y.x,y.y-(1+Math.pow(x,1.12)/100)*m*(h/3+1)*E,y.x-(1+Math.pow(x,1.12)/100)*m*(h/3+1)*M,y.y]};Fr.findStraightEdgePoints=function(r){r._private.rscratch.edgeType="straight"};Fr.findBezierPoints=function(r,e,t,n,a){var i=r._private.rscratch,o=r.pstyle("control-point-step-size").pfValue,s=r.pstyle("control-point-distances"),l=r.pstyle("control-point-weights"),u=s&&l?Math.min(s.value.length,l.value.length):1,f=s?s.pfValue[0]:void 0,c=l.value[0],p=n;i.edgeType=p?"multibezier":"bezier",i.ctrlpts=[];for(var g=0;g<u;g++){var h=(.5-e.eles.length/2+t)*o*(a?-1:1),m=void 0,x=Zh(h);p&&(f=s?s.pfValue[g]:o,c=l.value[g]),n?m=f:m=f!==void 0?x*f:void 0;var w=m!==void 0?m:h,S=1-c,y=c,C=this.findMidptPtsEtc(r,e),E=C.midptPts,M=C.vectorNormInverse,v={x:E.x1*S+E.x2*y,y:E.y1*S+E.y2*y};i.ctrlpts.push(v.x+M.x*w,v.y+M.y*w)}};Fr.findTaxiPoints=function(r,e){var t=r._private.rscratch;t.edgeType="segments";var n="vertical",a="horizontal",i="leftward",o="rightward",s="downward",l="upward",u="auto",f=e.posPts,c=e.srcW,p=e.srcH,g=e.tgtW,h=e.tgtH,m=r.pstyle("edge-distances").value,x=m!=="node-position",w=r.pstyle("taxi-direction").value,S=w,y=r.pstyle("taxi-turn"),C=y.units==="%",E=y.pfValue,M=E<0,v=r.pstyle("taxi-turn-min-distance").pfValue,T=x?(c+g)/2:0,k=x?(p+h)/2:0,N=f.x2-f.x1,O=f.y2-f.y1,I=function(Fe,ze){return Fe>0?Math.max(Fe-ze,0):Math.min(Fe+ze,0)},q=I(N,T),B=I(O,k),j=!1;S===u?w=Math.abs(q)>Math.abs(B)?a:n:S===l||S===s?(w=n,j=!0):(S===i||S===o)&&(w=a,j=!0);var Y=w===n,U=Y?B:q,X=Y?O:N,K=Zh(X),P=!1;!(j&&(C||M))&&(S===s&&X<0||S===l&&X>0||S===i&&X>0||S===o&&X<0)&&(K*=-1,U=K*Math.abs(U),P=!0);var D;if(C){var L=E<0?1+E:E;D=L*U}else{var F=E<0?U:0;D=F+E*K}var W=function(Fe){return Math.abs(Fe)<v||Math.abs(Fe)>=Math.abs(U)},Z=W(D),J=W(Math.abs(U)-Math.abs(D)),Q=Z||J;if(Q&&!P)if(Y){var oe=Math.abs(X)<=p/2,fe=Math.abs(N)<=g/2;if(oe){var ce=(f.x1+f.x2)/2,Ce=f.y1,Le=f.y2;t.segpts=[ce,Ce,ce,Le]}else if(fe){var Re=(f.y1+f.y2)/2,De=f.x1,me=f.x2;t.segpts=[De,Re,me,Re]}else t.segpts=[f.x1,f.y2]}else{var _e=Math.abs(X)<=c/2,we=Math.abs(O)<=h/2;if(_e){var xe=(f.y1+f.y2)/2,Be=f.x1,Ue=f.x2;t.segpts=[Be,xe,Ue,xe]}else if(we){var Ee=(f.x1+f.x2)/2,Me=f.y1,ke=f.y2;t.segpts=[Ee,Me,Ee,ke]}else t.segpts=[f.x2,f.y1]}else if(Y){var de=f.y1+D+(x?p/2*K:0),R=f.x1,G=f.x2;t.segpts=[R,de,G,de]}else{var re=f.x1+D+(x?c/2*K:0),te=f.y1,ie=f.y2;t.segpts=[re,te,re,ie]}if(t.isRound){var ge=r.pstyle("taxi-radius").value,ue=r.pstyle("radius-type").value[0]==="arc-radius";t.radii=new Array(t.segpts.length/2).fill(ge),t.isArcRadius=new Array(t.segpts.length/2).fill(ue)}};Fr.tryToCorrectInvalidPoints=function(r,e){var t=r._private.rscratch;if(t.edgeType==="bezier"){var n=e.srcPos,a=e.tgtPos,i=e.srcW,o=e.srcH,s=e.tgtW,l=e.tgtH,u=e.srcShape,f=e.tgtShape,c=e.srcCornerRadius,p=e.tgtCornerRadius,g=e.srcRs,h=e.tgtRs,m=!Ve(t.startX)||!Ve(t.startY),x=!Ve(t.arrowStartX)||!Ve(t.arrowStartY),w=!Ve(t.endX)||!Ve(t.endY),S=!Ve(t.arrowEndX)||!Ve(t.arrowEndY),y=3,C=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth,E=y*C,M=Ha({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.startX,y:t.startY}),v=M<E,T=Ha({x:t.ctrlpts[0],y:t.ctrlpts[1]},{x:t.endX,y:t.endY}),k=T<E,N=!1;if(m||x||v){N=!0;var O={x:t.ctrlpts[0]-n.x,y:t.ctrlpts[1]-n.y},I=Math.sqrt(O.x*O.x+O.y*O.y),q={x:O.x/I,y:O.y/I},B=Math.max(i,o),j={x:t.ctrlpts[0]+q.x*2*B,y:t.ctrlpts[1]+q.y*2*B},Y=u.intersectLine(n.x,n.y,i,o,j.x,j.y,0,c,g);v?(t.ctrlpts[0]=t.ctrlpts[0]+q.x*(E-M),t.ctrlpts[1]=t.ctrlpts[1]+q.y*(E-M)):(t.ctrlpts[0]=Y[0]+q.x*E,t.ctrlpts[1]=Y[1]+q.y*E)}if(w||S||k){N=!0;var U={x:t.ctrlpts[0]-a.x,y:t.ctrlpts[1]-a.y},X=Math.sqrt(U.x*U.x+U.y*U.y),K={x:U.x/X,y:U.y/X},P=Math.max(i,o),D={x:t.ctrlpts[0]+K.x*2*P,y:t.ctrlpts[1]+K.y*2*P},L=f.intersectLine(a.x,a.y,s,l,D.x,D.y,0,p,h);k?(t.ctrlpts[0]=t.ctrlpts[0]+K.x*(E-T),t.ctrlpts[1]=t.ctrlpts[1]+K.y*(E-T)):(t.ctrlpts[0]=L[0]+K.x*E,t.ctrlpts[1]=L[1]+K.y*E)}N&&this.findEndpoints(r)}};Fr.storeAllpts=function(r){var e=r._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var t=0;t+1<e.ctrlpts.length;t+=2)e.allpts.push(e.ctrlpts[t],e.ctrlpts[t+1]),t+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[t]+e.ctrlpts[t+2])/2,(e.ctrlpts[t+1]+e.ctrlpts[t+3])/2);e.allpts.push(e.endX,e.endY);var n,a;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,a=.5,e.midX=wr(e.allpts[n],e.allpts[n+2],e.allpts[n+4],a),e.midY=wr(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],a))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var i=2;i+3<e.allpts.length;i+=2){var o=e.radii[i/2-1],s=e.isArcRadius[i/2-1];e.roundCorners.push(Yf({x:e.allpts[i-2],y:e.allpts[i-1]},{x:e.allpts[i],y:e.allpts[i+1],radius:o},{x:e.allpts[i+2],y:e.allpts[i+3]},o,s))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,u=l-2;e.midX=(e.segpts[u]+e.segpts[l])/2,e.midY=(e.segpts[u+1]+e.segpts[l+1])/2}else{var f=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[f],e.midY=e.segpts[f+1];else{var c={x:e.segpts[f],y:e.segpts[f+1]},p=e.roundCorners[f/2],g=[c.x-p.cx,c.y-p.cy],h=p.radius/Math.sqrt(Math.pow(g[0],2)+Math.pow(g[1],2));g=g.map(function(m){return m*h}),e.midX=p.cx+g[0],e.midY=p.cy+g[1],e.midVector=g}}}};Fr.checkForInvalidEdgeWarning=function(r){var e=r[0]._private.rscratch;e.nodesOverlap||Ve(e.startX)&&Ve(e.startY)&&Ve(e.endX)&&Ve(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Dt("Edge `"+r.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Fr.findEdgeControlPoints=function(r){var e=this;if(!(!r||r.length===0)){for(var t=this,n=t.cy,a=n.hasCompoundNodes(),i={map:new Mn,get:function(v){var T=this.map.get(v[0]);return T!=null?T.get(v[1]):null},set:function(v,T){var k=this.map.get(v[0]);k==null&&(k=new Mn,this.map.set(v[0],k)),k.set(v[1],T)}},o=[],s=[],l=0;l<r.length;l++){var u=r[l],f=u._private,c=u.pstyle("curve-style").value;if(!(u.removed()||!u.takesUpSpace())){if(c==="haystack"){s.push(u);continue}var p=c==="unbundled-bezier"||c.endsWith("segments")||c==="straight"||c==="straight-triangle"||c.endsWith("taxi"),g=c==="unbundled-bezier"||c==="bezier",h=f.source,m=f.target,x=h.poolIndex(),w=m.poolIndex(),S=[x,w].sort(),y=i.get(S);y==null&&(y={eles:[]},i.set(S,y),o.push(S)),y.eles.push(u),p&&(y.hasUnbundled=!0),g&&(y.hasBezier=!0)}}for(var C=function(v){var T=o[v],k=i.get(T),N=void 0;if(!k.hasUnbundled){var O=k.eles[0].parallelEdges().filter(function(re){return re.isBundledBezier()});Nf(k.eles),O.forEach(function(re){return k.eles.push(re)}),k.eles.sort(function(re,te){return re.poolIndex()-te.poolIndex()})}var I=k.eles[0],q=I.source(),B=I.target();if(q.poolIndex()>B.poolIndex()){var j=q;q=B,B=j}var Y=k.srcPos=q.position(),U=k.tgtPos=B.position(),X=k.srcW=q.outerWidth(),K=k.srcH=q.outerHeight(),P=k.tgtW=B.outerWidth(),D=k.tgtH=B.outerHeight(),L=k.srcShape=t.nodeShapes[e.getNodeShape(q)],F=k.tgtShape=t.nodeShapes[e.getNodeShape(B)],W=k.srcCornerRadius=q.pstyle("corner-radius").value==="auto"?"auto":q.pstyle("corner-radius").pfValue,Z=k.tgtCornerRadius=B.pstyle("corner-radius").value==="auto"?"auto":B.pstyle("corner-radius").pfValue,J=k.tgtRs=B._private.rscratch,Q=k.srcRs=q._private.rscratch;k.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var oe=0;oe<k.eles.length;oe++){var fe=k.eles[oe],ce=fe[0]._private.rscratch,Ce=fe.pstyle("curve-style").value,Le=Ce==="unbundled-bezier"||Ce.endsWith("segments")||Ce.endsWith("taxi"),Re=!q.same(fe.source());if(!k.calculatedIntersection&&q!==B&&(k.hasBezier||k.hasUnbundled)){k.calculatedIntersection=!0;var De=L.intersectLine(Y.x,Y.y,X,K,U.x,U.y,0,W,Q),me=k.srcIntn=De,_e=F.intersectLine(U.x,U.y,P,D,Y.x,Y.y,0,Z,J),we=k.tgtIntn=_e,xe=k.intersectionPts={x1:De[0],x2:_e[0],y1:De[1],y2:_e[1]},Be=k.posPts={x1:Y.x,x2:U.x,y1:Y.y,y2:U.y},Ue=_e[1]-De[1],Ee=_e[0]-De[0],Me=Math.sqrt(Ee*Ee+Ue*Ue),ke=k.vector={x:Ee,y:Ue},de=k.vectorNorm={x:ke.x/Me,y:ke.y/Me},R={x:-de.y,y:de.x};k.nodesOverlap=!Ve(Me)||F.checkPoint(De[0],De[1],0,P,D,U.x,U.y,Z,J)||L.checkPoint(_e[0],_e[1],0,X,K,Y.x,Y.y,W,Q),k.vectorNormInverse=R,N={nodesOverlap:k.nodesOverlap,dirCounts:k.dirCounts,calculatedIntersection:!0,hasBezier:k.hasBezier,hasUnbundled:k.hasUnbundled,eles:k.eles,srcPos:U,tgtPos:Y,srcW:P,srcH:D,tgtW:X,tgtH:K,srcIntn:we,tgtIntn:me,srcShape:F,tgtShape:L,posPts:{x1:Be.x2,y1:Be.y2,x2:Be.x1,y2:Be.y1},intersectionPts:{x1:xe.x2,y1:xe.y2,x2:xe.x1,y2:xe.y1},vector:{x:-ke.x,y:-ke.y},vectorNorm:{x:-de.x,y:-de.y},vectorNormInverse:{x:-R.x,y:-R.y}}}var G=Re?N:k;ce.nodesOverlap=G.nodesOverlap,ce.srcIntn=G.srcIntn,ce.tgtIntn=G.tgtIntn,ce.isRound=Ce.startsWith("round"),a&&(q.isParent()||q.isChild()||B.isParent()||B.isChild())&&(q.parents().anySame(B)||B.parents().anySame(q)||q.same(B)&&q.isParent())?e.findCompoundLoopPoints(fe,G,oe,Le):q===B?e.findLoopPoints(fe,G,oe,Le):Ce.endsWith("segments")?e.findSegmentsPoints(fe,G):Ce.endsWith("taxi")?e.findTaxiPoints(fe,G):Ce==="straight"||!Le&&k.eles.length%2===1&&oe===Math.floor(k.eles.length/2)?e.findStraightEdgePoints(fe):e.findBezierPoints(fe,G,oe,Le,Re),e.findEndpoints(fe),e.tryToCorrectInvalidPoints(fe,G),e.checkForInvalidEdgeWarning(fe),e.storeAllpts(fe),e.storeEdgeProjections(fe),e.calculateArrowAngles(fe),e.recalculateEdgeLabelProjections(fe),e.calculateLabelAngles(fe)}},E=0;E<o.length;E++)C(E);this.findHaystackPoints(s)}};function Yv(r){var e=[];if(r!=null){for(var t=0;t<r.length;t+=2){var n=r[t],a=r[t+1];e.push({x:n,y:a})}return e}}Fr.getSegmentPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="segments")return this.recalculateRenderedStyle(r),Yv(e.segpts)};Fr.getControlPoints=function(r){var e=r[0]._private.rscratch,t=e.edgeType;if(t==="bezier"||t==="multibezier"||t==="self"||t==="compound")return this.recalculateRenderedStyle(r),Yv(e.ctrlpts)};Fr.getEdgeMidpoint=function(r){var e=r[0]._private.rscratch;return this.recalculateRenderedStyle(r),{x:e.midX,y:e.midY}};var Fo={};Fo.manualEndptToPx=function(r,e){var t=this,n=r.position(),a=r.outerWidth(),i=r.outerHeight(),o=r._private.rscratch;if(e.value.length===2){var s=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(s[0]=s[0]*a),e.units[1]==="%"&&(s[1]=s[1]*i),s[0]+=n.x,s[1]+=n.y,s}else{var l=e.pfValue[0];l=-Math.PI/2+l;var u=2*Math.max(a,i),f=[n.x+Math.cos(l)*u,n.y+Math.sin(l)*u];return t.nodeShapes[this.getNodeShape(r)].intersectLine(n.x,n.y,a,i,f[0],f[1],0,r.pstyle("corner-radius").value==="auto"?"auto":r.pstyle("corner-radius").pfValue,o)}};Fo.findEndpoints=function(r){var e=this,t,n=r.source()[0],a=r.target()[0],i=n.position(),o=a.position(),s=r.pstyle("target-arrow-shape").value,l=r.pstyle("source-arrow-shape").value,u=r.pstyle("target-distance-from-node").pfValue,f=r.pstyle("source-distance-from-node").pfValue,c=n._private.rscratch,p=a._private.rscratch,g=r.pstyle("curve-style").value,h=r._private.rscratch,m=h.edgeType,x=g==="taxi",w=m==="self"||m==="compound",S=m==="bezier"||m==="multibezier"||w,y=m!=="bezier",C=m==="straight"||m==="segments",E=m==="segments",M=S||y||C,v=w||x,T=r.pstyle("source-endpoint"),k=v?"outside-to-node":T.value,N=n.pstyle("corner-radius").value==="auto"?"auto":n.pstyle("corner-radius").pfValue,O=r.pstyle("target-endpoint"),I=v?"outside-to-node":O.value,q=a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue;h.srcManEndpt=T,h.tgtManEndpt=O;var B,j,Y,U;if(S){var X=[h.ctrlpts[0],h.ctrlpts[1]],K=y?[h.ctrlpts[h.ctrlpts.length-2],h.ctrlpts[h.ctrlpts.length-1]]:X;B=K,j=X}else if(C){var P=E?h.segpts.slice(0,2):[o.x,o.y],D=E?h.segpts.slice(h.segpts.length-2):[i.x,i.y];B=D,j=P}if(I==="inside-to-node")t=[o.x,o.y];else if(O.units)t=this.manualEndptToPx(a,O);else if(I==="outside-to-line")t=h.tgtIntn;else if(I==="outside-to-node"||I==="outside-to-node-or-label"?Y=B:(I==="outside-to-line"||I==="outside-to-line-or-label")&&(Y=[i.x,i.y]),t=e.nodeShapes[this.getNodeShape(a)].intersectLine(o.x,o.y,a.outerWidth(),a.outerHeight(),Y[0],Y[1],0,q,p),I==="outside-to-node-or-label"||I==="outside-to-line-or-label"){var L=a._private.rscratch,F=L.labelWidth,W=L.labelHeight,Z=L.labelX,J=L.labelY,Q=F/2,oe=W/2,fe=a.pstyle("text-valign").value;fe==="top"?J-=oe:fe==="bottom"&&(J+=oe);var ce=a.pstyle("text-halign").value;ce==="left"?Z-=Q:ce==="right"&&(Z+=Q);var Ce=_o(Y[0],Y[1],[Z-Q,J-oe,Z+Q,J-oe,Z+Q,J+oe,Z-Q,J+oe],o.x,o.y);if(Ce.length>0){var Le=i,Re=Na(Le,pi(t)),De=Na(Le,pi(Ce)),me=Re;if(De<Re&&(t=Ce,me=De),Ce.length>2){var _e=Na(Le,{x:Ce[2],y:Ce[3]});_e<me&&(t=[Ce[2],Ce[3]])}}}var we=rs(t,B,e.arrowShapes[s].spacing(r)+u),xe=rs(t,B,e.arrowShapes[s].gap(r)+u);if(h.endX=xe[0],h.endY=xe[1],h.arrowEndX=we[0],h.arrowEndY=we[1],k==="inside-to-node")t=[i.x,i.y];else if(T.units)t=this.manualEndptToPx(n,T);else if(k==="outside-to-line")t=h.srcIntn;else if(k==="outside-to-node"||k==="outside-to-node-or-label"?U=j:(k==="outside-to-line"||k==="outside-to-line-or-label")&&(U=[o.x,o.y]),t=e.nodeShapes[this.getNodeShape(n)].intersectLine(i.x,i.y,n.outerWidth(),n.outerHeight(),U[0],U[1],0,N,c),k==="outside-to-node-or-label"||k==="outside-to-line-or-label"){var Be=n._private.rscratch,Ue=Be.labelWidth,Ee=Be.labelHeight,Me=Be.labelX,ke=Be.labelY,de=Ue/2,R=Ee/2,G=n.pstyle("text-valign").value;G==="top"?ke-=R:G==="bottom"&&(ke+=R);var re=n.pstyle("text-halign").value;re==="left"?Me-=de:re==="right"&&(Me+=de);var te=_o(U[0],U[1],[Me-de,ke-R,Me+de,ke-R,Me+de,ke+R,Me-de,ke+R],i.x,i.y);if(te.length>0){var ie=o,ge=Na(ie,pi(t)),ue=Na(ie,pi(te)),Se=ge;if(ue<ge&&(t=[te[0],te[1]],Se=ue),te.length>2){var Fe=Na(ie,{x:te[2],y:te[3]});Fe<Se&&(t=[te[2],te[3]])}}}var ze=rs(t,j,e.arrowShapes[l].spacing(r)+f),Ie=rs(t,j,e.arrowShapes[l].gap(r)+f);h.startX=Ie[0],h.startY=Ie[1],h.arrowStartX=ze[0],h.arrowStartY=ze[1],M&&(!Ve(h.startX)||!Ve(h.startY)||!Ve(h.endX)||!Ve(h.endY)?h.badLine=!0:h.badLine=!1)};Fo.getSourceEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[0],y:e.haystackPts[1]};default:return{x:e.arrowStartX,y:e.arrowStartY}}};Fo.getTargetEndpoint=function(r){var e=r[0]._private.rscratch;switch(this.recalculateRenderedStyle(r),e.edgeType){case"haystack":return{x:e.haystackPts[2],y:e.haystackPts[3]};default:return{x:e.arrowEndX,y:e.arrowEndY}}};var Xf={};function cC(r,e,t){for(var n=function(u,f,c,p){return wr(u,f,c,p)},a=e._private,i=a.rstyle.bezierPts,o=0;o<r.bezierProjPcts.length;o++){var s=r.bezierProjPcts[o];i.push({x:n(t[0],t[2],t[4],s),y:n(t[1],t[3],t[5],s)})}}Xf.storeEdgeProjections=function(r){var e=r._private,t=e.rscratch,n=t.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var a=0;a+5<t.allpts.length;a+=4)cC(this,r,t.allpts.slice(a,a+6))}else if(n==="segments")for(var i=e.rstyle.linePts=[],a=0;a+1<t.allpts.length;a+=2)i.push({x:t.allpts[a],y:t.allpts[a+1]});else if(n==="haystack"){var o=t.haystackPts;e.rstyle.haystackPts=[{x:o[0],y:o[1]},{x:o[2],y:o[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(r.pstyle("width").pfValue,r.pstyle("arrow-scale").value)*this.arrowShapeWidth};Xf.recalculateEdgeProjections=function(r){this.findEdgeControlPoints(r)};var Rn={};Rn.recalculateNodeLabelProjection=function(r){var e=r.pstyle("label").strValue;if(!ga(e)){var t,n,a=r._private,i=r.width(),o=r.height(),s=r.padding(),l=r.position(),u=r.pstyle("text-halign").strValue,f=r.pstyle("text-valign").strValue,c=a.rscratch,p=a.rstyle;switch(u){case"left":t=l.x-i/2-s;break;case"right":t=l.x+i/2+s;break;default:t=l.x}switch(f){case"top":n=l.y-o/2-s;break;case"bottom":n=l.y+o/2+s;break;default:n=l.y}c.labelX=t,c.labelY=n,p.labelX=t,p.labelY=n,this.calculateLabelAngles(r),this.applyLabelDimensions(r)}};var Xv=function(e,t){var n=Math.atan(t/e);return e===0&&n<0&&(n=n*-1),n},Qv=function(e,t){var n=t.x-e.x,a=t.y-e.y;return Xv(n,a)},dC=function(e,t,n,a){var i=So(0,a-.001,1),o=So(0,a+.001,1),s=xi(e,t,n,i),l=xi(e,t,n,o);return Qv(s,l)};Rn.recalculateEdgeLabelProjections=function(r){var e,t=r._private,n=t.rscratch,a=this,i={mid:r.pstyle("label").strValue,source:r.pstyle("source-label").strValue,target:r.pstyle("target-label").strValue};if(!!(i.mid||i.source||i.target)){e={x:n.midX,y:n.midY};var o=function(c,p,g){fa(t.rscratch,c,p,g),fa(t.rstyle,c,p,g)};o("labelX",null,e.x),o("labelY",null,e.y);var s=Xv(n.midDispX,n.midDispY);o("labelAutoAngle",null,s);var l=function f(){if(f.cache)return f.cache;for(var c=[],p=0;p+5<n.allpts.length;p+=4){var g={x:n.allpts[p],y:n.allpts[p+1]},h={x:n.allpts[p+2],y:n.allpts[p+3]},m={x:n.allpts[p+4],y:n.allpts[p+5]};c.push({p0:g,p1:h,p2:m,startDist:0,length:0,segments:[]})}var x=t.rstyle.bezierPts,w=a.bezierProjPcts.length;function S(v,T,k,N,O){var I=Ha(T,k),q=v.segments[v.segments.length-1],B={p0:T,p1:k,t0:N,t1:O,startDist:q?q.startDist+q.length:0,length:I};v.segments.push(B),v.length+=I}for(var y=0;y<c.length;y++){var C=c[y],E=c[y-1];E&&(C.startDist=E.startDist+E.length),S(C,C.p0,x[y*w],0,a.bezierProjPcts[0]);for(var M=0;M<w-1;M++)S(C,x[y*w+M],x[y*w+M+1],a.bezierProjPcts[M],a.bezierProjPcts[M+1]);S(C,x[y*w+w-1],C.p2,a.bezierProjPcts[w-1],1)}return f.cache=c},u=function(c){var p,g=c==="source";if(!!i[c]){var h=r.pstyle(c+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var m=l(),x,w=0,S=0,y=0;y<m.length;y++){for(var C=m[g?y:m.length-1-y],E=0;E<C.segments.length;E++){var M=C.segments[g?E:C.segments.length-1-E],v=y===m.length-1&&E===C.segments.length-1;if(w=S,S+=M.length,S>=h||v){x={cp:C,segment:M};break}}if(x)break}var T=x.cp,k=x.segment,N=(h-w)/k.length,O=k.t1-k.t0,I=g?k.t0+O*N:k.t1-O*N;I=So(0,I,1),e=xi(T.p0,T.p1,T.p2,I),p=dC(T.p0,T.p1,T.p2,I);break}case"straight":case"segments":case"haystack":{for(var q=0,B,j,Y,U,X=n.allpts.length,K=0;K+3<X&&(g?(Y={x:n.allpts[K],y:n.allpts[K+1]},U={x:n.allpts[K+2],y:n.allpts[K+3]}):(Y={x:n.allpts[X-2-K],y:n.allpts[X-1-K]},U={x:n.allpts[X-4-K],y:n.allpts[X-3-K]}),B=Ha(Y,U),j=q,q+=B,!(q>=h));K+=2);var P=h-j,D=P/B;D=So(0,D,1),e=y0(Y,U,D),p=Qv(Y,U);break}}o("labelX",c,e.x),o("labelY",c,e.y),o("labelAutoAngle",c,p)}};u("source"),u("target"),this.applyLabelDimensions(r)}};Rn.applyLabelDimensions=function(r){this.applyPrefixedLabelDimensions(r),r.isEdge()&&(this.applyPrefixedLabelDimensions(r,"source"),this.applyPrefixedLabelDimensions(r,"target"))};Rn.applyPrefixedLabelDimensions=function(r,e){var t=r._private,n=this.getLabelText(r,e),a=this.calculateLabelDimensions(r,n),i=r.pstyle("line-height").pfValue,o=r.pstyle("text-wrap").strValue,s=hn(t.rscratch,"labelWrapCachedLines",e)||[],l=o!=="wrap"?1:Math.max(s.length,1),u=a.height/l,f=u*i,c=a.width,p=a.height+(l-1)*(i-1)*u;fa(t.rstyle,"labelWidth",e,c),fa(t.rscratch,"labelWidth",e,c),fa(t.rstyle,"labelHeight",e,p),fa(t.rscratch,"labelHeight",e,p),fa(t.rscratch,"labelLineHeight",e,f)};Rn.getLabelText=function(r,e){var t=r._private,n=e?e+"-":"",a=r.pstyle(n+"label").strValue,i=r.pstyle("text-transform").value,o=function(P,D){return D?(fa(t.rscratch,P,e,D),D):hn(t.rscratch,P,e)};if(!a)return"";i=="none"||(i=="uppercase"?a=a.toUpperCase():i=="lowercase"&&(a=a.toLowerCase()));var s=r.pstyle("text-wrap").value;if(s==="wrap"){var l=o("labelKey");if(l!=null&&o("labelWrapKey")===l)return o("labelWrapCachedText");for(var u="\u200B",f=a.split(`
`),c=r.pstyle("text-max-width").pfValue,p=r.pstyle("text-overflow-wrap").value,g=p==="anywhere",h=[],m=/[\s\u200b]+/,x=g?"":" ",w=0;w<f.length;w++){var S=f[w],y=this.calculateLabelDimensions(r,S),C=y.width;if(g){var E=S.split("").join(u);S=E}if(C>c){for(var M=S.split(m),v="",T=0;T<M.length;T++){var k=M[T],N=v.length===0?k:v+x+k,O=this.calculateLabelDimensions(r,N),I=O.width;I<=c?v+=k+x:(v&&h.push(v),v=k+x)}v.match(/^[\s\u200b]+$/)||h.push(v)}else h.push(S)}o("labelWrapCachedLines",h),a=o("labelWrapCachedText",h.join(`
`)),o("labelWrapKey",l)}else if(s==="ellipsis"){var q=r.pstyle("text-max-width").pfValue,B="",j="\u2026",Y=!1;if(this.calculateLabelDimensions(r,a).width<q)return a;for(var U=0;U<a.length;U++){var X=this.calculateLabelDimensions(r,B+a[U]+j).width;if(X>q)break;B+=a[U],U===a.length-1&&(Y=!0)}return Y||(B+=j),B}return a};Rn.getLabelJustification=function(r){var e=r.pstyle("text-justification").strValue,t=r.pstyle("text-halign").strValue;if(e==="auto")if(r.isNode())switch(t){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};Rn.calculateLabelDimensions=function(r,e){var t=this,n=qa(e,r._private.labelDimsKey),a=t.labelDimCache||(t.labelDimCache=[]),i=a[n];if(i!=null)return i;var o=0,s=r.pstyle("font-style").strValue,l=r.pstyle("font-size").pfValue,u=r.pstyle("font-family").strValue,f=r.pstyle("font-weight").strValue,c=this.labelCalcCanvas,p=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=document.createElement("canvas"),p=this.labelCalcCanvasContext=c.getContext("2d");var g=c.style;g.position="absolute",g.left="-9999px",g.top="-9999px",g.zIndex="-1",g.visibility="hidden",g.pointerEvents="none"}p.font="".concat(s," ").concat(f," ").concat(l,"px ").concat(u);for(var h=0,m=0,x=e.split(`
`),w=0;w<x.length;w++){var S=x[w],y=p.measureText(S),C=Math.ceil(y.width),E=l;h=Math.max(C,h),m+=E}return h+=o,m+=o,a[n]={width:h,height:m}};Rn.calculateLabelAngle=function(r,e){var t=r._private,n=t.rscratch,a=r.isEdge(),i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=o.strValue;return s==="none"?0:a&&s==="autorotate"?n.labelAutoAngle:s==="autorotate"?0:o.pfValue};Rn.calculateLabelAngles=function(r){var e=this,t=r.isEdge(),n=r._private,a=n.rscratch;a.labelAngle=e.calculateLabelAngle(r),t&&(a.sourceLabelAngle=e.calculateLabelAngle(r,"source"),a.targetLabelAngle=e.calculateLabelAngle(r,"target"))};var Zv={},zd=28,Gd=!1;Zv.getNodeShape=function(r){var e=this,t=r.pstyle("shape").value;if(t==="cutrectangle"&&(r.width()<zd||r.height()<zd))return Gd||(Dt("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),Gd=!0),"rectangle";if(r.isParent())return t==="rectangle"||t==="roundrectangle"||t==="round-rectangle"||t==="cutrectangle"||t==="cut-rectangle"||t==="barrel"?t:"rectangle";if(t==="polygon"){var n=r.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return t};var fu={};fu.registerCalculationListeners=function(){var r=this.cy,e=r.collection(),t=this,n=function(o){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(o),s)for(var l=0;l<o.length;l++){var u=o[l],f=u._private,c=f.rstyle;c.clean=!1,c.cleanConnected=!1}};t.binder(r).on("bounds.* dirty.*",function(o){var s=o.target;n(s)}).on("style.* background.*",function(o){var s=o.target;n(s,!1)});var a=function(o){if(o){var s=t.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var u=e[l],f=u._private.rstyle;u.isNode()&&!f.cleanConnected&&(n(u.connectedEdges()),f.cleanConnected=!0)}if(s)for(var c=0;c<s.length;c++){var p=s[c];p(o,e)}t.recalculateRenderedStyle(e),e=r.collection()}};t.flushRenderedStyleQueue=function(){a(!0)},t.beforeRender(a,t.beforeRenderPriorities.eleCalcs)};fu.onUpdateEleCalcs=function(r){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(r)};fu.recalculateRenderedStyle=function(r,e){var t=function(C){return C._private.rstyle.cleanConnected},n=[],a=[];if(!this.destroyed){e===void 0&&(e=!0);for(var i=0;i<r.length;i++){var o=r[i],s=o._private,l=s.rstyle;o.isEdge()&&(!t(o.source())||!t(o.target()))&&(l.clean=!1),!(e&&l.clean||o.removed())&&o.pstyle("display").value!=="none"&&(s.group==="nodes"?a.push(o):n.push(o),l.clean=!0)}for(var u=0;u<a.length;u++){var f=a[u],c=f._private,p=c.rstyle,g=f.position();this.recalculateNodeLabelProjection(f),p.nodeX=g.x,p.nodeY=g.y,p.nodeW=f.pstyle("width").pfValue,p.nodeH=f.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var m=n[h],x=m._private,w=x.rstyle,S=x.rscratch;w.srcX=S.arrowStartX,w.srcY=S.arrowStartY,w.tgtX=S.arrowEndX,w.tgtY=S.arrowEndY,w.midX=S.midX,w.midY=S.midY,w.labelAngle=S.labelAngle,w.sourceLabelAngle=S.sourceLabelAngle,w.targetLabelAngle=S.targetLabelAngle}}};var cu={};cu.updateCachedGrabbedEles=function(){var r=this.cachedZSortedEles;if(!!r){r.drag=[],r.nondrag=[];for(var e=[],t=0;t<r.length;t++){var n=r[t],a=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):a.inDragLayer?r.drag.push(n):r.nondrag.push(n)}for(var t=0;t<e.length;t++){var n=e[t];r.drag.push(n)}}};cu.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};cu.getCachedZSortedEles=function(r){if(r||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(Rv),e.interactive=e.filter(function(t){return t.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var Jv={};[Xa,zs,Fr,Fo,Xf,Rn,Zv,fu,cu].forEach(function(r){rt(Jv,r)});var eg={};eg.getCachedImage=function(r,e,t){var n=this,a=n.imageCache=n.imageCache||{},i=a[r];if(i)return i.image.complete||i.image.addEventListener("load",t),i.image;i=a[r]=a[r]||{};var o=i.image=new Image;o.addEventListener("load",t),o.addEventListener("error",function(){o.error=!0});var s="data:",l=r.substring(0,s.length).toLowerCase()===s;return l||(e=e==="null"?null:e,o.crossOrigin=e),o.src=r,o};var zi={};zi.registerBinding=function(r,e,t,n){var a=Array.prototype.slice.apply(arguments,[1]),i=this.binder(r);return i.on.apply(i,a)};zi.binder=function(r){var e=this,t=e.cy.window(),n=r===t||r===t.document||r===t.document.body||By(r);if(e.supportsPassiveEvents==null){var a=!1;try{var i=Object.defineProperty({},"passive",{get:function(){return a=!0,!0}});t.addEventListener("test",null,i)}catch{}e.supportsPassiveEvents=a}var o=function(l,u,f){var c=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(c[2]={capture:f??!1,passive:!1,once:!1}),e.bindings.push({target:r,args:c}),(r.addEventListener||r.on).apply(r,c),this};return{on:o,addEventListener:o,addListener:o,bind:o}};zi.nodeIsDraggable=function(r){return r&&r.isNode()&&!r.locked()&&r.grabbable()};zi.nodeIsGrabbable=function(r){return this.nodeIsDraggable(r)&&r.interactive()};zi.load=function(){var r=this,e=r.cy.window(),t=function(R){return R.selected()},n=function(R,G,re,te){R==null&&(R=r.cy);for(var ie=0;ie<G.length;ie++){var ge=G[ie];R.emit({originalEvent:re,type:ge,position:te})}},a=function(R){return R.shiftKey||R.metaKey||R.ctrlKey},i=function(R,G){var re=!0;if(r.cy.hasCompoundNodes()&&R&&R.pannable())for(var te=0;G&&te<G.length;te++){var R=G[te];if(R.isNode()&&R.isParent()&&!R.pannable()){re=!1;break}}else re=!0;return re},o=function(R){R[0]._private.grabbed=!0},s=function(R){R[0]._private.grabbed=!1},l=function(R){R[0]._private.rscratch.inDragLayer=!0},u=function(R){R[0]._private.rscratch.inDragLayer=!1},f=function(R){R[0]._private.rscratch.isGrabTarget=!0},c=function(R){R[0]._private.rscratch.isGrabTarget=!1},p=function(R,G){var re=G.addToList,te=re.has(R);!te&&R.grabbable()&&!R.locked()&&(re.merge(R),o(R))},g=function(R,G){if(!!R.cy().hasCompoundNodes()&&!(G.inDragLayer==null&&G.addToList==null)){var re=R.descendants();G.inDragLayer&&(re.forEach(l),re.connectedEdges().forEach(l)),G.addToList&&p(re,G)}},h=function(R,G){G=G||{};var re=R.cy().hasCompoundNodes();G.inDragLayer&&(R.forEach(l),R.neighborhood().stdFilter(function(te){return!re||te.isEdge()}).forEach(l)),G.addToList&&R.forEach(function(te){p(te,G)}),g(R,G),w(R,{inDragLayer:G.inDragLayer}),r.updateCachedGrabbedEles()},m=h,x=function(R){!R||(r.getCachedZSortedEles().forEach(function(G){s(G),u(G),c(G)}),r.updateCachedGrabbedEles())},w=function(R,G){if(!(G.inDragLayer==null&&G.addToList==null)&&!!R.cy().hasCompoundNodes()){var re=R.ancestors().orphans();if(!re.same(R)){var te=re.descendants().spawnSelf().merge(re).unmerge(R).unmerge(R.descendants()),ie=te.connectedEdges();G.inDragLayer&&(ie.forEach(l),te.forEach(l)),G.addToList&&te.forEach(function(ge){p(ge,G)})}}},S=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},y=typeof MutationObserver<"u",C=typeof ResizeObserver<"u";y?(r.removeObserver=new MutationObserver(function(de){for(var R=0;R<de.length;R++){var G=de[R],re=G.removedNodes;if(re)for(var te=0;te<re.length;te++){var ie=re[te];if(ie===r.container){r.destroy();break}}}}),r.container.parentNode&&r.removeObserver.observe(r.container.parentNode,{childList:!0})):r.registerBinding(r.container,"DOMNodeRemoved",function(de){r.destroy()});var E=Xs(function(){r.cy.resize()},100);y&&(r.styleObserver=new MutationObserver(E),r.styleObserver.observe(r.container,{attributes:!0})),r.registerBinding(e,"resize",E),C&&(r.resizeObserver=new ResizeObserver(E),r.resizeObserver.observe(r.container));var M=function(R,G){for(;R!=null;)G(R),R=R.parentNode},v=function(){r.invalidateContainerClientCoordsCache()};M(r.container,function(de){r.registerBinding(de,"transitionend",v),r.registerBinding(de,"animationend",v),r.registerBinding(de,"scroll",v)}),r.registerBinding(r.container,"contextmenu",function(de){de.preventDefault()});var T=function(){return r.selection[4]!==0},k=function(R){for(var G=r.findContainerClientCoords(),re=G[0],te=G[1],ie=G[2],ge=G[3],ue=R.touches?R.touches:[R],Se=!1,Fe=0;Fe<ue.length;Fe++){var ze=ue[Fe];if(re<=ze.clientX&&ze.clientX<=re+ie&&te<=ze.clientY&&ze.clientY<=te+ge){Se=!0;break}}if(!Se)return!1;for(var Ie=r.container,et=R.target,$e=et.parentNode,We=!1;$e;){if($e===Ie){We=!0;break}$e=$e.parentNode}return!!We};r.registerBinding(r.container,"mousedown",function(R){if(!!k(R)){R.preventDefault(),S(),r.hoverData.capture=!0,r.hoverData.which=R.which;var G=r.cy,re=[R.clientX,R.clientY],te=r.projectIntoViewport(re[0],re[1]),ie=r.selection,ge=r.findNearestElements(te[0],te[1],!0,!1),ue=ge[0],Se=r.dragData.possibleDragElements;r.hoverData.mdownPos=te,r.hoverData.mdownGPos=re;var Fe=function(){r.hoverData.tapholdCancelled=!1,clearTimeout(r.hoverData.tapholdTimeout),r.hoverData.tapholdTimeout=setTimeout(function(){if(!r.hoverData.tapholdCancelled){var ft=r.hoverData.down;ft?ft.emit({originalEvent:R,type:"taphold",position:{x:te[0],y:te[1]}}):G.emit({originalEvent:R,type:"taphold",position:{x:te[0],y:te[1]}})}},r.tapholdDuration)};if(R.which==3){r.hoverData.cxtStarted=!0;var ze={originalEvent:R,type:"cxttapstart",position:{x:te[0],y:te[1]}};ue?(ue.activate(),ue.emit(ze),r.hoverData.down=ue):G.emit(ze),r.hoverData.downTime=new Date().getTime(),r.hoverData.cxtDragged=!1}else if(R.which==1){ue&&ue.activate();{if(ue!=null&&r.nodeIsGrabbable(ue)){var Ie=function(ft){return{originalEvent:R,type:ft,position:{x:te[0],y:te[1]}}},et=function(ft){ft.emit(Ie("grab"))};if(f(ue),!ue.selected())Se=r.dragData.possibleDragElements=G.collection(),m(ue,{addToList:Se}),ue.emit(Ie("grabon")).emit(Ie("grab"));else{Se=r.dragData.possibleDragElements=G.collection();var $e=G.$(function(We){return We.isNode()&&We.selected()&&r.nodeIsGrabbable(We)});h($e,{addToList:Se}),ue.emit(Ie("grabon")),$e.forEach(et)}r.redrawHint("eles",!0),r.redrawHint("drag",!0)}r.hoverData.down=ue,r.hoverData.downs=ge,r.hoverData.downTime=new Date().getTime()}n(ue,["mousedown","tapstart","vmousedown"],R,{x:te[0],y:te[1]}),ue==null?(ie[4]=1,r.data.bgActivePosistion={x:te[0],y:te[1]},r.redrawHint("select",!0),r.redraw()):ue.pannable()&&(ie[4]=1),Fe()}ie[0]=ie[2]=te[0],ie[1]=ie[3]=te[1]}},!1),r.registerBinding(e,"mousemove",function(R){var G=r.hoverData.capture;if(!(!G&&!k(R))){var re=!1,te=r.cy,ie=te.zoom(),ge=[R.clientX,R.clientY],ue=r.projectIntoViewport(ge[0],ge[1]),Se=r.hoverData.mdownPos,Fe=r.hoverData.mdownGPos,ze=r.selection,Ie=null;!r.hoverData.draggingEles&&!r.hoverData.dragging&&!r.hoverData.selecting&&(Ie=r.findNearestElement(ue[0],ue[1],!0,!1));var et=r.hoverData.last,$e=r.hoverData.down,We=[ue[0]-ze[2],ue[1]-ze[3]],ft=r.dragData.possibleDragElements,ht;if(Fe){var Nt=ge[0]-Fe[0],vt=Nt*Nt,Ot=ge[1]-Fe[1],zt=Ot*Ot,gt=vt+zt;r.hoverData.isOverThresholdDrag=ht=gt>=r.desktopTapThreshold2}var st=a(R);ht&&(r.hoverData.tapholdCancelled=!0);var Qt=function(){var Oe=r.hoverData.dragDelta=r.hoverData.dragDelta||[];Oe.length===0?(Oe.push(We[0]),Oe.push(We[1])):(Oe[0]+=We[0],Oe[1]+=We[1])};re=!0,n(Ie,["mousemove","vmousemove","tapdrag"],R,{x:ue[0],y:ue[1]});var yr=function(){r.data.bgActivePosistion=void 0,r.hoverData.selecting||te.emit({originalEvent:R,type:"boxstart",position:{x:ue[0],y:ue[1]}}),ze[4]=1,r.hoverData.selecting=!0,r.redrawHint("select",!0),r.redraw()};if(r.hoverData.which===3){if(ht){var ur={originalEvent:R,type:"cxtdrag",position:{x:ue[0],y:ue[1]}};$e?$e.emit(ur):te.emit(ur),r.hoverData.cxtDragged=!0,(!r.hoverData.cxtOver||Ie!==r.hoverData.cxtOver)&&(r.hoverData.cxtOver&&r.hoverData.cxtOver.emit({originalEvent:R,type:"cxtdragout",position:{x:ue[0],y:ue[1]}}),r.hoverData.cxtOver=Ie,Ie&&Ie.emit({originalEvent:R,type:"cxtdragover",position:{x:ue[0],y:ue[1]}}))}}else if(r.hoverData.dragging){if(re=!0,te.panningEnabled()&&te.userPanningEnabled()){var xr;if(r.hoverData.justStartedPan){var jt=r.hoverData.mdownPos;xr={x:(ue[0]-jt[0])*ie,y:(ue[1]-jt[1])*ie},r.hoverData.justStartedPan=!1}else xr={x:We[0]*ie,y:We[1]*ie};te.panBy(xr),te.emit("dragpan"),r.hoverData.dragged=!0}ue=r.projectIntoViewport(R.clientX,R.clientY)}else if(ze[4]==1&&($e==null||$e.pannable())){if(ht){if(!r.hoverData.dragging&&te.boxSelectionEnabled()&&(st||!te.panningEnabled()||!te.userPanningEnabled()))yr();else if(!r.hoverData.selecting&&te.panningEnabled()&&te.userPanningEnabled()){var Zt=i($e,r.hoverData.downs);Zt&&(r.hoverData.dragging=!0,r.hoverData.justStartedPan=!0,ze[4]=0,r.data.bgActivePosistion=pi(Se),r.redrawHint("select",!0),r.redraw())}$e&&$e.pannable()&&$e.active()&&$e.unactivate()}}else{if($e&&$e.pannable()&&$e.active()&&$e.unactivate(),(!$e||!$e.grabbed())&&Ie!=et&&(et&&n(et,["mouseout","tapdragout"],R,{x:ue[0],y:ue[1]}),Ie&&n(Ie,["mouseover","tapdragover"],R,{x:ue[0],y:ue[1]}),r.hoverData.last=Ie),$e)if(ht){if(te.boxSelectionEnabled()&&st)$e&&$e.grabbed()&&(x(ft),$e.emit("freeon"),ft.emit("free"),r.dragData.didDrag&&($e.emit("dragfreeon"),ft.emit("dragfree"))),yr();else if($e&&$e.grabbed()&&r.nodeIsDraggable($e)){var Gt=!r.dragData.didDrag;Gt&&r.redrawHint("eles",!0),r.dragData.didDrag=!0,r.hoverData.draggingEles||h(ft,{inDragLayer:!0});var At={x:0,y:0};if(Ve(We[0])&&Ve(We[1])&&(At.x+=We[0],At.y+=We[1],Gt)){var Ae=r.hoverData.dragDelta;Ae&&Ve(Ae[0])&&Ve(Ae[1])&&(At.x+=Ae[0],At.y+=Ae[1])}r.hoverData.draggingEles=!0,ft.silentShift(At).emit("position drag"),r.redrawHint("drag",!0),r.redraw()}}else Qt();re=!0}if(ze[2]=ue[0],ze[3]=ue[1],re)return R.stopPropagation&&R.stopPropagation(),R.preventDefault&&R.preventDefault(),!1}},!1);var N,O,I;r.registerBinding(e,"mouseup",function(R){var G=r.hoverData.capture;if(!!G){r.hoverData.capture=!1;var re=r.cy,te=r.projectIntoViewport(R.clientX,R.clientY),ie=r.selection,ge=r.findNearestElement(te[0],te[1],!0,!1),ue=r.dragData.possibleDragElements,Se=r.hoverData.down,Fe=a(R);if(r.data.bgActivePosistion&&(r.redrawHint("select",!0),r.redraw()),r.hoverData.tapholdCancelled=!0,r.data.bgActivePosistion=void 0,Se&&Se.unactivate(),r.hoverData.which===3){var ze={originalEvent:R,type:"cxttapend",position:{x:te[0],y:te[1]}};if(Se?Se.emit(ze):re.emit(ze),!r.hoverData.cxtDragged){var Ie={originalEvent:R,type:"cxttap",position:{x:te[0],y:te[1]}};Se?Se.emit(Ie):re.emit(Ie)}r.hoverData.cxtDragged=!1,r.hoverData.which=null}else if(r.hoverData.which===1){if(n(ge,["mouseup","tapend","vmouseup"],R,{x:te[0],y:te[1]}),!r.dragData.didDrag&&!r.hoverData.dragged&&!r.hoverData.selecting&&!r.hoverData.isOverThresholdDrag&&(n(Se,["click","tap","vclick"],R,{x:te[0],y:te[1]}),O=!1,R.timeStamp-I<=re.multiClickDebounceTime()?(N&&clearTimeout(N),O=!0,I=null,n(Se,["dblclick","dbltap","vdblclick"],R,{x:te[0],y:te[1]})):(N=setTimeout(function(){O||n(Se,["oneclick","onetap","voneclick"],R,{x:te[0],y:te[1]})},re.multiClickDebounceTime()),I=R.timeStamp)),Se==null&&!r.dragData.didDrag&&!r.hoverData.selecting&&!r.hoverData.dragged&&!a(R)&&(re.$(t).unselect(["tapunselect"]),ue.length>0&&r.redrawHint("eles",!0),r.dragData.possibleDragElements=ue=re.collection()),ge==Se&&!r.dragData.didDrag&&!r.hoverData.selecting&&ge!=null&&ge._private.selectable&&(r.hoverData.dragging||(re.selectionType()==="additive"||Fe?ge.selected()?ge.unselect(["tapunselect"]):ge.select(["tapselect"]):Fe||(re.$(t).unmerge(ge).unselect(["tapunselect"]),ge.select(["tapselect"]))),r.redrawHint("eles",!0)),r.hoverData.selecting){var et=re.collection(r.getAllInBox(ie[0],ie[1],ie[2],ie[3]));r.redrawHint("select",!0),et.length>0&&r.redrawHint("eles",!0),re.emit({type:"boxend",originalEvent:R,position:{x:te[0],y:te[1]}});var $e=function(ht){return ht.selectable()&&!ht.selected()};re.selectionType()==="additive"||Fe||re.$(t).unmerge(et).unselect(),et.emit("box").stdFilter($e).select().emit("boxselect"),r.redraw()}if(r.hoverData.dragging&&(r.hoverData.dragging=!1,r.redrawHint("select",!0),r.redrawHint("eles",!0),r.redraw()),!ie[4]){r.redrawHint("drag",!0),r.redrawHint("eles",!0);var We=Se&&Se.grabbed();x(ue),We&&(Se.emit("freeon"),ue.emit("free"),r.dragData.didDrag&&(Se.emit("dragfreeon"),ue.emit("dragfree")))}}ie[4]=0,r.hoverData.down=null,r.hoverData.cxtStarted=!1,r.hoverData.draggingEles=!1,r.hoverData.selecting=!1,r.hoverData.isOverThresholdDrag=!1,r.dragData.didDrag=!1,r.hoverData.dragged=!1,r.hoverData.dragDelta=[],r.hoverData.mdownPos=null,r.hoverData.mdownGPos=null}},!1);var q=function(R){if(!r.scrollingPage){var G=r.cy,re=G.zoom(),te=G.pan(),ie=r.projectIntoViewport(R.clientX,R.clientY),ge=[ie[0]*re+te.x,ie[1]*re+te.y];if(r.hoverData.draggingEles||r.hoverData.dragging||r.hoverData.cxtStarted||T()){R.preventDefault();return}if(G.panningEnabled()&&G.userPanningEnabled()&&G.zoomingEnabled()&&G.userZoomingEnabled()){R.preventDefault(),r.data.wheelZooming=!0,clearTimeout(r.data.wheelTimeout),r.data.wheelTimeout=setTimeout(function(){r.data.wheelZooming=!1,r.redrawHint("eles",!0),r.redraw()},150);var ue;R.deltaY!=null?ue=R.deltaY/-250:R.wheelDeltaY!=null?ue=R.wheelDeltaY/1e3:ue=R.wheelDelta/1e3,ue=ue*r.wheelSensitivity;var Se=R.deltaMode===1;Se&&(ue*=33);var Fe=G.zoom()*Math.pow(10,ue);R.type==="gesturechange"&&(Fe=r.gestureStartZoom*R.scale),G.zoom({level:Fe,renderedPosition:{x:ge[0],y:ge[1]}}),G.emit(R.type==="gesturechange"?"pinchzoom":"scrollzoom")}}};r.registerBinding(r.container,"wheel",q,!0),r.registerBinding(e,"scroll",function(R){r.scrollingPage=!0,clearTimeout(r.scrollingPageTimeout),r.scrollingPageTimeout=setTimeout(function(){r.scrollingPage=!1},250)},!0),r.registerBinding(r.container,"gesturestart",function(R){r.gestureStartZoom=r.cy.zoom(),r.hasTouchStarted||R.preventDefault()},!0),r.registerBinding(r.container,"gesturechange",function(de){r.hasTouchStarted||q(de)},!0),r.registerBinding(r.container,"mouseout",function(R){var G=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseout",position:{x:G[0],y:G[1]}})},!1),r.registerBinding(r.container,"mouseover",function(R){var G=r.projectIntoViewport(R.clientX,R.clientY);r.cy.emit({originalEvent:R,type:"mouseover",position:{x:G[0],y:G[1]}})},!1);var B,j,Y,U,X,K,P,D,L,F,W,Z,J,Q=function(R,G,re,te){return Math.sqrt((re-R)*(re-R)+(te-G)*(te-G))},oe=function(R,G,re,te){return(re-R)*(re-R)+(te-G)*(te-G)},fe;r.registerBinding(r.container,"touchstart",fe=function(R){if(r.hasTouchStarted=!0,!!k(R)){S(),r.touchData.capture=!0,r.data.bgActivePosistion=void 0;var G=r.cy,re=r.touchData.now,te=r.touchData.earlier;if(R.touches[0]){var ie=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);re[0]=ie[0],re[1]=ie[1]}if(R.touches[1]){var ie=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);re[2]=ie[0],re[3]=ie[1]}if(R.touches[2]){var ie=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);re[4]=ie[0],re[5]=ie[1]}if(R.touches[1]){r.touchData.singleTouchMoved=!0,x(r.dragData.touchDragEles);var ge=r.findContainerClientCoords();L=ge[0],F=ge[1],W=ge[2],Z=ge[3],B=R.touches[0].clientX-L,j=R.touches[0].clientY-F,Y=R.touches[1].clientX-L,U=R.touches[1].clientY-F,J=0<=B&&B<=W&&0<=Y&&Y<=W&&0<=j&&j<=Z&&0<=U&&U<=Z;var ue=G.pan(),Se=G.zoom();X=Q(B,j,Y,U),K=oe(B,j,Y,U),P=[(B+Y)/2,(j+U)/2],D=[(P[0]-ue.x)/Se,(P[1]-ue.y)/Se];var Fe=200,ze=Fe*Fe;if(K<ze&&!R.touches[2]){var Ie=r.findNearestElement(re[0],re[1],!0,!0),et=r.findNearestElement(re[2],re[3],!0,!0);Ie&&Ie.isNode()?(Ie.activate().emit({originalEvent:R,type:"cxttapstart",position:{x:re[0],y:re[1]}}),r.touchData.start=Ie):et&&et.isNode()?(et.activate().emit({originalEvent:R,type:"cxttapstart",position:{x:re[0],y:re[1]}}),r.touchData.start=et):G.emit({originalEvent:R,type:"cxttapstart",position:{x:re[0],y:re[1]}}),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!0,r.touchData.cxtDragged=!1,r.data.bgActivePosistion=void 0,r.redraw();return}}if(R.touches[2])G.boxSelectionEnabled()&&R.preventDefault();else if(!R.touches[1]){if(R.touches[0]){var $e=r.findNearestElements(re[0],re[1],!0,!0),We=$e[0];if(We!=null&&(We.activate(),r.touchData.start=We,r.touchData.starts=$e,r.nodeIsGrabbable(We))){var ft=r.dragData.touchDragEles=G.collection(),ht=null;r.redrawHint("eles",!0),r.redrawHint("drag",!0),We.selected()?(ht=G.$(function(gt){return gt.selected()&&r.nodeIsGrabbable(gt)}),h(ht,{addToList:ft})):m(We,{addToList:ft}),f(We);var Nt=function(st){return{originalEvent:R,type:st,position:{x:re[0],y:re[1]}}};We.emit(Nt("grabon")),ht?ht.forEach(function(gt){gt.emit(Nt("grab"))}):We.emit(Nt("grab"))}n(We,["touchstart","tapstart","vmousedown"],R,{x:re[0],y:re[1]}),We==null&&(r.data.bgActivePosistion={x:ie[0],y:ie[1]},r.redrawHint("select",!0),r.redraw()),r.touchData.singleTouchMoved=!1,r.touchData.singleTouchStartTime=+new Date,clearTimeout(r.touchData.tapholdTimeout),r.touchData.tapholdTimeout=setTimeout(function(){r.touchData.singleTouchMoved===!1&&!r.pinching&&!r.touchData.selecting&&n(r.touchData.start,["taphold"],R,{x:re[0],y:re[1]})},r.tapholdDuration)}}if(R.touches.length>=1){for(var vt=r.touchData.startPosition=[null,null,null,null,null,null],Ot=0;Ot<re.length;Ot++)vt[Ot]=te[Ot]=re[Ot];var zt=R.touches[0];r.touchData.startGPosition=[zt.clientX,zt.clientY]}}},!1);var ce;r.registerBinding(window,"touchmove",ce=function(R){var G=r.touchData.capture;if(!(!G&&!k(R))){var re=r.selection,te=r.cy,ie=r.touchData.now,ge=r.touchData.earlier,ue=te.zoom();if(R.touches[0]){var Se=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ie[0]=Se[0],ie[1]=Se[1]}if(R.touches[1]){var Se=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ie[2]=Se[0],ie[3]=Se[1]}if(R.touches[2]){var Se=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ie[4]=Se[0],ie[5]=Se[1]}var Fe=r.touchData.startGPosition,ze;if(G&&R.touches[0]&&Fe){for(var Ie=[],et=0;et<ie.length;et++)Ie[et]=ie[et]-ge[et];var $e=R.touches[0].clientX-Fe[0],We=$e*$e,ft=R.touches[0].clientY-Fe[1],ht=ft*ft,Nt=We+ht;ze=Nt>=r.touchTapThreshold2}if(G&&r.touchData.cxt){R.preventDefault();var vt=R.touches[0].clientX-L,Ot=R.touches[0].clientY-F,zt=R.touches[1].clientX-L,gt=R.touches[1].clientY-F,st=oe(vt,Ot,zt,gt),Qt=st/K,yr=150,ur=yr*yr,xr=1.5,jt=xr*xr;if(Qt>=jt||st>=ur){r.touchData.cxt=!1,r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var Zt={originalEvent:R,type:"cxttapend",position:{x:ie[0],y:ie[1]}};r.touchData.start?(r.touchData.start.unactivate().emit(Zt),r.touchData.start=null):te.emit(Zt)}}if(G&&r.touchData.cxt){var Zt={originalEvent:R,type:"cxtdrag",position:{x:ie[0],y:ie[1]}};r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.touchData.start?r.touchData.start.emit(Zt):te.emit(Zt),r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxtDragged=!0;var Gt=r.findNearestElement(ie[0],ie[1],!0,!0);(!r.touchData.cxtOver||Gt!==r.touchData.cxtOver)&&(r.touchData.cxtOver&&r.touchData.cxtOver.emit({originalEvent:R,type:"cxtdragout",position:{x:ie[0],y:ie[1]}}),r.touchData.cxtOver=Gt,Gt&&Gt.emit({originalEvent:R,type:"cxtdragover",position:{x:ie[0],y:ie[1]}}))}else if(G&&R.touches[2]&&te.boxSelectionEnabled())R.preventDefault(),r.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,r.touchData.selecting||te.emit({originalEvent:R,type:"boxstart",position:{x:ie[0],y:ie[1]}}),r.touchData.selecting=!0,r.touchData.didSelect=!0,re[4]=1,!re||re.length===0||re[0]===void 0?(re[0]=(ie[0]+ie[2]+ie[4])/3,re[1]=(ie[1]+ie[3]+ie[5])/3,re[2]=(ie[0]+ie[2]+ie[4])/3+1,re[3]=(ie[1]+ie[3]+ie[5])/3+1):(re[2]=(ie[0]+ie[2]+ie[4])/3,re[3]=(ie[1]+ie[3]+ie[5])/3),r.redrawHint("select",!0),r.redraw();else if(G&&R.touches[1]&&!r.touchData.didSelect&&te.zoomingEnabled()&&te.panningEnabled()&&te.userZoomingEnabled()&&te.userPanningEnabled()){R.preventDefault(),r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var At=r.dragData.touchDragEles;if(At){r.redrawHint("drag",!0);for(var Ae=0;Ae<At.length;Ae++){var pe=At[Ae]._private;pe.grabbed=!1,pe.rscratch.inDragLayer=!1}}var Oe=r.touchData.start,vt=R.touches[0].clientX-L,Ot=R.touches[0].clientY-F,zt=R.touches[1].clientX-L,gt=R.touches[1].clientY-F,je=Q(vt,Ot,zt,gt),nt=je/X;if(J){var Je=vt-B,Ct=Ot-j,Jt=zt-Y,Yt=gt-U,Wt=(Je+Jt)/2,pt=(Ct+Yt)/2,er=te.zoom(),qr=er*nt,Cr=te.pan(),Hr=D[0]*er+Cr.x,Ur=D[1]*er+Cr.y,sn={x:-qr/er*(Hr-Cr.x-Wt)+Hr,y:-qr/er*(Ur-Cr.y-pt)+Ur};if(Oe&&Oe.active()){var At=r.dragData.touchDragEles;x(At),r.redrawHint("drag",!0),r.redrawHint("eles",!0),Oe.unactivate().emit("freeon"),At.emit("free"),r.dragData.didDrag&&(Oe.emit("dragfreeon"),At.emit("dragfree"))}te.viewport({zoom:qr,pan:sn,cancelOnFailedZoom:!0}),te.emit("pinchzoom"),X=je,B=vt,j=Ot,Y=zt,U=gt,r.pinching=!0}if(R.touches[0]){var Se=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ie[0]=Se[0],ie[1]=Se[1]}if(R.touches[1]){var Se=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ie[2]=Se[0],ie[3]=Se[1]}if(R.touches[2]){var Se=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ie[4]=Se[0],ie[5]=Se[1]}}else if(R.touches[0]&&!r.touchData.didSelect){var fr=r.touchData.start,mn=r.touchData.last,Gt;if(!r.hoverData.draggingEles&&!r.swipePanning&&(Gt=r.findNearestElement(ie[0],ie[1],!0,!0)),G&&fr!=null&&R.preventDefault(),G&&fr!=null&&r.nodeIsDraggable(fr))if(ze){var At=r.dragData.touchDragEles,zr=!r.dragData.didDrag;zr&&h(At,{inDragLayer:!0}),r.dragData.didDrag=!0;var Mr={x:0,y:0};if(Ve(Ie[0])&&Ve(Ie[1])&&(Mr.x+=Ie[0],Mr.y+=Ie[1],zr)){r.redrawHint("eles",!0);var Rt=r.touchData.dragDelta;Rt&&Ve(Rt[0])&&Ve(Rt[1])&&(Mr.x+=Rt[0],Mr.y+=Rt[1])}r.hoverData.draggingEles=!0,At.silentShift(Mr).emit("position drag"),r.redrawHint("drag",!0),r.touchData.startPosition[0]==ge[0]&&r.touchData.startPosition[1]==ge[1]&&r.redrawHint("eles",!0),r.redraw()}else{var Rt=r.touchData.dragDelta=r.touchData.dragDelta||[];Rt.length===0?(Rt.push(Ie[0]),Rt.push(Ie[1])):(Rt[0]+=Ie[0],Rt[1]+=Ie[1])}if(n(fr||Gt,["touchmove","tapdrag","vmousemove"],R,{x:ie[0],y:ie[1]}),(!fr||!fr.grabbed())&&Gt!=mn&&(mn&&mn.emit({originalEvent:R,type:"tapdragout",position:{x:ie[0],y:ie[1]}}),Gt&&Gt.emit({originalEvent:R,type:"tapdragover",position:{x:ie[0],y:ie[1]}})),r.touchData.last=Gt,G)for(var Ae=0;Ae<ie.length;Ae++)ie[Ae]&&r.touchData.startPosition[Ae]&&ze&&(r.touchData.singleTouchMoved=!0);if(G&&(fr==null||fr.pannable())&&te.panningEnabled()&&te.userPanningEnabled()){var Jr=i(fr,r.touchData.starts);Jr&&(R.preventDefault(),r.data.bgActivePosistion||(r.data.bgActivePosistion=pi(r.touchData.startPosition)),r.swipePanning?(te.panBy({x:Ie[0]*ue,y:Ie[1]*ue}),te.emit("dragpan")):ze&&(r.swipePanning=!0,te.panBy({x:$e*ue,y:ft*ue}),te.emit("dragpan"),fr&&(fr.unactivate(),r.redrawHint("select",!0),r.touchData.start=null)));var Se=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ie[0]=Se[0],ie[1]=Se[1]}}for(var et=0;et<ie.length;et++)ge[et]=ie[et];G&&R.touches.length>0&&!r.hoverData.draggingEles&&!r.swipePanning&&r.data.bgActivePosistion!=null&&(r.data.bgActivePosistion=void 0,r.redrawHint("select",!0),r.redraw())}},!1);var Ce;r.registerBinding(e,"touchcancel",Ce=function(R){var G=r.touchData.start;r.touchData.capture=!1,G&&G.unactivate()});var Le,Re,De,me;if(r.registerBinding(e,"touchend",Le=function(R){var G=r.touchData.start,re=r.touchData.capture;if(re)R.touches.length===0&&(r.touchData.capture=!1),R.preventDefault();else return;var te=r.selection;r.swipePanning=!1,r.hoverData.draggingEles=!1;var ie=r.cy,ge=ie.zoom(),ue=r.touchData.now,Se=r.touchData.earlier;if(R.touches[0]){var Fe=r.projectIntoViewport(R.touches[0].clientX,R.touches[0].clientY);ue[0]=Fe[0],ue[1]=Fe[1]}if(R.touches[1]){var Fe=r.projectIntoViewport(R.touches[1].clientX,R.touches[1].clientY);ue[2]=Fe[0],ue[3]=Fe[1]}if(R.touches[2]){var Fe=r.projectIntoViewport(R.touches[2].clientX,R.touches[2].clientY);ue[4]=Fe[0],ue[5]=Fe[1]}G&&G.unactivate();var ze;if(r.touchData.cxt){if(ze={originalEvent:R,type:"cxttapend",position:{x:ue[0],y:ue[1]}},G?G.emit(ze):ie.emit(ze),!r.touchData.cxtDragged){var Ie={originalEvent:R,type:"cxttap",position:{x:ue[0],y:ue[1]}};G?G.emit(Ie):ie.emit(Ie)}r.touchData.start&&(r.touchData.start._private.grabbed=!1),r.touchData.cxt=!1,r.touchData.start=null,r.redraw();return}if(!R.touches[2]&&ie.boxSelectionEnabled()&&r.touchData.selecting){r.touchData.selecting=!1;var et=ie.collection(r.getAllInBox(te[0],te[1],te[2],te[3]));te[0]=void 0,te[1]=void 0,te[2]=void 0,te[3]=void 0,te[4]=0,r.redrawHint("select",!0),ie.emit({type:"boxend",originalEvent:R,position:{x:ue[0],y:ue[1]}});var $e=function(ur){return ur.selectable()&&!ur.selected()};et.emit("box").stdFilter($e).select().emit("boxselect"),et.nonempty()&&r.redrawHint("eles",!0),r.redraw()}if(G!=null&&G.unactivate(),R.touches[2])r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);else if(!R.touches[1]){if(!R.touches[0]){if(!R.touches[0]){r.data.bgActivePosistion=void 0,r.redrawHint("select",!0);var We=r.dragData.touchDragEles;if(G!=null){var ft=G._private.grabbed;x(We),r.redrawHint("drag",!0),r.redrawHint("eles",!0),ft&&(G.emit("freeon"),We.emit("free"),r.dragData.didDrag&&(G.emit("dragfreeon"),We.emit("dragfree"))),n(G,["touchend","tapend","vmouseup","tapdragout"],R,{x:ue[0],y:ue[1]}),G.unactivate(),r.touchData.start=null}else{var ht=r.findNearestElement(ue[0],ue[1],!0,!0);n(ht,["touchend","tapend","vmouseup","tapdragout"],R,{x:ue[0],y:ue[1]})}var Nt=r.touchData.startPosition[0]-ue[0],vt=Nt*Nt,Ot=r.touchData.startPosition[1]-ue[1],zt=Ot*Ot,gt=vt+zt,st=gt*ge*ge;r.touchData.singleTouchMoved||(G||ie.$(":selected").unselect(["tapunselect"]),n(G,["tap","vclick"],R,{x:ue[0],y:ue[1]}),Re=!1,R.timeStamp-me<=ie.multiClickDebounceTime()?(De&&clearTimeout(De),Re=!0,me=null,n(G,["dbltap","vdblclick"],R,{x:ue[0],y:ue[1]})):(De=setTimeout(function(){Re||n(G,["onetap","voneclick"],R,{x:ue[0],y:ue[1]})},ie.multiClickDebounceTime()),me=R.timeStamp)),G!=null&&!r.dragData.didDrag&&G._private.selectable&&st<r.touchTapThreshold2&&!r.pinching&&(ie.selectionType()==="single"?(ie.$(t).unmerge(G).unselect(["tapunselect"]),G.select(["tapselect"])):G.selected()?G.unselect(["tapunselect"]):G.select(["tapselect"]),r.redrawHint("eles",!0)),r.touchData.singleTouchMoved=!0}}}for(var Qt=0;Qt<ue.length;Qt++)Se[Qt]=ue[Qt];r.dragData.didDrag=!1,R.touches.length===0&&(r.touchData.dragDelta=[],r.touchData.startPosition=[null,null,null,null,null,null],r.touchData.startGPosition=null,r.touchData.didSelect=!1),R.touches.length<2&&(R.touches.length===1&&(r.touchData.startGPosition=[R.touches[0].clientX,R.touches[0].clientY]),r.pinching=!1,r.redrawHint("eles",!0),r.redraw())},!1),typeof TouchEvent>"u"){var _e=[],we=function(R){return{clientX:R.clientX,clientY:R.clientY,force:1,identifier:R.pointerId,pageX:R.pageX,pageY:R.pageY,radiusX:R.width/2,radiusY:R.height/2,screenX:R.screenX,screenY:R.screenY,target:R.target}},xe=function(R){return{event:R,touch:we(R)}},Be=function(R){_e.push(xe(R))},Ue=function(R){for(var G=0;G<_e.length;G++){var re=_e[G];if(re.event.pointerId===R.pointerId){_e.splice(G,1);return}}},Ee=function(R){var G=_e.filter(function(re){return re.event.pointerId===R.pointerId})[0];G.event=R,G.touch=we(R)},Me=function(R){R.touches=_e.map(function(G){return G.touch})},ke=function(R){return R.pointerType==="mouse"||R.pointerType===4};r.registerBinding(r.container,"pointerdown",function(de){ke(de)||(de.preventDefault(),Be(de),Me(de),fe(de))}),r.registerBinding(r.container,"pointerup",function(de){ke(de)||(Ue(de),Me(de),Le(de))}),r.registerBinding(r.container,"pointercancel",function(de){ke(de)||(Ue(de),Me(de),Ce(de))}),r.registerBinding(r.container,"pointermove",function(de){ke(de)||(de.preventDefault(),Ee(de),Me(de),ce(de))})}};var Xn={};Xn.generatePolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,draw:function(n,a,i,o,s,l){this.renderer.nodeShapeImpl("polygon",n,a,i,o,s,this.points)},intersectLine:function(n,a,i,o,s,l,u,f){return _o(s,l,this.points,n,a,i/2,o/2,u)},checkPoint:function(n,a,i,o,s,l,u,f){return jn(n,a,this.points,l,u,o,s,[0,-1],i)}}};Xn.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s,l){return M0(i,o,e,t,n/2+s,a/2+s)},checkPoint:function(e,t,n,a,i,o,s,l){return Ga(e,t,a,i,o,s,n)}}};Xn.generateRoundPolygon=function(r,e){return this.nodeShapes[r]={renderer:this,name:r,points:e,getOrCreateCorners:function(n,a,i,o,s,l,u){if(l[u]!==void 0&&l[u+"-cx"]===n&&l[u+"-cy"]===a)return l[u];l[u]=new Array(e.length/2),l[u+"-cx"]=n,l[u+"-cy"]=a;var f=i/2,c=o/2;s=s==="auto"?nv(i,o):s;for(var p=new Array(e.length/2),g=0;g<e.length/2;g++)p[g]={x:n+f*e[g*2],y:a+c*e[g*2+1]};var h,m,x,w,S=p.length;for(m=p[S-1],h=0;h<S;h++)x=p[h%S],w=p[(h+1)%S],l[u][h]=Yf(m,x,w,s),m=x,x=w;return l[u]},draw:function(n,a,i,o,s,l,u){this.renderer.nodeShapeImpl("round-polygon",n,a,i,o,s,this.points,this.getOrCreateCorners(a,i,o,s,l,u,"drawCorners"))},intersectLine:function(n,a,i,o,s,l,u,f,c){return D0(s,l,this.points,n,a,i,o,u,this.getOrCreateCorners(n,a,i,o,f,c,"corners"))},checkPoint:function(n,a,i,o,s,l,u,f,c){return A0(n,a,this.points,l,u,o,s,this.getOrCreateCorners(l,u,o,s,f,c,"corners"))}}};Xn.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Vr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,s,l){return tv(i,o,e,t,n,a,s,l)},checkPoint:function(e,t,n,a,i,o,s,l){var u=a/2,f=i/2;l=l==="auto"?Ua(a,i):l,l=Math.min(u,f,l);var c=l*2;return!!(jn(e,t,this.points,o,s,a,i-c,[0,-1],n)||jn(e,t,this.points,o,s,a-c,i,[0,-1],n)||Ga(e,t,c,c,o-u+l,s-f+l,n)||Ga(e,t,c,c,o+u-l,s-f+l,n)||Ga(e,t,c,c,o+u-l,s+f-l,n)||Ga(e,t,c,c,o-u+l,s+f-l,n))}}};Xn.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:Bf(),points:Vr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,null,o)},generateCutTrianglePts:function(e,t,n,a,i){var o=i==="auto"?this.cornerLength:i,s=t/2,l=e/2,u=n-l,f=n+l,c=a-s,p=a+s;return{topLeft:[u,c+o,u+o,c,u+o,c+o],topRight:[f-o,c,f,c+o,f-o,c+o],bottomRight:[f,p-o,f-o,p,f-o,p-o],bottomLeft:[u+o,p,u,p-o,u+o,p-o]}},intersectLine:function(e,t,n,a,i,o,s,l){var u=this.generateCutTrianglePts(n+2*s,a+2*s,e,t,l),f=[].concat.apply([],[u.topLeft.splice(0,4),u.topRight.splice(0,4),u.bottomRight.splice(0,4),u.bottomLeft.splice(0,4)]);return _o(i,o,f,e,t)},checkPoint:function(e,t,n,a,i,o,s,l){var u=l==="auto"?this.cornerLength:l;if(jn(e,t,this.points,o,s,a,i-2*u,[0,-1],n)||jn(e,t,this.points,o,s,a-2*u,i,[0,-1],n))return!0;var f=this.generateCutTrianglePts(a,i,o,s);return jr(e,t,f.topLeft)||jr(e,t,f.topRight)||jr(e,t,f.bottomRight)||jr(e,t,f.bottomLeft)}}};Xn.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Vr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i)},intersectLine:function(e,t,n,a,i,o,s,l){var u=.15,f=.5,c=.85,p=this.generateBarrelBezierPts(n+2*s,a+2*s,e,t),g=function(x){var w=xi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},u),S=xi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},f),y=xi({x:x[0],y:x[1]},{x:x[2],y:x[3]},{x:x[4],y:x[5]},c);return[x[0],x[1],w.x,w.y,S.x,S.y,y.x,y.y,x[4],x[5]]},h=[].concat(g(p.topLeft),g(p.topRight),g(p.bottomRight),g(p.bottomLeft));return _o(i,o,h,e,t)},generateBarrelBezierPts:function(e,t,n,a){var i=t/2,o=e/2,s=n-o,l=n+o,u=a-i,f=a+i,c=rf(e,t),p=c.heightOffset,g=c.widthOffset,h=c.ctrlPtOffsetPct*e,m={topLeft:[s,u+p,s+h,u,s+g,u],topRight:[l-g,u,l-h,u,l,u+p],bottomRight:[l,f-p,l-h,f,l-g,f],bottomLeft:[s+g,f,s+h,f,s,f-p]};return m.topLeft.isTop=!0,m.topRight.isTop=!0,m.bottomLeft.isBottom=!0,m.bottomRight.isBottom=!0,m},checkPoint:function(e,t,n,a,i,o,s,l){var u=rf(a,i),f=u.heightOffset,c=u.widthOffset;if(jn(e,t,this.points,o,s,a,i-2*f,[0,-1],n)||jn(e,t,this.points,o,s,a-2*c,i,[0,-1],n))return!0;for(var p=this.generateBarrelBezierPts(a,i,o,s),g=function(T,k,N){var O=N[4],I=N[2],q=N[0],B=N[5],j=N[1],Y=Math.min(O,q),U=Math.max(O,q),X=Math.min(B,j),K=Math.max(B,j);if(Y<=T&&T<=U&&X<=k&&k<=K){var P=O0(O,I,q),D=T0(P[0],P[1],P[2],T),L=D.filter(function(F){return 0<=F&&F<=1});if(L.length>0)return L[0]}return null},h=Object.keys(p),m=0;m<h.length;m++){var x=h[m],w=p[x],S=g(e,t,w);if(S!=null){var y=w[5],C=w[3],E=w[1],M=wr(y,C,E,S);if(w.isTop&&M<=t||w.isBottom&&t<=M)return!0}}return!1}}};Xn.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Vr(4,0),draw:function(e,t,n,a,i,o){this.renderer.nodeShapeImpl(this.name,e,t,n,a,i,this.points,o)},intersectLine:function(e,t,n,a,i,o,s,l){var u=e-(n/2+s),f=t-(a/2+s),c=f,p=e+(n/2+s),g=da(i,o,e,t,u,f,p,c,!1);return g.length>0?g:tv(i,o,e,t,n,a,s,l)},checkPoint:function(e,t,n,a,i,o,s,l){l=l==="auto"?Ua(a,i):l;var u=2*l;if(jn(e,t,this.points,o,s,a,i-u,[0,-1],n)||jn(e,t,this.points,o,s,a-u,i,[0,-1],n))return!0;var f=a/2+2*n,c=i/2+2*n,p=[o-f,s-c,o-f,s,o+f,s,o+f,s-c];return!!(jr(e,t,p)||Ga(e,t,u,u,o+a/2-l,s+i/2-l,n)||Ga(e,t,u,u,o-a/2+l,s+i/2-l,n))}}};Xn.registerNodeShapes=function(){var r=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Vr(3,0)),this.generateRoundPolygon("round-triangle",Vr(3,0)),this.generatePolygon("rectangle",Vr(4,0)),r.square=r.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var t=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",t),this.generateRoundPolygon("round-diamond",t)}this.generatePolygon("pentagon",Vr(5,0)),this.generateRoundPolygon("round-pentagon",Vr(5,0)),this.generatePolygon("hexagon",Vr(6,0)),this.generateRoundPolygon("round-hexagon",Vr(6,0)),this.generatePolygon("heptagon",Vr(7,0)),this.generateRoundPolygon("round-heptagon",Vr(7,0)),this.generatePolygon("octagon",Vr(8,0)),this.generateRoundPolygon("round-octagon",Vr(8,0));var n=new Array(20);{var a=tf(5,0),i=tf(5,Math.PI/5),o=.5*(3-Math.sqrt(5));o*=1.57;for(var s=0;s<i.length/2;s++)i[s*2]*=o,i[s*2+1]*=o;for(var s=0;s<20/4;s++)n[s*4]=a[s*2],n[s*4+1]=a[s*2+1],n[s*4+2]=i[s*2],n[s*4+3]=i[s*2+1]}n=rv(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}r.makePolygon=function(u){var f=u.join("$"),c="polygon-"+f,p;return(p=this[c])?p:e.generatePolygon(c,u)}};var zo={};zo.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};zo.redraw=function(r){r=r||Xh();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=r};zo.beforeRender=function(r,e){if(!this.destroyed){e==null&&nr("Priority is not optional for beforeRender");var t=this.beforeRenderCallbacks;t.push({fn:r,priority:e}),t.sort(function(n,a){return a.priority-n.priority})}};var Vd=function(e,t,n){for(var a=e.beforeRenderCallbacks,i=0;i<a.length;i++)a[i].fn(t,n)};zo.startRenderLoop=function(){var r=this,e=r.cy;if(!r.renderLoopStarted){r.renderLoopStarted=!0;var t=function n(a){if(!r.destroyed){if(!e.batching())if(r.requestedFrame&&!r.skipFrame){Vd(r,!0,a);var i=Kn();r.render(r.renderOptions);var o=r.lastDrawTime=Kn();r.averageRedrawTime===void 0&&(r.averageRedrawTime=o-i),r.redrawCount===void 0&&(r.redrawCount=0),r.redrawCount++,r.redrawTotalTime===void 0&&(r.redrawTotalTime=0);var s=o-i;r.redrawTotalTime+=s,r.lastRedrawTime=s,r.averageRedrawTime=r.averageRedrawTime/2+s/2,r.requestedFrame=!1}else Vd(r,!1,a);r.skipFrame=!1,Ds(n)}};Ds(t)}};var hC=function(e){this.init(e)},tg=hC,Gi=tg.prototype;Gi.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];Gi.init=function(r){var e=this;e.options=r,e.cy=r.cy;var t=e.container=r.cy.container(),n=e.cy.window();if(n){var a=n.document,i=a.head,o="__________cytoscape_stylesheet",s="__________cytoscape_container",l=a.getElementById(o)!=null;if(t.className.indexOf(s)<0&&(t.className=(t.className||"")+" "+s),!l){var u=a.createElement("style");u.id=o,u.textContent="."+s+" { position: relative; }",i.insertBefore(u,i.children[0])}var f=n.getComputedStyle(t),c=f.getPropertyValue("position");c==="static"&&Dt("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=r.showFps,e.debug=r.debug,e.hideEdgesOnViewport=r.hideEdgesOnViewport,e.textureOnViewport=r.textureOnViewport,e.wheelSensitivity=r.wheelSensitivity,e.motionBlurEnabled=r.motionBlur,e.forcedPixelRatio=Ve(r.pixelRatio)?r.pixelRatio:null,e.motionBlur=r.motionBlur,e.motionBlurOpacity=r.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=r.desktopTapThreshold,e.desktopTapThreshold2=r.desktopTapThreshold*r.desktopTapThreshold,e.touchTapThreshold=r.touchTapThreshold,e.touchTapThreshold2=r.touchTapThreshold*r.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};Gi.notify=function(r,e){var t=this,n=t.cy;if(!this.destroyed){if(r==="init"){t.load();return}if(r==="destroy"){t.destroy();return}(r==="add"||r==="remove"||r==="move"&&n.hasCompoundNodes()||r==="load"||r==="zorder"||r==="mount")&&t.invalidateCachedZSortedEles(),r==="viewport"&&t.redrawHint("select",!0),(r==="load"||r==="resize"||r==="mount")&&(t.invalidateContainerClientCoordsCache(),t.matchCanvasSize(t.container)),t.redrawHint("eles",!0),t.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};Gi.destroy=function(){var r=this;r.destroyed=!0,r.cy.stopAnimationLoop();for(var e=0;e<r.bindings.length;e++){var t=r.bindings[e],n=t,a=n.target;(a.off||a.removeEventListener).apply(a,n.args)}if(r.bindings=[],r.beforeRenderCallbacks=[],r.onUpdateEleCalcsFns=[],r.removeObserver&&r.removeObserver.disconnect(),r.styleObserver&&r.styleObserver.disconnect(),r.resizeObserver&&r.resizeObserver.disconnect(),r.labelCalcDiv)try{document.body.removeChild(r.labelCalcDiv)}catch{}};Gi.isHeadless=function(){return!1};[jf,Jv,eg,zi,Xn,zo].forEach(function(r){rt(Gi,r)});var $l=1e3/60,rg={setupDequeueing:function(e){return function(){var n=this,a=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var i=Xs(function(){a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},e.deqRedrawThreshold),o=function(u,f){var c=Kn(),p=a.averageRedrawTime,g=a.lastRedrawTime,h=[],m=a.cy.extent(),x=a.getPixelRatio();for(u||a.flushRenderedStyleQueue();;){var w=Kn(),S=w-c,y=w-f;if(g<$l){var C=$l-(u?p:0);if(y>=e.deqFastCost*C)break}else if(u){if(S>=e.deqCost*g||S>=e.deqAvgCost*p)break}else if(y>=e.deqNoDrawCost*$l)break;var E=e.deq(n,x,m);if(E.length>0)for(var M=0;M<E.length;M++)h.push(E[M]);else break}h.length>0&&(e.onDeqd(n,h),!u&&e.shouldRedraw(n,h,x,m)&&i())},s=e.priority||Lf;a.beforeRender(o,s(n))}}}},vC=function(){function r(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Os;kf(this,r),this.idsByKey=new Mn,this.keyForId=new Mn,this.cachesByLvl=new Mn,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=t}return Af(r,[{key:"getIdsFor",value:function(t){t==null&&nr("Can not get id list for null key");var n=this.idsByKey,a=this.idsByKey.get(t);return a||(a=new Oi,n.set(t,a)),a}},{key:"addIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).add(n)}},{key:"deleteIdForKey",value:function(t,n){t!=null&&this.getIdsFor(t).delete(n)}},{key:"getNumberOfIdsForKey",value:function(t){return t==null?0:this.getIdsFor(t).size}},{key:"updateKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);this.deleteIdForKey(a,n),this.addIdForKey(i,n),this.keyForId.set(n,i)}},{key:"deleteKeyMappingFor",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteIdForKey(a,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(t){var n=t.id(),a=this.keyForId.get(n),i=this.getKey(t);return a!==i}},{key:"isInvalid",value:function(t){return this.keyHasChangedFor(t)||this.doesEleInvalidateKey(t)}},{key:"getCachesAt",value:function(t){var n=this.cachesByLvl,a=this.lvls,i=n.get(t);return i||(i=new Mn,n.set(t,i),a.push(t)),i}},{key:"getCache",value:function(t,n){return this.getCachesAt(n).get(t)}},{key:"get",value:function(t,n){var a=this.getKey(t),i=this.getCache(a,n);return i!=null&&this.updateKeyMappingFor(t),i}},{key:"getForCachedKey",value:function(t,n){var a=this.keyForId.get(t.id()),i=this.getCache(a,n);return i}},{key:"hasCache",value:function(t,n){return this.getCachesAt(n).has(t)}},{key:"has",value:function(t,n){var a=this.getKey(t);return this.hasCache(a,n)}},{key:"setCache",value:function(t,n,a){a.key=t,this.getCachesAt(n).set(t,a)}},{key:"set",value:function(t,n,a){var i=this.getKey(t);this.setCache(i,n,a),this.updateKeyMappingFor(t)}},{key:"deleteCache",value:function(t,n){this.getCachesAt(n).delete(t)}},{key:"delete",value:function(t,n){var a=this.getKey(t);this.deleteCache(a,n)}},{key:"invalidateKey",value:function(t){var n=this;this.lvls.forEach(function(a){return n.deleteCache(t,a)})}},{key:"invalidate",value:function(t){var n=t.id(),a=this.keyForId.get(n);this.deleteKeyMappingFor(t);var i=this.doesEleInvalidateKey(t);return i&&this.invalidateKey(a),i||this.getNumberOfIdsForKey(a)===0}}]),r}(),$d=25,cs=50,Ts=-4,vf=3,gC=7.99,pC=8,yC=1024,mC=1024,bC=1024,wC=.2,xC=.8,CC=10,SC=.15,_C=.1,TC=.9,EC=.9,PC=100,kC=1,yi={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},AC=kr({getKey:null,doesEleInvalidateKey:Os,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Kh,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),co=function(e,t){var n=this;n.renderer=e,n.onDequeues=[];var a=AC(t);rt(n,a),n.lookup=new vC(a.getKey,a.doesEleInvalidateKey),n.setupDequeueing()},gr=co.prototype;gr.reasons=yi;gr.getTextureQueue=function(r){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[r]=e.eleImgCaches[r]||[]};gr.getRetiredTextureQueue=function(r){var e=this,t=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=t[r]=t[r]||[];return n};gr.getElementQueue=function(){var r=this,e=r.eleCacheQueue=r.eleCacheQueue||new Ro(function(t,n){return n.reqs-t.reqs});return e};gr.getElementKeyToQueue=function(){var r=this,e=r.eleKeyToCacheQueue=r.eleKeyToCacheQueue||{};return e};gr.getElement=function(r,e,t,n,a){var i=this,o=this.renderer,s=o.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!r.visible()||r.removed()||!i.allowEdgeTxrCaching&&r.isEdge()||!i.allowParentTxrCaching&&r.isParent())return null;if(n==null&&(n=Math.ceil(Rf(s*t))),n<Ts)n=Ts;else if(s>=gC||n>vf)return null;var u=Math.pow(2,n),f=e.h*u,c=e.w*u,p=o.eleTextBiggerThanMin(r,u);if(!this.isVisible(r,p))return null;var g=l.get(r,n);if(g&&g.invalidated&&(g.invalidated=!1,g.texture.invalidatedWidth-=g.width),g)return g;var h;if(f<=$d?h=$d:f<=cs?h=cs:h=Math.ceil(f/cs)*cs,f>bC||c>mC)return null;var m=i.getTextureQueue(h),x=m[m.length-2],w=function(){return i.recycleTexture(h,c)||i.addTexture(h,c)};x||(x=m[m.length-1]),x||(x=w()),x.width-x.usedWidth<c&&(x=w());for(var S=function(Y){return Y&&Y.scaledLabelShown===p},y=a&&a===yi.dequeue,C=a&&a===yi.highQuality,E=a&&a===yi.downscale,M,v=n+1;v<=vf;v++){var T=l.get(r,v);if(T){M=T;break}}var k=M&&M.level===n+1?M:null,N=function(){x.context.drawImage(k.texture.canvas,k.x,0,k.width,k.height,x.usedWidth,0,c,f)};if(x.context.setTransform(1,0,0,1,0,0),x.context.clearRect(x.usedWidth,0,c,h),S(k))N();else if(S(M))if(C){for(var O=M.level;O>n;O--)k=i.getElement(r,e,t,O,yi.downscale);N()}else return i.queueElement(r,M.level-1),M;else{var I;if(!y&&!C&&!E)for(var q=n-1;q>=Ts;q--){var B=l.get(r,q);if(B){I=B;break}}if(S(I))return i.queueElement(r,n),I;x.context.translate(x.usedWidth,0),x.context.scale(u,u),this.drawElement(x.context,r,e,p,!1),x.context.scale(1/u,1/u),x.context.translate(-x.usedWidth,0)}return g={x:x.usedWidth,texture:x,level:n,scale:u,width:c,height:f,scaledLabelShown:p},x.usedWidth+=Math.ceil(c+pC),x.eleCaches.push(g),l.set(r,n,g),i.checkTextureFullness(x),g};gr.invalidateElements=function(r){for(var e=0;e<r.length;e++)this.invalidateElement(r[e])};gr.invalidateElement=function(r){var e=this,t=e.lookup,n=[],a=t.isInvalid(r);if(!!a){for(var i=Ts;i<=vf;i++){var o=t.getForCachedKey(r,i);o&&n.push(o)}var s=t.invalidate(r);if(s)for(var l=0;l<n.length;l++){var u=n[l],f=u.texture;f.invalidatedWidth+=u.width,u.invalidated=!0,e.checkTextureUtility(f)}e.removeFromQueue(r)}};gr.checkTextureUtility=function(r){r.invalidatedWidth>=wC*r.width&&this.retireTexture(r)};gr.checkTextureFullness=function(r){var e=this,t=e.getTextureQueue(r.height);r.usedWidth/r.width>xC&&r.fullnessChecks>=CC?pa(t,r):r.fullnessChecks++};gr.retireTexture=function(r){var e=this,t=r.height,n=e.getTextureQueue(t),a=this.lookup;pa(n,r),r.retired=!0;for(var i=r.eleCaches,o=0;o<i.length;o++){var s=i[o];a.deleteCache(s.key,s.level)}Nf(i);var l=e.getRetiredTextureQueue(t);l.push(r)};gr.addTexture=function(r,e){var t=this,n=t.getTextureQueue(r),a={};return n.push(a),a.eleCaches=[],a.height=r,a.width=Math.max(yC,e),a.usedWidth=0,a.invalidatedWidth=0,a.fullnessChecks=0,a.canvas=t.renderer.makeOffscreenCanvas(a.width,a.height),a.context=a.canvas.getContext("2d"),a};gr.recycleTexture=function(r,e){for(var t=this,n=t.getTextureQueue(r),a=t.getRetiredTextureQueue(r),i=0;i<a.length;i++){var o=a[i];if(o.width>=e)return o.retired=!1,o.usedWidth=0,o.invalidatedWidth=0,o.fullnessChecks=0,Nf(o.eleCaches),o.context.setTransform(1,0,0,1,0,0),o.context.clearRect(0,0,o.width,o.height),pa(a,o),n.push(o),o}};gr.queueElement=function(r,e){var t=this,n=t.getElementQueue(),a=t.getElementKeyToQueue(),i=this.getKey(r),o=a[i];if(o)o.level=Math.max(o.level,e),o.eles.merge(r),o.reqs++,n.updateItem(o);else{var s={eles:r.spawn().merge(r),level:e,reqs:1,key:i};n.push(s),a[i]=s}};gr.dequeue=function(r){for(var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=[],i=e.lookup,o=0;o<kC&&t.size()>0;o++){var s=t.pop(),l=s.key,u=s.eles[0],f=i.hasCache(u,s.level);if(n[l]=null,f)continue;a.push(s);var c=e.getBoundingBox(u);e.getElement(u,c,r,s.level,yi.dequeue)}return a};gr.removeFromQueue=function(r){var e=this,t=e.getElementQueue(),n=e.getElementKeyToQueue(),a=this.getKey(r),i=n[a];i!=null&&(i.eles.length===1?(i.reqs=Of,t.updateItem(i),t.pop(),n[a]=null):i.eles.unmerge(r))};gr.onDequeue=function(r){this.onDequeues.push(r)};gr.offDequeue=function(r){pa(this.onDequeues,r)};gr.setupDequeueing=rg.setupDequeueing({deqRedrawThreshold:PC,deqCost:SC,deqAvgCost:_C,deqNoDrawCost:TC,deqFastCost:EC,deq:function(e,t,n){return e.dequeue(t,n)},onDeqd:function(e,t){for(var n=0;n<e.onDequeues.length;n++){var a=e.onDequeues[n];a(t)}},shouldRedraw:function(e,t,n,a){for(var i=0;i<t.length;i++)for(var o=t[i].eles,s=0;s<o.length;s++){var l=o[s].boundingBox();if(If(l,a))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var MC=1,go=-4,Gs=2,DC=3.99,OC=50,LC=50,NC=.15,RC=.1,IC=.9,BC=.9,FC=1,qd=250,zC=4e3*4e3,GC=!0,ng=function(e){var t=this,n=t.renderer=e,a=n.cy;t.layersByLevel={},t.firstGet=!0,t.lastInvalidationTime=Kn()-2*qd,t.skipping=!1,t.eleTxrDeqs=a.collection(),t.scheduleElementRefinement=Xs(function(){t.refineElementTextures(t.eleTxrDeqs),t.eleTxrDeqs.unmerge(t.eleTxrDeqs)},LC),n.beforeRender(function(o,s){s-t.lastInvalidationTime<=qd?t.skipping=!0:t.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var i=function(s,l){return l.reqs-s.reqs};t.layersQueue=new Ro(i),t.setupDequeueing()},Ar=ng.prototype,Hd=0,VC=Math.pow(2,53)-1;Ar.makeLayer=function(r,e){var t=Math.pow(2,e),n=Math.ceil(r.w*t),a=Math.ceil(r.h*t),i=this.renderer.makeOffscreenCanvas(n,a),o={id:Hd=++Hd%VC,bb:r,level:e,width:n,height:a,canvas:i,context:i.getContext("2d"),eles:[],elesQueue:[],reqs:0},s=o.context,l=-o.bb.x1,u=-o.bb.y1;return s.scale(t,t),s.translate(l,u),o};Ar.getLayers=function(r,e,t){var n=this,a=n.renderer,i=a.cy,o=i.zoom(),s=n.firstGet;if(n.firstGet=!1,t==null){if(t=Math.ceil(Rf(o*e)),t<go)t=go;else if(o>=DC||t>Gs)return null}n.validateLayersElesOrdering(t,r);var l=n.layersByLevel,u=Math.pow(2,t),f=l[t]=l[t]||[],c,p=n.levelIsComplete(t,r),g,h=function(){var N=function(j){if(n.validateLayersElesOrdering(j,r),n.levelIsComplete(j,r))return g=l[j],!0},O=function(j){if(!g)for(var Y=t+j;go<=Y&&Y<=Gs&&!N(Y);Y+=j);};O(1),O(-1);for(var I=f.length-1;I>=0;I--){var q=f[I];q.invalid&&pa(f,q)}};if(!p)h();else return f;var m=function(){if(!c){c=Yr();for(var N=0;N<r.length;N++)Jh(c,r[N].boundingBox())}return c},x=function(N){N=N||{};var O=N.after;m();var I=c.w*u*(c.h*u);if(I>zC)return null;var q=n.makeLayer(c,t);if(O!=null){var B=f.indexOf(O)+1;f.splice(B,0,q)}else(N.insert===void 0||N.insert)&&f.unshift(q);return q};if(n.skipping&&!s)return null;for(var w=null,S=r.length/MC,y=!s,C=0;C<r.length;C++){var E=r[C],M=E._private.rscratch,v=M.imgLayerCaches=M.imgLayerCaches||{},T=v[t];if(T){w=T;continue}if((!w||w.eles.length>=S||!ev(w.bb,E.boundingBox()))&&(w=x({insert:!0,after:w}),!w))return null;g||y?n.queueLayer(w,E):n.drawEleInLayer(w,E,t,e),w.eles.push(E),v[t]=w}return g||(y?null:f)};Ar.getEleLevelForLayerLevel=function(r,e){return r};Ar.drawEleInLayer=function(r,e,t,n){var a=this,i=this.renderer,o=r.context,s=e.boundingBox();s.w===0||s.h===0||!e.visible()||(t=a.getEleLevelForLayerLevel(t,n),i.setImgSmoothing(o,!1),i.drawCachedElement(o,e,null,null,t,GC),i.setImgSmoothing(o,!0))};Ar.levelIsComplete=function(r,e){var t=this,n=t.layersByLevel[r];if(!n||n.length===0)return!1;for(var a=0,i=0;i<n.length;i++){var o=n[i];if(o.reqs>0||o.invalid)return!1;a+=o.eles.length}return a===e.length};Ar.validateLayersElesOrdering=function(r,e){var t=this.layersByLevel[r];if(!!t)for(var n=0;n<t.length;n++){for(var a=t[n],i=-1,o=0;o<e.length;o++)if(a.eles[0]===e[o]){i=o;break}if(i<0){this.invalidateLayer(a);continue}for(var s=i,o=0;o<a.eles.length;o++)if(a.eles[o]!==e[s+o]){this.invalidateLayer(a);break}}};Ar.updateElementsInLayers=function(r,e){for(var t=this,n=Lo(r[0]),a=0;a<r.length;a++)for(var i=n?null:r[a],o=n?r[a]:r[a].ele,s=o._private.rscratch,l=s.imgLayerCaches=s.imgLayerCaches||{},u=go;u<=Gs;u++){var f=l[u];!f||i&&t.getEleLevelForLayerLevel(f.level)!==i.level||e(f,o,i)}};Ar.haveLayers=function(){for(var r=this,e=!1,t=go;t<=Gs;t++){var n=r.layersByLevel[t];if(n&&n.length>0){e=!0;break}}return e};Ar.invalidateElements=function(r){var e=this;r.length!==0&&(e.lastInvalidationTime=Kn(),!(r.length===0||!e.haveLayers())&&e.updateElementsInLayers(r,function(n,a,i){e.invalidateLayer(n)}))};Ar.invalidateLayer=function(r){if(this.lastInvalidationTime=Kn(),!r.invalid){var e=r.level,t=r.eles,n=this.layersByLevel[e];pa(n,r),r.elesQueue=[],r.invalid=!0,r.replacement&&(r.replacement.invalid=!0);for(var a=0;a<t.length;a++){var i=t[a]._private.rscratch.imgLayerCaches;i&&(i[e]=null)}}};Ar.refineElementTextures=function(r){var e=this;e.updateElementsInLayers(r,function(n,a,i){var o=n.replacement;if(o||(o=n.replacement=e.makeLayer(n.bb,n.level),o.replaces=n,o.eles=n.eles),!o.reqs)for(var s=0;s<o.eles.length;s++)e.queueLayer(o,o.eles[s])})};Ar.enqueueElementRefinement=function(r){this.eleTxrDeqs.merge(r),this.scheduleElementRefinement()};Ar.queueLayer=function(r,e){var t=this,n=t.layersQueue,a=r.elesQueue,i=a.hasId=a.hasId||{};if(!r.replacement){if(e){if(i[e.id()])return;a.push(e),i[e.id()]=!0}r.reqs?(r.reqs++,n.updateItem(r)):(r.reqs=1,n.push(r))}};Ar.dequeue=function(r){for(var e=this,t=e.layersQueue,n=[],a=0;a<FC&&t.size()!==0;){var i=t.peek();if(i.replacement){t.pop();continue}if(i.replaces&&i!==i.replaces.replacement){t.pop();continue}if(i.invalid){t.pop();continue}var o=i.elesQueue.shift();o&&(e.drawEleInLayer(i,o,i.level,r),a++),n.length===0&&n.push(!0),i.elesQueue.length===0&&(t.pop(),i.reqs=0,i.replaces&&e.applyLayerReplacement(i),e.requestRedraw())}return n};Ar.applyLayerReplacement=function(r){var e=this,t=e.layersByLevel[r.level],n=r.replaces,a=t.indexOf(n);if(!(a<0||n.invalid)){t[a]=r;for(var i=0;i<r.eles.length;i++){var o=r.eles[i]._private,s=o.imgLayerCaches=o.imgLayerCaches||{};s&&(s[r.level]=r)}e.requestRedraw()}};Ar.requestRedraw=Xs(function(){var r=this.renderer;r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},100);Ar.setupDequeueing=rg.setupDequeueing({deqRedrawThreshold:OC,deqCost:NC,deqAvgCost:RC,deqNoDrawCost:IC,deqFastCost:BC,deq:function(e,t){return e.dequeue(t)},onDeqd:Lf,shouldRedraw:Kh,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var ag={},Ud;function $C(r,e){for(var t=0;t<e.length;t++){var n=e[t];r.lineTo(n.x,n.y)}}function qC(r,e,t){for(var n,a=0;a<e.length;a++){var i=e[a];a===0&&(n=i),r.lineTo(i.x,i.y)}r.quadraticCurveTo(t.x,t.y,n.x,n.y)}function Wd(r,e,t){r.beginPath&&r.beginPath();for(var n=e,a=0;a<n.length;a++){var i=n[a];r.lineTo(i.x,i.y)}var o=t,s=t[0];r.moveTo(s.x,s.y);for(var a=1;a<o.length;a++){var i=o[a];r.lineTo(i.x,i.y)}r.closePath&&r.closePath()}function HC(r,e,t,n,a){r.beginPath&&r.beginPath(),r.arc(t,n,a,0,Math.PI*2,!1);var i=e,o=i[0];r.moveTo(o.x,o.y);for(var s=0;s<i.length;s++){var l=i[s];r.lineTo(l.x,l.y)}r.closePath&&r.closePath()}function UC(r,e,t,n){r.arc(e,t,n,0,Math.PI*2,!1)}ag.arrowShapeImpl=function(r){return(Ud||(Ud={polygon:$C,"triangle-backcurve":qC,"triangle-tee":Wd,"circle-triangle":HC,"triangle-cross":Wd,circle:UC}))[r]};var In={};In.drawElement=function(r,e,t,n,a,i){var o=this;e.isNode()?o.drawNode(r,e,t,n,a,i):o.drawEdge(r,e,t,n,a,i)};In.drawElementOverlay=function(r,e){var t=this;e.isNode()?t.drawNodeOverlay(r,e):t.drawEdgeOverlay(r,e)};In.drawElementUnderlay=function(r,e){var t=this;e.isNode()?t.drawNodeUnderlay(r,e):t.drawEdgeUnderlay(r,e)};In.drawCachedElementPortion=function(r,e,t,n,a,i,o,s){var l=this,u=t.getBoundingBox(e);if(!(u.w===0||u.h===0)){var f=t.getElement(e,u,n,a,i);if(f!=null){var c=s(l,e);if(c===0)return;var p=o(l,e),g=u.x1,h=u.y1,m=u.w,x=u.h,w,S,y,C,E;if(p!==0){var M=t.getRotationPoint(e);y=M.x,C=M.y,r.translate(y,C),r.rotate(p),E=l.getImgSmoothing(r),E||l.setImgSmoothing(r,!0);var v=t.getRotationOffset(e);w=v.x,S=v.y}else w=g,S=h;var T;c!==1&&(T=r.globalAlpha,r.globalAlpha=T*c),r.drawImage(f.texture.canvas,f.x,0,f.width,f.height,w,S,m,x),c!==1&&(r.globalAlpha=T),p!==0&&(r.rotate(-p),r.translate(-y,-C),E||l.setImgSmoothing(r,!1))}else t.drawElement(r,e)}};var WC=function(){return 0},KC=function(e,t){return e.getTextAngle(t,null)},jC=function(e,t){return e.getTextAngle(t,"source")},YC=function(e,t){return e.getTextAngle(t,"target")},XC=function(e,t){return t.effectiveOpacity()},ql=function(e,t){return t.pstyle("text-opacity").pfValue*t.effectiveOpacity()};In.drawCachedElement=function(r,e,t,n,a,i){var o=this,s=o.data,l=s.eleTxrCache,u=s.lblTxrCache,f=s.slbTxrCache,c=s.tlbTxrCache,p=e.boundingBox(),g=i===!0?l.reasons.highQuality:null;if(!(p.w===0||p.h===0||!e.visible())&&(!n||If(p,n))){var h=e.isEdge(),m=e.element()._private.rscratch.badLine;o.drawElementUnderlay(r,e),o.drawCachedElementPortion(r,e,l,t,a,g,WC,XC),(!h||!m)&&o.drawCachedElementPortion(r,e,u,t,a,g,KC,ql),h&&!m&&(o.drawCachedElementPortion(r,e,f,t,a,g,jC,ql),o.drawCachedElementPortion(r,e,c,t,a,g,YC,ql)),o.drawElementOverlay(r,e)}};In.drawElements=function(r,e){for(var t=this,n=0;n<e.length;n++){var a=e[n];t.drawElement(r,a)}};In.drawCachedElements=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];a.drawCachedElement(r,o,t,n)}};In.drawCachedNodes=function(r,e,t,n){for(var a=this,i=0;i<e.length;i++){var o=e[i];!o.isNode()||a.drawCachedElement(r,o,t,n)}};In.drawLayeredElements=function(r,e,t,n){var a=this,i=a.data.lyrTxrCache.getLayers(e,t);if(i)for(var o=0;o<i.length;o++){var s=i[o],l=s.bb;l.w===0||l.h===0||r.drawImage(s.canvas,l.x1,l.y1,l.w,l.h)}else a.drawCachedElements(r,e,t,n)};var Qn={};Qn.drawEdge=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s=e._private.rscratch;if(!(i&&!e.visible())&&!(s.badLine||s.allpts==null||isNaN(s.allpts[0]))){var l;t&&(l=t,r.translate(-l.x1,-l.y1));var u=i?e.pstyle("opacity").value:1,f=i?e.pstyle("line-opacity").value:1,c=e.pstyle("curve-style").value,p=e.pstyle("line-style").value,g=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,m=u*f,x=u*f,w=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;c==="straight-triangle"?(o.eleStrokeStyle(r,e,I),o.drawEdgeTrianglePath(e,r,s.allpts)):(r.lineWidth=g,r.lineCap=h,o.eleStrokeStyle(r,e,I),o.drawEdgePath(e,r,s.allpts,p),r.lineCap="butt")},S=function(){!a||o.drawEdgeOverlay(r,e)},y=function(){!a||o.drawEdgeUnderlay(r,e)},C=function(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:x;o.drawArrowheads(r,e,I)},E=function(){o.drawElementText(r,e,null,n)};r.lineJoin="round";var M=e.pstyle("ghost").value==="yes";if(M){var v=e.pstyle("ghost-offset-x").pfValue,T=e.pstyle("ghost-offset-y").pfValue,k=e.pstyle("ghost-opacity").value,N=m*k;r.translate(v,T),w(N),C(N),r.translate(-v,-T)}y(),w(),C(),S(),E(),t&&r.translate(l.x1,l.y1)}};var ig=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n){if(!!n.visible()){var a=n.pstyle("".concat(e,"-opacity")).value;if(a!==0){var i=this,o=i.usePaths(),s=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,u=2*l,f=n.pstyle("".concat(e,"-color")).value;t.lineWidth=u,s.edgeType==="self"&&!o?t.lineCap="butt":t.lineCap="round",i.colorStrokeStyle(t,f[0],f[1],f[2],a),i.drawEdgePath(n,t,s.allpts,"solid")}}}};Qn.drawEdgeOverlay=ig("overlay");Qn.drawEdgeUnderlay=ig("underlay");Qn.drawEdgePath=function(r,e,t,n){var a=r._private.rscratch,i=e,o,s=!1,l=this.usePaths(),u=r.pstyle("line-dash-pattern").pfValue,f=r.pstyle("line-dash-offset").pfValue;if(l){var c=t.join("$"),p=a.pathCacheKey&&a.pathCacheKey===c;p?(o=e=a.pathCache,s=!0):(o=e=new Path2D,a.pathCacheKey=c,a.pathCache=o)}if(i.setLineDash)switch(n){case"dotted":i.setLineDash([1,1]);break;case"dashed":i.setLineDash(u),i.lineDashOffset=f;break;case"solid":i.setLineDash([]);break}if(!s&&!a.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(t[0],t[1]),a.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var g=2;g+3<t.length;g+=4)e.quadraticCurveTo(t[g],t[g+1],t[g+2],t[g+3]);break;case"straight":case"haystack":for(var h=2;h+1<t.length;h+=2)e.lineTo(t[h],t[h+1]);break;case"segments":if(a.isRound){var m=My(a.roundCorners),x;try{for(m.s();!(x=m.n()).done;){var w=x.value;jv(e,w)}}catch(y){m.e(y)}finally{m.f()}e.lineTo(t[t.length-2],t[t.length-1])}else for(var S=2;S+1<t.length;S+=2)e.lineTo(t[S],t[S+1]);break}e=i,l?e.stroke(o):e.stroke(),e.setLineDash&&e.setLineDash([])};Qn.drawEdgeTrianglePath=function(r,e,t){e.fillStyle=e.strokeStyle;for(var n=r.pstyle("width").pfValue,a=0;a+1<t.length;a+=2){var i=[t[a+2]-t[a],t[a+3]-t[a+1]],o=Math.sqrt(i[0]*i[0]+i[1]*i[1]),s=[i[1]/o,-i[0]/o],l=[s[0]*n/2,s[1]*n/2];e.beginPath(),e.moveTo(t[a]-l[0],t[a+1]-l[1]),e.lineTo(t[a]+l[0],t[a+1]+l[1]),e.lineTo(t[a+2],t[a+3]),e.closePath(),e.fill()}};Qn.drawArrowheads=function(r,e,t){var n=e._private.rscratch,a=n.edgeType==="haystack";a||this.drawArrowhead(r,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,t),this.drawArrowhead(r,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,t),this.drawArrowhead(r,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,t),a||this.drawArrowhead(r,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,t)};Qn.drawArrowhead=function(r,e,t,n,a,i,o){if(!(isNaN(n)||n==null||isNaN(a)||a==null||isNaN(i)||i==null)){var s=this,l=e.pstyle(t+"-arrow-shape").value;if(l!=="none"){var u=e.pstyle(t+"-arrow-fill").value==="hollow"?"both":"filled",f=e.pstyle(t+"-arrow-fill").value,c=e.pstyle("width").pfValue,p=e.pstyle(t+"-arrow-width"),g=p.value==="match-line"?c:p.pfValue;p.units==="%"&&(g*=c);var h=e.pstyle("opacity").value;o===void 0&&(o=h);var m=r.globalCompositeOperation;(o!==1||f==="hollow")&&(r.globalCompositeOperation="destination-out",s.colorFillStyle(r,255,255,255,1),s.colorStrokeStyle(r,255,255,255,1),s.drawArrowShape(e,r,u,c,l,g,n,a,i),r.globalCompositeOperation=m);var x=e.pstyle(t+"-arrow-color").value;s.colorFillStyle(r,x[0],x[1],x[2],o),s.colorStrokeStyle(r,x[0],x[1],x[2],o),s.drawArrowShape(e,r,f,c,l,g,n,a,i)}}};Qn.drawArrowShape=function(r,e,t,n,a,i,o,s,l){var u=this,f=this.usePaths()&&a!=="triangle-cross",c=!1,p,g=e,h={x:o,y:s},m=r.pstyle("arrow-scale").value,x=this.getArrowWidth(n,m),w=u.arrowShapes[a];if(f){var S=u.arrowPathCache=u.arrowPathCache||[],y=qa(a),C=S[y];C!=null?(p=e=C,c=!0):(p=e=new Path2D,S[y]=p)}c||(e.beginPath&&e.beginPath(),f?w.draw(e,1,0,{x:0,y:0},1):w.draw(e,x,l,h,n),e.closePath&&e.closePath()),e=g,f&&(e.translate(o,s),e.rotate(l),e.scale(x,x)),(t==="filled"||t==="both")&&(f?e.fill(p):e.fill()),(t==="hollow"||t==="both")&&(e.lineWidth=i/(f?x:1),e.lineJoin="miter",f?e.stroke(p):e.stroke()),f&&(e.scale(1/x,1/x),e.rotate(-l),e.translate(-o,-s))};var Qf={};Qf.safeDrawImage=function(r,e,t,n,a,i,o,s,l,u){if(!(a<=0||i<=0||l<=0||u<=0))try{r.drawImage(e,t,n,a,i,o,s,l,u)}catch(f){Dt(f)}};Qf.drawInscribedImage=function(r,e,t,n,a){var i=this,o=t.position(),s=o.x,l=o.y,u=t.cy().style(),f=u.getIndexedStyle.bind(u),c=f(t,"background-fit","value",n),p=f(t,"background-repeat","value",n),g=t.width(),h=t.height(),m=t.padding()*2,x=g+(f(t,"background-width-relative-to","value",n)==="inner"?0:m),w=h+(f(t,"background-height-relative-to","value",n)==="inner"?0:m),S=t._private.rscratch,y=f(t,"background-clip","value",n),C=y==="node",E=f(t,"background-image-opacity","value",n)*a,M=f(t,"background-image-smoothing","value",n),v=t.pstyle("corner-radius").value;v!=="auto"&&(v=t.pstyle("corner-radius").pfValue);var T=e.width||e.cachedW,k=e.height||e.cachedH;(T==null||k==null)&&(document.body.appendChild(e),T=e.cachedW=e.width||e.offsetWidth,k=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var N=T,O=k;if(f(t,"background-width","value",n)!=="auto"&&(f(t,"background-width","units",n)==="%"?N=f(t,"background-width","pfValue",n)*x:N=f(t,"background-width","pfValue",n)),f(t,"background-height","value",n)!=="auto"&&(f(t,"background-height","units",n)==="%"?O=f(t,"background-height","pfValue",n)*w:O=f(t,"background-height","pfValue",n)),!(N===0||O===0)){if(c==="contain"){var I=Math.min(x/N,w/O);N*=I,O*=I}else if(c==="cover"){var I=Math.max(x/N,w/O);N*=I,O*=I}var q=s-x/2,B=f(t,"background-position-x","units",n),j=f(t,"background-position-x","pfValue",n);B==="%"?q+=(x-N)*j:q+=j;var Y=f(t,"background-offset-x","units",n),U=f(t,"background-offset-x","pfValue",n);Y==="%"?q+=(x-N)*U:q+=U;var X=l-w/2,K=f(t,"background-position-y","units",n),P=f(t,"background-position-y","pfValue",n);K==="%"?X+=(w-O)*P:X+=P;var D=f(t,"background-offset-y","units",n),L=f(t,"background-offset-y","pfValue",n);D==="%"?X+=(w-O)*L:X+=L,S.pathCache&&(q-=s,X-=l,s=0,l=0);var F=r.globalAlpha;r.globalAlpha=E;var W=i.getImgSmoothing(r),Z=!1;if(M==="no"&&W?(i.setImgSmoothing(r,!1),Z=!0):M==="yes"&&!W&&(i.setImgSmoothing(r,!0),Z=!0),p==="no-repeat")C&&(r.save(),S.pathCache?r.clip(S.pathCache):(i.nodeShapes[i.getNodeShape(t)].draw(r,s,l,x,w,v,S),r.clip())),i.safeDrawImage(r,e,0,0,T,k,q,X,N,O),C&&r.restore();else{var J=r.createPattern(e,p);r.fillStyle=J,i.nodeShapes[i.getNodeShape(t)].draw(r,s,l,x,w,v,S),r.translate(q,X),r.fill(),r.translate(-q,-X)}r.globalAlpha=F,Z&&i.setImgSmoothing(r,W)}};var Qa={};Qa.eleTextBiggerThanMin=function(r,e){if(!e){var t=r.cy().zoom(),n=this.getPixelRatio(),a=Math.ceil(Rf(t*n));e=Math.pow(2,a)}var i=r.pstyle("font-size").pfValue*e,o=r.pstyle("min-zoomed-font-size").pfValue;return!(i<o)};Qa.drawElementText=function(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this;if(n==null){if(i&&!o.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var s=e.pstyle("label");if(!s||!s.value)return;var l=o.getLabelJustification(e);r.textAlign=l,r.textBaseline="bottom"}else{var u=e.element()._private.rscratch.badLine,f=e.pstyle("label"),c=e.pstyle("source-label"),p=e.pstyle("target-label");if(u||(!f||!f.value)&&(!c||!c.value)&&(!p||!p.value))return;r.textAlign="center",r.textBaseline="bottom"}var g=!t,h;t&&(h=t,r.translate(-h.x1,-h.y1)),a==null?(o.drawText(r,e,null,g,i),e.isEdge()&&(o.drawText(r,e,"source",g,i),o.drawText(r,e,"target",g,i))):o.drawText(r,e,a,g,i),t&&r.translate(h.x1,h.y1)};Qa.getFontCache=function(r){var e;this.fontCaches=this.fontCaches||[];for(var t=0;t<this.fontCaches.length;t++)if(e=this.fontCaches[t],e.context===r)return e;return e={context:r},this.fontCaches.push(e),e};Qa.setupTextStyle=function(r,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,a=e.pstyle("font-size").pfValue+"px",i=e.pstyle("font-family").strValue,o=e.pstyle("font-weight").strValue,s=t?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*s,u=e.pstyle("color").value,f=e.pstyle("text-outline-color").value;r.font=n+" "+o+" "+a+" "+i,r.lineJoin="round",this.colorFillStyle(r,u[0],u[1],u[2],s),this.colorStrokeStyle(r,f[0],f[1],f[2],l)};function Hl(r,e,t,n,a){var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,o=arguments.length>6?arguments[6]:void 0;r.beginPath(),r.moveTo(e+i,t),r.lineTo(e+n-i,t),r.quadraticCurveTo(e+n,t,e+n,t+i),r.lineTo(e+n,t+a-i),r.quadraticCurveTo(e+n,t+a,e+n-i,t+a),r.lineTo(e+i,t+a),r.quadraticCurveTo(e,t+a,e,t+a-i),r.lineTo(e,t+i),r.quadraticCurveTo(e,t,e+i,t),r.closePath(),o?r.stroke():r.fill()}Qa.getTextAngle=function(r,e){var t,n=r._private,a=n.rscratch,i=e?e+"-":"",o=r.pstyle(i+"text-rotation"),s=hn(a,"labelAngle",e);return o.strValue==="autorotate"?t=r.isEdge()?s:0:o.strValue==="none"?t=0:t=o.pfValue,t};Qa.drawText=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=e._private,o=i.rscratch,s=a?e.effectiveOpacity():1;if(!(a&&(s===0||e.pstyle("text-opacity").value===0))){t==="main"&&(t=null);var l=hn(o,"labelX",t),u=hn(o,"labelY",t),f,c,p=this.getLabelText(e,t);if(p!=null&&p!==""&&!isNaN(l)&&!isNaN(u)){this.setupTextStyle(r,e,a);var g=t?t+"-":"",h=hn(o,"labelWidth",t),m=hn(o,"labelHeight",t),x=e.pstyle(g+"text-margin-x").pfValue,w=e.pstyle(g+"text-margin-y").pfValue,S=e.isEdge(),y=e.pstyle("text-halign").value,C=e.pstyle("text-valign").value;S&&(y="center",C="center"),l+=x,u+=w;var E;switch(n?E=this.getTextAngle(e,t):E=0,E!==0&&(f=l,c=u,r.translate(f,c),r.rotate(E),l=0,u=0),C){case"top":break;case"center":u+=m/2;break;case"bottom":u+=m;break}var M=e.pstyle("text-background-opacity").value,v=e.pstyle("text-border-opacity").value,T=e.pstyle("text-border-width").pfValue,k=e.pstyle("text-background-padding").pfValue,N=e.pstyle("text-background-shape").strValue,O=N.indexOf("round")===0,I=2;if(M>0||T>0&&v>0){var q=l-k;switch(y){case"left":q-=h;break;case"center":q-=h/2;break}var B=u-m-k,j=h+2*k,Y=m+2*k;if(M>0){var U=r.fillStyle,X=e.pstyle("text-background-color").value;r.fillStyle="rgba("+X[0]+","+X[1]+","+X[2]+","+M*s+")",O?Hl(r,q,B,j,Y,I):r.fillRect(q,B,j,Y),r.fillStyle=U}if(T>0&&v>0){var K=r.strokeStyle,P=r.lineWidth,D=e.pstyle("text-border-color").value,L=e.pstyle("text-border-style").value;if(r.strokeStyle="rgba("+D[0]+","+D[1]+","+D[2]+","+v*s+")",r.lineWidth=T,r.setLineDash)switch(L){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"double":r.lineWidth=T/4,r.setLineDash([]);break;case"solid":r.setLineDash([]);break}if(O?Hl(r,q,B,j,Y,I,"stroke"):r.strokeRect(q,B,j,Y),L==="double"){var F=T/2;O?Hl(r,q+F,B+F,j-F*2,Y-F*2,I,"stroke"):r.strokeRect(q+F,B+F,j-F*2,Y-F*2)}r.setLineDash&&r.setLineDash([]),r.lineWidth=P,r.strokeStyle=K}}var W=2*e.pstyle("text-outline-width").pfValue;if(W>0&&(r.lineWidth=W),e.pstyle("text-wrap").value==="wrap"){var Z=hn(o,"labelWrapCachedLines",t),J=hn(o,"labelLineHeight",t),Q=h/2,oe=this.getLabelJustification(e);switch(oe==="auto"||(y==="left"?oe==="left"?l+=-h:oe==="center"&&(l+=-Q):y==="center"?oe==="left"?l+=-Q:oe==="right"&&(l+=Q):y==="right"&&(oe==="center"?l+=Q:oe==="right"&&(l+=h))),C){case"top":u-=(Z.length-1)*J;break;case"center":case"bottom":u-=(Z.length-1)*J;break}for(var fe=0;fe<Z.length;fe++)W>0&&r.strokeText(Z[fe],l,u),r.fillText(Z[fe],l,u),u+=J}else W>0&&r.strokeText(p,l,u),r.fillText(p,l,u);E!==0&&(r.rotate(-E),r.translate(-f,-c))}}};var Vi={};Vi.drawNode=function(r,e,t){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,o=this,s,l,u=e._private,f=u.rscratch,c=e.position();if(!(!Ve(c.x)||!Ve(c.y))&&!(i&&!e.visible())){var p=i?e.effectiveOpacity():1,g=o.usePaths(),h,m=!1,x=e.padding();s=e.width()+2*x,l=e.height()+2*x;var w;t&&(w=t,r.translate(-w.x1,-w.y1));for(var S=e.pstyle("background-image"),y=S.value,C=new Array(y.length),E=new Array(y.length),M=0,v=0;v<y.length;v++){var T=y[v],k=C[v]=T!=null&&T!=="none";if(k){var N=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",v);M++,E[v]=o.getCachedImage(T,N,function(){u.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var O=e.pstyle("background-blacken").value,I=e.pstyle("border-width").pfValue,q=e.pstyle("background-opacity").value*p,B=e.pstyle("border-color").value,j=e.pstyle("border-style").value,Y=e.pstyle("border-join").value,U=e.pstyle("border-cap").value,X=e.pstyle("border-position").value,K=e.pstyle("border-dash-pattern").pfValue,P=e.pstyle("border-dash-offset").pfValue,D=e.pstyle("border-opacity").value*p,L=e.pstyle("outline-width").pfValue,F=e.pstyle("outline-color").value,W=e.pstyle("outline-style").value,Z=e.pstyle("outline-opacity").value*p,J=e.pstyle("outline-offset").value,Q=e.pstyle("corner-radius").value;Q!=="auto"&&(Q=e.pstyle("corner-radius").pfValue);var oe=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:q;o.eleFillStyle(r,e,ge)},fe=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D;o.colorStrokeStyle(r,B[0],B[1],B[2],ge)},ce=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Z;o.colorStrokeStyle(r,F[0],F[1],F[2],ge)},Ce=function(ge,ue,Se,Fe){var ze=o.nodePathCache=o.nodePathCache||[],Ie=Wh(Se==="polygon"?Se+","+Fe.join(","):Se,""+ue,""+ge,""+Q),et=ze[Ie],$e,We=!1;return et!=null?($e=et,We=!0,f.pathCache=$e):($e=new Path2D,ze[Ie]=f.pathCache=$e),{path:$e,cacheHit:We}},Le=e.pstyle("shape").strValue,Re=e.pstyle("shape-polygon-points").pfValue;if(g){r.translate(c.x,c.y);var De=Ce(s,l,Le,Re);h=De.path,m=De.cacheHit}var me=function(){if(!m){var ge=c;g&&(ge={x:0,y:0}),o.nodeShapes[o.getNodeShape(e)].draw(h||r,ge.x,ge.y,s,l,Q,f)}g?r.fill(h):r.fill()},_e=function(){for(var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,Se=u.backgrounding,Fe=0,ze=0;ze<E.length;ze++){var Ie=e.cy().style().getIndexedStyle(e,"background-image-containment","value",ze);if(ue&&Ie==="over"||!ue&&Ie==="inside"){Fe++;continue}C[ze]&&E[ze].complete&&!E[ze].error&&(Fe++,o.drawInscribedImage(r,E[ze],e,ze,ge))}u.backgrounding=Fe!==M,Se!==u.backgrounding&&e.updateStyle(!1)},we=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ue=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;o.hasPie(e)&&(o.drawPie(r,e,ue),ge&&(g||o.nodeShapes[o.getNodeShape(e)].draw(r,c.x,c.y,s,l,Q,f)))},xe=function(){var ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p,ue=(O>0?O:-O)*ge,Se=O>0?0:255;O!==0&&(o.colorFillStyle(r,Se,Se,Se,ue),g?r.fill(h):r.fill())},Be=function(){if(I>0){if(r.lineWidth=I,r.lineCap=U,r.lineJoin=Y,r.setLineDash)switch(j){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash(K),r.lineDashOffset=P;break;case"solid":case"double":r.setLineDash([]);break}if(X!=="center"){if(r.save(),r.lineWidth*=2,X==="inside")g?r.clip(h):r.clip();else{var ge=new Path2D;ge.rect(-s/2-I,-l/2-I,s+2*I,l+2*I),ge.addPath(h),r.clip(ge,"evenodd")}g?r.stroke(h):r.stroke(),r.restore()}else g?r.stroke(h):r.stroke();if(j==="double"){r.lineWidth=I/3;var ue=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(h):r.stroke(),r.globalCompositeOperation=ue}r.setLineDash&&r.setLineDash([])}},Ue=function(){if(L>0){if(r.lineWidth=L,r.lineCap="butt",r.setLineDash)switch(W){case"dotted":r.setLineDash([1,1]);break;case"dashed":r.setLineDash([4,2]);break;case"solid":case"double":r.setLineDash([]);break}var ge=c;g&&(ge={x:0,y:0});var ue=o.getNodeShape(e),Se=I;X==="inside"&&(Se=0),X==="outside"&&(Se*=2);var Fe=(s+Se+(L+J))/s,ze=(l+Se+(L+J))/l,Ie=s*Fe,et=l*ze,$e=o.nodeShapes[ue].points,We;if(g){var ft=Ce(Ie,et,ue,$e);We=ft.path}if(ue==="ellipse")o.drawEllipsePath(We||r,ge.x,ge.y,Ie,et);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ue)){var ht=0,Nt=0,vt=0;ue==="round-diamond"?ht=(Se+J+L)*1.4:ue==="round-heptagon"?(ht=(Se+J+L)*1.075,vt=-(Se/2+J+L)/35):ue==="round-hexagon"?ht=(Se+J+L)*1.12:ue==="round-pentagon"?(ht=(Se+J+L)*1.13,vt=-(Se/2+J+L)/15):ue==="round-tag"?(ht=(Se+J+L)*1.12,Nt=(Se/2+L+J)*.07):ue==="round-triangle"&&(ht=(Se+J+L)*(Math.PI/2),vt=-(Se+J/2+L)/Math.PI),ht!==0&&(Fe=(s+ht)/s,Ie=s*Fe,["round-hexagon","round-tag"].includes(ue)||(ze=(l+ht)/l,et=l*ze)),Q=Q==="auto"?nv(Ie,et):Q;for(var Ot=Ie/2,zt=et/2,gt=Q+(Se+L+J)/2,st=new Array($e.length/2),Qt=new Array($e.length/2),yr=0;yr<$e.length/2;yr++)st[yr]={x:ge.x+Nt+Ot*$e[yr*2],y:ge.y+vt+zt*$e[yr*2+1]};var ur,xr,jt,Zt,Gt=st.length;for(xr=st[Gt-1],ur=0;ur<Gt;ur++)jt=st[ur%Gt],Zt=st[(ur+1)%Gt],Qt[ur]=Yf(xr,jt,Zt,gt),xr=jt,jt=Zt;o.drawRoundPolygonPath(We||r,ge.x+Nt,ge.y+vt,s*Fe,l*ze,$e,Qt)}else if(["roundrectangle","round-rectangle"].includes(ue))Q=Q==="auto"?Ua(Ie,et):Q,o.drawRoundRectanglePath(We||r,ge.x,ge.y,Ie,et,Q+(Se+L+J)/2);else if(["cutrectangle","cut-rectangle"].includes(ue))Q=Q==="auto"?Bf():Q,o.drawCutRectanglePath(We||r,ge.x,ge.y,Ie,et,null,Q+(Se+L+J)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ue))Q=Q==="auto"?Ua(Ie,et):Q,o.drawBottomRoundRectanglePath(We||r,ge.x,ge.y,Ie,et,Q+(Se+L+J)/2);else if(ue==="barrel")o.drawBarrelPath(We||r,ge.x,ge.y,Ie,et);else if(ue.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ue)){var At=(Se+L+J)/s;$e=Ls(Ns($e,At)),o.drawPolygonPath(We||r,ge.x,ge.y,s,l,$e)}else{var Ae=(Se+L+J)/s;$e=Ls(Ns($e,-Ae)),o.drawPolygonPath(We||r,ge.x,ge.y,s,l,$e)}if(g?r.stroke(We):r.stroke(),W==="double"){r.lineWidth=Se/3;var pe=r.globalCompositeOperation;r.globalCompositeOperation="destination-out",g?r.stroke(We):r.stroke(),r.globalCompositeOperation=pe}r.setLineDash&&r.setLineDash([])}},Ee=function(){a&&o.drawNodeOverlay(r,e,c,s,l)},Me=function(){a&&o.drawNodeUnderlay(r,e,c,s,l)},ke=function(){o.drawElementText(r,e,null,n)},de=e.pstyle("ghost").value==="yes";if(de){var R=e.pstyle("ghost-offset-x").pfValue,G=e.pstyle("ghost-offset-y").pfValue,re=e.pstyle("ghost-opacity").value,te=re*p;r.translate(R,G),ce(),Ue(),oe(re*q),me(),_e(te,!0),fe(re*D),Be(),we(O!==0||I!==0),_e(te,!1),xe(te),r.translate(-R,-G)}g&&r.translate(-c.x,-c.y),Me(),g&&r.translate(c.x,c.y),ce(),Ue(),oe(),me(),_e(p,!0),fe(),Be(),we(O!==0||I!==0),_e(p,!1),xe(),g&&r.translate(-c.x,-c.y),ke(),Ee(),t&&r.translate(w.x1,w.y1)}};var og=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(t,n,a,i,o){var s=this;if(!!n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,u=n.pstyle("".concat(e,"-opacity")).value,f=n.pstyle("".concat(e,"-color")).value,c=n.pstyle("".concat(e,"-shape")).value,p=n.pstyle("".concat(e,"-corner-radius")).value;if(u>0){if(a=a||n.position(),i==null||o==null){var g=n.padding();i=n.width()+2*g,o=n.height()+2*g}s.colorFillStyle(t,f[0],f[1],f[2],u),s.nodeShapes[c].draw(t,a.x,a.y,i+l*2,o+l*2,p),t.fill()}}}};Vi.drawNodeOverlay=og("overlay");Vi.drawNodeUnderlay=og("underlay");Vi.hasPie=function(r){return r=r[0],r._private.hasPie};Vi.drawPie=function(r,e,t,n){e=e[0],n=n||e.position();var a=e.cy().style(),i=e.pstyle("pie-size"),o=n.x,s=n.y,l=e.width(),u=e.height(),f=Math.min(l,u)/2,c=0,p=this.usePaths();p&&(o=0,s=0),i.units==="%"?f=f*i.pfValue:i.pfValue!==void 0&&(f=i.pfValue/2);for(var g=1;g<=a.pieBackgroundN;g++){var h=e.pstyle("pie-"+g+"-background-size").value,m=e.pstyle("pie-"+g+"-background-color").value,x=e.pstyle("pie-"+g+"-background-opacity").value*t,w=h/100;w+c>1&&(w=1-c);var S=1.5*Math.PI+2*Math.PI*c,y=2*Math.PI*w,C=S+y;h===0||c>=1||c+w>1||(r.beginPath(),r.moveTo(o,s),r.arc(o,s,f,S,C),r.closePath(),this.colorFillStyle(r,m[0],m[1],m[2],x),r.fill(),c+=w)}};var Zr={},QC=100;Zr.getPixelRatio=function(){var r=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=r.backingStorePixelRatio||r.webkitBackingStorePixelRatio||r.mozBackingStorePixelRatio||r.msBackingStorePixelRatio||r.oBackingStorePixelRatio||r.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/e};Zr.paintCache=function(r){for(var e=this.paintCaches=this.paintCaches||[],t=!0,n,a=0;a<e.length;a++)if(n=e[a],n.context===r){t=!1;break}return t&&(n={context:r},e.push(n)),n};Zr.createGradientStyleFor=function(r,e,t,n,a){var i,o=this.usePaths(),s=t.pstyle(e+"-gradient-stop-colors").value,l=t.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(t.isEdge()){var u=t.sourceEndpoint(),f=t.targetEndpoint(),c=t.midpoint(),p=Ha(u,c),g=Ha(f,c);i=r.createRadialGradient(c.x,c.y,0,c.x,c.y,Math.max(p,g))}else{var h=o?{x:0,y:0}:t.position(),m=t.paddedWidth(),x=t.paddedHeight();i=r.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(m,x))}else if(t.isEdge()){var w=t.sourceEndpoint(),S=t.targetEndpoint();i=r.createLinearGradient(w.x,w.y,S.x,S.y)}else{var y=o?{x:0,y:0}:t.position(),C=t.paddedWidth(),E=t.paddedHeight(),M=C/2,v=E/2,T=t.pstyle("background-gradient-direction").value;switch(T){case"to-bottom":i=r.createLinearGradient(y.x,y.y-v,y.x,y.y+v);break;case"to-top":i=r.createLinearGradient(y.x,y.y+v,y.x,y.y-v);break;case"to-left":i=r.createLinearGradient(y.x+M,y.y,y.x-M,y.y);break;case"to-right":i=r.createLinearGradient(y.x-M,y.y,y.x+M,y.y);break;case"to-bottom-right":case"to-right-bottom":i=r.createLinearGradient(y.x-M,y.y-v,y.x+M,y.y+v);break;case"to-top-right":case"to-right-top":i=r.createLinearGradient(y.x-M,y.y+v,y.x+M,y.y-v);break;case"to-bottom-left":case"to-left-bottom":i=r.createLinearGradient(y.x+M,y.y-v,y.x-M,y.y+v);break;case"to-top-left":case"to-left-top":i=r.createLinearGradient(y.x+M,y.y+v,y.x-M,y.y-v);break}}if(!i)return null;for(var k=l.length===s.length,N=s.length,O=0;O<N;O++)i.addColorStop(k?l[O]:O/(N-1),"rgba("+s[O][0]+","+s[O][1]+","+s[O][2]+","+a+")");return i};Zr.gradientFillStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"background",e,t,n);if(!a)return null;r.fillStyle=a};Zr.colorFillStyle=function(r,e,t,n,a){r.fillStyle="rgba("+e+","+t+","+n+","+a+")"};Zr.eleFillStyle=function(r,e,t){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(r,e,n,t);else{var a=e.pstyle("background-color").value;this.colorFillStyle(r,a[0],a[1],a[2],t)}};Zr.gradientStrokeStyle=function(r,e,t,n){var a=this.createGradientStyleFor(r,"line",e,t,n);if(!a)return null;r.strokeStyle=a};Zr.colorStrokeStyle=function(r,e,t,n,a){r.strokeStyle="rgba("+e+","+t+","+n+","+a+")"};Zr.eleStrokeStyle=function(r,e,t){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(r,e,n,t);else{var a=e.pstyle("line-color").value;this.colorStrokeStyle(r,a[0],a[1],a[2],t)}};Zr.matchCanvasSize=function(r){var e=this,t=e.data,n=e.findContainerClientCoords(),a=n[2],i=n[3],o=e.getPixelRatio(),s=e.motionBlurPxRatio;(r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||r===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(o=s);var l=a*o,u=i*o,f;if(!(l===e.canvasWidth&&u===e.canvasHeight)){e.fontCaches=null;var c=t.canvasContainer;c.style.width=a+"px",c.style.height=i+"px";for(var p=0;p<e.CANVAS_LAYERS;p++)f=t.canvases[p],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";for(var p=0;p<e.BUFFER_COUNT;p++)f=t.bufferCanvases[p],f.width=l,f.height=u,f.style.width=a+"px",f.style.height=i+"px";e.textureMult=1,o<=1&&(f=t.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,f.width=l*e.textureMult,f.height=u*e.textureMult),e.canvasWidth=l,e.canvasHeight=u}};Zr.renderTo=function(r,e,t,n){this.render({forcedContext:r,forcedZoom:e,forcedPan:t,drawAllLayers:!0,forcedPxRatio:n})};Zr.render=function(r){r=r||Xh();var e=r.forcedContext,t=r.drawAllLayers,n=r.drawOnlyNodeLayer,a=r.forcedZoom,i=r.forcedPan,o=this,s=r.forcedPxRatio===void 0?this.getPixelRatio():r.forcedPxRatio,l=o.cy,u=o.data,f=u.canvasNeedsRedraw,c=o.textureOnViewport&&!e&&(o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming),p=r.motionBlur!==void 0?r.motionBlur:o.motionBlur,g=o.motionBlurPxRatio,h=l.hasCompoundNodes(),m=o.hoverData.draggingEles,x=!!(o.hoverData.selecting||o.touchData.selecting);p=p&&!e&&o.motionBlurEnabled&&!x;var w=p;e||(o.prevPxRatio!==s&&(o.invalidateContainerClientCoordsCache(),o.matchCanvasSize(o.container),o.redrawHint("eles",!0),o.redrawHint("drag",!0)),o.prevPxRatio=s),!e&&o.motionBlurTimeout&&clearTimeout(o.motionBlurTimeout),p&&(o.mbFrames==null&&(o.mbFrames=0),o.mbFrames++,o.mbFrames<3&&(w=!1),o.mbFrames>o.minMbLowQualFrames&&(o.motionBlurPxRatio=o.mbPxRBlurry)),o.clearingMotionBlur&&(o.motionBlurPxRatio=1),o.textureDrawLastFrame&&!c&&(f[o.NODE]=!0,f[o.SELECT_BOX]=!0);var S=l.style(),y=l.zoom(),C=a!==void 0?a:y,E=l.pan(),M={x:E.x,y:E.y},v={zoom:y,pan:{x:E.x,y:E.y}},T=o.prevViewport,k=T===void 0||v.zoom!==T.zoom||v.pan.x!==T.pan.x||v.pan.y!==T.pan.y;!k&&!(m&&!h)&&(o.motionBlurPxRatio=1),i&&(M=i),C*=s,M.x*=s,M.y*=s;var N=o.getCachedZSortedEles();function O(De,me,_e,we,xe){var Be=De.globalCompositeOperation;De.globalCompositeOperation="destination-out",o.colorFillStyle(De,255,255,255,o.motionBlurTransparency),De.fillRect(me,_e,we,xe),De.globalCompositeOperation=Be}function I(De,me){var _e,we,xe,Be;!o.clearingMotionBlur&&(De===u.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]||De===u.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG])?(_e={x:E.x*g,y:E.y*g},we=y*g,xe=o.canvasWidth*g,Be=o.canvasHeight*g):(_e=M,we=C,xe=o.canvasWidth,Be=o.canvasHeight),De.setTransform(1,0,0,1,0,0),me==="motionBlur"?O(De,0,0,xe,Be):!e&&(me===void 0||me)&&De.clearRect(0,0,xe,Be),t||(De.translate(_e.x,_e.y),De.scale(we,we)),i&&De.translate(i.x,i.y),a&&De.scale(a,a)}if(c||(o.textureDrawLastFrame=!1),c){if(o.textureDrawLastFrame=!0,!o.textureCache){o.textureCache={},o.textureCache.bb=l.mutableElements().boundingBox(),o.textureCache.texture=o.data.bufferCanvases[o.TEXTURE_BUFFER];var q=o.data.bufferContexts[o.TEXTURE_BUFFER];q.setTransform(1,0,0,1,0,0),q.clearRect(0,0,o.canvasWidth*o.textureMult,o.canvasHeight*o.textureMult),o.render({forcedContext:q,drawOnlyNodeLayer:!0,forcedPxRatio:s*o.textureMult});var v=o.textureCache.viewport={zoom:l.zoom(),pan:l.pan(),width:o.canvasWidth,height:o.canvasHeight};v.mpan={x:(0-v.pan.x)/v.zoom,y:(0-v.pan.y)/v.zoom}}f[o.DRAG]=!1,f[o.NODE]=!1;var B=u.contexts[o.NODE],j=o.textureCache.texture,v=o.textureCache.viewport;B.setTransform(1,0,0,1,0,0),p?O(B,0,0,v.width,v.height):B.clearRect(0,0,v.width,v.height);var Y=S.core("outside-texture-bg-color").value,U=S.core("outside-texture-bg-opacity").value;o.colorFillStyle(B,Y[0],Y[1],Y[2],U),B.fillRect(0,0,v.width,v.height);var y=l.zoom();I(B,!1),B.clearRect(v.mpan.x,v.mpan.y,v.width/v.zoom/s,v.height/v.zoom/s),B.drawImage(j,v.mpan.x,v.mpan.y,v.width/v.zoom/s,v.height/v.zoom/s)}else o.textureOnViewport&&!e&&(o.textureCache=null);var X=l.extent(),K=o.pinching||o.hoverData.dragging||o.swipePanning||o.data.wheelZooming||o.hoverData.draggingEles||o.cy.animated(),P=o.hideEdgesOnViewport&&K,D=[];if(D[o.NODE]=!f[o.NODE]&&p&&!o.clearedForMotionBlur[o.NODE]||o.clearingMotionBlur,D[o.NODE]&&(o.clearedForMotionBlur[o.NODE]=!0),D[o.DRAG]=!f[o.DRAG]&&p&&!o.clearedForMotionBlur[o.DRAG]||o.clearingMotionBlur,D[o.DRAG]&&(o.clearedForMotionBlur[o.DRAG]=!0),f[o.NODE]||t||n||D[o.NODE]){var L=p&&!D[o.NODE]&&g!==1,B=e||(L?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_NODE]:u.contexts[o.NODE]),F=p&&!L?"motionBlur":void 0;I(B,F),P?o.drawCachedNodes(B,N.nondrag,s,X):o.drawLayeredElements(B,N.nondrag,s,X),o.debug&&o.drawDebugPoints(B,N.nondrag),!t&&!p&&(f[o.NODE]=!1)}if(!n&&(f[o.DRAG]||t||D[o.DRAG])){var L=p&&!D[o.DRAG]&&g!==1,B=e||(L?o.data.bufferContexts[o.MOTIONBLUR_BUFFER_DRAG]:u.contexts[o.DRAG]);I(B,p&&!L?"motionBlur":void 0),P?o.drawCachedNodes(B,N.drag,s,X):o.drawCachedElements(B,N.drag,s,X),o.debug&&o.drawDebugPoints(B,N.drag),!t&&!p&&(f[o.DRAG]=!1)}if(o.showFps||!n&&f[o.SELECT_BOX]&&!t){var B=e||u.contexts[o.SELECT_BOX];if(I(B),o.selection[4]==1&&(o.hoverData.selecting||o.touchData.selecting)){var y=o.cy.zoom(),W=S.core("selection-box-border-width").value/y;B.lineWidth=W,B.fillStyle="rgba("+S.core("selection-box-color").value[0]+","+S.core("selection-box-color").value[1]+","+S.core("selection-box-color").value[2]+","+S.core("selection-box-opacity").value+")",B.fillRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]),W>0&&(B.strokeStyle="rgba("+S.core("selection-box-border-color").value[0]+","+S.core("selection-box-border-color").value[1]+","+S.core("selection-box-border-color").value[2]+","+S.core("selection-box-opacity").value+")",B.strokeRect(o.selection[0],o.selection[1],o.selection[2]-o.selection[0],o.selection[3]-o.selection[1]))}if(u.bgActivePosistion&&!o.hoverData.selecting){var y=o.cy.zoom(),Z=u.bgActivePosistion;B.fillStyle="rgba("+S.core("active-bg-color").value[0]+","+S.core("active-bg-color").value[1]+","+S.core("active-bg-color").value[2]+","+S.core("active-bg-opacity").value+")",B.beginPath(),B.arc(Z.x,Z.y,S.core("active-bg-size").pfValue/y,0,2*Math.PI),B.fill()}var J=o.lastRedrawTime;if(o.showFps&&J){J=Math.round(J);var Q=Math.round(1e3/J);B.setTransform(1,0,0,1,0,0),B.fillStyle="rgba(255, 0, 0, 0.75)",B.strokeStyle="rgba(255, 0, 0, 0.75)",B.lineWidth=1,B.fillText("1 frame = "+J+" ms = "+Q+" fps",0,20);var oe=60;B.strokeRect(0,30,250,20),B.fillRect(0,30,250*Math.min(Q/oe,1),20)}t||(f[o.SELECT_BOX]=!1)}if(p&&g!==1){var fe=u.contexts[o.NODE],ce=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_NODE],Ce=u.contexts[o.DRAG],Le=o.data.bufferCanvases[o.MOTIONBLUR_BUFFER_DRAG],Re=function(me,_e,we){me.setTransform(1,0,0,1,0,0),we||!w?me.clearRect(0,0,o.canvasWidth,o.canvasHeight):O(me,0,0,o.canvasWidth,o.canvasHeight);var xe=g;me.drawImage(_e,0,0,o.canvasWidth*xe,o.canvasHeight*xe,0,0,o.canvasWidth,o.canvasHeight)};(f[o.NODE]||D[o.NODE])&&(Re(fe,ce,D[o.NODE]),f[o.NODE]=!1),(f[o.DRAG]||D[o.DRAG])&&(Re(Ce,Le,D[o.DRAG]),f[o.DRAG]=!1)}o.prevViewport=v,o.clearingMotionBlur&&(o.clearingMotionBlur=!1,o.motionBlurCleared=!0,o.motionBlur=!0),p&&(o.motionBlurTimeout=setTimeout(function(){o.motionBlurTimeout=null,o.clearedForMotionBlur[o.NODE]=!1,o.clearedForMotionBlur[o.DRAG]=!1,o.motionBlur=!1,o.clearingMotionBlur=!c,o.mbFrames=0,f[o.NODE]=!0,f[o.DRAG]=!0,o.redraw()},QC)),e||l.emit("render")};var Ca={};Ca.drawPolygonPath=function(r,e,t,n,a,i){var o=n/2,s=a/2;r.beginPath&&r.beginPath(),r.moveTo(e+o*i[0],t+s*i[1]);for(var l=1;l<i.length/2;l++)r.lineTo(e+o*i[l*2],t+s*i[l*2+1]);r.closePath()};Ca.drawRoundPolygonPath=function(r,e,t,n,a,i,o){o.forEach(function(s){return jv(r,s)}),r.closePath()};Ca.drawRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,s=a/2,l=i==="auto"?Ua(n,a):Math.min(i,s,o);r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.arcTo(e+o,t-s,e+o,t,l),r.arcTo(e+o,t+s,e,t+s,l),r.arcTo(e-o,t+s,e-o,t,l),r.arcTo(e-o,t-s,e,t-s,l),r.lineTo(e,t-s),r.closePath()};Ca.drawBottomRoundRectanglePath=function(r,e,t,n,a,i){var o=n/2,s=a/2,l=i==="auto"?Ua(n,a):i;r.beginPath&&r.beginPath(),r.moveTo(e,t-s),r.lineTo(e+o,t-s),r.lineTo(e+o,t),r.arcTo(e+o,t+s,e,t+s,l),r.arcTo(e-o,t+s,e-o,t,l),r.lineTo(e-o,t-s),r.lineTo(e,t-s),r.closePath()};Ca.drawCutRectanglePath=function(r,e,t,n,a,i,o){var s=n/2,l=a/2,u=o==="auto"?Bf():o;r.beginPath&&r.beginPath(),r.moveTo(e-s+u,t-l),r.lineTo(e+s-u,t-l),r.lineTo(e+s,t-l+u),r.lineTo(e+s,t+l-u),r.lineTo(e+s-u,t+l),r.lineTo(e-s+u,t+l),r.lineTo(e-s,t+l-u),r.lineTo(e-s,t-l+u),r.closePath()};Ca.drawBarrelPath=function(r,e,t,n,a){var i=n/2,o=a/2,s=e-i,l=e+i,u=t-o,f=t+o,c=rf(n,a),p=c.widthOffset,g=c.heightOffset,h=c.ctrlPtOffsetPct*p;r.beginPath&&r.beginPath(),r.moveTo(s,u+g),r.lineTo(s,f-g),r.quadraticCurveTo(s+h,f,s+p,f),r.lineTo(l-p,f),r.quadraticCurveTo(l-h,f,l,f-g),r.lineTo(l,u+g),r.quadraticCurveTo(l-h,u,l-p,u),r.lineTo(s+p,u),r.quadraticCurveTo(s+h,u,s,u+g),r.closePath()};var Kd=Math.sin(0),jd=Math.cos(0),gf={},pf={},sg=Math.PI/40;for(var hi=0*Math.PI;hi<2*Math.PI;hi+=sg)gf[hi]=Math.sin(hi),pf[hi]=Math.cos(hi);Ca.drawEllipsePath=function(r,e,t,n,a){if(r.beginPath&&r.beginPath(),r.ellipse)r.ellipse(e,t,n/2,a/2,0,0,2*Math.PI);else for(var i,o,s=n/2,l=a/2,u=0*Math.PI;u<2*Math.PI;u+=sg)i=e-s*gf[u]*Kd+s*pf[u]*jd,o=t+l*pf[u]*Kd+l*gf[u]*jd,u===0?r.moveTo(i,o):r.lineTo(i,o);r.closePath()};var Go={};Go.createBuffer=function(r,e){var t=document.createElement("canvas");return t.width=r,t.height=e,[t,t.getContext("2d")]};Go.bufferCanvasImage=function(r){var e=this.cy,t=e.mutableElements(),n=t.boundingBox(),a=this.findContainerClientCoords(),i=r.full?Math.ceil(n.w):a[2],o=r.full?Math.ceil(n.h):a[3],s=Ve(r.maxWidth)||Ve(r.maxHeight),l=this.getPixelRatio(),u=1;if(r.scale!==void 0)i*=r.scale,o*=r.scale,u=r.scale;else if(s){var f=1/0,c=1/0;Ve(r.maxWidth)&&(f=u*r.maxWidth/i),Ve(r.maxHeight)&&(c=u*r.maxHeight/o),u=Math.min(f,c),i*=u,o*=u}s||(i*=l,o*=l,u*=l);var p=document.createElement("canvas");p.width=i,p.height=o,p.style.width=i+"px",p.style.height=o+"px";var g=p.getContext("2d");if(i>0&&o>0){g.clearRect(0,0,i,o),g.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(r.full)g.translate(-n.x1*u,-n.y1*u),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(n.x1*u,n.y1*u);else{var m=e.pan(),x={x:m.x*u,y:m.y*u};u*=e.zoom(),g.translate(x.x,x.y),g.scale(u,u),this.drawElements(g,h),g.scale(1/u,1/u),g.translate(-x.x,-x.y)}r.bg&&(g.globalCompositeOperation="destination-over",g.fillStyle=r.bg,g.rect(0,0,i,o),g.fill())}return p};function ZC(r,e){for(var t=atob(r),n=new ArrayBuffer(t.length),a=new Uint8Array(n),i=0;i<t.length;i++)a[i]=t.charCodeAt(i);return new Blob([n],{type:e})}function Yd(r){var e=r.indexOf(",");return r.substr(e+1)}function ug(r,e,t){var n=function(){return e.toDataURL(t,r.quality)};switch(r.output){case"blob-promise":return new Li(function(a,i){try{e.toBlob(function(o){o!=null?a(o):i(new Error("`canvas.toBlob()` sent a null value in its callback"))},t,r.quality)}catch(o){i(o)}});case"blob":return ZC(Yd(n()),t);case"base64":return Yd(n());case"base64uri":default:return n()}}Go.png=function(r){return ug(r,this.bufferCanvasImage(r),"image/png")};Go.jpg=function(r){return ug(r,this.bufferCanvasImage(r),"image/jpeg")};var lg={};lg.nodeShapeImpl=function(r,e,t,n,a,i,o,s){switch(r){case"ellipse":return this.drawEllipsePath(e,t,n,a,i);case"polygon":return this.drawPolygonPath(e,t,n,a,i,o);case"round-polygon":return this.drawRoundPolygonPath(e,t,n,a,i,o,s);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,t,n,a,i,s);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,t,n,a,i,o,s);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,t,n,a,i,s);case"barrel":return this.drawBarrelPath(e,t,n,a,i)}};var JC=fg,Et=fg.prototype;Et.CANVAS_LAYERS=3;Et.SELECT_BOX=0;Et.DRAG=1;Et.NODE=2;Et.BUFFER_COUNT=3;Et.TEXTURE_BUFFER=0;Et.MOTIONBLUR_BUFFER_NODE=1;Et.MOTIONBLUR_BUFFER_DRAG=2;function fg(r){var e=this;e.data={canvases:new Array(Et.CANVAS_LAYERS),contexts:new Array(Et.CANVAS_LAYERS),canvasNeedsRedraw:new Array(Et.CANVAS_LAYERS),bufferCanvases:new Array(Et.BUFFER_COUNT),bufferContexts:new Array(Et.CANVAS_LAYERS)};var t="-webkit-tap-highlight-color",n="rgba(0,0,0,0)";e.data.canvasContainer=document.createElement("div");var a=e.data.canvasContainer.style;e.data.canvasContainer.style[t]=n,a.position="relative",a.zIndex="0",a.overflow="hidden";var i=r.cy.container();i.appendChild(e.data.canvasContainer),i.style[t]=n;var o={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};Gy()&&(o["-ms-touch-action"]="none",o["touch-action"]="none");for(var s=0;s<Et.CANVAS_LAYERS;s++){var l=e.data.canvases[s]=document.createElement("canvas");e.data.contexts[s]=l.getContext("2d"),Object.keys(o).forEach(function(J){l.style[J]=o[J]}),l.style.position="absolute",l.setAttribute("data-id","layer"+s),l.style.zIndex=String(Et.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(l),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[Et.NODE].setAttribute("data-id","layer"+Et.NODE+"-node"),e.data.canvases[Et.SELECT_BOX].setAttribute("data-id","layer"+Et.SELECT_BOX+"-selectbox"),e.data.canvases[Et.DRAG].setAttribute("data-id","layer"+Et.DRAG+"-drag");for(var s=0;s<Et.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=document.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var u=Yr(),f=function(Q){return{x:(Q.x1+Q.x2)/2,y:(Q.y1+Q.y2)/2}},c=function(Q){return{x:-Q.w/2,y:-Q.h/2}},p=function(Q){var oe=Q[0]._private,fe=oe.oldBackgroundTimestamp===oe.backgroundTimestamp;return!fe},g=function(Q){return Q[0]._private.nodeKey},h=function(Q){return Q[0]._private.labelStyleKey},m=function(Q){return Q[0]._private.sourceLabelStyleKey},x=function(Q){return Q[0]._private.targetLabelStyleKey},w=function(Q,oe,fe,ce,Ce){return e.drawElement(Q,oe,fe,!1,!1,Ce)},S=function(Q,oe,fe,ce,Ce){return e.drawElementText(Q,oe,fe,ce,"main",Ce)},y=function(Q,oe,fe,ce,Ce){return e.drawElementText(Q,oe,fe,ce,"source",Ce)},C=function(Q,oe,fe,ce,Ce){return e.drawElementText(Q,oe,fe,ce,"target",Ce)},E=function(Q){return Q.boundingBox(),Q[0]._private.bodyBounds},M=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.main||u},v=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.source||u},T=function(Q){return Q.boundingBox(),Q[0]._private.labelBounds.target||u},k=function(Q,oe){return oe},N=function(Q){return f(E(Q))},O=function(Q,oe,fe){var ce=Q?Q+"-":"";return{x:oe.x+fe.pstyle(ce+"text-margin-x").pfValue,y:oe.y+fe.pstyle(ce+"text-margin-y").pfValue}},I=function(Q,oe,fe){var ce=Q[0]._private.rscratch;return{x:ce[oe],y:ce[fe]}},q=function(Q){return O("",I(Q,"labelX","labelY"),Q)},B=function(Q){return O("source",I(Q,"sourceLabelX","sourceLabelY"),Q)},j=function(Q){return O("target",I(Q,"targetLabelX","targetLabelY"),Q)},Y=function(Q){return c(E(Q))},U=function(Q){return c(v(Q))},X=function(Q){return c(T(Q))},K=function(Q){var oe=M(Q),fe=c(M(Q));if(Q.isNode()){switch(Q.pstyle("text-halign").value){case"left":fe.x=-oe.w;break;case"right":fe.x=0;break}switch(Q.pstyle("text-valign").value){case"top":fe.y=-oe.h;break;case"bottom":fe.y=0;break}}return fe},P=e.data.eleTxrCache=new co(e,{getKey:g,doesEleInvalidateKey:p,drawElement:w,getBoundingBox:E,getRotationPoint:N,getRotationOffset:Y,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),D=e.data.lblTxrCache=new co(e,{getKey:h,drawElement:S,getBoundingBox:M,getRotationPoint:q,getRotationOffset:K,isVisible:k}),L=e.data.slbTxrCache=new co(e,{getKey:m,drawElement:y,getBoundingBox:v,getRotationPoint:B,getRotationOffset:U,isVisible:k}),F=e.data.tlbTxrCache=new co(e,{getKey:x,drawElement:C,getBoundingBox:T,getRotationPoint:j,getRotationOffset:X,isVisible:k}),W=e.data.lyrTxrCache=new ng(e);e.onUpdateEleCalcs(function(Q,oe){P.invalidateElements(oe),D.invalidateElements(oe),L.invalidateElements(oe),F.invalidateElements(oe),W.invalidateElements(oe);for(var fe=0;fe<oe.length;fe++){var ce=oe[fe]._private;ce.oldBackgroundTimestamp=ce.backgroundTimestamp}});var Z=function(Q){for(var oe=0;oe<Q.length;oe++)W.enqueueElementRefinement(Q[oe].ele)};P.onDequeue(Z),D.onDequeue(Z),L.onDequeue(Z),F.onDequeue(Z)}Et.redrawHint=function(r,e){var t=this;switch(r){case"eles":t.data.canvasNeedsRedraw[Et.NODE]=e;break;case"drag":t.data.canvasNeedsRedraw[Et.DRAG]=e;break;case"select":t.data.canvasNeedsRedraw[Et.SELECT_BOX]=e;break}};var eS=typeof Path2D<"u";Et.path2dEnabled=function(r){if(r===void 0)return this.pathsEnabled;this.pathsEnabled=!!r};Et.usePaths=function(){return eS&&this.pathsEnabled};Et.setImgSmoothing=function(r,e){r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled=e:(r.webkitImageSmoothingEnabled=e,r.mozImageSmoothingEnabled=e,r.msImageSmoothingEnabled=e)};Et.getImgSmoothing=function(r){return r.imageSmoothingEnabled!=null?r.imageSmoothingEnabled:r.webkitImageSmoothingEnabled||r.mozImageSmoothingEnabled||r.msImageSmoothingEnabled};Et.makeOffscreenCanvas=function(r,e){var t;return(typeof OffscreenCanvas>"u"?"undefined":vr(OffscreenCanvas))!=="undefined"?t=new OffscreenCanvas(r,e):(t=document.createElement("canvas"),t.width=r,t.height=e),t};[ag,In,Qn,Qf,Qa,Vi,Zr,Ca,Go,lg].forEach(function(r){rt(Et,r)});var tS=[{name:"null",impl:Uv},{name:"base",impl:tg},{name:"canvas",impl:JC}],rS=[{type:"layout",extensions:uC},{type:"renderer",extensions:tS}],cg={},dg={};function hg(r,e,t){var n=t,a=function(T){Dt("Can not register `"+e+"` for `"+r+"` since `"+T+"` already exists in the prototype and can not be overridden")};if(r==="core"){if(Ao.prototype[e])return a(e);Ao.prototype[e]=t}else if(r==="collection"){if(Pr.prototype[e])return a(e);Pr.prototype[e]=t}else if(r==="layout"){for(var i=function(T){this.options=T,t.call(this,T),Tt(this._private)||(this._private={}),this._private.cy=T.cy,this._private.listeners=[],this.createEmitter()},o=i.prototype=Object.create(t.prototype),s=[],l=0;l<s.length;l++){var u=s[l];o[u]=o[u]||function(){return this}}o.start&&!o.run?o.run=function(){return this.start(),this}:!o.start&&o.run&&(o.start=function(){return this.run(),this});var f=t.prototype.stop;o.stop=function(){var v=this.options;if(v&&v.animate){var T=this.animations;if(T)for(var k=0;k<T.length;k++)T[k].stop()}return f?f.call(this):this.emit("layoutstop"),this},o.destroy||(o.destroy=function(){return this}),o.cy=function(){return this._private.cy};var c=function(T){return T._private.cy},p={addEventFields:function(T,k){k.layout=T,k.cy=c(T),k.target=T},bubble:function(){return!0},parent:function(T){return c(T)}};rt(o,{createEmitter:function(){return this._private.emitter=new au(p,this),this},emitter:function(){return this._private.emitter},on:function(T,k){return this.emitter().on(T,k),this},one:function(T,k){return this.emitter().one(T,k),this},once:function(T,k){return this.emitter().one(T,k),this},removeListener:function(T,k){return this.emitter().removeListener(T,k),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(T,k){return this.emitter().emit(T,k),this}}),Mt.eventAliasesOn(o),n=i}else if(r==="renderer"&&e!=="null"&&e!=="base"){var g=vg("renderer","base"),h=g.prototype,m=t,x=t.prototype,w=function(){g.apply(this,arguments),m.apply(this,arguments)},S=w.prototype;for(var y in h){var C=h[y],E=x[y]!=null;if(E)return a(y);S[y]=C}for(var M in x)S[M]=x[M];h.clientFunctions.forEach(function(v){S[v]=S[v]||function(){nr("Renderer does not implement `renderer."+v+"()` on its prototype")}}),n=w}else if(r==="__proto__"||r==="constructor"||r==="prototype")return nr(r+" is an illegal type to be registered, possibly lead to prototype pollutions");return zh({map:cg,keys:[r,e],value:n})}function vg(r,e){return Gh({map:cg,keys:[r,e]})}function nS(r,e,t,n,a){return zh({map:dg,keys:[r,e,t,n],value:a})}function aS(r,e,t,n){return Gh({map:dg,keys:[r,e,t,n]})}var yf=function(){if(arguments.length===2)return vg.apply(null,arguments);if(arguments.length===3)return hg.apply(null,arguments);if(arguments.length===4)return aS.apply(null,arguments);if(arguments.length===5)return nS.apply(null,arguments);nr("Invalid extension access syntax")};Ao.prototype.extension=yf;rS.forEach(function(r){r.extensions.forEach(function(e){hg(r.type,e.name,e.impl)})});var gg=function r(){if(!(this instanceof r))return new r;this.length=0},ja=gg.prototype;ja.instanceString=function(){return"stylesheet"};ja.selector=function(r){var e=this.length++;return this[e]={selector:r,properties:[]},this};ja.css=function(r,e){var t=this.length-1;if(Ze(r))this[t].properties.push({name:r,value:e});else if(Tt(r))for(var n=r,a=Object.keys(n),i=0;i<a.length;i++){var o=a[i],s=n[o];if(s!=null){var l=Nr.properties[o]||Nr.properties[js(o)];if(l!=null){var u=l.name,f=s;this[t].properties.push({name:u,value:f})}}}return this};ja.style=ja.css;ja.generateStyle=function(r){var e=new Nr(r);return this.appendToStyle(e)};ja.appendToStyle=function(r){for(var e=0;e<this.length;e++){var t=this[e],n=t.selector,a=t.properties;r.selector(n);for(var i=0;i<a.length;i++){var o=a[i];r.css(o.name,o.value)}}return r};var iS="3.29.2",Dn=function(e){if(e===void 0&&(e={}),Tt(e))return new Ao(e);if(Ze(e))return yf.apply(yf,arguments)};Dn.use=function(r){var e=Array.prototype.slice.call(arguments,1);return e.unshift(Dn),r.apply(null,e),this};Dn.warnings=function(r){return jh(r)};Dn.version=iS;Dn.stylesheet=Dn.Stylesheet=gg;var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function oS(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pg={exports:{}};(function(r){(function(){var e=function(o,s){if(typeof s!="function")throw new TypeError("predicate must be a function");for(var l=o.length>>>0,u=arguments[1],f,c=0;c<l;c++)if(f=o[c],s.call(u,f,c,o))return f},t=function(){function o(s,l){var u=s.node,f=s.position,c=f===void 0?null:f,p=s.data,g=p===void 0?null:p;this.updateParams(l),this._node=u,this.initStyles(l.cssClass),g&&this.updateData(g),c&&this.updatePosition(c)}return o.prototype.updateParams=function(s){var l=s.tpl,u=l===void 0?function(){return""}:l;s.cssClass;var f=s.halign,c=f===void 0?"center":f,p=s.valign,g=p===void 0?"center":p,h=s.halignBox,m=h===void 0?"center":h,x=s.valignBox,w=x===void 0?"center":x,S={top:-.5,left:-.5,center:0,right:.5,bottom:.5};this._align=[S[c],S[g],100*(S[m]-.5),100*(S[w]-.5)],this.tpl=u},o.prototype.updateData=function(s){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);for(var l=new DOMParser().parseFromString(this.tpl(s),"text/html").body.children,u=0;u<l.length;++u){var f=l[u];this._node.appendChild(f)}},o.prototype.getNode=function(){return this._node},o.prototype.updatePosition=function(s){this._renderPosition(s)},o.prototype.initStyles=function(s){var l=this._node.style;l.position="absolute",s&&s.length&&this._node.classList.add(s)},o.prototype._renderPosition=function(s){var l=this._position,u=s.x+this._align[0]*s.w,f=s.y+this._align[1]*s.h;if(!l||l[0]!==u||l[1]!==f){this._position=[u,f];var c="translate("+this._align[2]+"%,"+this._align[3]+"%) ",p="translate("+u.toFixed(2)+"px,"+f.toFixed(2)+"px) ",g=c+p,h=this._node.style;h.webkitTransform=g,h.msTransform=g,h.transform=g}},o}(),n=function(){function o(s){this._node=s,this._elements={}}return o.prototype.addOrUpdateElem=function(s,l,u){u===void 0&&(u={});var f=this._elements[s];if(f)f.updateParams(l),f.updateData(u.data),f.updatePosition(u.position);else{var c=document.createElement("div");this._node.appendChild(c),this._elements[s]=new t({node:c,data:u.data,position:u.position},l)}},o.prototype.removeElemById=function(s){this._elements[s]&&(this._node.removeChild(this._elements[s].getNode()),delete this._elements[s])},o.prototype.updateElemPosition=function(s,l){var u=this._elements[s];u&&u.updatePosition(l)},o.prototype.updatePanZoom=function(s){var l=s.pan,u=s.zoom,f="translate("+l.x+"px,"+l.y+"px) scale("+u+")",c=this._node.style,p="top left";c.webkitTransform=f,c.msTransform=f,c.transform=f,c.webkitTransformOrigin=p,c.msTransformOrigin=p,c.transformOrigin=p},o}();function a(o,s,l){var u=!s||typeof s!="object"?[]:s,f=c();return o.one("render",function(C){p(C),S(C)}),o.on("add",g),o.on("layoutstop",h),o.on("remove",m),o.on("data",w),o.on("style",w),o.on("pan zoom",S),o.on("position bounds",x),o;function c(){var C=o.container(),E=document.createElement("div"),M=C.querySelector("canvas"),v=C.querySelector("[class^='cy-node-html']");v&&M.parentNode.removeChild(v);var T=E.style;return T.position="absolute",T["z-index"]=10,T.width="500px",T.margin="0px",T.padding="0px",T.border="0px",T.outline="0px",T.outline="0px",l&&l.enablePointerEvents!==!0&&(T["pointer-events"]="none"),M.parentNode.appendChild(E),new n(E)}function p(C){var E=C.cy;u.forEach(function(M){E.elements(M.query).forEach(function(v){v.isNode()&&f.addOrUpdateElem(v.id(),M,{position:y(v),data:v.data()})})})}function g(C){var E=C.target,M=e(u.slice().reverse(),function(v){return E.is(v.query)});M&&f.addOrUpdateElem(E.id(),M,{position:y(E),data:E.data()})}function h(C){var E=C.cy;u.forEach(function(M){E.elements(M.query).forEach(function(v){v.isNode()&&f.updateElemPosition(v.id(),y(v))})})}function m(C){f.removeElemById(C.target.id())}function x(C){f.updateElemPosition(C.target.id(),y(C.target))}function w(C){setTimeout(function(){var E=C.target,M=e(u.slice().reverse(),function(v){return E.is(v.query)});M&&!E.removed()?f.addOrUpdateElem(E.id(),M,{position:y(E),data:E.data()}):f.removeElemById(E.id())},0)}function S(C){var E=C.cy;f.updatePanZoom({pan:E.pan(),zoom:E.zoom()})}function y(C){return{w:C.width(),h:C.height(),x:C.position("x"),y:C.position("y")}}}var i=function(o){!o||o("core","nodeHtmlLabel",function(s,l){return a(this,s,l)})};r.exports&&(r.exports=function(o){i(o)}),typeof cytoscape<"u"&&i(cytoscape)})()})(pg);var sS=pg.exports,yg={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={347:(a,i,o)=>{var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l=o(218),u=o(259),f=o(171),c=o(961),p=0;a.exports=function(g,h){var m=g;u.options=g;var x,w,S,y,C,E,M,v,T,k,N,O,I,q,B,j,Y,U,X,K="cy-edge-bend-editing-cxt-add-bend-point"+p,P="cy-edge-bend-editing-cxt-remove-bend-point"+p,D="cy-edge-bend-editing-cxt-remove-multiple-bend-point"+p,L="cy-edge-control-editing-cxt-add-control-point"+p,F="cy-edge-control-editing-cxt-remove-control-point"+p,W="cy-edge-bend-editing-cxt-remove-multiple-control-point"+p,Z=null,J=null,Q=!1,oe={init:function(){c(h,u,g);var fe=g,ce=$(this),Ce="cy-node-edge-editing-stage"+p;p++;var Le,Re,De=$('<div id="'+Ce+'"></div>');ce.find("#"+Ce).length<1&&ce.append(De),(Le=Konva.stages.length<p?new Konva.Stage({id:"node-edge-editing-stage",container:Ce,width:ce.width(),height:ce.height()}):Konva.stages[p-1]).getChildren().length<1?(Re=new Konva.Layer,Le.add(Re)):Re=Le.getChildren()[0];var me={edge:void 0,edgeType:"none",anchors:[],touchedAnchor:void 0,touchedAnchorIndex:void 0,bindListeners:function(Ae){Ae.on("mousedown touchstart",this.eMouseDown)},unbindListeners:function(Ae){Ae.off("mousedown touchstart",this.eMouseDown)},eMouseDown:function(Ae){h.autounselectify(!1),Q=!0,me.touchedAnchor=Ae.target,X=!1,me.edge.unselect();var pe=u.syntax[me.edgeType].weight,Oe=u.syntax[me.edgeType].distance,je=me.edge;ht={edge:je,type:me.edgeType,weights:je.data(pe)?[].concat(je.data(pe)):[],distances:je.data(Oe)?[].concat(je.data(Oe)):[]},Y=h.style()._private.coreStyle["active-bg-opacity"]?h.style()._private.coreStyle["active-bg-opacity"].value:.15,h.style().selector("core").style("active-bg-opacity",0).update(),ze(),h.autoungrabify(!0),Re.getStage().on("contentTouchend contentMouseup",me.eMouseUp),Re.getStage().on("contentMouseout",me.eMouseOut)},eMouseUp:function(Ae){Q=!1,me.touchedAnchor=void 0,X=!1,me.edge.select(),h.style().selector("core").style("active-bg-opacity",Y).update(),Ie(),h.autounselectify(!0),h.autoungrabify(!1),Re.getStage().off("contentTouchend contentMouseup",me.eMouseUp),Re.getStage().off("contentMouseout",me.eMouseOut)},eMouseOut:function(Ae){X=!0},clearAnchorsExcept:function(){var Ae=this,pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,Oe=!1;this.anchors.forEach(function(je,nt){pe&&je===pe?Oe=!0:(Ae.unbindListeners(je),je.destroy())}),Oe?this.anchors=[pe]:(this.anchors=[],this.edge=void 0,this.edgeType="none")},renderAnchorShapes:function(Ae){if(this.edge=Ae,this.edgeType=u.getEdgeType(Ae),Ae.hasClass("edgebendediting-hasbendpoints")||Ae.hasClass("edgecontrolediting-hascontrolpoints")){for(var pe=u.getAnchorsAsArray(Ae),Oe=.65*ue(Ae),je=(Ae.source().position(),Ae.target().position(),0);pe&&je<pe.length;je+=2){var nt=pe[je],Je=pe[je+1];this.renderAnchorShape(nt,Je,Oe)}Re.draw()}},renderAnchorShape:function(Ae,pe,Oe){var je=ie({x:Ae-Oe/2,y:pe-Oe/2});Oe*=h.zoom();var nt=new Konva.Rect({x:je.x,y:je.y,width:Oe,height:Oe,fill:"black",strokeWidth:0,draggable:!0});this.anchors.push(nt),this.bindListeners(nt),Re.add(nt)}},_e=function(Ae,pe){var Oe=Ae.target||Ae.cyTarget;if(!u.isIgnoredEdge(Oe)){var je,nt,Je,Ct,Jt=u.getEdgeType(Oe);Jt==="none"?(je=[],nt=[]):(Je=u.syntax[Jt].weight,Ct=u.syntax[Jt].distance,je=Oe.data(Je)?[].concat(Oe.data(Je)):Oe.data(Je),nt=Oe.data(Ct)?[].concat(Oe.data(Ct)):Oe.data(Ct));var Yt={edge:Oe,type:Jt,weights:je,distances:nt};u.addAnchorPoint(void 0,void 0,pe),te().undoable&&h.undoRedo().do("changeAnchorPoints",Yt)}ge(),Oe.select()},we=function(Ae){var pe=me.edge,Oe=u.getEdgeType(pe);if(!u.edgeTypeNoneShouldntHappen(Oe,"UiUtilities.js, cxtRemoveAnchorFcn")){var je={edge:pe,type:Oe,weights:[].concat(pe.data(u.syntax[Oe].weight)),distances:[].concat(pe.data(u.syntax[Oe].distance))};u.removeAnchor(),te().undoable&&h.undoRedo().do("changeAnchorPoints",je),setTimeout(function(){ge(),pe.select()},50)}},xe=function(Ae){var pe=me.edge,Oe=u.getEdgeType(pe),je={edge:pe,type:Oe,weights:[].concat(pe.data(u.syntax[Oe].weight)),distances:[].concat(pe.data(u.syntax[Oe].distance))};u.removeAllAnchors(),te().undoable&&h.undoRedo().do("changeAnchorPoints",je),setTimeout(function(){ge(),pe.select()},50)},Be=fe.handleReconnectEdge,Ue=fe.validateEdge,Ee=fe.actOnUnsuccessfulReconnection,Me=[{id:K,content:fe.addBendMenuItemTitle,selector:"edge",onClickFunction:function(Ae){_e(Ae,"bend")},hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:P,content:fe.removeBendMenuItemTitle,selector:"edge",onClickFunction:we,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:D,content:fe.removeAllBendMenuItemTitle,selector:fe.enableMultipleAnchorRemovalOption&&":selected.edgebendediting-hasmultiplebendpoints",onClickFunction:xe,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:L,content:fe.addControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:function(Ae){_e(Ae,"control")},hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:F,content:fe.removeControlMenuItemTitle,selector:"edge",coreAsWell:!0,onClickFunction:we,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions},{id:W,content:fe.removeAllControlMenuItemTitle,selector:fe.enableMultipleAnchorRemovalOption&&":selected.edgecontrolediting-hasmultiplecontrolpoints",onClickFunction:xe,hasTrailingDivider:fe.useTrailingDividersAfterContextMenuOptions}];if(h.contextMenus){var ke=h.contextMenus("get");ke.isActive()?ke.appendMenuItems(Me):h.contextMenus({menuItems:Me})}var de=l(function(){De.attr("height",ce.height()).attr("width",ce.width()).css({position:"absolute",top:0,left:0,"z-index":te().zIndex}),setTimeout(function(){var Ae=De.offset(),pe=ce.offset();De.css({top:-(Ae.top-pe.top),left:-(Ae.left-pe.left)}),Re.getStage().setWidth(ce.width()),Re.getStage().setHeight(ce.height()),h&&ge()},0)},250);function R(){de()}R(),$(window).bind("resize",function(){R()});var G,re=ce.data("cyedgeediting");function te(){return G||(G=ce.data("cyedgeediting").options)}function ie(Ae){var pe=h.pan(),Oe=h.zoom();return{x:Ae.x*Oe+pe.x,y:Ae.y*Oe+pe.y}}function ge(){me.clearAnchorsExcept(me.touchedAnchor),Z!==null&&(Z.destroy(),Z=null),J!==null&&(J.destroy(),J=null),Re.draw(),U&&(me.renderAnchorShapes(U),function(Ae){if(Ae){var pe=u.getAnchorsAsArray(Ae);pe===void 0&&(pe=[]);var Oe=Ae.sourceEndpoint(),je=Ae.targetEndpoint();if(Oe.x&&je.x&&(pe.unshift(Oe.y),pe.unshift(Oe.x),pe.push(je.x),pe.push(je.y),pe)){var nt={x:pe[0],y:pe[1]},Je={x:pe[pe.length-2],y:pe[pe.length-1]},Ct={x:pe[2],y:pe[3]},Jt={x:pe[pe.length-4],y:pe[pe.length-3]};(function(Yt,Wt,pt,er,qr){var Cr=Wt.x-pt/2,Hr=Wt.y-pt/2,Ur=er.x-pt/2,sn=er.y-pt/2,fr=qr.x-pt/2,mn=qr.y-pt/2,zr=ie({x:Yt.x-pt/2,y:Yt.y-pt/2}),Mr=ie({x:Cr,y:Hr});pt=pt*h.zoom()/2;var Rt=ie({x:Ur,y:sn}),Jr=ie({x:fr,y:mn}),na=pt,Gn=Math.sqrt(Math.pow(Rt.x-zr.x,2)+Math.pow(Rt.y-zr.y,2)),aa=zr.x+na/Gn*(Rt.x-zr.x),Wr=zr.y+na/Gn*(Rt.y-zr.y),ka=Math.sqrt(Math.pow(Jr.x-Mr.x,2)+Math.pow(Jr.y-Mr.y,2)),mr=Mr.x+na/ka*(Jr.x-Mr.x),bn=Mr.y+na/ka*(Jr.y-Mr.y);Z===null&&(Z=new Konva.Circle({x:aa+pt,y:Wr+pt,radius:pt,fill:"black"})),J===null&&(J=new Konva.Circle({x:mr+pt,y:bn+pt,radius:pt,fill:"black"})),Re.add(Z),Re.add(J),Re.draw()})(nt,Je,.65*ue(Ae),Ct,Jt)}}}(U))}function ue(Ae){var pe=te().anchorShapeSizeFactor;return parseFloat(Ae.css("width"))<=2.5?2.5*pe:parseFloat(Ae.css("width"))*pe}function Se(Ae,pe,Oe,je,nt){return Ae>=je-Oe/2&&Ae<=je+Oe/2&&pe>=nt-Oe/2&&pe<=nt+Oe/2}function Fe(Ae,pe,Oe){var je=u.getEdgeType(Oe);if(je==="none"||Oe.data(u.syntax[je].weight)==null||Oe.data(u.syntax[je].weight).length==0)return-1;for(var nt=u.getAnchorsAsArray(Oe),Je=ue(Oe),Ct=0;nt&&Ct<nt.length;Ct+=2)if(Se(Ae,pe,Je,nt[Ct],nt[Ct+1]))return Ct/2;return-1}function ze(){q=h.panningEnabled(),B=h.zoomingEnabled(),j=h.boxSelectionEnabled(),h.zoomingEnabled(!1).panningEnabled(!1).boxSelectionEnabled(!1)}function Ie(){h.zoomingEnabled(B).panningEnabled(q).boxSelectionEnabled(j)}re==null&&(re={}),re.options=fe;var et=l(function(Ae,pe,Oe,je){var nt=Ae.data(u.syntax[pe].weight),Je=Ae.data(u.syntax[pe].distance),Ct=u.convertToRelativePosition(Ae,je);nt[Oe]=Ct.weight,Je[Oe]=Ct.distance,Ae.data(u.syntax[pe].weight,nt),Ae.data(u.syntax[pe].distance,Je)},5);q=h.panningEnabled(),B=h.zoomingEnabled(),j=h.boxSelectionEnabled();var $e,We,ft,ht,Nt,vt,Ot,zt,gt,st=(jt=h.edges(":selected")).length;st===1&&(U=jt[0]),h.bind("zoom pan",y=function(){U&&ge()}),h.on("data","edge",I=function(){U&&ge()}),h.on("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",x=function(){setTimeout(function(){ge()},50)}),h.on("remove","edge",w=function(){if(this.selected()){if(st-=1,h.startBatch(),U&&U.removeClass("cy-edge-editing-highlight"),st===1){var Ae=h.edges(":selected");Ae.length===1?(U=Ae[0]).addClass("cy-edge-editing-highlight"):U=void 0}else U=void 0;h.endBatch()}ge()}),h.on("add","edge",S=function(){this.selected()&&(st+=1,h.startBatch(),U&&U.removeClass("cy-edge-editing-highlight"),st===1?(U=this).addClass("cy-edge-editing-highlight"):U=void 0,h.endBatch()),ge()}),h.on("select","edge",C=function(){var Ae=this;Ae.target().connectedEdges().length!=0&&Ae.source().connectedEdges().length!=0&&(st+=1,h.startBatch(),U&&U.removeClass("cy-edge-editing-highlight"),st===1?(U=Ae).addClass("cy-edge-editing-highlight"):U=void 0,h.endBatch(),ge())}),h.on("unselect","edge",E=function(){if(st-=1,h.startBatch(),U&&U.removeClass("cy-edge-editing-highlight"),st===1){var Ae=h.edges(":selected");Ae.length===1?(U=Ae[0]).addClass("cy-edge-editing-highlight"):U=void 0}else U=void 0;h.endBatch(),ge()});var Qt,yr,ur,xr,jt,Zt=!1;h.on("tapstart",M=function(Ae){We=Ae.position||Ae.cyPosition}),h.on("tapstart","edge",v=function(Ae){var pe=this;if(U&&U.id()===pe.id()){ft=pe,u.getEdgeType(pe);var Oe=function(Je,Ct,Jt){var Yt=ue(Jt),Wt=Jt._private.rscratch.allpts,pt={x:Wt[0],y:Wt[1]},er={x:Wt[Wt.length-2],y:Wt[Wt.length-1]};return ie(pt),ie(er),Se(Je,Ct,Yt,pt.x,pt.y)?0:Se(Je,Ct,Yt,er.x,er.y)?1:-1}(We.x,We.y,pe);if(Oe==0||Oe==1){pe.unselect(),vt=Oe,zt=Oe==0?ft.source():ft.target();var je=Oe==0?"source":"target",nt=f.disconnectEdge(ft,h,Ae.renderedPosition,je);Ot=nt.dummyNode,ft=nt.edge,ze()}else $e=void 0,Nt=!0}else Nt=!1}),h.on("drag","node",O=function(){U&&ge()}),h.on("tapdrag",T=function(Ae){h.edges(":selected").length>0&&h.autounselectify(!1);var pe=ft;if(ft===void 0||!u.isIgnoredEdge(pe)){var Oe=u.getEdgeType(pe);if(Nt&&fe.enableCreateAnchorOnDrag&&!Q&&Oe!=="none"){var je=u.syntax[Oe].weight,nt=u.syntax[Oe].distance;ht={edge:pe,type:Oe,weights:pe.data(je)?[].concat(pe.data(je)):[],distances:pe.data(nt)?[].concat(pe.data(nt)):[]},pe.unselect(),$e=u.addAnchorPoint(pe,We),ft=pe,Nt=void 0,Zt=!0,ze()}if(Q||ft!==void 0&&($e!==void 0||vt!==void 0)){var Je=Ae.position||Ae.cyPosition;vt!=-1&&Ot?Ot.position(Je):$e!=null?et(pe,Oe,$e,Je):Q&&(me.touchedAnchorIndex===void 0&&We&&(me.touchedAnchorIndex=Fe(We.x,We.y,me.edge)),me.touchedAnchorIndex!==void 0&&et(me.edge,me.edgeType,me.touchedAnchorIndex,Je)),Ae.target&&Ae.target[0]&&Ae.target.isNode()&&(gt=Ae.target)}}}),h.on("tapend",k=function(Ae){X&&Re.getStage().fire("contentMouseup");var pe=ft||me.edge;if(pe!==void 0){var Oe=me.touchedAnchorIndex;if(Oe!=null){var je,nt=pe.source().position("x"),Je=pe.source().position("y"),Ct=pe.target().position("x"),Jt=pe.target().position("y"),Yt=u.getAnchorsAsArray(pe),Wt=[nt,Je].concat(Yt).concat([Ct,Jt]),pt=Oe+1,er=pt-1,qr=pt+1,Cr={x:Wt[2*pt],y:Wt[2*pt+1]},Hr={x:Wt[2*er],y:Wt[2*er+1]},Ur={x:Wt[2*qr],y:Wt[2*qr+1]};if(Cr.x===Hr.x&&Cr.y===Hr.y||Cr.x===Hr.x&&Cr.y===Hr.y)je=!0;else{var sn,fr=(Hr.y-Ur.y)/(Hr.x-Ur.x),mn={srcPoint:Hr,tgtPoint:Ur,m1:fr,m2:-1/fr},zr=u.getIntersection(pe,Cr,mn),Mr=Math.sqrt(Math.pow(Cr.x-zr.x,2)+Math.pow(Cr.y-zr.y,2));(sn=u.getEdgeType(pe))==="bend"&&Mr<te().bendRemovalSensitivity&&(je=!0)}je&&u.removeAnchor(pe,Oe)}else if(Ot!=null&&(vt==0||vt==1)){var Rt=zt,Jr="valid",na=vt==0?"source":"target";if(gt){var Gn=vt==0?gt:pe.source(),aa=vt==1?gt:pe.target();typeof Ue=="function"&&(Jr=Ue(pe,Gn,aa)),Rt=Jr==="valid"?gt:zt}if(Gn=vt==0?Rt:pe.source(),aa=vt==1?Rt:pe.target(),pe=f.connectEdge(pe,zt,na),zt.id()!==Rt.id())if(typeof Be=="function"){var Wr=Be(Gn.id(),aa.id(),pe.data());if(Wr&&(f.copyEdge(pe,Wr),u.initAnchorPoints(te().bendPositionsFunction,te().controlPositionsFunction,[Wr])),Wr&&te().undoable){var ka={newEdge:Wr,oldEdge:pe};h.undoRedo().do("removeReconnectedEdge",ka),pe=Wr}else Wr&&(h.remove(pe),pe=Wr)}else{var mr=vt==0?{source:Rt.id()}:{target:Rt.id()},bn=vt==0?{source:zt.id()}:{target:zt.id()};if(te().undoable&&Rt.id()!==zt.id()){var ai={edge:pe,location:mr,oldLoc:bn};pe=h.undoRedo().do("reconnectEdge",ai).edge}}Jr!=="valid"&&typeof Ee=="function"&&Ee(),pe.select(),h.remove(Ot)}}(sn=u.getEdgeType(pe))==="none"&&(sn="bend"),me.touchedAnchorIndex!==void 0||Zt||(ht=void 0);var Wo=u.syntax[sn].weight;pe!==void 0&&ht!==void 0&&(pe.data(Wo)?pe.data(Wo).toString():null)!=ht.weights.toString()&&(Zt&&(pe.select(),h.autounselectify(!0)),te().undoable&&h.undoRedo().do("changeAnchorPoints",ht)),$e=void 0,ft=void 0,ht=void 0,Nt=void 0,vt=void 0,Ot=void 0,zt=void 0,gt=void 0,We=void 0,Zt=!1,me.touchedAnchorIndex=void 0,Ie(),setTimeout(function(){ge()},50)}),h.on("edgeediting.movestart",function(Ae,pe){xr=!1,pe[0]!=null&&pe.forEach(function(Oe){u.getAnchorsAsArray(Oe)==null||xr||(yr={x:u.getAnchorsAsArray(Oe)[0],y:u.getAnchorsAsArray(Oe)[1]},Qt={firstTime:!0,firstAnchorPosition:{x:yr.x,y:yr.y},edges:pe},ur=Oe,xr=!0)})}),h.on("edgeediting.moveend",function(Ae,pe){if(Qt!=null){var Oe=Qt.firstAnchorPosition,je={x:u.getAnchorsAsArray(ur)[0],y:u.getAnchorsAsArray(ur)[1]};Qt.positionDiff={x:-je.x+Oe.x,y:-je.y+Oe.y},delete Qt.firstAnchorPosition,te().undoable&&h.undoRedo().do("moveAnchorPoints",Qt),Qt=void 0}}),h.on("cxttap",N=function(Ae){var pe,Oe,je=Ae.target||Ae.cyTarget,nt=!1;try{nt=je.isEdge()}catch{}nt?(pe=je,Oe=u.getEdgeType(pe)):(pe=me.edge,Oe=me.edgeType);var Je=h.contextMenus("get");if(!U||U.id()!=pe.id()||u.isIgnoredEdge(pe)||U!==pe)return Je.hideMenuItem(P),Je.hideMenuItem(K),Je.hideMenuItem(F),void Je.hideMenuItem(L);var Ct=Ae.position||Ae.cyPosition,Jt=Fe(Ct.x,Ct.y,pe);Jt==-1?(Je.hideMenuItem(P),Je.hideMenuItem(F),Oe==="control"&&nt?(Je.showMenuItem(L),Je.hideMenuItem(K)):Oe==="bend"&&nt?(Je.showMenuItem(K),Je.hideMenuItem(L)):nt?(Je.showMenuItem(K),Je.showMenuItem(L)):(Je.hideMenuItem(K),Je.hideMenuItem(L)),u.currentCtxPos=Ct):(Je.hideMenuItem(K),Je.hideMenuItem(L),Oe==="control"?(Je.showMenuItem(F),Je.hideMenuItem(P),fe.enableMultipleAnchorRemovalOption&&pe.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&Je.showMenuItem(W)):Oe==="bend"?(Je.showMenuItem(P),Je.hideMenuItem(F)):(Je.hideMenuItem(P),Je.hideMenuItem(F),Je.hideMenuItem(W)),u.currentAnchorIndex=Jt),u.currentCtxEdge=pe}),h.on("cyedgeediting.changeAnchorPoints","edge",function(){h.startBatch(),h.edges().unselect(),h.trigger("bendPointMovement"),h.endBatch(),ge()});var Gt=!1,At={37:!1,38:!1,39:!1,40:!1};document.addEventListener("keydown",function(Ae){if(typeof te().moveSelectedAnchorsOnKeyEvents=="function"?te().moveSelectedAnchorsOnKeyEvents():te().moveSelectedAnchorsOnKeyEvents){var pe,Oe,je=document.activeElement.tagName;if(je!="TEXTAREA"&&je!="INPUT"){switch(Ae.keyCode){case 37:case 39:case 38:case 40:case 32:Ae.preventDefault()}if(Ae.keyCode<"37"||Ae.keyCode>"40"||(At[Ae.keyCode]=!0,h.edges(":selected").length!=h.elements(":selected").length||h.edges(":selected").length!=1))return;Gt||(jt=h.edges(":selected"),h.trigger("edgeediting.movestart",[jt]),Gt=!0);var nt=3;if(Ae.altKey&&Ae.shiftKey)return;Ae.altKey?nt=1:Ae.shiftKey&&(nt=10);var Je=0,Ct=0;Je+=At[39]?nt:0,Je-=At[37]?nt:0,Ct+=At[40]?nt:0,Ct-=At[38]?nt:0,pe={x:Je,y:Ct},(Oe=jt).forEach(function(Jt){var Yt=u.getAnchorsAsArray(Jt),Wt=[];if(Yt!=null){for(var pt=0;pt<Yt.length;pt+=2)Wt.push({x:Yt[pt]+pe.x,y:Yt[pt+1]+pe.y});var er=u.getEdgeType(Jt);if(u.edgeTypeNoneShouldntHappen(er,"UiUtilities.js, moveAnchorPoints"))return;er==="bend"?g.bendPointPositionsSetterFunction(Jt,Wt):er==="control"&&g.controlPointPositionsSetterFunction(Jt,Wt)}}),u.initAnchorPoints(te().bendPositionsFunction,te().controlPositionsFunction,Oe),h.trigger("bendPointMovement")}}},!0),document.addEventListener("keyup",function(Ae){Ae.keyCode<"37"||Ae.keyCode>"40"||(Ae.preventDefault(),At[Ae.keyCode]=!1,(typeof te().moveSelectedAnchorsOnKeyEvents=="function"?te().moveSelectedAnchorsOnKeyEvents():te().moveSelectedAnchorsOnKeyEvents)&&(h.trigger("edgeediting.moveend",[jt]),jt=void 0,Gt=!1))},!0),ce.data("cyedgeediting",re)},unbind:function(){h.off("remove","node",w).off("add","node",S).off("style","edge.edgebendediting-hasbendpoints:selected, edge.edgecontrolediting-hascontrolpoints:selected",x).off("select","edge",C).off("unselect","edge",E).off("tapstart",M).off("tapstart","edge",v).off("tapdrag",T).off("tapend",k).off("cxttap",N).off("drag","node",O).off("data","edge",I),h.unbind("zoom pan",y)}};return oe[m]?oe[m].apply($(h.container()),Array.prototype.slice.call(arguments,1)):(m===void 0?"undefined":s(m))!="object"&&m?($.error("No such function `"+m+"` for cytoscape.js-edge-editing"),$(this)):oe.init.apply($(h.container()),arguments)}},259:a=>{var i={options:void 0,currentCtxEdge:void 0,currentCtxPos:void 0,currentAnchorIndex:void 0,ignoredClasses:void 0,setIgnoredClasses:function(o){this.ignoredClasses=o},syntax:{bend:{edge:"segments",class:"edgebendediting-hasbendpoints",multiClass:"edgebendediting-hasmultiplebendpoints",weight:"cyedgebendeditingWeights",distance:"cyedgebendeditingDistances",weightCss:"segment-weights",distanceCss:"segment-distances"},control:{edge:"unbundled-bezier",class:"edgecontrolediting-hascontrolpoints",multiClass:"edgecontrolediting-hasmultiplecontrolpoints",weight:"cyedgecontroleditingWeights",distance:"cyedgecontroleditingDistances",weightCss:"control-point-weights",distanceCss:"control-point-distances"}},getEdgeType:function(o){return o?o.hasClass(this.syntax.bend.class)?"bend":o.hasClass(this.syntax.control.class)?"control":o.css("curve-style")===this.syntax.bend.edge?"bend":o.css("curve-style")===this.syntax.control.edge?"control":this.options.bendPositionsFunction(o)&&this.options.bendPositionsFunction(o).length>0?"bend":this.options.controlPositionsFunction(o)&&this.options.controlPositionsFunction(o).length>0?"control":"none":"none"},initAnchorPoints:function(o,s,l){for(var u=0;u<l.length;u++){var f=l[u],c=this.getEdgeType(f);if(c!=="none"&&!this.isIgnoredEdge(f)){var p;c==="bend"?p=o.apply(this,f):c==="control"&&(p=s.apply(this,f));var g={weights:[],distances:[]};if(p)g=this.convertToRelativePositions(f,p);else{var h=f.data(this.syntax[c].weight),m=f.data(this.syntax[c].distance);h&&m&&(g={weights:h,distances:m})}g.distances.length>0?(f.data(this.syntax[c].weight,g.weights),f.data(this.syntax[c].distance,g.distances),f.addClass(this.syntax[c].class),g.distances.length>1&&f.addClass(this.syntax[c].multiClass)):(f.data(this.syntax[c].weight,[]),f.data(this.syntax[c].distance,[]),f.hasClass(this.syntax[c].class)&&f.removeClass(this.syntax[c].class),f.hasClass(this.syntax[c].multiClass)&&f.removeClass(this.syntax[c].multiClass))}}},isIgnoredEdge:function(o){var s=o.source().position("x"),l=o.source().position("y"),u=o.target().position("x"),f=o.target().position("y");if(s==u&&l==f||o.source().id()==o.target().id())return!0;for(var c=0;this.ignoredClasses&&c<this.ignoredClasses.length;c++)if(o.hasClass(this.ignoredClasses[c]))return!0;return!1},getLineDirection:function(o,s){return o.y==s.y&&o.x<s.x?1:o.y<s.y&&o.x<s.x?2:o.y<s.y&&o.x==s.x?3:o.y<s.y&&o.x>s.x?4:o.y==s.y&&o.x>s.x?5:o.y>s.y&&o.x>s.x?6:o.y>s.y&&o.x==s.x?7:8},getSrcTgtPointsAndTangents:function(o){var s=o.source(),l=o.target(),u=(l.position(),s.position(),s.position()),f=l.position(),c=(f.y-u.y)/(f.x-u.x);return{m1:c,m2:-1/c,srcPoint:u,tgtPoint:f}},getIntersection:function(o,s,l){l===void 0&&(l=this.getSrcTgtPointsAndTangents(o));var u,f,c=l.srcPoint,p=(l.tgtPoint,l.m1),g=l.m2;if(p==1/0||p==-1/0)u=c.x,f=s.y;else if(p==0)u=s.x,f=c.y;else{var h=c.y-p*c.x;f=p*(u=(s.y-g*s.x-h)/(p-g))+h}return{x:u,y:f}},getAnchorsAsArray:function(o){var s=this.getEdgeType(o);if(s!=="none"&&o.css("curve-style")===this.syntax[s].edge){for(var l=[],u=o.pstyle(this.syntax[s].weightCss)?o.pstyle(this.syntax[s].weightCss).pfValue:[],f=o.pstyle(this.syntax[s].distanceCss)?o.pstyle(this.syntax[s].distanceCss).pfValue:[],c=Math.min(u.length,f.length),p=o.source().position(),g=o.target().position(),h=g.y-p.y,m=g.x-p.x,x=Math.sqrt(m*m+h*h),w={x:m/x,y:h/x},S=-w.y,y=w.x,C=0;C<c;C++){var E=u[C],M=f[C],v=1-E,T=E,k={x1:p.x,x2:g.x,y1:p.y,y2:g.y},N={x:k.x1*v+k.x2*T,y:k.y1*v+k.y2*T};l.push(N.x+S*M,N.y+y*M)}return l}},convertToRelativePosition:function(o,s,l){l===void 0&&(l=this.getSrcTgtPointsAndTangents(o));var u,f=this.getIntersection(o,s,l),c=f.x,p=f.y,g=l.srcPoint,h=l.tgtPoint;u=c!=g.x?(c-g.x)/(h.x-g.x):p!=g.y?(p-g.y)/(h.y-g.y):0;var m=Math.sqrt(Math.pow(p-s.y,2)+Math.pow(c-s.x,2)),x=this.getLineDirection(g,h),w=this.getLineDirection(f,s);return x-w!=-2&&x-w!=6&&m!=0&&(m*=-1),{weight:u,distance:m}},convertToRelativePositions:function(o,s){for(var l=this.getSrcTgtPointsAndTangents(o),u=[],f=[],c=0;s&&c<s.length;c++){var p=s[c],g=this.convertToRelativePosition(o,p,l);u.push(g.weight),f.push(g.distance)}return{weights:u,distances:f}},getDistancesString:function(o,s){for(var l="",u=o.data(this.syntax[s].distance),f=0;u&&f<u.length;f++)l=l+" "+u[f];return l},getWeightsString:function(o,s){for(var l="",u=o.data(this.syntax[s].weight),f=0;u&&f<u.length;f++)l=l+" "+u[f];return l},addAnchorPoint:function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentCtxPos),l===void 0&&(l=this.getEdgeType(o));for(var u,f=this.syntax[l].weight,c=this.syntax[l].distance,p=this.convertToRelativePosition(o,s),g=p.weight,h=o.source().position("x"),m=o.source().position("y"),x=o.target().position("x"),w=o.target().position("y"),S=this.convertToRelativePosition(o,{x:h,y:m}).weight,y=this.convertToRelativePosition(o,{x,y:w}).weight,C=[S].concat(o.data(f)?o.data(f):[]).concat([y]),E=this.getAnchorsAsArray(o),M=1/0,v=[h,m].concat(E||[]).concat([x,w]),T=-1,k=0;k<C.length-1;k++){var N=C[k],O=C[k+1],I=this.compareWithPrecision(g,N,!0),q=this.compareWithPrecision(g,O),B=this.compareWithPrecision(g,O,!0),j=this.compareWithPrecision(g,N);if(I&&q||B&&j){var Y={x:h=v[2*k],y:m=v[2*k+1]},U={x:x=v[2*k+2],y:w=v[2*k+3]},X=(m-w)/(h-x),K=-1/X,P={srcPoint:Y,tgtPoint:U,m1:X,m2:K},D=this.getIntersection(o,s,P),L=Math.sqrt(Math.pow(s.x-D.x,2)+Math.pow(s.y-D.y,2));L<M&&(M=L,u=D,T=k)}}u!==void 0&&(s=u),p=this.convertToRelativePosition(o,s),u===void 0&&(p.distance=0);var F=o.data(f),W=o.data(c);return W=W||[],(F=F||[]).length===0&&(T=0),T!=-1&&(F.splice(T,0,p.weight),W.splice(T,0,p.distance)),o.data(f,F),o.data(c,W),o.addClass(this.syntax[l].class),(F.length>1||W.length>1)&&o.addClass(this.syntax[l].multiClass),T},removeAnchor:function(o,s){o!==void 0&&s!==void 0||(o=this.currentCtxEdge,s=this.currentAnchorIndex);var l=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(l,"anchorPointUtilities.js, removeAnchor")){var u,f=this.syntax[l].weight,c=this.syntax[l].distance,p=o.data(f),g=o.data(c);l==="bend"?u=this.options.bendPositionsFunction(o):l==="control"&&(u=this.options.controlPositionsFunction(o)),p.splice(s,1),g.splice(s,1),u&&u.splice(s,1),p.length==1||g.length==1?o.removeClass(this.syntax[l].multiClass):p.length==0||g.length==0?(o.removeClass(this.syntax[l].class),o.data(f,[]),o.data(c,[])):(o.data(f,p),o.data(c,g))}},removeAllAnchors:function(o){o===void 0&&(o=this.currentCtxEdge);var s=this.getEdgeType(o);if(!this.edgeTypeNoneShouldntHappen(s,"anchorPointUtilities.js, removeAllAnchors")){o.removeClass(this.syntax[s].class),o.removeClass(this.syntax[s].multiClass);var l=this.syntax[s].weight,u=this.syntax[s].distance;o.data(l,[]),o.data(u,[]),s==="bend"&&this.options.bendPositionsFunction(o)?this.options.bendPointPositionsSetterFunction(o,[]):s==="control"&&this.options.controlPositionsFunction(o)&&this.options.controlPointPositionsSetterFunction(o,[])}},calculateDistance:function(o,s){var l=o.x-s.x,u=o.y-s.y;return Math.sqrt(Math.pow(l,2)+Math.pow(u,2))},compareWithPrecision:function(o,s){var l=arguments.length>2&&arguments[2]!==void 0&&arguments[2],u=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.01,f=o-s;return Math.abs(f)<=u||(l?o<s:o>s)},edgeTypeNoneShouldntHappen:function(o,s){return o==="none"&&(console.log("In "+s+": edge type none should never happen here!!"),!0)}};a.exports=i},218:a=>{var i,o,s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},l=(i=Math.max,o=Date.now||function(){return new Date().getTime()},function(u,f,c){var p,g,h,m,x,w,S,y,C,E=0,M=!1,v=!0;if(typeof u!="function")throw new TypeError("Expected a function");if(f=f<0?0:+f||0,c===!0){var T=!0;v=!1}else C=(y=c)===void 0?"undefined":s(y),!y||C!="object"&&C!="function"||(T=!!c.leading,M="maxWait"in c&&i(+c.maxWait||0,f),v="trailing"in c?!!c.trailing:v);function k(q,B){B&&clearTimeout(B),g=w=S=void 0,q&&(E=o(),h=u.apply(x,p),w||g||(p=x=void 0))}function N(){var q=f-(o()-m);q<=0||q>f?k(S,g):w=setTimeout(N,q)}function O(){k(v,w)}function I(){if(p=arguments,m=o(),x=this,S=v&&(w||!T),M===!1)var q=T&&!w;else{g||T||(E=m);var B=M-(m-E),j=B<=0||B>M;j?(g&&(g=clearTimeout(g)),E=m,h=u.apply(x,p)):g||(g=setTimeout(O,B))}return j&&w?w=clearTimeout(w):w||f===M||(w=setTimeout(N,f)),q&&(j=!0,h=u.apply(x,p)),!j||w||g||(p=x=void 0),h}return I.cancel=function(){w&&clearTimeout(w),g&&clearTimeout(g),E=0,g=w=S=void 0},I});a.exports=l},579:(a,i,o)=>{var s,l,u;l=o(259),o(218),u=function(f,c,p){var g=o(347);if(f&&c&&p){var h,m={bendPositionsFunction:function(w){return w.data("bendPointPositions")},controlPositionsFunction:function(w){return w.data("controlPointPositions")},bendPointPositionsSetterFunction:function(w,S){w.data("bendPointPositions",S)},controlPointPositionsSetterFunction:function(w,S){w.data("controlPointPositions",S)},initAnchorsAutomatically:!0,ignoredClasses:[],undoable:!1,anchorShapeSizeFactor:3,zIndex:999,bendRemovalSensitivity:8,addBendMenuItemTitle:"Add Bend Point",removeBendMenuItemTitle:"Remove Bend Point",removeAllBendMenuItemTitle:"Remove All Bend Points",addControlMenuItemTitle:"Add Control Point",removeControlMenuItemTitle:"Remove Control Point",removeAllControlMenuItemTitle:"Remove All Control Points",moveSelectedAnchorsOnKeyEvents:function(){return!0},enableMultipleAnchorRemovalOption:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!0},x=!1;f("core","edgeEditing",function(w){var S=this;return w==="initialized"?x:(w!=="get"&&(h=function(y,C){var E={};for(var M in y)E[M]=y[M];for(var M in C)if(M=="bendRemovalSensitivity"){var v=C[M];isNaN(v)||(E[M]=v>=0&&v<=20?C[M]:v<0?0:20)}else E[M]=C[M];return E}(m,w),x=!0,S.style().selector(".edgebendediting-hasbendpoints").css({"curve-style":"segments","segment-distances":function(y){return l.getDistancesString(y,"bend")},"segment-weights":function(y){return l.getWeightsString(y,"bend")},"edge-distances":"node-position"}),S.style().selector(".edgecontrolediting-hascontrolpoints").css({"curve-style":"unbundled-bezier","control-point-distances":function(y){return l.getDistancesString(y,"control")},"control-point-weights":function(y){return l.getWeightsString(y,"control")},"edge-distances":"node-position"}),S.style().selector("#nwt_reconnectEdge_dummy").css({width:"1",height:"1",visibility:"hidden"}),l.setIgnoredClasses(h.ignoredClasses),h.initAnchorsAutomatically&&l.initAnchorPoints(h.bendPositionsFunction,h.controlPositionsFunction,S.edges(),h.ignoredClasses),g(h,S)),x?{getAnchorsAsArray:function(y){return l.getAnchorsAsArray(y)},initAnchorPoints:function(y){l.initAnchorPoints(h.bendPositionsFunction,h.controlPositionsFunction,y)},deleteSelectedAnchor:function(y,C){l.removeAnchor(y,C)},getEdgeType:function(y){return l.getEdgeType(y)}}:void 0)})}},a.exports&&(a.exports=u),(s=function(){return u}.call(i,o,i,a))===void 0||(a.exports=s),typeof cytoscape<"u"&&$&&Konva&&u(cytoscape,$,Konva)},171:a=>{a.exports={disconnectEdge:function(i,o,s,l){var u={data:{id:"nwt_reconnectEdge_dummy",ports:[]},renderedPosition:s};o.add(u);var f=l==="source"?{source:u.data.id}:{target:u.data.id};return i=i.move(f)[0],{dummyNode:o.nodes("#"+u.data.id)[0],edge:i}},connectEdge:function(i,o,s){if(i.isEdge()&&o.isNode()){var l={};if(s==="source")l.source=o.id();else{if(s!=="target")return;l.target=o.id()}return i.move(l)[0]}},copyEdge:function(i,o){this.copyAnchors(i,o),this.copyStyle(i,o)},copyStyle:function(i,o){i&&o&&(o.data("line-color",i.data("line-color")),o.data("width",i.data("width")),o.data("cardinality",i.data("cardinality")))},copyAnchors:function(i,o){if(i.hasClass("edgebendediting-hasbendpoints")){var s=i.data("cyedgebendeditingDistances"),l=i.data("cyedgebendeditingWeights");o.data("cyedgebendeditingDistances",s),o.data("cyedgebendeditingWeights",l),o.addClass("edgebendediting-hasbendpoints")}else i.hasClass("edgecontrolediting-hascontrolpoints")&&(s=i.data("cyedgecontroleditingDistances"),l=i.data("cyedgecontroleditingWeights"),o.data("cyedgecontroleditingDistances",s),o.data("cyedgecontroleditingWeights",l),o.addClass("edgecontrolediting-hascontrolpoints"));i.hasClass("edgebendediting-hasmultiplebendpoints")?o.addClass("edgebendediting-hasmultiplebendpoints"):i.hasClass("edgecontrolediting-hasmultiplecontrolpoints")&&o.addClass("edgecontrolediting-hasmultiplecontrolpoints")}}},961:a=>{a.exports=function(i,o,s){if(i.undoRedo!=null){var l=i.undoRedo({defaultActions:!1,isDebug:!0});l.action("changeAnchorPoints",u,u),l.action("moveAnchorPoints",f,f),l.action("reconnectEdge",c,c),l.action("removeReconnectedEdge",p,p)}function u(g){var h,m,x,w,S=i.getElementById(g.edge.id()),y=g.type!=="none"?g.type:o.getEdgeType(S);g.type!=="none"||g.set?(x=o.syntax[y].weight,w=o.syntax[y].distance,h=g.set?S.data(x):g.weights,m=g.set?S.data(w):g.distances):(h=[],m=[]);var C={edge:S,type:y,weights:h,distances:m,set:!0};if(g.set){var E=g.weights&&g.weights.length>0,M=E&&g.weights.length>1;E&&(S.data(x,g.weights),S.data(w,g.distances));var v=o.syntax[y].class,T=o.syntax[y].multiClass;E||M?E&&!M?(S.addClass(v),S.removeClass(T)):S.addClass(v+" "+T):S.removeClass(v+" "+T),E||(S.data(x,[]),S.data(w,[])),S.selected()&&S.unselect(),S.select()}return S.trigger("cyedgeediting.changeAnchorPoints"),C}function f(g){if(g.firstTime)return delete g.firstTime,g;var h=g.edges,m=g.positionDiff,x={edges:h,positionDiff:{x:-m.x,y:-m.y}};return function(w,S){S.forEach(function(y){var C=o.getEdgeType(y),E=o.getAnchorsAsArray(y),M=[];if(E!=null){for(var v=0;v<E.length;v+=2)M.push({x:E[v]+w.x,y:E[v+1]+w.y});C==="bend"?s.bendPointPositionsSetterFunction(y,M):C==="control"&&s.controlPointPositionsSetterFunction(y,M)}}),o.initAnchorPoints(s.bendPositionsFunction,s.controlPositionsFunction,S)}(m,h),x}function c(g){var h=g.edge,m=g.location,x=g.oldLoc,w={edge:h=h.move(m)[0],location:x,oldLoc:m};return h.unselect(),w}function p(g){var h=g.oldEdge;(m=i.getElementById(h.data("id")))&&m.length>0&&(h=m);var m,x=g.newEdge;return(m=i.getElementById(x.data("id")))&&m.length>0&&(x=m),h.inside()&&(h=h.remove()[0]),x.removed()&&(x=x.restore()).unselect(),{oldEdge:x,newEdge:h}}}}},n={};return function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,a),s.exports}(579)})()})})(yg);var uS=yg.exports,mg={exports:{}};/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */(function(r){(function(e,t){r.exports=e.document?t(e,!0):function(n){if(!n.document)throw new Error("jQuery requires a window with a document");return t(n)}})(typeof window<"u"?window:Qe,function(e,t){var n=[],a=Object.getPrototypeOf,i=n.slice,o=n.flat?function(d){return n.flat.call(d)}:function(d){return n.concat.apply([],d)},s=n.push,l=n.indexOf,u={},f=u.toString,c=u.hasOwnProperty,p=c.toString,g=p.call(Object),h={},m=function(b){return typeof b=="function"&&typeof b.nodeType!="number"&&typeof b.item!="function"},x=function(b){return b!=null&&b===b.window},w=e.document,S={type:!0,src:!0,nonce:!0,noModule:!0};function y(d,b,_){_=_||w;var A,z,V=_.createElement("script");if(V.text=d,b)for(A in S)z=b[A]||b.getAttribute&&b.getAttribute(A),z&&V.setAttribute(A,z);_.head.appendChild(V).parentNode.removeChild(V)}function C(d){return d==null?d+"":typeof d=="object"||typeof d=="function"?u[f.call(d)]||"object":typeof d}var E="3.7.1",M=/HTML$/i,v=function(d,b){return new v.fn.init(d,b)};v.fn=v.prototype={jquery:E,constructor:v,length:0,toArray:function(){return i.call(this)},get:function(d){return d==null?i.call(this):d<0?this[d+this.length]:this[d]},pushStack:function(d){var b=v.merge(this.constructor(),d);return b.prevObject=this,b},each:function(d){return v.each(this,d)},map:function(d){return this.pushStack(v.map(this,function(b,_){return d.call(b,_,b)}))},slice:function(){return this.pushStack(i.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(v.grep(this,function(d,b){return(b+1)%2}))},odd:function(){return this.pushStack(v.grep(this,function(d,b){return b%2}))},eq:function(d){var b=this.length,_=+d+(d<0?b:0);return this.pushStack(_>=0&&_<b?[this[_]]:[])},end:function(){return this.prevObject||this.constructor()},push:s,sort:n.sort,splice:n.splice},v.extend=v.fn.extend=function(){var d,b,_,A,z,V,H=arguments[0]||{},ae=1,ne=arguments.length,le=!1;for(typeof H=="boolean"&&(le=H,H=arguments[ae]||{},ae++),typeof H!="object"&&!m(H)&&(H={}),ae===ne&&(H=this,ae--);ae<ne;ae++)if((d=arguments[ae])!=null)for(b in d)A=d[b],!(b==="__proto__"||H===A)&&(le&&A&&(v.isPlainObject(A)||(z=Array.isArray(A)))?(_=H[b],z&&!Array.isArray(_)?V=[]:!z&&!v.isPlainObject(_)?V={}:V=_,z=!1,H[b]=v.extend(le,V,A)):A!==void 0&&(H[b]=A));return H},v.extend({expando:"jQuery"+(E+Math.random()).replace(/\D/g,""),isReady:!0,error:function(d){throw new Error(d)},noop:function(){},isPlainObject:function(d){var b,_;return!d||f.call(d)!=="[object Object]"?!1:(b=a(d),b?(_=c.call(b,"constructor")&&b.constructor,typeof _=="function"&&p.call(_)===g):!0)},isEmptyObject:function(d){var b;for(b in d)return!1;return!0},globalEval:function(d,b,_){y(d,{nonce:b&&b.nonce},_)},each:function(d,b){var _,A=0;if(T(d))for(_=d.length;A<_&&b.call(d[A],A,d[A])!==!1;A++);else for(A in d)if(b.call(d[A],A,d[A])===!1)break;return d},text:function(d){var b,_="",A=0,z=d.nodeType;if(!z)for(;b=d[A++];)_+=v.text(b);return z===1||z===11?d.textContent:z===9?d.documentElement.textContent:z===3||z===4?d.nodeValue:_},makeArray:function(d,b){var _=b||[];return d!=null&&(T(Object(d))?v.merge(_,typeof d=="string"?[d]:d):s.call(_,d)),_},inArray:function(d,b,_){return b==null?-1:l.call(b,d,_)},isXMLDoc:function(d){var b=d&&d.namespaceURI,_=d&&(d.ownerDocument||d).documentElement;return!M.test(b||_&&_.nodeName||"HTML")},merge:function(d,b){for(var _=+b.length,A=0,z=d.length;A<_;A++)d[z++]=b[A];return d.length=z,d},grep:function(d,b,_){for(var A,z=[],V=0,H=d.length,ae=!_;V<H;V++)A=!b(d[V],V),A!==ae&&z.push(d[V]);return z},map:function(d,b,_){var A,z,V=0,H=[];if(T(d))for(A=d.length;V<A;V++)z=b(d[V],V,_),z!=null&&H.push(z);else for(V in d)z=b(d[V],V,_),z!=null&&H.push(z);return o(H)},guid:1,support:h}),typeof Symbol=="function"&&(v.fn[Symbol.iterator]=n[Symbol.iterator]),v.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(d,b){u["[object "+b+"]"]=b.toLowerCase()});function T(d){var b=!!d&&"length"in d&&d.length,_=C(d);return m(d)||x(d)?!1:_==="array"||b===0||typeof b=="number"&&b>0&&b-1 in d}function k(d,b){return d.nodeName&&d.nodeName.toLowerCase()===b.toLowerCase()}var N=n.pop,O=n.sort,I=n.splice,q="[\\x20\\t\\r\\n\\f]",B=new RegExp("^"+q+"+|((?:^|[^\\\\])(?:\\\\.)*)"+q+"+$","g");v.contains=function(d,b){var _=b&&b.parentNode;return d===_||!!(_&&_.nodeType===1&&(d.contains?d.contains(_):d.compareDocumentPosition&&d.compareDocumentPosition(_)&16))};var j=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function Y(d,b){return b?d==="\0"?"\uFFFD":d.slice(0,-1)+"\\"+d.charCodeAt(d.length-1).toString(16)+" ":"\\"+d}v.escapeSelector=function(d){return(d+"").replace(j,Y)};var U=w,X=s;(function(){var d,b,_,A,z,V=X,H,ae,ne,le,be,Pe=v.expando,ve=0,Ne=0,it=jo(),xt=jo(),ut=jo(),Sr=jo(),cr=function(ee,se){return ee===se&&(z=!0),0},wn="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",xn="(?:\\\\[\\da-fA-F]{1,6}"+q+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",bt="\\["+q+"*("+xn+")(?:"+q+"*([*^$|!~]?=)"+q+`*(?:'((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)"|(`+xn+"))|)"+q+"*\\]",Da=":("+xn+`)(?:\\((('((?:\\\\.|[^\\\\'])*)'|"((?:\\\\.|[^\\\\"])*)")|((?:\\\\.|[^\\\\()[\\]]|`+bt+")*)|.*)\\)|)",St=new RegExp(q+"+","g"),rr=new RegExp("^"+q+"*,"+q+"*"),Xi=new RegExp("^"+q+"*([>+~]|"+q+")"+q+"*"),gl=new RegExp(q+"|>"),Cn=new RegExp(Da),Qi=new RegExp("^"+xn+"$"),Sn={ID:new RegExp("^#("+xn+")"),CLASS:new RegExp("^\\.("+xn+")"),TAG:new RegExp("^("+xn+"|[*])"),ATTR:new RegExp("^"+bt),PSEUDO:new RegExp("^"+Da),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+q+"*(even|odd|(([+-]|)(\\d*)n|)"+q+"*(?:([+-]|)"+q+"*(\\d+)|))"+q+"*\\)|)","i"),bool:new RegExp("^(?:"+wn+")$","i"),needsContext:new RegExp("^"+q+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+q+"*((?:-\\d)?\\d*)"+q+"*\\)|)(?=[^-]|$)","i")},ia=/^(?:input|select|textarea|button)$/i,oa=/^h\d$/i,en=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,pl=/[+~]/,Vn=new RegExp("\\\\[\\da-fA-F]{1,6}"+q+"?|\\\\([^\\r\\n\\f])","g"),$n=function(ee,se){var he="0x"+ee.slice(1)-65536;return se||(he<0?String.fromCharCode(he+65536):String.fromCharCode(he>>10|55296,he&1023|56320))},Ep=function(){sa()},Pp=Xo(function(ee){return ee.disabled===!0&&k(ee,"fieldset")},{dir:"parentNode",next:"legend"});function kp(){try{return H.activeElement}catch{}}try{V.apply(n=i.call(U.childNodes),U.childNodes),n[U.childNodes.length].nodeType}catch{V={apply:function(se,he){X.apply(se,i.call(he))},call:function(se){X.apply(se,i.call(arguments,1))}}}function Lt(ee,se,he,ye){var Te,Ge,qe,Ye,He,yt,at,ot=se&&se.ownerDocument,mt=se?se.nodeType:9;if(he=he||[],typeof ee!="string"||!ee||mt!==1&&mt!==9&&mt!==11)return he;if(!ye&&(sa(se),se=se||H,ne)){if(mt!==11&&(He=en.exec(ee)))if(Te=He[1]){if(mt===9)if(qe=se.getElementById(Te)){if(qe.id===Te)return V.call(he,qe),he}else return he;else if(ot&&(qe=ot.getElementById(Te))&&Lt.contains(se,qe)&&qe.id===Te)return V.call(he,qe),he}else{if(He[2])return V.apply(he,se.getElementsByTagName(ee)),he;if((Te=He[3])&&se.getElementsByClassName)return V.apply(he,se.getElementsByClassName(Te)),he}if(!Sr[ee+" "]&&(!le||!le.test(ee))){if(at=ee,ot=se,mt===1&&(gl.test(ee)||Xi.test(ee))){for(ot=pl.test(ee)&&yl(se.parentNode)||se,(ot!=se||!h.scope)&&((Ye=se.getAttribute("id"))?Ye=v.escapeSelector(Ye):se.setAttribute("id",Ye=Pe)),yt=Zi(ee),Ge=yt.length;Ge--;)yt[Ge]=(Ye?"#"+Ye:":scope")+" "+Yo(yt[Ge]);at=yt.join(",")}try{return V.apply(he,ot.querySelectorAll(at)),he}catch{Sr(ee,!0)}finally{Ye===Pe&&se.removeAttribute("id")}}}return _c(ee.replace(B,"$1"),se,he,ye)}function jo(){var ee=[];function se(he,ye){return ee.push(he+" ")>b.cacheLength&&delete se[ee.shift()],se[he+" "]=ye}return se}function ln(ee){return ee[Pe]=!0,ee}function ii(ee){var se=H.createElement("fieldset");try{return!!ee(se)}catch{return!1}finally{se.parentNode&&se.parentNode.removeChild(se),se=null}}function Ap(ee){return function(se){return k(se,"input")&&se.type===ee}}function Mp(ee){return function(se){return(k(se,"input")||k(se,"button"))&&se.type===ee}}function Cc(ee){return function(se){return"form"in se?se.parentNode&&se.disabled===!1?"label"in se?"label"in se.parentNode?se.parentNode.disabled===ee:se.disabled===ee:se.isDisabled===ee||se.isDisabled!==!ee&&Pp(se)===ee:se.disabled===ee:"label"in se?se.disabled===ee:!1}}function Oa(ee){return ln(function(se){return se=+se,ln(function(he,ye){for(var Te,Ge=ee([],he.length,se),qe=Ge.length;qe--;)he[Te=Ge[qe]]&&(he[Te]=!(ye[Te]=he[Te]))})})}function yl(ee){return ee&&typeof ee.getElementsByTagName<"u"&&ee}function sa(ee){var se,he=ee?ee.ownerDocument||ee:U;return he==H||he.nodeType!==9||!he.documentElement||(H=he,ae=H.documentElement,ne=!v.isXMLDoc(H),be=ae.matches||ae.webkitMatchesSelector||ae.msMatchesSelector,ae.msMatchesSelector&&U!=H&&(se=H.defaultView)&&se.top!==se&&se.addEventListener("unload",Ep),h.getById=ii(function(ye){return ae.appendChild(ye).id=v.expando,!H.getElementsByName||!H.getElementsByName(v.expando).length}),h.disconnectedMatch=ii(function(ye){return be.call(ye,"*")}),h.scope=ii(function(){return H.querySelectorAll(":scope")}),h.cssHas=ii(function(){try{return H.querySelector(":has(*,:jqfake)"),!1}catch{return!0}}),h.getById?(b.filter.ID=function(ye){var Te=ye.replace(Vn,$n);return function(Ge){return Ge.getAttribute("id")===Te}},b.find.ID=function(ye,Te){if(typeof Te.getElementById<"u"&&ne){var Ge=Te.getElementById(ye);return Ge?[Ge]:[]}}):(b.filter.ID=function(ye){var Te=ye.replace(Vn,$n);return function(Ge){var qe=typeof Ge.getAttributeNode<"u"&&Ge.getAttributeNode("id");return qe&&qe.value===Te}},b.find.ID=function(ye,Te){if(typeof Te.getElementById<"u"&&ne){var Ge,qe,Ye,He=Te.getElementById(ye);if(He){if(Ge=He.getAttributeNode("id"),Ge&&Ge.value===ye)return[He];for(Ye=Te.getElementsByName(ye),qe=0;He=Ye[qe++];)if(Ge=He.getAttributeNode("id"),Ge&&Ge.value===ye)return[He]}return[]}}),b.find.TAG=function(ye,Te){return typeof Te.getElementsByTagName<"u"?Te.getElementsByTagName(ye):Te.querySelectorAll(ye)},b.find.CLASS=function(ye,Te){if(typeof Te.getElementsByClassName<"u"&&ne)return Te.getElementsByClassName(ye)},le=[],ii(function(ye){var Te;ae.appendChild(ye).innerHTML="<a id='"+Pe+"' href='' disabled='disabled'></a><select id='"+Pe+"-\r\\' disabled='disabled'><option selected=''></option></select>",ye.querySelectorAll("[selected]").length||le.push("\\["+q+"*(?:value|"+wn+")"),ye.querySelectorAll("[id~="+Pe+"-]").length||le.push("~="),ye.querySelectorAll("a#"+Pe+"+*").length||le.push(".#.+[+~]"),ye.querySelectorAll(":checked").length||le.push(":checked"),Te=H.createElement("input"),Te.setAttribute("type","hidden"),ye.appendChild(Te).setAttribute("name","D"),ae.appendChild(ye).disabled=!0,ye.querySelectorAll(":disabled").length!==2&&le.push(":enabled",":disabled"),Te=H.createElement("input"),Te.setAttribute("name",""),ye.appendChild(Te),ye.querySelectorAll("[name='']").length||le.push("\\["+q+"*name"+q+"*="+q+`*(?:''|"")`)}),h.cssHas||le.push(":has"),le=le.length&&new RegExp(le.join("|")),cr=function(ye,Te){if(ye===Te)return z=!0,0;var Ge=!ye.compareDocumentPosition-!Te.compareDocumentPosition;return Ge||(Ge=(ye.ownerDocument||ye)==(Te.ownerDocument||Te)?ye.compareDocumentPosition(Te):1,Ge&1||!h.sortDetached&&Te.compareDocumentPosition(ye)===Ge?ye===H||ye.ownerDocument==U&&Lt.contains(U,ye)?-1:Te===H||Te.ownerDocument==U&&Lt.contains(U,Te)?1:A?l.call(A,ye)-l.call(A,Te):0:Ge&4?-1:1)}),H}Lt.matches=function(ee,se){return Lt(ee,null,null,se)},Lt.matchesSelector=function(ee,se){if(sa(ee),ne&&!Sr[se+" "]&&(!le||!le.test(se)))try{var he=be.call(ee,se);if(he||h.disconnectedMatch||ee.document&&ee.document.nodeType!==11)return he}catch{Sr(se,!0)}return Lt(se,H,null,[ee]).length>0},Lt.contains=function(ee,se){return(ee.ownerDocument||ee)!=H&&sa(ee),v.contains(ee,se)},Lt.attr=function(ee,se){(ee.ownerDocument||ee)!=H&&sa(ee);var he=b.attrHandle[se.toLowerCase()],ye=he&&c.call(b.attrHandle,se.toLowerCase())?he(ee,se,!ne):void 0;return ye!==void 0?ye:ee.getAttribute(se)},Lt.error=function(ee){throw new Error("Syntax error, unrecognized expression: "+ee)},v.uniqueSort=function(ee){var se,he=[],ye=0,Te=0;if(z=!h.sortStable,A=!h.sortStable&&i.call(ee,0),O.call(ee,cr),z){for(;se=ee[Te++];)se===ee[Te]&&(ye=he.push(Te));for(;ye--;)I.call(ee,he[ye],1)}return A=null,ee},v.fn.uniqueSort=function(){return this.pushStack(v.uniqueSort(i.apply(this)))},b=v.expr={cacheLength:50,createPseudo:ln,match:Sn,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(ee){return ee[1]=ee[1].replace(Vn,$n),ee[3]=(ee[3]||ee[4]||ee[5]||"").replace(Vn,$n),ee[2]==="~="&&(ee[3]=" "+ee[3]+" "),ee.slice(0,4)},CHILD:function(ee){return ee[1]=ee[1].toLowerCase(),ee[1].slice(0,3)==="nth"?(ee[3]||Lt.error(ee[0]),ee[4]=+(ee[4]?ee[5]+(ee[6]||1):2*(ee[3]==="even"||ee[3]==="odd")),ee[5]=+(ee[7]+ee[8]||ee[3]==="odd")):ee[3]&&Lt.error(ee[0]),ee},PSEUDO:function(ee){var se,he=!ee[6]&&ee[2];return Sn.CHILD.test(ee[0])?null:(ee[3]?ee[2]=ee[4]||ee[5]||"":he&&Cn.test(he)&&(se=Zi(he,!0))&&(se=he.indexOf(")",he.length-se)-he.length)&&(ee[0]=ee[0].slice(0,se),ee[2]=he.slice(0,se)),ee.slice(0,3))}},filter:{TAG:function(ee){var se=ee.replace(Vn,$n).toLowerCase();return ee==="*"?function(){return!0}:function(he){return k(he,se)}},CLASS:function(ee){var se=it[ee+" "];return se||(se=new RegExp("(^|"+q+")"+ee+"("+q+"|$)"))&&it(ee,function(he){return se.test(typeof he.className=="string"&&he.className||typeof he.getAttribute<"u"&&he.getAttribute("class")||"")})},ATTR:function(ee,se,he){return function(ye){var Te=Lt.attr(ye,ee);return Te==null?se==="!=":se?(Te+="",se==="="?Te===he:se==="!="?Te!==he:se==="^="?he&&Te.indexOf(he)===0:se==="*="?he&&Te.indexOf(he)>-1:se==="$="?he&&Te.slice(-he.length)===he:se==="~="?(" "+Te.replace(St," ")+" ").indexOf(he)>-1:se==="|="?Te===he||Te.slice(0,he.length+1)===he+"-":!1):!0}},CHILD:function(ee,se,he,ye,Te){var Ge=ee.slice(0,3)!=="nth",qe=ee.slice(-4)!=="last",Ye=se==="of-type";return ye===1&&Te===0?function(He){return!!He.parentNode}:function(He,yt,at){var ot,mt,tt,$t,Kr,Dr=Ge!==qe?"nextSibling":"previousSibling",tn=He.parentNode,_n=Ye&&He.nodeName.toLowerCase(),oi=!at&&!Ye,Gr=!1;if(tn){if(Ge){for(;Dr;){for(tt=He;tt=tt[Dr];)if(Ye?k(tt,_n):tt.nodeType===1)return!1;Kr=Dr=ee==="only"&&!Kr&&"nextSibling"}return!0}if(Kr=[qe?tn.firstChild:tn.lastChild],qe&&oi){for(mt=tn[Pe]||(tn[Pe]={}),ot=mt[ee]||[],$t=ot[0]===ve&&ot[1],Gr=$t&&ot[2],tt=$t&&tn.childNodes[$t];tt=++$t&&tt&&tt[Dr]||(Gr=$t=0)||Kr.pop();)if(tt.nodeType===1&&++Gr&&tt===He){mt[ee]=[ve,$t,Gr];break}}else if(oi&&(mt=He[Pe]||(He[Pe]={}),ot=mt[ee]||[],$t=ot[0]===ve&&ot[1],Gr=$t),Gr===!1)for(;(tt=++$t&&tt&&tt[Dr]||(Gr=$t=0)||Kr.pop())&&!((Ye?k(tt,_n):tt.nodeType===1)&&++Gr&&(oi&&(mt=tt[Pe]||(tt[Pe]={}),mt[ee]=[ve,Gr]),tt===He)););return Gr-=Te,Gr===ye||Gr%ye===0&&Gr/ye>=0}}},PSEUDO:function(ee,se){var he,ye=b.pseudos[ee]||b.setFilters[ee.toLowerCase()]||Lt.error("unsupported pseudo: "+ee);return ye[Pe]?ye(se):ye.length>1?(he=[ee,ee,"",se],b.setFilters.hasOwnProperty(ee.toLowerCase())?ln(function(Te,Ge){for(var qe,Ye=ye(Te,se),He=Ye.length;He--;)qe=l.call(Te,Ye[He]),Te[qe]=!(Ge[qe]=Ye[He])}):function(Te){return ye(Te,0,he)}):ye}},pseudos:{not:ln(function(ee){var se=[],he=[],ye=xl(ee.replace(B,"$1"));return ye[Pe]?ln(function(Te,Ge,qe,Ye){for(var He,yt=ye(Te,null,Ye,[]),at=Te.length;at--;)(He=yt[at])&&(Te[at]=!(Ge[at]=He))}):function(Te,Ge,qe){return se[0]=Te,ye(se,null,qe,he),se[0]=null,!he.pop()}}),has:ln(function(ee){return function(se){return Lt(ee,se).length>0}}),contains:ln(function(ee){return ee=ee.replace(Vn,$n),function(se){return(se.textContent||v.text(se)).indexOf(ee)>-1}}),lang:ln(function(ee){return Qi.test(ee||"")||Lt.error("unsupported lang: "+ee),ee=ee.replace(Vn,$n).toLowerCase(),function(se){var he;do if(he=ne?se.lang:se.getAttribute("xml:lang")||se.getAttribute("lang"))return he=he.toLowerCase(),he===ee||he.indexOf(ee+"-")===0;while((se=se.parentNode)&&se.nodeType===1);return!1}}),target:function(ee){var se=e.location&&e.location.hash;return se&&se.slice(1)===ee.id},root:function(ee){return ee===ae},focus:function(ee){return ee===kp()&&H.hasFocus()&&!!(ee.type||ee.href||~ee.tabIndex)},enabled:Cc(!1),disabled:Cc(!0),checked:function(ee){return k(ee,"input")&&!!ee.checked||k(ee,"option")&&!!ee.selected},selected:function(ee){return ee.parentNode&&ee.parentNode.selectedIndex,ee.selected===!0},empty:function(ee){for(ee=ee.firstChild;ee;ee=ee.nextSibling)if(ee.nodeType<6)return!1;return!0},parent:function(ee){return!b.pseudos.empty(ee)},header:function(ee){return oa.test(ee.nodeName)},input:function(ee){return ia.test(ee.nodeName)},button:function(ee){return k(ee,"input")&&ee.type==="button"||k(ee,"button")},text:function(ee){var se;return k(ee,"input")&&ee.type==="text"&&((se=ee.getAttribute("type"))==null||se.toLowerCase()==="text")},first:Oa(function(){return[0]}),last:Oa(function(ee,se){return[se-1]}),eq:Oa(function(ee,se,he){return[he<0?he+se:he]}),even:Oa(function(ee,se){for(var he=0;he<se;he+=2)ee.push(he);return ee}),odd:Oa(function(ee,se){for(var he=1;he<se;he+=2)ee.push(he);return ee}),lt:Oa(function(ee,se,he){var ye;for(he<0?ye=he+se:he>se?ye=se:ye=he;--ye>=0;)ee.push(ye);return ee}),gt:Oa(function(ee,se,he){for(var ye=he<0?he+se:he;++ye<se;)ee.push(ye);return ee})}},b.pseudos.nth=b.pseudos.eq;for(d in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[d]=Ap(d);for(d in{submit:!0,reset:!0})b.pseudos[d]=Mp(d);function Sc(){}Sc.prototype=b.filters=b.pseudos,b.setFilters=new Sc;function Zi(ee,se){var he,ye,Te,Ge,qe,Ye,He,yt=xt[ee+" "];if(yt)return se?0:yt.slice(0);for(qe=ee,Ye=[],He=b.preFilter;qe;){(!he||(ye=rr.exec(qe)))&&(ye&&(qe=qe.slice(ye[0].length)||qe),Ye.push(Te=[])),he=!1,(ye=Xi.exec(qe))&&(he=ye.shift(),Te.push({value:he,type:ye[0].replace(B," ")}),qe=qe.slice(he.length));for(Ge in b.filter)(ye=Sn[Ge].exec(qe))&&(!He[Ge]||(ye=He[Ge](ye)))&&(he=ye.shift(),Te.push({value:he,type:Ge,matches:ye}),qe=qe.slice(he.length));if(!he)break}return se?qe.length:qe?Lt.error(ee):xt(ee,Ye).slice(0)}function Yo(ee){for(var se=0,he=ee.length,ye="";se<he;se++)ye+=ee[se].value;return ye}function Xo(ee,se,he){var ye=se.dir,Te=se.next,Ge=Te||ye,qe=he&&Ge==="parentNode",Ye=Ne++;return se.first?function(He,yt,at){for(;He=He[ye];)if(He.nodeType===1||qe)return ee(He,yt,at);return!1}:function(He,yt,at){var ot,mt,tt=[ve,Ye];if(at){for(;He=He[ye];)if((He.nodeType===1||qe)&&ee(He,yt,at))return!0}else for(;He=He[ye];)if(He.nodeType===1||qe)if(mt=He[Pe]||(He[Pe]={}),Te&&k(He,Te))He=He[ye]||He;else{if((ot=mt[Ge])&&ot[0]===ve&&ot[1]===Ye)return tt[2]=ot[2];if(mt[Ge]=tt,tt[2]=ee(He,yt,at))return!0}return!1}}function ml(ee){return ee.length>1?function(se,he,ye){for(var Te=ee.length;Te--;)if(!ee[Te](se,he,ye))return!1;return!0}:ee[0]}function Dp(ee,se,he){for(var ye=0,Te=se.length;ye<Te;ye++)Lt(ee,se[ye],he);return he}function Qo(ee,se,he,ye,Te){for(var Ge,qe=[],Ye=0,He=ee.length,yt=se!=null;Ye<He;Ye++)(Ge=ee[Ye])&&(!he||he(Ge,ye,Te))&&(qe.push(Ge),yt&&se.push(Ye));return qe}function bl(ee,se,he,ye,Te,Ge){return ye&&!ye[Pe]&&(ye=bl(ye)),Te&&!Te[Pe]&&(Te=bl(Te,Ge)),ln(function(qe,Ye,He,yt){var at,ot,mt,tt,$t=[],Kr=[],Dr=Ye.length,tn=qe||Dp(se||"*",He.nodeType?[He]:He,[]),_n=ee&&(qe||!se)?Qo(tn,$t,ee,He,yt):tn;if(he?(tt=Te||(qe?ee:Dr||ye)?[]:Ye,he(_n,tt,He,yt)):tt=_n,ye)for(at=Qo(tt,Kr),ye(at,[],He,yt),ot=at.length;ot--;)(mt=at[ot])&&(tt[Kr[ot]]=!(_n[Kr[ot]]=mt));if(qe){if(Te||ee){if(Te){for(at=[],ot=tt.length;ot--;)(mt=tt[ot])&&at.push(_n[ot]=mt);Te(null,tt=[],at,yt)}for(ot=tt.length;ot--;)(mt=tt[ot])&&(at=Te?l.call(qe,mt):$t[ot])>-1&&(qe[at]=!(Ye[at]=mt))}}else tt=Qo(tt===Ye?tt.splice(Dr,tt.length):tt),Te?Te(null,Ye,tt,yt):V.apply(Ye,tt)})}function wl(ee){for(var se,he,ye,Te=ee.length,Ge=b.relative[ee[0].type],qe=Ge||b.relative[" "],Ye=Ge?1:0,He=Xo(function(ot){return ot===se},qe,!0),yt=Xo(function(ot){return l.call(se,ot)>-1},qe,!0),at=[function(ot,mt,tt){var $t=!Ge&&(tt||mt!=_)||((se=mt).nodeType?He(ot,mt,tt):yt(ot,mt,tt));return se=null,$t}];Ye<Te;Ye++)if(he=b.relative[ee[Ye].type])at=[Xo(ml(at),he)];else{if(he=b.filter[ee[Ye].type].apply(null,ee[Ye].matches),he[Pe]){for(ye=++Ye;ye<Te&&!b.relative[ee[ye].type];ye++);return bl(Ye>1&&ml(at),Ye>1&&Yo(ee.slice(0,Ye-1).concat({value:ee[Ye-2].type===" "?"*":""})).replace(B,"$1"),he,Ye<ye&&wl(ee.slice(Ye,ye)),ye<Te&&wl(ee=ee.slice(ye)),ye<Te&&Yo(ee))}at.push(he)}return ml(at)}function Op(ee,se){var he=se.length>0,ye=ee.length>0,Te=function(Ge,qe,Ye,He,yt){var at,ot,mt,tt=0,$t="0",Kr=Ge&&[],Dr=[],tn=_,_n=Ge||ye&&b.find.TAG("*",yt),oi=ve+=tn==null?1:Math.random()||.1,Gr=_n.length;for(yt&&(_=qe==H||qe||yt);$t!==Gr&&(at=_n[$t])!=null;$t++){if(ye&&at){for(ot=0,!qe&&at.ownerDocument!=H&&(sa(at),Ye=!ne);mt=ee[ot++];)if(mt(at,qe||H,Ye)){V.call(He,at);break}yt&&(ve=oi)}he&&((at=!mt&&at)&&tt--,Ge&&Kr.push(at))}if(tt+=$t,he&&$t!==tt){for(ot=0;mt=se[ot++];)mt(Kr,Dr,qe,Ye);if(Ge){if(tt>0)for(;$t--;)Kr[$t]||Dr[$t]||(Dr[$t]=N.call(He));Dr=Qo(Dr)}V.apply(He,Dr),yt&&!Ge&&Dr.length>0&&tt+se.length>1&&v.uniqueSort(He)}return yt&&(ve=oi,_=tn),Kr};return he?ln(Te):Te}function xl(ee,se){var he,ye=[],Te=[],Ge=ut[ee+" "];if(!Ge){for(se||(se=Zi(ee)),he=se.length;he--;)Ge=wl(se[he]),Ge[Pe]?ye.push(Ge):Te.push(Ge);Ge=ut(ee,Op(Te,ye)),Ge.selector=ee}return Ge}function _c(ee,se,he,ye){var Te,Ge,qe,Ye,He,yt=typeof ee=="function"&&ee,at=!ye&&Zi(ee=yt.selector||ee);if(he=he||[],at.length===1){if(Ge=at[0]=at[0].slice(0),Ge.length>2&&(qe=Ge[0]).type==="ID"&&se.nodeType===9&&ne&&b.relative[Ge[1].type]){if(se=(b.find.ID(qe.matches[0].replace(Vn,$n),se)||[])[0],se)yt&&(se=se.parentNode);else return he;ee=ee.slice(Ge.shift().value.length)}for(Te=Sn.needsContext.test(ee)?0:Ge.length;Te--&&(qe=Ge[Te],!b.relative[Ye=qe.type]);)if((He=b.find[Ye])&&(ye=He(qe.matches[0].replace(Vn,$n),pl.test(Ge[0].type)&&yl(se.parentNode)||se))){if(Ge.splice(Te,1),ee=ye.length&&Yo(Ge),!ee)return V.apply(he,ye),he;break}}return(yt||xl(ee,at))(ye,se,!ne,he,!se||pl.test(ee)&&yl(se.parentNode)||se),he}h.sortStable=Pe.split("").sort(cr).join("")===Pe,sa(),h.sortDetached=ii(function(ee){return ee.compareDocumentPosition(H.createElement("fieldset"))&1}),v.find=Lt,v.expr[":"]=v.expr.pseudos,v.unique=v.uniqueSort,Lt.compile=xl,Lt.select=_c,Lt.setDocument=sa,Lt.tokenize=Zi,Lt.escape=v.escapeSelector,Lt.getText=v.text,Lt.isXML=v.isXMLDoc,Lt.selectors=v.expr,Lt.support=v.support,Lt.uniqueSort=v.uniqueSort})();var K=function(d,b,_){for(var A=[],z=_!==void 0;(d=d[b])&&d.nodeType!==9;)if(d.nodeType===1){if(z&&v(d).is(_))break;A.push(d)}return A},P=function(d,b){for(var _=[];d;d=d.nextSibling)d.nodeType===1&&d!==b&&_.push(d);return _},D=v.expr.match.needsContext,L=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function F(d,b,_){return m(b)?v.grep(d,function(A,z){return!!b.call(A,z,A)!==_}):b.nodeType?v.grep(d,function(A){return A===b!==_}):typeof b!="string"?v.grep(d,function(A){return l.call(b,A)>-1!==_}):v.filter(b,d,_)}v.filter=function(d,b,_){var A=b[0];return _&&(d=":not("+d+")"),b.length===1&&A.nodeType===1?v.find.matchesSelector(A,d)?[A]:[]:v.find.matches(d,v.grep(b,function(z){return z.nodeType===1}))},v.fn.extend({find:function(d){var b,_,A=this.length,z=this;if(typeof d!="string")return this.pushStack(v(d).filter(function(){for(b=0;b<A;b++)if(v.contains(z[b],this))return!0}));for(_=this.pushStack([]),b=0;b<A;b++)v.find(d,z[b],_);return A>1?v.uniqueSort(_):_},filter:function(d){return this.pushStack(F(this,d||[],!1))},not:function(d){return this.pushStack(F(this,d||[],!0))},is:function(d){return!!F(this,typeof d=="string"&&D.test(d)?v(d):d||[],!1).length}});var W,Z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,J=v.fn.init=function(d,b,_){var A,z;if(!d)return this;if(_=_||W,typeof d=="string")if(d[0]==="<"&&d[d.length-1]===">"&&d.length>=3?A=[null,d,null]:A=Z.exec(d),A&&(A[1]||!b))if(A[1]){if(b=b instanceof v?b[0]:b,v.merge(this,v.parseHTML(A[1],b&&b.nodeType?b.ownerDocument||b:w,!0)),L.test(A[1])&&v.isPlainObject(b))for(A in b)m(this[A])?this[A](b[A]):this.attr(A,b[A]);return this}else return z=w.getElementById(A[2]),z&&(this[0]=z,this.length=1),this;else return!b||b.jquery?(b||_).find(d):this.constructor(b).find(d);else{if(d.nodeType)return this[0]=d,this.length=1,this;if(m(d))return _.ready!==void 0?_.ready(d):d(v)}return v.makeArray(d,this)};J.prototype=v.fn,W=v(w);var Q=/^(?:parents|prev(?:Until|All))/,oe={children:!0,contents:!0,next:!0,prev:!0};v.fn.extend({has:function(d){var b=v(d,this),_=b.length;return this.filter(function(){for(var A=0;A<_;A++)if(v.contains(this,b[A]))return!0})},closest:function(d,b){var _,A=0,z=this.length,V=[],H=typeof d!="string"&&v(d);if(!D.test(d)){for(;A<z;A++)for(_=this[A];_&&_!==b;_=_.parentNode)if(_.nodeType<11&&(H?H.index(_)>-1:_.nodeType===1&&v.find.matchesSelector(_,d))){V.push(_);break}}return this.pushStack(V.length>1?v.uniqueSort(V):V)},index:function(d){return d?typeof d=="string"?l.call(v(d),this[0]):l.call(this,d.jquery?d[0]:d):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(d,b){return this.pushStack(v.uniqueSort(v.merge(this.get(),v(d,b))))},addBack:function(d){return this.add(d==null?this.prevObject:this.prevObject.filter(d))}});function fe(d,b){for(;(d=d[b])&&d.nodeType!==1;);return d}v.each({parent:function(d){var b=d.parentNode;return b&&b.nodeType!==11?b:null},parents:function(d){return K(d,"parentNode")},parentsUntil:function(d,b,_){return K(d,"parentNode",_)},next:function(d){return fe(d,"nextSibling")},prev:function(d){return fe(d,"previousSibling")},nextAll:function(d){return K(d,"nextSibling")},prevAll:function(d){return K(d,"previousSibling")},nextUntil:function(d,b,_){return K(d,"nextSibling",_)},prevUntil:function(d,b,_){return K(d,"previousSibling",_)},siblings:function(d){return P((d.parentNode||{}).firstChild,d)},children:function(d){return P(d.firstChild)},contents:function(d){return d.contentDocument!=null&&a(d.contentDocument)?d.contentDocument:(k(d,"template")&&(d=d.content||d),v.merge([],d.childNodes))}},function(d,b){v.fn[d]=function(_,A){var z=v.map(this,b,_);return d.slice(-5)!=="Until"&&(A=_),A&&typeof A=="string"&&(z=v.filter(A,z)),this.length>1&&(oe[d]||v.uniqueSort(z),Q.test(d)&&z.reverse()),this.pushStack(z)}});var ce=/[^\x20\t\r\n\f]+/g;function Ce(d){var b={};return v.each(d.match(ce)||[],function(_,A){b[A]=!0}),b}v.Callbacks=function(d){d=typeof d=="string"?Ce(d):v.extend({},d);var b,_,A,z,V=[],H=[],ae=-1,ne=function(){for(z=z||d.once,A=b=!0;H.length;ae=-1)for(_=H.shift();++ae<V.length;)V[ae].apply(_[0],_[1])===!1&&d.stopOnFalse&&(ae=V.length,_=!1);d.memory||(_=!1),b=!1,z&&(_?V=[]:V="")},le={add:function(){return V&&(_&&!b&&(ae=V.length-1,H.push(_)),function be(Pe){v.each(Pe,function(ve,Ne){m(Ne)?(!d.unique||!le.has(Ne))&&V.push(Ne):Ne&&Ne.length&&C(Ne)!=="string"&&be(Ne)})}(arguments),_&&!b&&ne()),this},remove:function(){return v.each(arguments,function(be,Pe){for(var ve;(ve=v.inArray(Pe,V,ve))>-1;)V.splice(ve,1),ve<=ae&&ae--}),this},has:function(be){return be?v.inArray(be,V)>-1:V.length>0},empty:function(){return V&&(V=[]),this},disable:function(){return z=H=[],V=_="",this},disabled:function(){return!V},lock:function(){return z=H=[],!_&&!b&&(V=_=""),this},locked:function(){return!!z},fireWith:function(be,Pe){return z||(Pe=Pe||[],Pe=[be,Pe.slice?Pe.slice():Pe],H.push(Pe),b||ne()),this},fire:function(){return le.fireWith(this,arguments),this},fired:function(){return!!A}};return le};function Le(d){return d}function Re(d){throw d}function De(d,b,_,A){var z;try{d&&m(z=d.promise)?z.call(d).done(b).fail(_):d&&m(z=d.then)?z.call(d,b,_):b.apply(void 0,[d].slice(A))}catch(V){_.apply(void 0,[V])}}v.extend({Deferred:function(d){var b=[["notify","progress",v.Callbacks("memory"),v.Callbacks("memory"),2],["resolve","done",v.Callbacks("once memory"),v.Callbacks("once memory"),0,"resolved"],["reject","fail",v.Callbacks("once memory"),v.Callbacks("once memory"),1,"rejected"]],_="pending",A={state:function(){return _},always:function(){return z.done(arguments).fail(arguments),this},catch:function(V){return A.then(null,V)},pipe:function(){var V=arguments;return v.Deferred(function(H){v.each(b,function(ae,ne){var le=m(V[ne[4]])&&V[ne[4]];z[ne[1]](function(){var be=le&&le.apply(this,arguments);be&&m(be.promise)?be.promise().progress(H.notify).done(H.resolve).fail(H.reject):H[ne[0]+"With"](this,le?[be]:arguments)})}),V=null}).promise()},then:function(V,H,ae){var ne=0;function le(be,Pe,ve,Ne){return function(){var it=this,xt=arguments,ut=function(){var cr,wn;if(!(be<ne)){if(cr=ve.apply(it,xt),cr===Pe.promise())throw new TypeError("Thenable self-resolution");wn=cr&&(typeof cr=="object"||typeof cr=="function")&&cr.then,m(wn)?Ne?wn.call(cr,le(ne,Pe,Le,Ne),le(ne,Pe,Re,Ne)):(ne++,wn.call(cr,le(ne,Pe,Le,Ne),le(ne,Pe,Re,Ne),le(ne,Pe,Le,Pe.notifyWith))):(ve!==Le&&(it=void 0,xt=[cr]),(Ne||Pe.resolveWith)(it,xt))}},Sr=Ne?ut:function(){try{ut()}catch(cr){v.Deferred.exceptionHook&&v.Deferred.exceptionHook(cr,Sr.error),be+1>=ne&&(ve!==Re&&(it=void 0,xt=[cr]),Pe.rejectWith(it,xt))}};be?Sr():(v.Deferred.getErrorHook?Sr.error=v.Deferred.getErrorHook():v.Deferred.getStackHook&&(Sr.error=v.Deferred.getStackHook()),e.setTimeout(Sr))}}return v.Deferred(function(be){b[0][3].add(le(0,be,m(ae)?ae:Le,be.notifyWith)),b[1][3].add(le(0,be,m(V)?V:Le)),b[2][3].add(le(0,be,m(H)?H:Re))}).promise()},promise:function(V){return V!=null?v.extend(V,A):A}},z={};return v.each(b,function(V,H){var ae=H[2],ne=H[5];A[H[1]]=ae.add,ne&&ae.add(function(){_=ne},b[3-V][2].disable,b[3-V][3].disable,b[0][2].lock,b[0][3].lock),ae.add(H[3].fire),z[H[0]]=function(){return z[H[0]+"With"](this===z?void 0:this,arguments),this},z[H[0]+"With"]=ae.fireWith}),A.promise(z),d&&d.call(z,z),z},when:function(d){var b=arguments.length,_=b,A=Array(_),z=i.call(arguments),V=v.Deferred(),H=function(ae){return function(ne){A[ae]=this,z[ae]=arguments.length>1?i.call(arguments):ne,--b||V.resolveWith(A,z)}};if(b<=1&&(De(d,V.done(H(_)).resolve,V.reject,!b),V.state()==="pending"||m(z[_]&&z[_].then)))return V.then();for(;_--;)De(z[_],H(_),V.reject);return V.promise()}});var me=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;v.Deferred.exceptionHook=function(d,b){e.console&&e.console.warn&&d&&me.test(d.name)&&e.console.warn("jQuery.Deferred exception: "+d.message,d.stack,b)},v.readyException=function(d){e.setTimeout(function(){throw d})};var _e=v.Deferred();v.fn.ready=function(d){return _e.then(d).catch(function(b){v.readyException(b)}),this},v.extend({isReady:!1,readyWait:1,ready:function(d){(d===!0?--v.readyWait:v.isReady)||(v.isReady=!0,!(d!==!0&&--v.readyWait>0)&&_e.resolveWith(w,[v]))}}),v.ready.then=_e.then;function we(){w.removeEventListener("DOMContentLoaded",we),e.removeEventListener("load",we),v.ready()}w.readyState==="complete"||w.readyState!=="loading"&&!w.documentElement.doScroll?e.setTimeout(v.ready):(w.addEventListener("DOMContentLoaded",we),e.addEventListener("load",we));var xe=function(d,b,_,A,z,V,H){var ae=0,ne=d.length,le=_==null;if(C(_)==="object"){z=!0;for(ae in _)xe(d,b,ae,_[ae],!0,V,H)}else if(A!==void 0&&(z=!0,m(A)||(H=!0),le&&(H?(b.call(d,A),b=null):(le=b,b=function(be,Pe,ve){return le.call(v(be),ve)})),b))for(;ae<ne;ae++)b(d[ae],_,H?A:A.call(d[ae],ae,b(d[ae],_)));return z?d:le?b.call(d):ne?b(d[0],_):V},Be=/^-ms-/,Ue=/-([a-z])/g;function Ee(d,b){return b.toUpperCase()}function Me(d){return d.replace(Be,"ms-").replace(Ue,Ee)}var ke=function(d){return d.nodeType===1||d.nodeType===9||!+d.nodeType};function de(){this.expando=v.expando+de.uid++}de.uid=1,de.prototype={cache:function(d){var b=d[this.expando];return b||(b={},ke(d)&&(d.nodeType?d[this.expando]=b:Object.defineProperty(d,this.expando,{value:b,configurable:!0}))),b},set:function(d,b,_){var A,z=this.cache(d);if(typeof b=="string")z[Me(b)]=_;else for(A in b)z[Me(A)]=b[A];return z},get:function(d,b){return b===void 0?this.cache(d):d[this.expando]&&d[this.expando][Me(b)]},access:function(d,b,_){return b===void 0||b&&typeof b=="string"&&_===void 0?this.get(d,b):(this.set(d,b,_),_!==void 0?_:b)},remove:function(d,b){var _,A=d[this.expando];if(A!==void 0){if(b!==void 0)for(Array.isArray(b)?b=b.map(Me):(b=Me(b),b=b in A?[b]:b.match(ce)||[]),_=b.length;_--;)delete A[b[_]];(b===void 0||v.isEmptyObject(A))&&(d.nodeType?d[this.expando]=void 0:delete d[this.expando])}},hasData:function(d){var b=d[this.expando];return b!==void 0&&!v.isEmptyObject(b)}};var R=new de,G=new de,re=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,te=/[A-Z]/g;function ie(d){return d==="true"?!0:d==="false"?!1:d==="null"?null:d===+d+""?+d:re.test(d)?JSON.parse(d):d}function ge(d,b,_){var A;if(_===void 0&&d.nodeType===1)if(A="data-"+b.replace(te,"-$&").toLowerCase(),_=d.getAttribute(A),typeof _=="string"){try{_=ie(_)}catch{}G.set(d,b,_)}else _=void 0;return _}v.extend({hasData:function(d){return G.hasData(d)||R.hasData(d)},data:function(d,b,_){return G.access(d,b,_)},removeData:function(d,b){G.remove(d,b)},_data:function(d,b,_){return R.access(d,b,_)},_removeData:function(d,b){R.remove(d,b)}}),v.fn.extend({data:function(d,b){var _,A,z,V=this[0],H=V&&V.attributes;if(d===void 0){if(this.length&&(z=G.get(V),V.nodeType===1&&!R.get(V,"hasDataAttrs"))){for(_=H.length;_--;)H[_]&&(A=H[_].name,A.indexOf("data-")===0&&(A=Me(A.slice(5)),ge(V,A,z[A])));R.set(V,"hasDataAttrs",!0)}return z}return typeof d=="object"?this.each(function(){G.set(this,d)}):xe(this,function(ae){var ne;if(V&&ae===void 0)return ne=G.get(V,d),ne!==void 0||(ne=ge(V,d),ne!==void 0)?ne:void 0;this.each(function(){G.set(this,d,ae)})},null,b,arguments.length>1,null,!0)},removeData:function(d){return this.each(function(){G.remove(this,d)})}}),v.extend({queue:function(d,b,_){var A;if(d)return b=(b||"fx")+"queue",A=R.get(d,b),_&&(!A||Array.isArray(_)?A=R.access(d,b,v.makeArray(_)):A.push(_)),A||[]},dequeue:function(d,b){b=b||"fx";var _=v.queue(d,b),A=_.length,z=_.shift(),V=v._queueHooks(d,b),H=function(){v.dequeue(d,b)};z==="inprogress"&&(z=_.shift(),A--),z&&(b==="fx"&&_.unshift("inprogress"),delete V.stop,z.call(d,H,V)),!A&&V&&V.empty.fire()},_queueHooks:function(d,b){var _=b+"queueHooks";return R.get(d,_)||R.access(d,_,{empty:v.Callbacks("once memory").add(function(){R.remove(d,[b+"queue",_])})})}}),v.fn.extend({queue:function(d,b){var _=2;return typeof d!="string"&&(b=d,d="fx",_--),arguments.length<_?v.queue(this[0],d):b===void 0?this:this.each(function(){var A=v.queue(this,d,b);v._queueHooks(this,d),d==="fx"&&A[0]!=="inprogress"&&v.dequeue(this,d)})},dequeue:function(d){return this.each(function(){v.dequeue(this,d)})},clearQueue:function(d){return this.queue(d||"fx",[])},promise:function(d,b){var _,A=1,z=v.Deferred(),V=this,H=this.length,ae=function(){--A||z.resolveWith(V,[V])};for(typeof d!="string"&&(b=d,d=void 0),d=d||"fx";H--;)_=R.get(V[H],d+"queueHooks"),_&&_.empty&&(A++,_.empty.add(ae));return ae(),z.promise(b)}});var ue=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Se=new RegExp("^(?:([+-])=|)("+ue+")([a-z%]*)$","i"),Fe=["Top","Right","Bottom","Left"],ze=w.documentElement,Ie=function(d){return v.contains(d.ownerDocument,d)},et={composed:!0};ze.getRootNode&&(Ie=function(d){return v.contains(d.ownerDocument,d)||d.getRootNode(et)===d.ownerDocument});var $e=function(d,b){return d=b||d,d.style.display==="none"||d.style.display===""&&Ie(d)&&v.css(d,"display")==="none"};function We(d,b,_,A){var z,V,H=20,ae=A?function(){return A.cur()}:function(){return v.css(d,b,"")},ne=ae(),le=_&&_[3]||(v.cssNumber[b]?"":"px"),be=d.nodeType&&(v.cssNumber[b]||le!=="px"&&+ne)&&Se.exec(v.css(d,b));if(be&&be[3]!==le){for(ne=ne/2,le=le||be[3],be=+ne||1;H--;)v.style(d,b,be+le),(1-V)*(1-(V=ae()/ne||.5))<=0&&(H=0),be=be/V;be=be*2,v.style(d,b,be+le),_=_||[]}return _&&(be=+be||+ne||0,z=_[1]?be+(_[1]+1)*_[2]:+_[2],A&&(A.unit=le,A.start=be,A.end=z)),z}var ft={};function ht(d){var b,_=d.ownerDocument,A=d.nodeName,z=ft[A];return z||(b=_.body.appendChild(_.createElement(A)),z=v.css(b,"display"),b.parentNode.removeChild(b),z==="none"&&(z="block"),ft[A]=z,z)}function Nt(d,b){for(var _,A,z=[],V=0,H=d.length;V<H;V++)A=d[V],A.style&&(_=A.style.display,b?(_==="none"&&(z[V]=R.get(A,"display")||null,z[V]||(A.style.display="")),A.style.display===""&&$e(A)&&(z[V]=ht(A))):_!=="none"&&(z[V]="none",R.set(A,"display",_)));for(V=0;V<H;V++)z[V]!=null&&(d[V].style.display=z[V]);return d}v.fn.extend({show:function(){return Nt(this,!0)},hide:function(){return Nt(this)},toggle:function(d){return typeof d=="boolean"?d?this.show():this.hide():this.each(function(){$e(this)?v(this).show():v(this).hide()})}});var vt=/^(?:checkbox|radio)$/i,Ot=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,zt=/^$|^module$|\/(?:java|ecma)script/i;(function(){var d=w.createDocumentFragment(),b=d.appendChild(w.createElement("div")),_=w.createElement("input");_.setAttribute("type","radio"),_.setAttribute("checked","checked"),_.setAttribute("name","t"),b.appendChild(_),h.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",h.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,b.innerHTML="<option></option>",h.option=!!b.lastChild})();var gt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};gt.tbody=gt.tfoot=gt.colgroup=gt.caption=gt.thead,gt.th=gt.td,h.option||(gt.optgroup=gt.option=[1,"<select multiple='multiple'>","</select>"]);function st(d,b){var _;return typeof d.getElementsByTagName<"u"?_=d.getElementsByTagName(b||"*"):typeof d.querySelectorAll<"u"?_=d.querySelectorAll(b||"*"):_=[],b===void 0||b&&k(d,b)?v.merge([d],_):_}function Qt(d,b){for(var _=0,A=d.length;_<A;_++)R.set(d[_],"globalEval",!b||R.get(b[_],"globalEval"))}var yr=/<|&#?\w+;/;function ur(d,b,_,A,z){for(var V,H,ae,ne,le,be,Pe=b.createDocumentFragment(),ve=[],Ne=0,it=d.length;Ne<it;Ne++)if(V=d[Ne],V||V===0)if(C(V)==="object")v.merge(ve,V.nodeType?[V]:V);else if(!yr.test(V))ve.push(b.createTextNode(V));else{for(H=H||Pe.appendChild(b.createElement("div")),ae=(Ot.exec(V)||["",""])[1].toLowerCase(),ne=gt[ae]||gt._default,H.innerHTML=ne[1]+v.htmlPrefilter(V)+ne[2],be=ne[0];be--;)H=H.lastChild;v.merge(ve,H.childNodes),H=Pe.firstChild,H.textContent=""}for(Pe.textContent="",Ne=0;V=ve[Ne++];){if(A&&v.inArray(V,A)>-1){z&&z.push(V);continue}if(le=Ie(V),H=st(Pe.appendChild(V),"script"),le&&Qt(H),_)for(be=0;V=H[be++];)zt.test(V.type||"")&&_.push(V)}return Pe}var xr=/^([^.]*)(?:\.(.+)|)/;function jt(){return!0}function Zt(){return!1}function Gt(d,b,_,A,z,V){var H,ae;if(typeof b=="object"){typeof _!="string"&&(A=A||_,_=void 0);for(ae in b)Gt(d,ae,_,A,b[ae],V);return d}if(A==null&&z==null?(z=_,A=_=void 0):z==null&&(typeof _=="string"?(z=A,A=void 0):(z=A,A=_,_=void 0)),z===!1)z=Zt;else if(!z)return d;return V===1&&(H=z,z=function(ne){return v().off(ne),H.apply(this,arguments)},z.guid=H.guid||(H.guid=v.guid++)),d.each(function(){v.event.add(this,b,z,A,_)})}v.event={global:{},add:function(d,b,_,A,z){var V,H,ae,ne,le,be,Pe,ve,Ne,it,xt,ut=R.get(d);if(!!ke(d))for(_.handler&&(V=_,_=V.handler,z=V.selector),z&&v.find.matchesSelector(ze,z),_.guid||(_.guid=v.guid++),(ne=ut.events)||(ne=ut.events=Object.create(null)),(H=ut.handle)||(H=ut.handle=function(Sr){return typeof v<"u"&&v.event.triggered!==Sr.type?v.event.dispatch.apply(d,arguments):void 0}),b=(b||"").match(ce)||[""],le=b.length;le--;)ae=xr.exec(b[le])||[],Ne=xt=ae[1],it=(ae[2]||"").split(".").sort(),Ne&&(Pe=v.event.special[Ne]||{},Ne=(z?Pe.delegateType:Pe.bindType)||Ne,Pe=v.event.special[Ne]||{},be=v.extend({type:Ne,origType:xt,data:A,handler:_,guid:_.guid,selector:z,needsContext:z&&v.expr.match.needsContext.test(z),namespace:it.join(".")},V),(ve=ne[Ne])||(ve=ne[Ne]=[],ve.delegateCount=0,(!Pe.setup||Pe.setup.call(d,A,it,H)===!1)&&d.addEventListener&&d.addEventListener(Ne,H)),Pe.add&&(Pe.add.call(d,be),be.handler.guid||(be.handler.guid=_.guid)),z?ve.splice(ve.delegateCount++,0,be):ve.push(be),v.event.global[Ne]=!0)},remove:function(d,b,_,A,z){var V,H,ae,ne,le,be,Pe,ve,Ne,it,xt,ut=R.hasData(d)&&R.get(d);if(!(!ut||!(ne=ut.events))){for(b=(b||"").match(ce)||[""],le=b.length;le--;){if(ae=xr.exec(b[le])||[],Ne=xt=ae[1],it=(ae[2]||"").split(".").sort(),!Ne){for(Ne in ne)v.event.remove(d,Ne+b[le],_,A,!0);continue}for(Pe=v.event.special[Ne]||{},Ne=(A?Pe.delegateType:Pe.bindType)||Ne,ve=ne[Ne]||[],ae=ae[2]&&new RegExp("(^|\\.)"+it.join("\\.(?:.*\\.|)")+"(\\.|$)"),H=V=ve.length;V--;)be=ve[V],(z||xt===be.origType)&&(!_||_.guid===be.guid)&&(!ae||ae.test(be.namespace))&&(!A||A===be.selector||A==="**"&&be.selector)&&(ve.splice(V,1),be.selector&&ve.delegateCount--,Pe.remove&&Pe.remove.call(d,be));H&&!ve.length&&((!Pe.teardown||Pe.teardown.call(d,it,ut.handle)===!1)&&v.removeEvent(d,Ne,ut.handle),delete ne[Ne])}v.isEmptyObject(ne)&&R.remove(d,"handle events")}},dispatch:function(d){var b,_,A,z,V,H,ae=new Array(arguments.length),ne=v.event.fix(d),le=(R.get(this,"events")||Object.create(null))[ne.type]||[],be=v.event.special[ne.type]||{};for(ae[0]=ne,b=1;b<arguments.length;b++)ae[b]=arguments[b];if(ne.delegateTarget=this,!(be.preDispatch&&be.preDispatch.call(this,ne)===!1)){for(H=v.event.handlers.call(this,ne,le),b=0;(z=H[b++])&&!ne.isPropagationStopped();)for(ne.currentTarget=z.elem,_=0;(V=z.handlers[_++])&&!ne.isImmediatePropagationStopped();)(!ne.rnamespace||V.namespace===!1||ne.rnamespace.test(V.namespace))&&(ne.handleObj=V,ne.data=V.data,A=((v.event.special[V.origType]||{}).handle||V.handler).apply(z.elem,ae),A!==void 0&&(ne.result=A)===!1&&(ne.preventDefault(),ne.stopPropagation()));return be.postDispatch&&be.postDispatch.call(this,ne),ne.result}},handlers:function(d,b){var _,A,z,V,H,ae=[],ne=b.delegateCount,le=d.target;if(ne&&le.nodeType&&!(d.type==="click"&&d.button>=1)){for(;le!==this;le=le.parentNode||this)if(le.nodeType===1&&!(d.type==="click"&&le.disabled===!0)){for(V=[],H={},_=0;_<ne;_++)A=b[_],z=A.selector+" ",H[z]===void 0&&(H[z]=A.needsContext?v(z,this).index(le)>-1:v.find(z,this,null,[le]).length),H[z]&&V.push(A);V.length&&ae.push({elem:le,handlers:V})}}return le=this,ne<b.length&&ae.push({elem:le,handlers:b.slice(ne)}),ae},addProp:function(d,b){Object.defineProperty(v.Event.prototype,d,{enumerable:!0,configurable:!0,get:m(b)?function(){if(this.originalEvent)return b(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[d]},set:function(_){Object.defineProperty(this,d,{enumerable:!0,configurable:!0,writable:!0,value:_})}})},fix:function(d){return d[v.expando]?d:new v.Event(d)},special:{load:{noBubble:!0},click:{setup:function(d){var b=this||d;return vt.test(b.type)&&b.click&&k(b,"input")&&At(b,"click",!0),!1},trigger:function(d){var b=this||d;return vt.test(b.type)&&b.click&&k(b,"input")&&At(b,"click"),!0},_default:function(d){var b=d.target;return vt.test(b.type)&&b.click&&k(b,"input")&&R.get(b,"click")||k(b,"a")}},beforeunload:{postDispatch:function(d){d.result!==void 0&&d.originalEvent&&(d.originalEvent.returnValue=d.result)}}}};function At(d,b,_){if(!_){R.get(d,b)===void 0&&v.event.add(d,b,jt);return}R.set(d,b,!1),v.event.add(d,b,{namespace:!1,handler:function(A){var z,V=R.get(this,b);if(A.isTrigger&1&&this[b]){if(V)(v.event.special[b]||{}).delegateType&&A.stopPropagation();else if(V=i.call(arguments),R.set(this,b,V),this[b](),z=R.get(this,b),R.set(this,b,!1),V!==z)return A.stopImmediatePropagation(),A.preventDefault(),z}else V&&(R.set(this,b,v.event.trigger(V[0],V.slice(1),this)),A.stopPropagation(),A.isImmediatePropagationStopped=jt)}})}v.removeEvent=function(d,b,_){d.removeEventListener&&d.removeEventListener(b,_)},v.Event=function(d,b){if(!(this instanceof v.Event))return new v.Event(d,b);d&&d.type?(this.originalEvent=d,this.type=d.type,this.isDefaultPrevented=d.defaultPrevented||d.defaultPrevented===void 0&&d.returnValue===!1?jt:Zt,this.target=d.target&&d.target.nodeType===3?d.target.parentNode:d.target,this.currentTarget=d.currentTarget,this.relatedTarget=d.relatedTarget):this.type=d,b&&v.extend(this,b),this.timeStamp=d&&d.timeStamp||Date.now(),this[v.expando]=!0},v.Event.prototype={constructor:v.Event,isDefaultPrevented:Zt,isPropagationStopped:Zt,isImmediatePropagationStopped:Zt,isSimulated:!1,preventDefault:function(){var d=this.originalEvent;this.isDefaultPrevented=jt,d&&!this.isSimulated&&d.preventDefault()},stopPropagation:function(){var d=this.originalEvent;this.isPropagationStopped=jt,d&&!this.isSimulated&&d.stopPropagation()},stopImmediatePropagation:function(){var d=this.originalEvent;this.isImmediatePropagationStopped=jt,d&&!this.isSimulated&&d.stopImmediatePropagation(),this.stopPropagation()}},v.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},v.event.addProp),v.each({focus:"focusin",blur:"focusout"},function(d,b){function _(A){if(w.documentMode){var z=R.get(this,"handle"),V=v.event.fix(A);V.type=A.type==="focusin"?"focus":"blur",V.isSimulated=!0,z(A),V.target===V.currentTarget&&z(V)}else v.event.simulate(b,A.target,v.event.fix(A))}v.event.special[d]={setup:function(){var A;if(At(this,d,!0),w.documentMode)A=R.get(this,b),A||this.addEventListener(b,_),R.set(this,b,(A||0)+1);else return!1},trigger:function(){return At(this,d),!0},teardown:function(){var A;if(w.documentMode)A=R.get(this,b)-1,A?R.set(this,b,A):(this.removeEventListener(b,_),R.remove(this,b));else return!1},_default:function(A){return R.get(A.target,d)},delegateType:b},v.event.special[b]={setup:function(){var A=this.ownerDocument||this.document||this,z=w.documentMode?this:A,V=R.get(z,b);V||(w.documentMode?this.addEventListener(b,_):A.addEventListener(d,_,!0)),R.set(z,b,(V||0)+1)},teardown:function(){var A=this.ownerDocument||this.document||this,z=w.documentMode?this:A,V=R.get(z,b)-1;V?R.set(z,b,V):(w.documentMode?this.removeEventListener(b,_):A.removeEventListener(d,_,!0),R.remove(z,b))}}}),v.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(d,b){v.event.special[d]={delegateType:b,bindType:b,handle:function(_){var A,z=this,V=_.relatedTarget,H=_.handleObj;return(!V||V!==z&&!v.contains(z,V))&&(_.type=H.origType,A=H.handler.apply(this,arguments),_.type=b),A}}}),v.fn.extend({on:function(d,b,_,A){return Gt(this,d,b,_,A)},one:function(d,b,_,A){return Gt(this,d,b,_,A,1)},off:function(d,b,_){var A,z;if(d&&d.preventDefault&&d.handleObj)return A=d.handleObj,v(d.delegateTarget).off(A.namespace?A.origType+"."+A.namespace:A.origType,A.selector,A.handler),this;if(typeof d=="object"){for(z in d)this.off(z,b,d[z]);return this}return(b===!1||typeof b=="function")&&(_=b,b=void 0),_===!1&&(_=Zt),this.each(function(){v.event.remove(this,d,_,b)})}});var Ae=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Oe=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function je(d,b){return k(d,"table")&&k(b.nodeType!==11?b:b.firstChild,"tr")&&v(d).children("tbody")[0]||d}function nt(d){return d.type=(d.getAttribute("type")!==null)+"/"+d.type,d}function Je(d){return(d.type||"").slice(0,5)==="true/"?d.type=d.type.slice(5):d.removeAttribute("type"),d}function Ct(d,b){var _,A,z,V,H,ae,ne;if(b.nodeType===1){if(R.hasData(d)&&(V=R.get(d),ne=V.events,ne)){R.remove(b,"handle events");for(z in ne)for(_=0,A=ne[z].length;_<A;_++)v.event.add(b,z,ne[z][_])}G.hasData(d)&&(H=G.access(d),ae=v.extend({},H),G.set(b,ae))}}function Jt(d,b){var _=b.nodeName.toLowerCase();_==="input"&&vt.test(d.type)?b.checked=d.checked:(_==="input"||_==="textarea")&&(b.defaultValue=d.defaultValue)}function Yt(d,b,_,A){b=o(b);var z,V,H,ae,ne,le,be=0,Pe=d.length,ve=Pe-1,Ne=b[0],it=m(Ne);if(it||Pe>1&&typeof Ne=="string"&&!h.checkClone&&pe.test(Ne))return d.each(function(xt){var ut=d.eq(xt);it&&(b[0]=Ne.call(this,xt,ut.html())),Yt(ut,b,_,A)});if(Pe&&(z=ur(b,d[0].ownerDocument,!1,d,A),V=z.firstChild,z.childNodes.length===1&&(z=V),V||A)){for(H=v.map(st(z,"script"),nt),ae=H.length;be<Pe;be++)ne=z,be!==ve&&(ne=v.clone(ne,!0,!0),ae&&v.merge(H,st(ne,"script"))),_.call(d[be],ne,be);if(ae)for(le=H[H.length-1].ownerDocument,v.map(H,Je),be=0;be<ae;be++)ne=H[be],zt.test(ne.type||"")&&!R.access(ne,"globalEval")&&v.contains(le,ne)&&(ne.src&&(ne.type||"").toLowerCase()!=="module"?v._evalUrl&&!ne.noModule&&v._evalUrl(ne.src,{nonce:ne.nonce||ne.getAttribute("nonce")},le):y(ne.textContent.replace(Oe,""),ne,le))}return d}function Wt(d,b,_){for(var A,z=b?v.filter(b,d):d,V=0;(A=z[V])!=null;V++)!_&&A.nodeType===1&&v.cleanData(st(A)),A.parentNode&&(_&&Ie(A)&&Qt(st(A,"script")),A.parentNode.removeChild(A));return d}v.extend({htmlPrefilter:function(d){return d},clone:function(d,b,_){var A,z,V,H,ae=d.cloneNode(!0),ne=Ie(d);if(!h.noCloneChecked&&(d.nodeType===1||d.nodeType===11)&&!v.isXMLDoc(d))for(H=st(ae),V=st(d),A=0,z=V.length;A<z;A++)Jt(V[A],H[A]);if(b)if(_)for(V=V||st(d),H=H||st(ae),A=0,z=V.length;A<z;A++)Ct(V[A],H[A]);else Ct(d,ae);return H=st(ae,"script"),H.length>0&&Qt(H,!ne&&st(d,"script")),ae},cleanData:function(d){for(var b,_,A,z=v.event.special,V=0;(_=d[V])!==void 0;V++)if(ke(_)){if(b=_[R.expando]){if(b.events)for(A in b.events)z[A]?v.event.remove(_,A):v.removeEvent(_,A,b.handle);_[R.expando]=void 0}_[G.expando]&&(_[G.expando]=void 0)}}}),v.fn.extend({detach:function(d){return Wt(this,d,!0)},remove:function(d){return Wt(this,d)},text:function(d){return xe(this,function(b){return b===void 0?v.text(this):this.empty().each(function(){(this.nodeType===1||this.nodeType===11||this.nodeType===9)&&(this.textContent=b)})},null,d,arguments.length)},append:function(){return Yt(this,arguments,function(d){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=je(this,d);b.appendChild(d)}})},prepend:function(){return Yt(this,arguments,function(d){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=je(this,d);b.insertBefore(d,b.firstChild)}})},before:function(){return Yt(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this)})},after:function(){return Yt(this,arguments,function(d){this.parentNode&&this.parentNode.insertBefore(d,this.nextSibling)})},empty:function(){for(var d,b=0;(d=this[b])!=null;b++)d.nodeType===1&&(v.cleanData(st(d,!1)),d.textContent="");return this},clone:function(d,b){return d=d??!1,b=b??d,this.map(function(){return v.clone(this,d,b)})},html:function(d){return xe(this,function(b){var _=this[0]||{},A=0,z=this.length;if(b===void 0&&_.nodeType===1)return _.innerHTML;if(typeof b=="string"&&!Ae.test(b)&&!gt[(Ot.exec(b)||["",""])[1].toLowerCase()]){b=v.htmlPrefilter(b);try{for(;A<z;A++)_=this[A]||{},_.nodeType===1&&(v.cleanData(st(_,!1)),_.innerHTML=b);_=0}catch{}}_&&this.empty().append(b)},null,d,arguments.length)},replaceWith:function(){var d=[];return Yt(this,arguments,function(b){var _=this.parentNode;v.inArray(this,d)<0&&(v.cleanData(st(this)),_&&_.replaceChild(b,this))},d)}}),v.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(d,b){v.fn[d]=function(_){for(var A,z=[],V=v(_),H=V.length-1,ae=0;ae<=H;ae++)A=ae===H?this:this.clone(!0),v(V[ae])[b](A),s.apply(z,A.get());return this.pushStack(z)}});var pt=new RegExp("^("+ue+")(?!px)[a-z%]+$","i"),er=/^--/,qr=function(d){var b=d.ownerDocument.defaultView;return(!b||!b.opener)&&(b=e),b.getComputedStyle(d)},Cr=function(d,b,_){var A,z,V={};for(z in b)V[z]=d.style[z],d.style[z]=b[z];A=_.call(d);for(z in b)d.style[z]=V[z];return A},Hr=new RegExp(Fe.join("|"),"i");(function(){function d(){if(!!le){ne.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",le.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",ze.appendChild(ne).appendChild(le);var be=e.getComputedStyle(le);_=be.top!=="1%",ae=b(be.marginLeft)===12,le.style.right="60%",V=b(be.right)===36,A=b(be.width)===36,le.style.position="absolute",z=b(le.offsetWidth/3)===12,ze.removeChild(ne),le=null}}function b(be){return Math.round(parseFloat(be))}var _,A,z,V,H,ae,ne=w.createElement("div"),le=w.createElement("div");!le.style||(le.style.backgroundClip="content-box",le.cloneNode(!0).style.backgroundClip="",h.clearCloneStyle=le.style.backgroundClip==="content-box",v.extend(h,{boxSizingReliable:function(){return d(),A},pixelBoxStyles:function(){return d(),V},pixelPosition:function(){return d(),_},reliableMarginLeft:function(){return d(),ae},scrollboxSize:function(){return d(),z},reliableTrDimensions:function(){var be,Pe,ve,Ne;return H==null&&(be=w.createElement("table"),Pe=w.createElement("tr"),ve=w.createElement("div"),be.style.cssText="position:absolute;left:-11111px;border-collapse:separate",Pe.style.cssText="box-sizing:content-box;border:1px solid",Pe.style.height="1px",ve.style.height="9px",ve.style.display="block",ze.appendChild(be).appendChild(Pe).appendChild(ve),Ne=e.getComputedStyle(Pe),H=parseInt(Ne.height,10)+parseInt(Ne.borderTopWidth,10)+parseInt(Ne.borderBottomWidth,10)===Pe.offsetHeight,ze.removeChild(be)),H}}))})();function Ur(d,b,_){var A,z,V,H,ae=er.test(b),ne=d.style;return _=_||qr(d),_&&(H=_.getPropertyValue(b)||_[b],ae&&H&&(H=H.replace(B,"$1")||void 0),H===""&&!Ie(d)&&(H=v.style(d,b)),!h.pixelBoxStyles()&&pt.test(H)&&Hr.test(b)&&(A=ne.width,z=ne.minWidth,V=ne.maxWidth,ne.minWidth=ne.maxWidth=ne.width=H,H=_.width,ne.width=A,ne.minWidth=z,ne.maxWidth=V)),H!==void 0?H+"":H}function sn(d,b){return{get:function(){if(d()){delete this.get;return}return(this.get=b).apply(this,arguments)}}}var fr=["Webkit","Moz","ms"],mn=w.createElement("div").style,zr={};function Mr(d){for(var b=d[0].toUpperCase()+d.slice(1),_=fr.length;_--;)if(d=fr[_]+b,d in mn)return d}function Rt(d){var b=v.cssProps[d]||zr[d];return b||(d in mn?d:zr[d]=Mr(d)||d)}var Jr=/^(none|table(?!-c[ea]).+)/,na={position:"absolute",visibility:"hidden",display:"block"},Gn={letterSpacing:"0",fontWeight:"400"};function aa(d,b,_){var A=Se.exec(b);return A?Math.max(0,A[2]-(_||0))+(A[3]||"px"):b}function Wr(d,b,_,A,z,V){var H=b==="width"?1:0,ae=0,ne=0,le=0;if(_===(A?"border":"content"))return 0;for(;H<4;H+=2)_==="margin"&&(le+=v.css(d,_+Fe[H],!0,z)),A?(_==="content"&&(ne-=v.css(d,"padding"+Fe[H],!0,z)),_!=="margin"&&(ne-=v.css(d,"border"+Fe[H]+"Width",!0,z))):(ne+=v.css(d,"padding"+Fe[H],!0,z),_!=="padding"?ne+=v.css(d,"border"+Fe[H]+"Width",!0,z):ae+=v.css(d,"border"+Fe[H]+"Width",!0,z));return!A&&V>=0&&(ne+=Math.max(0,Math.ceil(d["offset"+b[0].toUpperCase()+b.slice(1)]-V-ne-ae-.5))||0),ne+le}function ka(d,b,_){var A=qr(d),z=!h.boxSizingReliable()||_,V=z&&v.css(d,"boxSizing",!1,A)==="border-box",H=V,ae=Ur(d,b,A),ne="offset"+b[0].toUpperCase()+b.slice(1);if(pt.test(ae)){if(!_)return ae;ae="auto"}return(!h.boxSizingReliable()&&V||!h.reliableTrDimensions()&&k(d,"tr")||ae==="auto"||!parseFloat(ae)&&v.css(d,"display",!1,A)==="inline")&&d.getClientRects().length&&(V=v.css(d,"boxSizing",!1,A)==="border-box",H=ne in d,H&&(ae=d[ne])),ae=parseFloat(ae)||0,ae+Wr(d,b,_||(V?"border":"content"),H,A,ae)+"px"}v.extend({cssHooks:{opacity:{get:function(d,b){if(b){var _=Ur(d,"opacity");return _===""?"1":_}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(d,b,_,A){if(!(!d||d.nodeType===3||d.nodeType===8||!d.style)){var z,V,H,ae=Me(b),ne=er.test(b),le=d.style;if(ne||(b=Rt(ae)),H=v.cssHooks[b]||v.cssHooks[ae],_!==void 0){if(V=typeof _,V==="string"&&(z=Se.exec(_))&&z[1]&&(_=We(d,b,z),V="number"),_==null||_!==_)return;V==="number"&&!ne&&(_+=z&&z[3]||(v.cssNumber[ae]?"":"px")),!h.clearCloneStyle&&_===""&&b.indexOf("background")===0&&(le[b]="inherit"),(!H||!("set"in H)||(_=H.set(d,_,A))!==void 0)&&(ne?le.setProperty(b,_):le[b]=_)}else return H&&"get"in H&&(z=H.get(d,!1,A))!==void 0?z:le[b]}},css:function(d,b,_,A){var z,V,H,ae=Me(b),ne=er.test(b);return ne||(b=Rt(ae)),H=v.cssHooks[b]||v.cssHooks[ae],H&&"get"in H&&(z=H.get(d,!0,_)),z===void 0&&(z=Ur(d,b,A)),z==="normal"&&b in Gn&&(z=Gn[b]),_===""||_?(V=parseFloat(z),_===!0||isFinite(V)?V||0:z):z}}),v.each(["height","width"],function(d,b){v.cssHooks[b]={get:function(_,A,z){if(A)return Jr.test(v.css(_,"display"))&&(!_.getClientRects().length||!_.getBoundingClientRect().width)?Cr(_,na,function(){return ka(_,b,z)}):ka(_,b,z)},set:function(_,A,z){var V,H=qr(_),ae=!h.scrollboxSize()&&H.position==="absolute",ne=ae||z,le=ne&&v.css(_,"boxSizing",!1,H)==="border-box",be=z?Wr(_,b,z,le,H):0;return le&&ae&&(be-=Math.ceil(_["offset"+b[0].toUpperCase()+b.slice(1)]-parseFloat(H[b])-Wr(_,b,"border",!1,H)-.5)),be&&(V=Se.exec(A))&&(V[3]||"px")!=="px"&&(_.style[b]=A,A=v.css(_,b)),aa(_,A,be)}}}),v.cssHooks.marginLeft=sn(h.reliableMarginLeft,function(d,b){if(b)return(parseFloat(Ur(d,"marginLeft"))||d.getBoundingClientRect().left-Cr(d,{marginLeft:0},function(){return d.getBoundingClientRect().left}))+"px"}),v.each({margin:"",padding:"",border:"Width"},function(d,b){v.cssHooks[d+b]={expand:function(_){for(var A=0,z={},V=typeof _=="string"?_.split(" "):[_];A<4;A++)z[d+Fe[A]+b]=V[A]||V[A-2]||V[0];return z}},d!=="margin"&&(v.cssHooks[d+b].set=aa)}),v.fn.extend({css:function(d,b){return xe(this,function(_,A,z){var V,H,ae={},ne=0;if(Array.isArray(A)){for(V=qr(_),H=A.length;ne<H;ne++)ae[A[ne]]=v.css(_,A[ne],!1,V);return ae}return z!==void 0?v.style(_,A,z):v.css(_,A)},d,b,arguments.length>1)}});function mr(d,b,_,A,z){return new mr.prototype.init(d,b,_,A,z)}v.Tween=mr,mr.prototype={constructor:mr,init:function(d,b,_,A,z,V){this.elem=d,this.prop=_,this.easing=z||v.easing._default,this.options=b,this.start=this.now=this.cur(),this.end=A,this.unit=V||(v.cssNumber[_]?"":"px")},cur:function(){var d=mr.propHooks[this.prop];return d&&d.get?d.get(this):mr.propHooks._default.get(this)},run:function(d){var b,_=mr.propHooks[this.prop];return this.options.duration?this.pos=b=v.easing[this.easing](d,this.options.duration*d,0,1,this.options.duration):this.pos=b=d,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),_&&_.set?_.set(this):mr.propHooks._default.set(this),this}},mr.prototype.init.prototype=mr.prototype,mr.propHooks={_default:{get:function(d){var b;return d.elem.nodeType!==1||d.elem[d.prop]!=null&&d.elem.style[d.prop]==null?d.elem[d.prop]:(b=v.css(d.elem,d.prop,""),!b||b==="auto"?0:b)},set:function(d){v.fx.step[d.prop]?v.fx.step[d.prop](d):d.elem.nodeType===1&&(v.cssHooks[d.prop]||d.elem.style[Rt(d.prop)]!=null)?v.style(d.elem,d.prop,d.now+d.unit):d.elem[d.prop]=d.now}}},mr.propHooks.scrollTop=mr.propHooks.scrollLeft={set:function(d){d.elem.nodeType&&d.elem.parentNode&&(d.elem[d.prop]=d.now)}},v.easing={linear:function(d){return d},swing:function(d){return .5-Math.cos(d*Math.PI)/2},_default:"swing"},v.fx=mr.prototype.init,v.fx.step={};var bn,ai,Wo=/^(?:toggle|show|hide)$/,ap=/queueHooks$/;function sl(){ai&&(w.hidden===!1&&e.requestAnimationFrame?e.requestAnimationFrame(sl):e.setTimeout(sl,v.fx.interval),v.fx.tick())}function fc(){return e.setTimeout(function(){bn=void 0}),bn=Date.now()}function Ko(d,b){var _,A=0,z={height:d};for(b=b?1:0;A<4;A+=2-b)_=Fe[A],z["margin"+_]=z["padding"+_]=d;return b&&(z.opacity=z.width=d),z}function cc(d,b,_){for(var A,z=(un.tweeners[b]||[]).concat(un.tweeners["*"]),V=0,H=z.length;V<H;V++)if(A=z[V].call(_,b,d))return A}function ip(d,b,_){var A,z,V,H,ae,ne,le,be,Pe="width"in b||"height"in b,ve=this,Ne={},it=d.style,xt=d.nodeType&&$e(d),ut=R.get(d,"fxshow");_.queue||(H=v._queueHooks(d,"fx"),H.unqueued==null&&(H.unqueued=0,ae=H.empty.fire,H.empty.fire=function(){H.unqueued||ae()}),H.unqueued++,ve.always(function(){ve.always(function(){H.unqueued--,v.queue(d,"fx").length||H.empty.fire()})}));for(A in b)if(z=b[A],Wo.test(z)){if(delete b[A],V=V||z==="toggle",z===(xt?"hide":"show"))if(z==="show"&&ut&&ut[A]!==void 0)xt=!0;else continue;Ne[A]=ut&&ut[A]||v.style(d,A)}if(ne=!v.isEmptyObject(b),!(!ne&&v.isEmptyObject(Ne))){Pe&&d.nodeType===1&&(_.overflow=[it.overflow,it.overflowX,it.overflowY],le=ut&&ut.display,le==null&&(le=R.get(d,"display")),be=v.css(d,"display"),be==="none"&&(le?be=le:(Nt([d],!0),le=d.style.display||le,be=v.css(d,"display"),Nt([d]))),(be==="inline"||be==="inline-block"&&le!=null)&&v.css(d,"float")==="none"&&(ne||(ve.done(function(){it.display=le}),le==null&&(be=it.display,le=be==="none"?"":be)),it.display="inline-block")),_.overflow&&(it.overflow="hidden",ve.always(function(){it.overflow=_.overflow[0],it.overflowX=_.overflow[1],it.overflowY=_.overflow[2]})),ne=!1;for(A in Ne)ne||(ut?"hidden"in ut&&(xt=ut.hidden):ut=R.access(d,"fxshow",{display:le}),V&&(ut.hidden=!xt),xt&&Nt([d],!0),ve.done(function(){xt||Nt([d]),R.remove(d,"fxshow");for(A in Ne)v.style(d,A,Ne[A])})),ne=cc(xt?ut[A]:0,A,ve),A in ut||(ut[A]=ne.start,xt&&(ne.end=ne.start,ne.start=0))}}function op(d,b){var _,A,z,V,H;for(_ in d)if(A=Me(_),z=b[A],V=d[_],Array.isArray(V)&&(z=V[1],V=d[_]=V[0]),_!==A&&(d[A]=V,delete d[_]),H=v.cssHooks[A],H&&"expand"in H){V=H.expand(V),delete d[A];for(_ in V)_ in d||(d[_]=V[_],b[_]=z)}else b[A]=z}function un(d,b,_){var A,z,V=0,H=un.prefilters.length,ae=v.Deferred().always(function(){delete ne.elem}),ne=function(){if(z)return!1;for(var Pe=bn||fc(),ve=Math.max(0,le.startTime+le.duration-Pe),Ne=ve/le.duration||0,it=1-Ne,xt=0,ut=le.tweens.length;xt<ut;xt++)le.tweens[xt].run(it);return ae.notifyWith(d,[le,it,ve]),it<1&&ut?ve:(ut||ae.notifyWith(d,[le,1,0]),ae.resolveWith(d,[le]),!1)},le=ae.promise({elem:d,props:v.extend({},b),opts:v.extend(!0,{specialEasing:{},easing:v.easing._default},_),originalProperties:b,originalOptions:_,startTime:bn||fc(),duration:_.duration,tweens:[],createTween:function(Pe,ve){var Ne=v.Tween(d,le.opts,Pe,ve,le.opts.specialEasing[Pe]||le.opts.easing);return le.tweens.push(Ne),Ne},stop:function(Pe){var ve=0,Ne=Pe?le.tweens.length:0;if(z)return this;for(z=!0;ve<Ne;ve++)le.tweens[ve].run(1);return Pe?(ae.notifyWith(d,[le,1,0]),ae.resolveWith(d,[le,Pe])):ae.rejectWith(d,[le,Pe]),this}}),be=le.props;for(op(be,le.opts.specialEasing);V<H;V++)if(A=un.prefilters[V].call(le,d,be,le.opts),A)return m(A.stop)&&(v._queueHooks(le.elem,le.opts.queue).stop=A.stop.bind(A)),A;return v.map(be,cc,le),m(le.opts.start)&&le.opts.start.call(d,le),le.progress(le.opts.progress).done(le.opts.done,le.opts.complete).fail(le.opts.fail).always(le.opts.always),v.fx.timer(v.extend(ne,{elem:d,anim:le,queue:le.opts.queue})),le}v.Animation=v.extend(un,{tweeners:{"*":[function(d,b){var _=this.createTween(d,b);return We(_.elem,d,Se.exec(b),_),_}]},tweener:function(d,b){m(d)?(b=d,d=["*"]):d=d.match(ce);for(var _,A=0,z=d.length;A<z;A++)_=d[A],un.tweeners[_]=un.tweeners[_]||[],un.tweeners[_].unshift(b)},prefilters:[ip],prefilter:function(d,b){b?un.prefilters.unshift(d):un.prefilters.push(d)}}),v.speed=function(d,b,_){var A=d&&typeof d=="object"?v.extend({},d):{complete:_||!_&&b||m(d)&&d,duration:d,easing:_&&b||b&&!m(b)&&b};return v.fx.off?A.duration=0:typeof A.duration!="number"&&(A.duration in v.fx.speeds?A.duration=v.fx.speeds[A.duration]:A.duration=v.fx.speeds._default),(A.queue==null||A.queue===!0)&&(A.queue="fx"),A.old=A.complete,A.complete=function(){m(A.old)&&A.old.call(this),A.queue&&v.dequeue(this,A.queue)},A},v.fn.extend({fadeTo:function(d,b,_,A){return this.filter($e).css("opacity",0).show().end().animate({opacity:b},d,_,A)},animate:function(d,b,_,A){var z=v.isEmptyObject(d),V=v.speed(b,_,A),H=function(){var ae=un(this,v.extend({},d),V);(z||R.get(this,"finish"))&&ae.stop(!0)};return H.finish=H,z||V.queue===!1?this.each(H):this.queue(V.queue,H)},stop:function(d,b,_){var A=function(z){var V=z.stop;delete z.stop,V(_)};return typeof d!="string"&&(_=b,b=d,d=void 0),b&&this.queue(d||"fx",[]),this.each(function(){var z=!0,V=d!=null&&d+"queueHooks",H=v.timers,ae=R.get(this);if(V)ae[V]&&ae[V].stop&&A(ae[V]);else for(V in ae)ae[V]&&ae[V].stop&&ap.test(V)&&A(ae[V]);for(V=H.length;V--;)H[V].elem===this&&(d==null||H[V].queue===d)&&(H[V].anim.stop(_),z=!1,H.splice(V,1));(z||!_)&&v.dequeue(this,d)})},finish:function(d){return d!==!1&&(d=d||"fx"),this.each(function(){var b,_=R.get(this),A=_[d+"queue"],z=_[d+"queueHooks"],V=v.timers,H=A?A.length:0;for(_.finish=!0,v.queue(this,d,[]),z&&z.stop&&z.stop.call(this,!0),b=V.length;b--;)V[b].elem===this&&V[b].queue===d&&(V[b].anim.stop(!0),V.splice(b,1));for(b=0;b<H;b++)A[b]&&A[b].finish&&A[b].finish.call(this);delete _.finish})}}),v.each(["toggle","show","hide"],function(d,b){var _=v.fn[b];v.fn[b]=function(A,z,V){return A==null||typeof A=="boolean"?_.apply(this,arguments):this.animate(Ko(b,!0),A,z,V)}}),v.each({slideDown:Ko("show"),slideUp:Ko("hide"),slideToggle:Ko("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(d,b){v.fn[d]=function(_,A,z){return this.animate(b,_,A,z)}}),v.timers=[],v.fx.tick=function(){var d,b=0,_=v.timers;for(bn=Date.now();b<_.length;b++)d=_[b],!d()&&_[b]===d&&_.splice(b--,1);_.length||v.fx.stop(),bn=void 0},v.fx.timer=function(d){v.timers.push(d),v.fx.start()},v.fx.interval=13,v.fx.start=function(){ai||(ai=!0,sl())},v.fx.stop=function(){ai=null},v.fx.speeds={slow:600,fast:200,_default:400},v.fn.delay=function(d,b){return d=v.fx&&v.fx.speeds[d]||d,b=b||"fx",this.queue(b,function(_,A){var z=e.setTimeout(_,d);A.stop=function(){e.clearTimeout(z)}})},function(){var d=w.createElement("input"),b=w.createElement("select"),_=b.appendChild(w.createElement("option"));d.type="checkbox",h.checkOn=d.value!=="",h.optSelected=_.selected,d=w.createElement("input"),d.value="t",d.type="radio",h.radioValue=d.value==="t"}();var dc,Ki=v.expr.attrHandle;v.fn.extend({attr:function(d,b){return xe(this,v.attr,d,b,arguments.length>1)},removeAttr:function(d){return this.each(function(){v.removeAttr(this,d)})}}),v.extend({attr:function(d,b,_){var A,z,V=d.nodeType;if(!(V===3||V===8||V===2)){if(typeof d.getAttribute>"u")return v.prop(d,b,_);if((V!==1||!v.isXMLDoc(d))&&(z=v.attrHooks[b.toLowerCase()]||(v.expr.match.bool.test(b)?dc:void 0)),_!==void 0){if(_===null){v.removeAttr(d,b);return}return z&&"set"in z&&(A=z.set(d,_,b))!==void 0?A:(d.setAttribute(b,_+""),_)}return z&&"get"in z&&(A=z.get(d,b))!==null?A:(A=v.find.attr(d,b),A??void 0)}},attrHooks:{type:{set:function(d,b){if(!h.radioValue&&b==="radio"&&k(d,"input")){var _=d.value;return d.setAttribute("type",b),_&&(d.value=_),b}}}},removeAttr:function(d,b){var _,A=0,z=b&&b.match(ce);if(z&&d.nodeType===1)for(;_=z[A++];)d.removeAttribute(_)}}),dc={set:function(d,b,_){return b===!1?v.removeAttr(d,_):d.setAttribute(_,_),_}},v.each(v.expr.match.bool.source.match(/\w+/g),function(d,b){var _=Ki[b]||v.find.attr;Ki[b]=function(A,z,V){var H,ae,ne=z.toLowerCase();return V||(ae=Ki[ne],Ki[ne]=H,H=_(A,z,V)!=null?ne:null,Ki[ne]=ae),H}});var sp=/^(?:input|select|textarea|button)$/i,up=/^(?:a|area)$/i;v.fn.extend({prop:function(d,b){return xe(this,v.prop,d,b,arguments.length>1)},removeProp:function(d){return this.each(function(){delete this[v.propFix[d]||d]})}}),v.extend({prop:function(d,b,_){var A,z,V=d.nodeType;if(!(V===3||V===8||V===2))return(V!==1||!v.isXMLDoc(d))&&(b=v.propFix[b]||b,z=v.propHooks[b]),_!==void 0?z&&"set"in z&&(A=z.set(d,_,b))!==void 0?A:d[b]=_:z&&"get"in z&&(A=z.get(d,b))!==null?A:d[b]},propHooks:{tabIndex:{get:function(d){var b=v.find.attr(d,"tabindex");return b?parseInt(b,10):sp.test(d.nodeName)||up.test(d.nodeName)&&d.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),h.optSelected||(v.propHooks.selected={get:function(d){var b=d.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null},set:function(d){var b=d.parentNode;b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex)}}),v.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){v.propFix[this.toLowerCase()]=this});function Aa(d){var b=d.match(ce)||[];return b.join(" ")}function Ma(d){return d.getAttribute&&d.getAttribute("class")||""}function ul(d){return Array.isArray(d)?d:typeof d=="string"?d.match(ce)||[]:[]}v.fn.extend({addClass:function(d){var b,_,A,z,V,H;return m(d)?this.each(function(ae){v(this).addClass(d.call(this,ae,Ma(this)))}):(b=ul(d),b.length?this.each(function(){if(A=Ma(this),_=this.nodeType===1&&" "+Aa(A)+" ",_){for(V=0;V<b.length;V++)z=b[V],_.indexOf(" "+z+" ")<0&&(_+=z+" ");H=Aa(_),A!==H&&this.setAttribute("class",H)}}):this)},removeClass:function(d){var b,_,A,z,V,H;return m(d)?this.each(function(ae){v(this).removeClass(d.call(this,ae,Ma(this)))}):arguments.length?(b=ul(d),b.length?this.each(function(){if(A=Ma(this),_=this.nodeType===1&&" "+Aa(A)+" ",_){for(V=0;V<b.length;V++)for(z=b[V];_.indexOf(" "+z+" ")>-1;)_=_.replace(" "+z+" "," ");H=Aa(_),A!==H&&this.setAttribute("class",H)}}):this):this.attr("class","")},toggleClass:function(d,b){var _,A,z,V,H=typeof d,ae=H==="string"||Array.isArray(d);return m(d)?this.each(function(ne){v(this).toggleClass(d.call(this,ne,Ma(this),b),b)}):typeof b=="boolean"&&ae?b?this.addClass(d):this.removeClass(d):(_=ul(d),this.each(function(){if(ae)for(V=v(this),z=0;z<_.length;z++)A=_[z],V.hasClass(A)?V.removeClass(A):V.addClass(A);else(d===void 0||H==="boolean")&&(A=Ma(this),A&&R.set(this,"__className__",A),this.setAttribute&&this.setAttribute("class",A||d===!1?"":R.get(this,"__className__")||""))}))},hasClass:function(d){var b,_,A=0;for(b=" "+d+" ";_=this[A++];)if(_.nodeType===1&&(" "+Aa(Ma(_))+" ").indexOf(b)>-1)return!0;return!1}});var lp=/\r/g;v.fn.extend({val:function(d){var b,_,A,z=this[0];return arguments.length?(A=m(d),this.each(function(V){var H;this.nodeType===1&&(A?H=d.call(this,V,v(this).val()):H=d,H==null?H="":typeof H=="number"?H+="":Array.isArray(H)&&(H=v.map(H,function(ae){return ae==null?"":ae+""})),b=v.valHooks[this.type]||v.valHooks[this.nodeName.toLowerCase()],(!b||!("set"in b)||b.set(this,H,"value")===void 0)&&(this.value=H))})):z?(b=v.valHooks[z.type]||v.valHooks[z.nodeName.toLowerCase()],b&&"get"in b&&(_=b.get(z,"value"))!==void 0?_:(_=z.value,typeof _=="string"?_.replace(lp,""):_??"")):void 0}}),v.extend({valHooks:{option:{get:function(d){var b=v.find.attr(d,"value");return b??Aa(v.text(d))}},select:{get:function(d){var b,_,A,z=d.options,V=d.selectedIndex,H=d.type==="select-one",ae=H?null:[],ne=H?V+1:z.length;for(V<0?A=ne:A=H?V:0;A<ne;A++)if(_=z[A],(_.selected||A===V)&&!_.disabled&&(!_.parentNode.disabled||!k(_.parentNode,"optgroup"))){if(b=v(_).val(),H)return b;ae.push(b)}return ae},set:function(d,b){for(var _,A,z=d.options,V=v.makeArray(b),H=z.length;H--;)A=z[H],(A.selected=v.inArray(v.valHooks.option.get(A),V)>-1)&&(_=!0);return _||(d.selectedIndex=-1),V}}}}),v.each(["radio","checkbox"],function(){v.valHooks[this]={set:function(d,b){if(Array.isArray(b))return d.checked=v.inArray(v(d).val(),b)>-1}},h.checkOn||(v.valHooks[this].get=function(d){return d.getAttribute("value")===null?"on":d.value})});var ji=e.location,hc={guid:Date.now()},ll=/\?/;v.parseXML=function(d){var b,_;if(!d||typeof d!="string")return null;try{b=new e.DOMParser().parseFromString(d,"text/xml")}catch{}return _=b&&b.getElementsByTagName("parsererror")[0],(!b||_)&&v.error("Invalid XML: "+(_?v.map(_.childNodes,function(A){return A.textContent}).join(`
`):d)),b};var vc=/^(?:focusinfocus|focusoutblur)$/,gc=function(d){d.stopPropagation()};v.extend(v.event,{trigger:function(d,b,_,A){var z,V,H,ae,ne,le,be,Pe,ve=[_||w],Ne=c.call(d,"type")?d.type:d,it=c.call(d,"namespace")?d.namespace.split("."):[];if(V=Pe=H=_=_||w,!(_.nodeType===3||_.nodeType===8)&&!vc.test(Ne+v.event.triggered)&&(Ne.indexOf(".")>-1&&(it=Ne.split("."),Ne=it.shift(),it.sort()),ne=Ne.indexOf(":")<0&&"on"+Ne,d=d[v.expando]?d:new v.Event(Ne,typeof d=="object"&&d),d.isTrigger=A?2:3,d.namespace=it.join("."),d.rnamespace=d.namespace?new RegExp("(^|\\.)"+it.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,d.result=void 0,d.target||(d.target=_),b=b==null?[d]:v.makeArray(b,[d]),be=v.event.special[Ne]||{},!(!A&&be.trigger&&be.trigger.apply(_,b)===!1))){if(!A&&!be.noBubble&&!x(_)){for(ae=be.delegateType||Ne,vc.test(ae+Ne)||(V=V.parentNode);V;V=V.parentNode)ve.push(V),H=V;H===(_.ownerDocument||w)&&ve.push(H.defaultView||H.parentWindow||e)}for(z=0;(V=ve[z++])&&!d.isPropagationStopped();)Pe=V,d.type=z>1?ae:be.bindType||Ne,le=(R.get(V,"events")||Object.create(null))[d.type]&&R.get(V,"handle"),le&&le.apply(V,b),le=ne&&V[ne],le&&le.apply&&ke(V)&&(d.result=le.apply(V,b),d.result===!1&&d.preventDefault());return d.type=Ne,!A&&!d.isDefaultPrevented()&&(!be._default||be._default.apply(ve.pop(),b)===!1)&&ke(_)&&ne&&m(_[Ne])&&!x(_)&&(H=_[ne],H&&(_[ne]=null),v.event.triggered=Ne,d.isPropagationStopped()&&Pe.addEventListener(Ne,gc),_[Ne](),d.isPropagationStopped()&&Pe.removeEventListener(Ne,gc),v.event.triggered=void 0,H&&(_[ne]=H)),d.result}},simulate:function(d,b,_){var A=v.extend(new v.Event,_,{type:d,isSimulated:!0});v.event.trigger(A,null,b)}}),v.fn.extend({trigger:function(d,b){return this.each(function(){v.event.trigger(d,b,this)})},triggerHandler:function(d,b){var _=this[0];if(_)return v.event.trigger(d,b,_,!0)}});var fp=/\[\]$/,pc=/\r?\n/g,cp=/^(?:submit|button|image|reset|file)$/i,dp=/^(?:input|select|textarea|keygen)/i;function fl(d,b,_,A){var z;if(Array.isArray(b))v.each(b,function(V,H){_||fp.test(d)?A(d,H):fl(d+"["+(typeof H=="object"&&H!=null?V:"")+"]",H,_,A)});else if(!_&&C(b)==="object")for(z in b)fl(d+"["+z+"]",b[z],_,A);else A(d,b)}v.param=function(d,b){var _,A=[],z=function(V,H){var ae=m(H)?H():H;A[A.length]=encodeURIComponent(V)+"="+encodeURIComponent(ae??"")};if(d==null)return"";if(Array.isArray(d)||d.jquery&&!v.isPlainObject(d))v.each(d,function(){z(this.name,this.value)});else for(_ in d)fl(_,d[_],b,z);return A.join("&")},v.fn.extend({serialize:function(){return v.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var d=v.prop(this,"elements");return d?v.makeArray(d):this}).filter(function(){var d=this.type;return this.name&&!v(this).is(":disabled")&&dp.test(this.nodeName)&&!cp.test(d)&&(this.checked||!vt.test(d))}).map(function(d,b){var _=v(this).val();return _==null?null:Array.isArray(_)?v.map(_,function(A){return{name:b.name,value:A.replace(pc,`\r
`)}}):{name:b.name,value:_.replace(pc,`\r
`)}}).get()}});var hp=/%20/g,vp=/#.*$/,gp=/([?&])_=[^&]*/,pp=/^(.*?):[ \t]*([^\r\n]*)$/mg,yp=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mp=/^(?:GET|HEAD)$/,bp=/^\/\//,yc={},cl={},mc="*/".concat("*"),dl=w.createElement("a");dl.href=ji.href;function bc(d){return function(b,_){typeof b!="string"&&(_=b,b="*");var A,z=0,V=b.toLowerCase().match(ce)||[];if(m(_))for(;A=V[z++];)A[0]==="+"?(A=A.slice(1)||"*",(d[A]=d[A]||[]).unshift(_)):(d[A]=d[A]||[]).push(_)}}function wc(d,b,_,A){var z={},V=d===cl;function H(ae){var ne;return z[ae]=!0,v.each(d[ae]||[],function(le,be){var Pe=be(b,_,A);if(typeof Pe=="string"&&!V&&!z[Pe])return b.dataTypes.unshift(Pe),H(Pe),!1;if(V)return!(ne=Pe)}),ne}return H(b.dataTypes[0])||!z["*"]&&H("*")}function hl(d,b){var _,A,z=v.ajaxSettings.flatOptions||{};for(_ in b)b[_]!==void 0&&((z[_]?d:A||(A={}))[_]=b[_]);return A&&v.extend(!0,d,A),d}function wp(d,b,_){for(var A,z,V,H,ae=d.contents,ne=d.dataTypes;ne[0]==="*";)ne.shift(),A===void 0&&(A=d.mimeType||b.getResponseHeader("Content-Type"));if(A){for(z in ae)if(ae[z]&&ae[z].test(A)){ne.unshift(z);break}}if(ne[0]in _)V=ne[0];else{for(z in _){if(!ne[0]||d.converters[z+" "+ne[0]]){V=z;break}H||(H=z)}V=V||H}if(V)return V!==ne[0]&&ne.unshift(V),_[V]}function xp(d,b,_,A){var z,V,H,ae,ne,le={},be=d.dataTypes.slice();if(be[1])for(H in d.converters)le[H.toLowerCase()]=d.converters[H];for(V=be.shift();V;)if(d.responseFields[V]&&(_[d.responseFields[V]]=b),!ne&&A&&d.dataFilter&&(b=d.dataFilter(b,d.dataType)),ne=V,V=be.shift(),V){if(V==="*")V=ne;else if(ne!=="*"&&ne!==V){if(H=le[ne+" "+V]||le["* "+V],!H){for(z in le)if(ae=z.split(" "),ae[1]===V&&(H=le[ne+" "+ae[0]]||le["* "+ae[0]],H)){H===!0?H=le[z]:le[z]!==!0&&(V=ae[0],be.unshift(ae[1]));break}}if(H!==!0)if(H&&d.throws)b=H(b);else try{b=H(b)}catch(Pe){return{state:"parsererror",error:H?Pe:"No conversion from "+ne+" to "+V}}}}return{state:"success",data:b}}v.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ji.href,type:"GET",isLocal:yp.test(ji.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":mc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":v.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(d,b){return b?hl(hl(d,v.ajaxSettings),b):hl(v.ajaxSettings,d)},ajaxPrefilter:bc(yc),ajaxTransport:bc(cl),ajax:function(d,b){typeof d=="object"&&(b=d,d=void 0),b=b||{};var _,A,z,V,H,ae,ne,le,be,Pe,ve=v.ajaxSetup({},b),Ne=ve.context||ve,it=ve.context&&(Ne.nodeType||Ne.jquery)?v(Ne):v.event,xt=v.Deferred(),ut=v.Callbacks("once memory"),Sr=ve.statusCode||{},cr={},wn={},xn="canceled",bt={readyState:0,getResponseHeader:function(St){var rr;if(ne){if(!V)for(V={};rr=pp.exec(z);)V[rr[1].toLowerCase()+" "]=(V[rr[1].toLowerCase()+" "]||[]).concat(rr[2]);rr=V[St.toLowerCase()+" "]}return rr==null?null:rr.join(", ")},getAllResponseHeaders:function(){return ne?z:null},setRequestHeader:function(St,rr){return ne==null&&(St=wn[St.toLowerCase()]=wn[St.toLowerCase()]||St,cr[St]=rr),this},overrideMimeType:function(St){return ne==null&&(ve.mimeType=St),this},statusCode:function(St){var rr;if(St)if(ne)bt.always(St[bt.status]);else for(rr in St)Sr[rr]=[Sr[rr],St[rr]];return this},abort:function(St){var rr=St||xn;return _&&_.abort(rr),Da(0,rr),this}};if(xt.promise(bt),ve.url=((d||ve.url||ji.href)+"").replace(bp,ji.protocol+"//"),ve.type=b.method||b.type||ve.method||ve.type,ve.dataTypes=(ve.dataType||"*").toLowerCase().match(ce)||[""],ve.crossDomain==null){ae=w.createElement("a");try{ae.href=ve.url,ae.href=ae.href,ve.crossDomain=dl.protocol+"//"+dl.host!=ae.protocol+"//"+ae.host}catch{ve.crossDomain=!0}}if(ve.data&&ve.processData&&typeof ve.data!="string"&&(ve.data=v.param(ve.data,ve.traditional)),wc(yc,ve,b,bt),ne)return bt;le=v.event&&ve.global,le&&v.active++===0&&v.event.trigger("ajaxStart"),ve.type=ve.type.toUpperCase(),ve.hasContent=!mp.test(ve.type),A=ve.url.replace(vp,""),ve.hasContent?ve.data&&ve.processData&&(ve.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&(ve.data=ve.data.replace(hp,"+")):(Pe=ve.url.slice(A.length),ve.data&&(ve.processData||typeof ve.data=="string")&&(A+=(ll.test(A)?"&":"?")+ve.data,delete ve.data),ve.cache===!1&&(A=A.replace(gp,"$1"),Pe=(ll.test(A)?"&":"?")+"_="+hc.guid+++Pe),ve.url=A+Pe),ve.ifModified&&(v.lastModified[A]&&bt.setRequestHeader("If-Modified-Since",v.lastModified[A]),v.etag[A]&&bt.setRequestHeader("If-None-Match",v.etag[A])),(ve.data&&ve.hasContent&&ve.contentType!==!1||b.contentType)&&bt.setRequestHeader("Content-Type",ve.contentType),bt.setRequestHeader("Accept",ve.dataTypes[0]&&ve.accepts[ve.dataTypes[0]]?ve.accepts[ve.dataTypes[0]]+(ve.dataTypes[0]!=="*"?", "+mc+"; q=0.01":""):ve.accepts["*"]);for(be in ve.headers)bt.setRequestHeader(be,ve.headers[be]);if(ve.beforeSend&&(ve.beforeSend.call(Ne,bt,ve)===!1||ne))return bt.abort();if(xn="abort",ut.add(ve.complete),bt.done(ve.success),bt.fail(ve.error),_=wc(cl,ve,b,bt),!_)Da(-1,"No Transport");else{if(bt.readyState=1,le&&it.trigger("ajaxSend",[bt,ve]),ne)return bt;ve.async&&ve.timeout>0&&(H=e.setTimeout(function(){bt.abort("timeout")},ve.timeout));try{ne=!1,_.send(cr,Da)}catch(St){if(ne)throw St;Da(-1,St)}}function Da(St,rr,Xi,gl){var Cn,Qi,Sn,ia,oa,en=rr;ne||(ne=!0,H&&e.clearTimeout(H),_=void 0,z=gl||"",bt.readyState=St>0?4:0,Cn=St>=200&&St<300||St===304,Xi&&(ia=wp(ve,bt,Xi)),!Cn&&v.inArray("script",ve.dataTypes)>-1&&v.inArray("json",ve.dataTypes)<0&&(ve.converters["text script"]=function(){}),ia=xp(ve,ia,bt,Cn),Cn?(ve.ifModified&&(oa=bt.getResponseHeader("Last-Modified"),oa&&(v.lastModified[A]=oa),oa=bt.getResponseHeader("etag"),oa&&(v.etag[A]=oa)),St===204||ve.type==="HEAD"?en="nocontent":St===304?en="notmodified":(en=ia.state,Qi=ia.data,Sn=ia.error,Cn=!Sn)):(Sn=en,(St||!en)&&(en="error",St<0&&(St=0))),bt.status=St,bt.statusText=(rr||en)+"",Cn?xt.resolveWith(Ne,[Qi,en,bt]):xt.rejectWith(Ne,[bt,en,Sn]),bt.statusCode(Sr),Sr=void 0,le&&it.trigger(Cn?"ajaxSuccess":"ajaxError",[bt,ve,Cn?Qi:Sn]),ut.fireWith(Ne,[bt,en]),le&&(it.trigger("ajaxComplete",[bt,ve]),--v.active||v.event.trigger("ajaxStop")))}return bt},getJSON:function(d,b,_){return v.get(d,b,_,"json")},getScript:function(d,b){return v.get(d,void 0,b,"script")}}),v.each(["get","post"],function(d,b){v[b]=function(_,A,z,V){return m(A)&&(V=V||z,z=A,A=void 0),v.ajax(v.extend({url:_,type:b,dataType:V,data:A,success:z},v.isPlainObject(_)&&_))}}),v.ajaxPrefilter(function(d){var b;for(b in d.headers)b.toLowerCase()==="content-type"&&(d.contentType=d.headers[b]||"")}),v._evalUrl=function(d,b,_){return v.ajax({url:d,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(A){v.globalEval(A,b,_)}})},v.fn.extend({wrapAll:function(d){var b;return this[0]&&(m(d)&&(d=d.call(this[0])),b=v(d,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var _=this;_.firstElementChild;)_=_.firstElementChild;return _}).append(this)),this},wrapInner:function(d){return m(d)?this.each(function(b){v(this).wrapInner(d.call(this,b))}):this.each(function(){var b=v(this),_=b.contents();_.length?_.wrapAll(d):b.append(d)})},wrap:function(d){var b=m(d);return this.each(function(_){v(this).wrapAll(b?d.call(this,_):d)})},unwrap:function(d){return this.parent(d).not("body").each(function(){v(this).replaceWith(this.childNodes)}),this}}),v.expr.pseudos.hidden=function(d){return!v.expr.pseudos.visible(d)},v.expr.pseudos.visible=function(d){return!!(d.offsetWidth||d.offsetHeight||d.getClientRects().length)},v.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch{}};var Cp={0:200,1223:204},Yi=v.ajaxSettings.xhr();h.cors=!!Yi&&"withCredentials"in Yi,h.ajax=Yi=!!Yi,v.ajaxTransport(function(d){var b,_;if(h.cors||Yi&&!d.crossDomain)return{send:function(A,z){var V,H=d.xhr();if(H.open(d.type,d.url,d.async,d.username,d.password),d.xhrFields)for(V in d.xhrFields)H[V]=d.xhrFields[V];d.mimeType&&H.overrideMimeType&&H.overrideMimeType(d.mimeType),!d.crossDomain&&!A["X-Requested-With"]&&(A["X-Requested-With"]="XMLHttpRequest");for(V in A)H.setRequestHeader(V,A[V]);b=function(ae){return function(){b&&(b=_=H.onload=H.onerror=H.onabort=H.ontimeout=H.onreadystatechange=null,ae==="abort"?H.abort():ae==="error"?typeof H.status!="number"?z(0,"error"):z(H.status,H.statusText):z(Cp[H.status]||H.status,H.statusText,(H.responseType||"text")!=="text"||typeof H.responseText!="string"?{binary:H.response}:{text:H.responseText},H.getAllResponseHeaders()))}},H.onload=b(),_=H.onerror=H.ontimeout=b("error"),H.onabort!==void 0?H.onabort=_:H.onreadystatechange=function(){H.readyState===4&&e.setTimeout(function(){b&&_()})},b=b("abort");try{H.send(d.hasContent&&d.data||null)}catch(ae){if(b)throw ae}},abort:function(){b&&b()}}}),v.ajaxPrefilter(function(d){d.crossDomain&&(d.contents.script=!1)}),v.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(d){return v.globalEval(d),d}}}),v.ajaxPrefilter("script",function(d){d.cache===void 0&&(d.cache=!1),d.crossDomain&&(d.type="GET")}),v.ajaxTransport("script",function(d){if(d.crossDomain||d.scriptAttrs){var b,_;return{send:function(A,z){b=v("<script>").attr(d.scriptAttrs||{}).prop({charset:d.scriptCharset,src:d.url}).on("load error",_=function(V){b.remove(),_=null,V&&z(V.type==="error"?404:200,V.type)}),w.head.appendChild(b[0])},abort:function(){_&&_()}}}});var xc=[],vl=/(=)\?(?=&|$)|\?\?/;v.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var d=xc.pop()||v.expando+"_"+hc.guid++;return this[d]=!0,d}}),v.ajaxPrefilter("json jsonp",function(d,b,_){var A,z,V,H=d.jsonp!==!1&&(vl.test(d.url)?"url":typeof d.data=="string"&&(d.contentType||"").indexOf("application/x-www-form-urlencoded")===0&&vl.test(d.data)&&"data");if(H||d.dataTypes[0]==="jsonp")return A=d.jsonpCallback=m(d.jsonpCallback)?d.jsonpCallback():d.jsonpCallback,H?d[H]=d[H].replace(vl,"$1"+A):d.jsonp!==!1&&(d.url+=(ll.test(d.url)?"&":"?")+d.jsonp+"="+A),d.converters["script json"]=function(){return V||v.error(A+" was not called"),V[0]},d.dataTypes[0]="json",z=e[A],e[A]=function(){V=arguments},_.always(function(){z===void 0?v(e).removeProp(A):e[A]=z,d[A]&&(d.jsonpCallback=b.jsonpCallback,xc.push(A)),V&&m(z)&&z(V[0]),V=z=void 0}),"script"}),h.createHTMLDocument=function(){var d=w.implementation.createHTMLDocument("").body;return d.innerHTML="<form></form><form></form>",d.childNodes.length===2}(),v.parseHTML=function(d,b,_){if(typeof d!="string")return[];typeof b=="boolean"&&(_=b,b=!1);var A,z,V;return b||(h.createHTMLDocument?(b=w.implementation.createHTMLDocument(""),A=b.createElement("base"),A.href=w.location.href,b.head.appendChild(A)):b=w),z=L.exec(d),V=!_&&[],z?[b.createElement(z[1])]:(z=ur([d],b,V),V&&V.length&&v(V).remove(),v.merge([],z.childNodes))},v.fn.load=function(d,b,_){var A,z,V,H=this,ae=d.indexOf(" ");return ae>-1&&(A=Aa(d.slice(ae)),d=d.slice(0,ae)),m(b)?(_=b,b=void 0):b&&typeof b=="object"&&(z="POST"),H.length>0&&v.ajax({url:d,type:z||"GET",dataType:"html",data:b}).done(function(ne){V=arguments,H.html(A?v("<div>").append(v.parseHTML(ne)).find(A):ne)}).always(_&&function(ne,le){H.each(function(){_.apply(this,V||[ne.responseText,le,ne])})}),this},v.expr.pseudos.animated=function(d){return v.grep(v.timers,function(b){return d===b.elem}).length},v.offset={setOffset:function(d,b,_){var A,z,V,H,ae,ne,le,be=v.css(d,"position"),Pe=v(d),ve={};be==="static"&&(d.style.position="relative"),ae=Pe.offset(),V=v.css(d,"top"),ne=v.css(d,"left"),le=(be==="absolute"||be==="fixed")&&(V+ne).indexOf("auto")>-1,le?(A=Pe.position(),H=A.top,z=A.left):(H=parseFloat(V)||0,z=parseFloat(ne)||0),m(b)&&(b=b.call(d,_,v.extend({},ae))),b.top!=null&&(ve.top=b.top-ae.top+H),b.left!=null&&(ve.left=b.left-ae.left+z),"using"in b?b.using.call(d,ve):Pe.css(ve)}},v.fn.extend({offset:function(d){if(arguments.length)return d===void 0?this:this.each(function(z){v.offset.setOffset(this,d,z)});var b,_,A=this[0];if(!!A)return A.getClientRects().length?(b=A.getBoundingClientRect(),_=A.ownerDocument.defaultView,{top:b.top+_.pageYOffset,left:b.left+_.pageXOffset}):{top:0,left:0}},position:function(){if(!!this[0]){var d,b,_,A=this[0],z={top:0,left:0};if(v.css(A,"position")==="fixed")b=A.getBoundingClientRect();else{for(b=this.offset(),_=A.ownerDocument,d=A.offsetParent||_.documentElement;d&&(d===_.body||d===_.documentElement)&&v.css(d,"position")==="static";)d=d.parentNode;d&&d!==A&&d.nodeType===1&&(z=v(d).offset(),z.top+=v.css(d,"borderTopWidth",!0),z.left+=v.css(d,"borderLeftWidth",!0))}return{top:b.top-z.top-v.css(A,"marginTop",!0),left:b.left-z.left-v.css(A,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var d=this.offsetParent;d&&v.css(d,"position")==="static";)d=d.offsetParent;return d||ze})}}),v.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(d,b){var _=b==="pageYOffset";v.fn[d]=function(A){return xe(this,function(z,V,H){var ae;if(x(z)?ae=z:z.nodeType===9&&(ae=z.defaultView),H===void 0)return ae?ae[b]:z[V];ae?ae.scrollTo(_?ae.pageXOffset:H,_?H:ae.pageYOffset):z[V]=H},d,A,arguments.length)}}),v.each(["top","left"],function(d,b){v.cssHooks[b]=sn(h.pixelPosition,function(_,A){if(A)return A=Ur(_,b),pt.test(A)?v(_).position()[b]+"px":A})}),v.each({Height:"height",Width:"width"},function(d,b){v.each({padding:"inner"+d,content:b,"":"outer"+d},function(_,A){v.fn[A]=function(z,V){var H=arguments.length&&(_||typeof z!="boolean"),ae=_||(z===!0||V===!0?"margin":"border");return xe(this,function(ne,le,be){var Pe;return x(ne)?A.indexOf("outer")===0?ne["inner"+d]:ne.document.documentElement["client"+d]:ne.nodeType===9?(Pe=ne.documentElement,Math.max(ne.body["scroll"+d],Pe["scroll"+d],ne.body["offset"+d],Pe["offset"+d],Pe["client"+d])):be===void 0?v.css(ne,le,ae):v.style(ne,le,be,ae)},b,H?z:void 0,H)}})}),v.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(d,b){v.fn[b]=function(_){return this.on(b,_)}}),v.fn.extend({bind:function(d,b,_){return this.on(d,null,b,_)},unbind:function(d,b){return this.off(d,null,b)},delegate:function(d,b,_,A){return this.on(b,d,_,A)},undelegate:function(d,b,_){return arguments.length===1?this.off(d,"**"):this.off(b,d||"**",_)},hover:function(d,b){return this.on("mouseenter",d).on("mouseleave",b||d)}}),v.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(d,b){v.fn[b]=function(_,A){return arguments.length>0?this.on(b,null,_,A):this.trigger(b)}});var Sp=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;v.proxy=function(d,b){var _,A,z;if(typeof b=="string"&&(_=d[b],b=d,d=_),!!m(d))return A=i.call(arguments,2),z=function(){return d.apply(b||this,A.concat(i.call(arguments)))},z.guid=d.guid=d.guid||v.guid++,z},v.holdReady=function(d){d?v.readyWait++:v.ready(!0)},v.isArray=Array.isArray,v.parseJSON=JSON.parse,v.nodeName=k,v.isFunction=m,v.isWindow=x,v.camelCase=Me,v.type=C,v.now=Date.now,v.isNumeric=function(d){var b=v.type(d);return(b==="number"||b==="string")&&!isNaN(d-parseFloat(d))},v.trim=function(d){return d==null?"":(d+"").replace(Sp,"$1")};var _p=e.jQuery,Tp=e.$;return v.noConflict=function(d){return e.$===v&&(e.$=Tp),d&&e.jQuery===v&&(e.jQuery=_p),v},typeof t>"u"&&(e.jQuery=e.$=v),v})})(mg);var Ul=mg.exports,mf={exports:{}},du={},hu={},dt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r._registerNode=r._NODES_REGISTRY=r.Konva=r.glob=r._parseUA=void 0;var e=Math.PI/180;function t(){return typeof window<"u"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}var n=function(o){var s=o.indexOf("msie ");if(s>0)return parseInt(o.substring(s+5,o.indexOf(".",s)),10);var l=o.indexOf("trident/");if(l>0){var u=o.indexOf("rv:");return parseInt(o.substring(u+3,o.indexOf(".",u)),10)}var f=o.indexOf("edge/");return f>0?parseInt(o.substring(f+5,o.indexOf(".",f)),10):!1},a=function(o){var s=o.toLowerCase(),l=/(chrome)[ /]([\w.]+)/.exec(s)||/(webkit)[ /]([\w.]+)/.exec(s)||/(opera)(?:.*version|)[ /]([\w.]+)/.exec(s)||/(msie) ([\w.]+)/.exec(s)||s.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(s)||[],u=!!o.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i),f=!!o.match(/IEMobile/i);return{browser:l[1]||"",version:l[2]||"0",isIE:n(s),mobile:u,ieMobile:f}};r._parseUA=a,r.glob=typeof Qe<"u"?Qe:typeof window<"u"?window:typeof WorkerGlobalScope<"u"?self:{},r.Konva={_global:r.glob,version:"7.2.5",isBrowser:t(),isUnminified:/param/.test(function(o){}.toString()),dblClickWindow:400,getAngle:function(o){return r.Konva.angleDeg?o*e:o},enableTrace:!1,_pointerEventsEnabled:!1,hitOnDragEnabled:!1,captureTouchEventsEnabled:!1,listenClickTap:!1,inDblClickWindow:!1,pixelRatio:void 0,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:function(){return r.Konva.DD.isDragging},isDragReady:function(){return!!r.Konva.DD.node},UA:r._parseUA(r.glob.navigator&&r.glob.navigator.userAgent||""),document:r.glob.document,_injectGlobal:function(o){r.glob.Konva=o},_parseUA:r._parseUA},r._NODES_REGISTRY={};var i=function(o){r._NODES_REGISTRY[o.prototype.getClassName()]=o,r.Konva[o.prototype.getClassName()]=o};r._registerNode=i})(dt);var wt={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Util=r.Transform=r.Collection=void 0;var e=dt,t=function(){function y(){}return y.toCollection=function(C){var E=new y,M=C.length,v;for(v=0;v<M;v++)E.push(C[v]);return E},y._mapMethod=function(C){y.prototype[C]=function(){var E=this.length,M,v=[].slice.call(arguments);for(M=0;M<E;M++)this[M][C].apply(this[M],v);return this}},y.mapMethods=function(C){var E=C.prototype;for(var M in E)y._mapMethod(M)},y}();r.Collection=t,t.prototype=[],t.prototype.each=function(y){for(var C=0;C<this.length;C++)y(this[C],C)},t.prototype.toArray=function(){var y=[],C=this.length,E;for(E=0;E<C;E++)y.push(this[E]);return y};var n=function(){function y(C){C===void 0&&(C=[1,0,0,1,0,0]),this.dirty=!1,this.m=C&&C.slice()||[1,0,0,1,0,0]}return y.prototype.reset=function(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0},y.prototype.copy=function(){return new y(this.m)},y.prototype.copyInto=function(C){C.m[0]=this.m[0],C.m[1]=this.m[1],C.m[2]=this.m[2],C.m[3]=this.m[3],C.m[4]=this.m[4],C.m[5]=this.m[5]},y.prototype.point=function(C){var E=this.m;return{x:E[0]*C.x+E[2]*C.y+E[4],y:E[1]*C.x+E[3]*C.y+E[5]}},y.prototype.translate=function(C,E){return this.m[4]+=this.m[0]*C+this.m[2]*E,this.m[5]+=this.m[1]*C+this.m[3]*E,this},y.prototype.scale=function(C,E){return this.m[0]*=C,this.m[1]*=C,this.m[2]*=E,this.m[3]*=E,this},y.prototype.rotate=function(C){var E=Math.cos(C),M=Math.sin(C),v=this.m[0]*E+this.m[2]*M,T=this.m[1]*E+this.m[3]*M,k=this.m[0]*-M+this.m[2]*E,N=this.m[1]*-M+this.m[3]*E;return this.m[0]=v,this.m[1]=T,this.m[2]=k,this.m[3]=N,this},y.prototype.getTranslation=function(){return{x:this.m[4],y:this.m[5]}},y.prototype.skew=function(C,E){var M=this.m[0]+this.m[2]*E,v=this.m[1]+this.m[3]*E,T=this.m[2]+this.m[0]*C,k=this.m[3]+this.m[1]*C;return this.m[0]=M,this.m[1]=v,this.m[2]=T,this.m[3]=k,this},y.prototype.multiply=function(C){var E=this.m[0]*C.m[0]+this.m[2]*C.m[1],M=this.m[1]*C.m[0]+this.m[3]*C.m[1],v=this.m[0]*C.m[2]+this.m[2]*C.m[3],T=this.m[1]*C.m[2]+this.m[3]*C.m[3],k=this.m[0]*C.m[4]+this.m[2]*C.m[5]+this.m[4],N=this.m[1]*C.m[4]+this.m[3]*C.m[5]+this.m[5];return this.m[0]=E,this.m[1]=M,this.m[2]=v,this.m[3]=T,this.m[4]=k,this.m[5]=N,this},y.prototype.invert=function(){var C=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),E=this.m[3]*C,M=-this.m[1]*C,v=-this.m[2]*C,T=this.m[0]*C,k=C*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),N=C*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=E,this.m[1]=M,this.m[2]=v,this.m[3]=T,this.m[4]=k,this.m[5]=N,this},y.prototype.getMatrix=function(){return this.m},y.prototype.setAbsolutePosition=function(C,E){var M=this.m[0],v=this.m[1],T=this.m[2],k=this.m[3],N=this.m[4],O=this.m[5],I=(M*(E-O)-v*(C-N))/(M*k-v*T),q=(C-N-T*I)/M;return this.translate(q,I)},y.prototype.decompose=function(){var C=this.m[0],E=this.m[1],M=this.m[2],v=this.m[3],T=this.m[4],k=this.m[5],N=C*v-E*M,O={x:T,y:k,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(C!=0||E!=0){var I=Math.sqrt(C*C+E*E);O.rotation=E>0?Math.acos(C/I):-Math.acos(C/I),O.scaleX=I,O.scaleY=N/I,O.skewX=(C*M+E*v)/N,O.skewY=0}else if(M!=0||v!=0){var q=Math.sqrt(M*M+v*v);O.rotation=Math.PI/2-(v>0?Math.acos(-M/q):-Math.acos(M/q)),O.scaleX=N/q,O.scaleY=q,O.skewX=0,O.skewY=(C*M+E*v)/N}return O.rotation=r.Util._getRotation(O.rotation),O},y}();r.Transform=n;var a="[object Array]",i="[object Number]",o="[object String]",s="[object Boolean]",l=Math.PI/180,u=180/Math.PI,f="#",c="",p="0",g="Konva warning: ",h="Konva error: ",m="rgb(",x={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},w=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,S=[];r.Util={_isElement:function(y){return!!(y&&y.nodeType==1)},_isFunction:function(y){return!!(y&&y.constructor&&y.call&&y.apply)},_isPlainObject:function(y){return!!y&&y.constructor===Object},_isArray:function(y){return Object.prototype.toString.call(y)===a},_isNumber:function(y){return Object.prototype.toString.call(y)===i&&!isNaN(y)&&isFinite(y)},_isString:function(y){return Object.prototype.toString.call(y)===o},_isBoolean:function(y){return Object.prototype.toString.call(y)===s},isObject:function(y){return y instanceof Object},isValidSelector:function(y){if(typeof y!="string")return!1;var C=y[0];return C==="#"||C==="."||C===C.toUpperCase()},_sign:function(y){return y===0||y>0?1:-1},requestAnimFrame:function(y){S.push(y),S.length===1&&requestAnimationFrame(function(){var C=S;S=[],C.forEach(function(E){E()})})},createCanvasElement:function(){var y=document.createElement("canvas");try{y.style=y.style||{}}catch{}return y},createImageElement:function(){return document.createElement("img")},_isInDocument:function(y){for(;y=y.parentNode;)if(y==document)return!0;return!1},_simplifyArray:function(y){var C=[],E=y.length,M=r.Util,v,T;for(v=0;v<E;v++)T=y[v],M._isNumber(T)?T=Math.round(T*1e3)/1e3:M._isString(T)||(T=T.toString()),C.push(T);return C},_urlToImage:function(y,C){var E=new e.glob.Image;E.onload=function(){C(E)},E.src=y},_rgbToHex:function(y,C,E){return((1<<24)+(y<<16)+(C<<8)+E).toString(16).slice(1)},_hexToRgb:function(y){y=y.replace(f,c);var C=parseInt(y,16);return{r:C>>16&255,g:C>>8&255,b:C&255}},getRandomColor:function(){for(var y=(Math.random()*16777215<<0).toString(16);y.length<6;)y=p+y;return f+y},get:function(y,C){return y===void 0?C:y},getRGB:function(y){var C;return y in x?(C=x[y],{r:C[0],g:C[1],b:C[2]}):y[0]===f?this._hexToRgb(y.substring(1)):y.substr(0,4)===m?(C=w.exec(y.replace(/ /g,"")),{r:parseInt(C[1],10),g:parseInt(C[2],10),b:parseInt(C[3],10)}):{r:0,g:0,b:0}},colorToRGBA:function(y){return y=y||"black",r.Util._namedColorToRBA(y)||r.Util._hex3ColorToRGBA(y)||r.Util._hex6ColorToRGBA(y)||r.Util._rgbColorToRGBA(y)||r.Util._rgbaColorToRGBA(y)||r.Util._hslColorToRGBA(y)},_namedColorToRBA:function(y){var C=x[y.toLowerCase()];return C?{r:C[0],g:C[1],b:C[2],a:1}:null},_rgbColorToRGBA:function(y){if(y.indexOf("rgb(")===0){y=y.match(/rgb\(([^)]+)\)/)[1];var C=y.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:1}}},_rgbaColorToRGBA:function(y){if(y.indexOf("rgba(")===0){y=y.match(/rgba\(([^)]+)\)/)[1];var C=y.split(/ *, */).map(Number);return{r:C[0],g:C[1],b:C[2],a:C[3]}}},_hex6ColorToRGBA:function(y){if(y[0]==="#"&&y.length===7)return{r:parseInt(y.slice(1,3),16),g:parseInt(y.slice(3,5),16),b:parseInt(y.slice(5,7),16),a:1}},_hex3ColorToRGBA:function(y){if(y[0]==="#"&&y.length===4)return{r:parseInt(y[1]+y[1],16),g:parseInt(y[2]+y[2],16),b:parseInt(y[3]+y[3],16),a:1}},_hslColorToRGBA:function(y){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(y)){var C=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(y);C[0];var E=C.slice(1),M=Number(E[0])/360,v=Number(E[1])/100,T=Number(E[2])/100,k=void 0,N=void 0,O=void 0;if(v===0)return O=T*255,{r:Math.round(O),g:Math.round(O),b:Math.round(O),a:1};T<.5?k=T*(1+v):k=T+v-T*v;for(var I=2*T-k,q=[0,0,0],B=0;B<3;B++)N=M+1/3*-(B-1),N<0&&N++,N>1&&N--,6*N<1?O=I+(k-I)*6*N:2*N<1?O=k:3*N<2?O=I+(k-I)*(2/3-N)*6:O=I,q[B]=O*255;return{r:Math.round(q[0]),g:Math.round(q[1]),b:Math.round(q[2]),a:1}}},haveIntersection:function(y,C){return!(C.x>y.x+y.width||C.x+C.width<y.x||C.y>y.y+y.height||C.y+C.height<y.y)},cloneObject:function(y){var C={};for(var E in y)this._isPlainObject(y[E])?C[E]=this.cloneObject(y[E]):this._isArray(y[E])?C[E]=this.cloneArray(y[E]):C[E]=y[E];return C},cloneArray:function(y){return y.slice(0)},_degToRad:function(y){return y*l},_radToDeg:function(y){return y*u},_getRotation:function(y){return e.Konva.angleDeg?r.Util._radToDeg(y):y},_capitalize:function(y){return y.charAt(0).toUpperCase()+y.slice(1)},throw:function(y){throw new Error(h+y)},error:function(y){console.error(h+y)},warn:function(y){!e.Konva.showWarnings||console.warn(g+y)},extend:function(y,C){function E(){this.constructor=y}E.prototype=C.prototype;var M=y.prototype;y.prototype=new E;for(var v in M)M.hasOwnProperty(v)&&(y.prototype[v]=M[v]);y.__super__=C.prototype,y.super=C},_getControlPoints:function(y,C,E,M,v,T,k){var N=Math.sqrt(Math.pow(E-y,2)+Math.pow(M-C,2)),O=Math.sqrt(Math.pow(v-E,2)+Math.pow(T-M,2)),I=k*N/(N+O),q=k*O/(N+O),B=E-I*(v-y),j=M-I*(T-C),Y=E+q*(v-y),U=M+q*(T-C);return[B,j,Y,U]},_expandPoints:function(y,C){var E=y.length,M=[],v,T;for(v=2;v<E-2;v+=2)T=r.Util._getControlPoints(y[v-2],y[v-1],y[v],y[v+1],y[v+2],y[v+3],C),!isNaN(T[0])&&(M.push(T[0]),M.push(T[1]),M.push(y[v]),M.push(y[v+1]),M.push(T[2]),M.push(T[3]));return M},each:function(y,C){for(var E in y)C(E,y[E])},_inRange:function(y,C,E){return C<=y&&y<E},_getProjectionToSegment:function(y,C,E,M,v,T){var k,N,O,I=(y-E)*(y-E)+(C-M)*(C-M);if(I==0)k=y,N=C,O=(v-E)*(v-E)+(T-M)*(T-M);else{var q=((v-y)*(E-y)+(T-C)*(M-C))/I;q<0?(k=y,N=C,O=(y-v)*(y-v)+(C-T)*(C-T)):q>1?(k=E,N=M,O=(E-v)*(E-v)+(M-T)*(M-T)):(k=y+q*(E-y),N=C+q*(M-C),O=(k-v)*(k-v)+(N-T)*(N-T))}return[k,N,O]},_getProjectionToLine:function(y,C,E){var M=r.Util.cloneObject(y),v=Number.MAX_VALUE;return C.forEach(function(T,k){if(!(!E&&k===C.length-1)){var N=C[(k+1)%C.length],O=r.Util._getProjectionToSegment(T.x,T.y,N.x,N.y,y.x,y.y),I=O[0],q=O[1],B=O[2];B<v&&(M.x=I,M.y=q,v=B)}}),M},_prepareArrayForTween:function(y,C,E){var M,v=[],T=[];if(y.length>C.length){var k=C;C=y,y=k}for(M=0;M<y.length;M+=2)v.push({x:y[M],y:y[M+1]});for(M=0;M<C.length;M+=2)T.push({x:C[M],y:C[M+1]});var N=[];return T.forEach(function(O){var I=r.Util._getProjectionToLine(O,v,E);N.push(I.x),N.push(I.y)}),N},_prepareToStringify:function(y){var C;y.visitedByCircularReferenceRemoval=!0;for(var E in y)if(!!(y.hasOwnProperty(E)&&y[E]&&typeof y[E]=="object")){if(C=Object.getOwnPropertyDescriptor(y,E),y[E].visitedByCircularReferenceRemoval||r.Util._isElement(y[E]))if(C.configurable)delete y[E];else return null;else if(r.Util._prepareToStringify(y[E])===null)if(C.configurable)delete y[E];else return null}return delete y.visitedByCircularReferenceRemoval,y},_assign:function(y,C){for(var E in C)y[E]=C[E];return y},_getFirstPointerId:function(y){return y.touches?y.changedTouches[0].identifier:999}}})(wt);var or={},ct={},Xe={};Object.defineProperty(Xe,"__esModule",{value:!0});Xe.getComponentValidator=Xe.getBooleanValidator=Xe.getNumberArrayValidator=Xe.getFunctionValidator=Xe.getStringOrGradientValidator=Xe.getStringValidator=Xe.getNumberOrAutoValidator=Xe.getNumberOrArrayOfNumbersValidator=Xe.getNumberValidator=Xe.alphaComponent=Xe.RGBComponent=void 0;var Zn=dt,ar=wt;function Jn(r){return ar.Util._isString(r)?'"'+r+'"':Object.prototype.toString.call(r)==="[object Number]"||ar.Util._isBoolean(r)?r:Object.prototype.toString.call(r)}function lS(r){return r>255?255:r<0?0:Math.round(r)}Xe.RGBComponent=lS;function fS(r){return r>1?1:r<1e-4?1e-4:r}Xe.alphaComponent=fS;function cS(){if(Zn.Konva.isUnminified)return function(r,e){return ar.Util._isNumber(r)||ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),r}}Xe.getNumberValidator=cS;function dS(r){if(Zn.Konva.isUnminified)return function(e,t){var n=ar.Util._isNumber(e),a=ar.Util._isArray(e)&&e.length==r;return!n&&!a&&ar.Util.warn(Jn(e)+' is a not valid value for "'+t+'" attribute. The value should be a number or Array<number>('+r+")"),e}}Xe.getNumberOrArrayOfNumbersValidator=dS;function hS(){if(Zn.Konva.isUnminified)return function(r,e){var t=ar.Util._isNumber(r),n=r==="auto";return t||n||ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),r}}Xe.getNumberOrAutoValidator=hS;function vS(){if(Zn.Konva.isUnminified)return function(r,e){return ar.Util._isString(r)||ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),r}}Xe.getStringValidator=vS;function gS(){if(Zn.Konva.isUnminified)return function(r,e){var t=ar.Util._isString(r),n=Object.prototype.toString.call(r)==="[object CanvasGradient]";return t||n||ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),r}}Xe.getStringOrGradientValidator=gS;function pS(){if(Zn.Konva.isUnminified)return function(r,e){return ar.Util._isFunction(r)||ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a function.'),r}}Xe.getFunctionValidator=pS;function yS(){if(Zn.Konva.isUnminified)return function(r,e){return ar.Util._isArray(r)?r.forEach(function(t){ar.Util._isNumber(t)||ar.Util.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),r}}Xe.getNumberArrayValidator=yS;function mS(){if(Zn.Konva.isUnminified)return function(r,e){var t=r===!0||r===!1;return t||ar.Util.warn(Jn(r)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),r}}Xe.getBooleanValidator=mS;function bS(r){if(Zn.Konva.isUnminified)return function(e,t){return ar.Util.isObject(e)||ar.Util.warn(Jn(e)+' is a not valid value for "'+t+'" attribute. The value should be an object with properties '+r),e}}Xe.getComponentValidator=bS;(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Factory=void 0;var e=wt,t=Xe,n="get",a="set";r.Factory={addGetterSetter:function(i,o,s,l,u){r.Factory.addGetter(i,o,s),r.Factory.addSetter(i,o,l,u),r.Factory.addOverloadedGetterSetter(i,o)},addGetter:function(i,o,s){var l=n+e.Util._capitalize(o);i.prototype[l]=i.prototype[l]||function(){var u=this.attrs[o];return u===void 0?s:u}},addSetter:function(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]||r.Factory.overWriteSetter(i,o,s,l)},overWriteSetter:function(i,o,s,l){var u=a+e.Util._capitalize(o);i.prototype[u]=function(f){return s&&f!==void 0&&f!==null&&(f=s.call(this,f,o)),this._setAttr(o,f),l&&l.call(this),this}},addComponentsGetterSetter:function(i,o,s,l,u){var f=s.length,c=e.Util._capitalize,p=n+c(o),g=a+c(o),h,m;i.prototype[p]=function(){var w={};for(h=0;h<f;h++)m=s[h],w[m]=this.getAttr(o+c(m));return w};var x=t.getComponentValidator(s);i.prototype[g]=function(w){var S=this.attrs[o],y;l&&(w=l.call(this,w)),x&&x.call(this,w,o);for(y in w)!w.hasOwnProperty(y)||this._setAttr(o+c(y),w[y]);return this._fireChangeEvent(o,S,w),u&&u.call(this),this},r.Factory.addOverloadedGetterSetter(i,o)},addOverloadedGetterSetter:function(i,o){var s=e.Util._capitalize(o),l=a+s,u=n+s;i.prototype[o]=function(){return arguments.length?(this[l](arguments[0]),this):this[u]()}},addDeprecatedGetterSetter:function(i,o,s,l){e.Util.error("Adding deprecated "+o);var u=n+e.Util._capitalize(o),f=o+" property is deprecated and will be removed soon. Look at Konva change log for more information.";i.prototype[u]=function(){e.Util.error(f);var c=this.attrs[o];return c===void 0?s:c},r.Factory.addSetter(i,o,l,function(){e.Util.error(f)}),r.Factory.addOverloadedGetterSetter(i,o)},backCompat:function(i,o){e.Util.each(o,function(s,l){var u=i.prototype[l],f=n+e.Util._capitalize(s),c=a+e.Util._capitalize(s);function p(){u.apply(this,arguments),e.Util.error('"'+s+'" method is deprecated and will be removed soon. Use ""'+l+'" instead.')}i.prototype[s]=p,i.prototype[f]=p,i.prototype[c]=p})},afterSetFilter:function(){this._filterUpToDate=!1}}})(ct);var gn={},Wn={},bg=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Wn,"__esModule",{value:!0});Wn.HitContext=Wn.SceneContext=Wn.Context=void 0;var bf=wt,wg=dt,Xd=",",wS="(",xS=")",CS="([",SS="])",_S=";",TS="()",ES="=",Qd=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],PS=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"],kS=100,vu=function(){function r(e){this.canvas=e,this._context=e._canvas.getContext("2d"),wg.Konva.enableTrace&&(this.traceArr=[],this._enableTrace())}return r.prototype.fillShape=function(e){e.fillEnabled()&&this._fill(e)},r.prototype._fill=function(e){},r.prototype.strokeShape=function(e){e.hasStroke()&&this._stroke(e)},r.prototype._stroke=function(e){},r.prototype.fillStrokeShape=function(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))},r.prototype.getTrace=function(e){var t=this.traceArr,n=t.length,a="",i,o,s,l;for(i=0;i<n;i++)o=t[i],s=o.method,s?(l=o.args,a+=s,e?a+=TS:bf.Util._isArray(l[0])?a+=CS+l.join(Xd)+SS:a+=wS+l.join(Xd)+xS):(a+=o.property,e||(a+=ES+o.val)),a+=_S;return a},r.prototype.clearTrace=function(){this.traceArr=[]},r.prototype._trace=function(e){var t=this.traceArr,n;t.push(e),n=t.length,n>=kS&&t.shift()},r.prototype.reset=function(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)},r.prototype.getCanvas=function(){return this.canvas},r.prototype.clear=function(e){var t=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,t.getWidth()/t.pixelRatio,t.getHeight()/t.pixelRatio)},r.prototype._applyLineCap=function(e){var t=e.getLineCap();t&&this.setAttr("lineCap",t)},r.prototype._applyOpacity=function(e){var t=e.getAbsoluteOpacity();t!==1&&this.setAttr("globalAlpha",t)},r.prototype._applyLineJoin=function(e){var t=e.attrs.lineJoin;t&&this.setAttr("lineJoin",t)},r.prototype.setAttr=function(e,t){this._context[e]=t},r.prototype.arc=function(e,t,n,a,i,o){this._context.arc(e,t,n,a,i,o)},r.prototype.arcTo=function(e,t,n,a,i){this._context.arcTo(e,t,n,a,i)},r.prototype.beginPath=function(){this._context.beginPath()},r.prototype.bezierCurveTo=function(e,t,n,a,i,o){this._context.bezierCurveTo(e,t,n,a,i,o)},r.prototype.clearRect=function(e,t,n,a){this._context.clearRect(e,t,n,a)},r.prototype.clip=function(){this._context.clip()},r.prototype.closePath=function(){this._context.closePath()},r.prototype.createImageData=function(e,t){var n=arguments;if(n.length===2)return this._context.createImageData(e,t);if(n.length===1)return this._context.createImageData(e)},r.prototype.createLinearGradient=function(e,t,n,a){return this._context.createLinearGradient(e,t,n,a)},r.prototype.createPattern=function(e,t){return this._context.createPattern(e,t)},r.prototype.createRadialGradient=function(e,t,n,a,i,o){return this._context.createRadialGradient(e,t,n,a,i,o)},r.prototype.drawImage=function(e,t,n,a,i,o,s,l,u){var f=arguments,c=this._context;f.length===3?c.drawImage(e,t,n):f.length===5?c.drawImage(e,t,n,a,i):f.length===9&&c.drawImage(e,t,n,a,i,o,s,l,u)},r.prototype.ellipse=function(e,t,n,a,i,o,s,l){this._context.ellipse(e,t,n,a,i,o,s,l)},r.prototype.isPointInPath=function(e,t){return this._context.isPointInPath(e,t)},r.prototype.fill=function(){this._context.fill()},r.prototype.fillRect=function(e,t,n,a){this._context.fillRect(e,t,n,a)},r.prototype.strokeRect=function(e,t,n,a){this._context.strokeRect(e,t,n,a)},r.prototype.fillText=function(e,t,n){this._context.fillText(e,t,n)},r.prototype.measureText=function(e){return this._context.measureText(e)},r.prototype.getImageData=function(e,t,n,a){return this._context.getImageData(e,t,n,a)},r.prototype.lineTo=function(e,t){this._context.lineTo(e,t)},r.prototype.moveTo=function(e,t){this._context.moveTo(e,t)},r.prototype.rect=function(e,t,n,a){this._context.rect(e,t,n,a)},r.prototype.putImageData=function(e,t,n){this._context.putImageData(e,t,n)},r.prototype.quadraticCurveTo=function(e,t,n,a){this._context.quadraticCurveTo(e,t,n,a)},r.prototype.restore=function(){this._context.restore()},r.prototype.rotate=function(e){this._context.rotate(e)},r.prototype.save=function(){this._context.save()},r.prototype.scale=function(e,t){this._context.scale(e,t)},r.prototype.setLineDash=function(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)},r.prototype.getLineDash=function(){return this._context.getLineDash()},r.prototype.setTransform=function(e,t,n,a,i,o){this._context.setTransform(e,t,n,a,i,o)},r.prototype.stroke=function(){this._context.stroke()},r.prototype.strokeText=function(e,t,n,a){this._context.strokeText(e,t,n,a)},r.prototype.transform=function(e,t,n,a,i,o){this._context.transform(e,t,n,a,i,o)},r.prototype.translate=function(e,t){this._context.translate(e,t)},r.prototype._enableTrace=function(){var e=this,t=Qd.length,n=bf.Util._simplifyArray,a=this.setAttr,i,o,s=function(l){var u=e[l],f;e[l]=function(){return o=n(Array.prototype.slice.call(arguments,0)),f=u.apply(e,arguments),e._trace({method:l,args:o}),f}};for(i=0;i<t;i++)s(Qd[i]);e.setAttr=function(){a.apply(e,arguments);var l=arguments[0],u=arguments[1];(l==="shadowOffsetX"||l==="shadowOffsetY"||l==="shadowBlur")&&(u=u/this.canvas.getPixelRatio()),e._trace({property:l,val:u})}},r.prototype._applyGlobalCompositeOperation=function(e){var t=e.getGlobalCompositeOperation();t!=="source-over"&&this.setAttr("globalCompositeOperation",t)},r}();Wn.Context=vu;PS.forEach(function(r){Object.defineProperty(vu.prototype,r,{get:function(){return this._context[r]},set:function(e){this._context[r]=e}})});var AS=function(r){bg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fillColor=function(t){var n=t.fill();this.setAttr("fillStyle",n),t._fillFunc(this)},e.prototype._fillPattern=function(t){var n=t.getFillPatternX(),a=t.getFillPatternY(),i=wg.Konva.getAngle(t.getFillPatternRotation()),o=t.getFillPatternOffsetX(),s=t.getFillPatternOffsetY();t.getFillPatternScaleX(),t.getFillPatternScaleY(),(n||a)&&this.translate(n||0,a||0),i&&this.rotate(i),(o||s)&&this.translate(-1*o,-1*s),this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)},e.prototype._fillLinearGradient=function(t){var n=t._getLinearGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fillRadialGradient=function(t){var n=t._getRadialGradient();n&&(this.setAttr("fillStyle",n),t._fillFunc(this))},e.prototype._fill=function(t){var n=t.fill(),a=t.getFillPriority();if(n&&a==="color"){this._fillColor(t);return}var i=t.getFillPatternImage();if(i&&a==="pattern"){this._fillPattern(t);return}var o=t.getFillLinearGradientColorStops();if(o&&a==="linear-gradient"){this._fillLinearGradient(t);return}var s=t.getFillRadialGradientColorStops();if(s&&a==="radial-gradient"){this._fillRadialGradient(t);return}n?this._fillColor(t):i?this._fillPattern(t):o?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)},e.prototype._strokeLinearGradient=function(t){var n=t.getStrokeLinearGradientStartPoint(),a=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),o=this.createLinearGradient(n.x,n.y,a.x,a.y);if(i){for(var s=0;s<i.length;s+=2)o.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",o)}},e.prototype._stroke=function(t){var n=t.dash(),a=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!a){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),n&&t.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var o=t.getStrokeLinearGradientColorStops();o?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),a||this.restore()}},e.prototype._applyShadow=function(t){var n=bf.Util,a=n.get(t.getShadowRGBA(),"black"),i=n.get(t.getShadowBlur(),5),o=n.get(t.getShadowOffset(),{x:0,y:0}),s=t.getAbsoluteScale(),l=this.canvas.getPixelRatio(),u=s.x*l,f=s.y*l;this.setAttr("shadowColor",a),this.setAttr("shadowBlur",i*Math.min(Math.abs(u),Math.abs(f))),this.setAttr("shadowOffsetX",o.x*u),this.setAttr("shadowOffsetY",o.y*f)},e}(vu);Wn.SceneContext=AS;var MS=function(r){bg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._fill=function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},e.prototype.strokeShape=function(t){t.hasHitStroke()&&this._stroke(t)},e.prototype._stroke=function(t){if(t.hasHitStroke()){var n=t.getStrokeScaleEnabled();if(!n){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),o=i==="auto"?t.strokeWidth():i;this.setAttr("lineWidth",o),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),n||this.restore()}},e}(vu);Wn.HitContext=MS;var xg=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(gn,"__esModule",{value:!0});gn.HitCanvas=gn.SceneCanvas=gn.Canvas=void 0;var wf=wt,Cg=Wn,Sg=dt,DS=ct,OS=Xe,ds;function LS(){if(ds)return ds;var r=wf.Util.createCanvasElement(),e=r.getContext("2d");return ds=function(){var t=Sg.Konva._global.devicePixelRatio||1,n=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/n}(),ds}var gu=function(){function r(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var t=e||{},n=t.pixelRatio||Sg.Konva.pixelRatio||LS();this.pixelRatio=n,this._canvas=wf.Util.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}return r.prototype.getContext=function(){return this.context},r.prototype.getPixelRatio=function(){return this.pixelRatio},r.prototype.setPixelRatio=function(e){var t=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/t,this.getHeight()/t)},r.prototype.setWidth=function(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.setHeight=function(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var t=this.pixelRatio,n=this.getContext()._context;n.scale(t,t)},r.prototype.getWidth=function(){return this.width},r.prototype.getHeight=function(){return this.height},r.prototype.setSize=function(e,t){this.setWidth(e||0),this.setHeight(t||0)},r.prototype.toDataURL=function(e,t){try{return this._canvas.toDataURL(e,t)}catch{try{return this._canvas.toDataURL()}catch(a){return wf.Util.error("Unable to get data URL. "+a.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}},r}();gn.Canvas=gu;DS.Factory.addGetterSetter(gu,"pixelRatio",void 0,OS.getNumberValidator());var NS=function(r){xg(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.context=new Cg.SceneContext(n),n.setSize(t.width,t.height),n}return e}(gu);gn.SceneCanvas=NS;var RS=function(r){xg(e,r);function e(t){t===void 0&&(t={width:0,height:0});var n=r.call(this,t)||this;return n.hitCanvas=!0,n.context=new Cg.HitContext(n),n.setSize(t.width,t.height),n}return e}(gu);gn.HitCanvas=RS;var pu={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.DD=void 0;var e=dt,t=wt;r.DD={get isDragging(){var n=!1;return r.DD._dragElements.forEach(function(a){a.dragStatus==="dragging"&&(n=!0)}),n},justDragged:!1,get node(){var n;return r.DD._dragElements.forEach(function(a){n=a.node}),n},_dragElements:new Map,_drag:function(n){var a=[];r.DD._dragElements.forEach(function(i,o){var s=i.node,l=s.getStage();l.setPointersPositions(n),i.pointerId===void 0&&(i.pointerId=t.Util._getFirstPointerId(n));var u=l._changedPointerPositions.find(function(p){return p.id===i.pointerId});if(!!u){if(i.dragStatus!=="dragging"){var f=s.dragDistance(),c=Math.max(Math.abs(u.x-i.startPointerPos.x),Math.abs(u.y-i.startPointerPos.y));if(c<f||(s.startDrag({evt:n}),!s.isDragging()))return}s._setDragPosition(n,i),a.push(s)}}),a.forEach(function(i){i.fire("dragmove",{type:"dragmove",target:i,evt:n},!0)})},_endDragBefore:function(n){r.DD._dragElements.forEach(function(a,i){var o=a.node,s=o.getStage();n&&s.setPointersPositions(n);var l=s._changedPointerPositions.find(function(f){return f.id===a.pointerId});if(!!l){(a.dragStatus==="dragging"||a.dragStatus==="stopped")&&(r.DD.justDragged=!0,e.Konva.listenClickTap=!1,a.dragStatus="stopped");var u=a.node.getLayer()||a.node instanceof e.Konva.Stage&&a.node;u&&u.batchDraw()}})},_endDragAfter:function(n){r.DD._dragElements.forEach(function(a,i){a.dragStatus==="stopped"&&a.node.fire("dragend",{type:"dragend",target:a.node,evt:n},!0),a.dragStatus!=="dragging"&&r.DD._dragElements.delete(i)})}},e.Konva.isBrowser&&(window.addEventListener("mouseup",r.DD._endDragBefore,!0),window.addEventListener("touchend",r.DD._endDragBefore,!0),window.addEventListener("mousemove",r.DD._drag),window.addEventListener("touchmove",r.DD._drag),window.addEventListener("mouseup",r.DD._endDragAfter,!1),window.addEventListener("touchend",r.DD._endDragAfter,!1))})(pu);(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Node=r._removeName=r._addName=r._removeId=r.names=r.ids=void 0;var e=wt,t=ct,n=gn,a=dt,i=pu,o=Xe;r.ids={},r.names={};var s=function(K,P){!P||(r.ids[P]=K)},l=function(K,P){!K||r.ids[K]===P&&delete r.ids[K]};r._removeId=l;var u=function(K,P){P&&(r.names[P]||(r.names[P]=[]),r.names[P].push(K))};r._addName=u;var f=function(K,P){if(!!K){var D=r.names[K];if(!!D){for(var L=0;L<D.length;L++){var F=D[L];F._id===P&&D.splice(L,1)}D.length===0&&delete r.names[K]}}};r._removeName=f;var c="absoluteOpacity",p="allEventListeners",g="absoluteTransform",h="absoluteScale",m="canvas",x="Change",w="children",S="konva",y="listening",C="mouseenter",E="mouseleave",M="name",v="set",T="Shape",k=" ",N="stage",O="transform",I="Stage",q="visible",B=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(k),j=new e.Collection,Y=1,U=function(){function K(P){this._id=Y++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this.children=j,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(P),this._shouldFireChangeEvents=!0}return K.prototype.hasChildren=function(){return!1},K.prototype.getChildren=function(){return j},K.prototype._clearCache=function(P){(P===O||P===g)&&this._cache.get(P)?this._cache.get(P).dirty=!0:P?this._cache.delete(P):this._cache.clear()},K.prototype._getCache=function(P,D){var L=this._cache.get(P),F=P===O||P===g,W=L===void 0||F&&L.dirty===!0;return W&&(L=D.call(this),this._cache.set(P,L)),L},K.prototype._calculate=function(P,D,L){var F=this;if(!this._attachedDepsListeners.get(P)){var W=D.map(function(Z){return Z+"Change.konva"}).join(k);this.on(W,function(){F._clearCache(P)}),this._attachedDepsListeners.set(P,!0)}return this._getCache(P,L)},K.prototype._getCanvasCache=function(){return this._cache.get(m)},K.prototype._clearSelfAndDescendantCache=function(P,D){this._clearCache(P),D&&P===g&&this.fire("_clearTransformCache"),!this.isCached()&&this.children&&this.children.each(function(L){L._clearSelfAndDescendantCache(P,!0)})},K.prototype.clearCache=function(){return this._cache.delete(m),this._clearSelfAndDescendantCache(),this},K.prototype.cache=function(P){var D=P||{},L={};(D.x===void 0||D.y===void 0||D.width===void 0||D.height===void 0)&&(L=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var F=Math.ceil(D.width||L.width),W=Math.ceil(D.height||L.height),Z=D.pixelRatio,J=D.x===void 0?L.x:D.x,Q=D.y===void 0?L.y:D.y,oe=D.offset||0,fe=D.drawBorder||!1;if(!F||!W){e.Util.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}F+=oe*2,W+=oe*2,J-=oe,Q-=oe;var ce=new n.SceneCanvas({pixelRatio:Z,width:F,height:W}),Ce=new n.SceneCanvas({pixelRatio:Z,width:0,height:0}),Le=new n.HitCanvas({pixelRatio:1,width:F,height:W}),Re=ce.getContext(),De=Le.getContext();return Le.isCache=!0,ce.isCache=!0,this._cache.delete("canvas"),this._filterUpToDate=!1,D.imageSmoothingEnabled===!1&&(ce.getContext()._context.imageSmoothingEnabled=!1,Ce.getContext()._context.imageSmoothingEnabled=!1),Re.save(),De.save(),Re.translate(-J,-Q),De.translate(-J,-Q),this._isUnderCache=!0,this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(h),this.drawScene(ce,this),this.drawHit(Le,this),this._isUnderCache=!1,Re.restore(),De.restore(),fe&&(Re.save(),Re.beginPath(),Re.rect(0,0,F,W),Re.closePath(),Re.setAttr("strokeStyle","red"),Re.setAttr("lineWidth",5),Re.stroke(),Re.restore()),this._cache.set(m,{scene:ce,filter:Ce,hit:Le,x:J,y:Q}),this},K.prototype.isCached=function(){return this._cache.has("canvas")},K.prototype.getClientRect=function(P){throw new Error('abstract "getClientRect" method call')},K.prototype._transformedRect=function(P,D){var L=[{x:P.x,y:P.y},{x:P.x+P.width,y:P.y},{x:P.x+P.width,y:P.y+P.height},{x:P.x,y:P.y+P.height}],F,W,Z,J,Q=this.getAbsoluteTransform(D);return L.forEach(function(oe){var fe=Q.point(oe);F===void 0&&(F=Z=fe.x,W=J=fe.y),F=Math.min(F,fe.x),W=Math.min(W,fe.y),Z=Math.max(Z,fe.x),J=Math.max(J,fe.y)}),{x:F,y:W,width:Z-F,height:J-W}},K.prototype._drawCachedSceneCanvas=function(P){P.save(),P._applyOpacity(this),P._applyGlobalCompositeOperation(this);var D=this._getCanvasCache();P.translate(D.x,D.y);var L=this._getCachedSceneCanvas(),F=L.pixelRatio;P.drawImage(L._canvas,0,0,L.width/F,L.height/F),P.restore()},K.prototype._drawCachedHitCanvas=function(P){var D=this._getCanvasCache(),L=D.hit;P.save(),P.translate(D.x,D.y),P.drawImage(L._canvas,0,0),P.restore()},K.prototype._getCachedSceneCanvas=function(){var P=this.filters(),D=this._getCanvasCache(),L=D.scene,F=D.filter,W=F.getContext(),Z,J,Q,oe;if(P){if(!this._filterUpToDate){var fe=L.pixelRatio;F.setSize(L.width/L.pixelRatio,L.height/L.pixelRatio);try{for(Z=P.length,W.clear(),W.drawImage(L._canvas,0,0,L.getWidth()/fe,L.getHeight()/fe),J=W.getImageData(0,0,F.getWidth(),F.getHeight()),Q=0;Q<Z;Q++){if(oe=P[Q],typeof oe!="function"){e.Util.error("Filter should be type of function, but got "+typeof oe+" instead. Please check correct filters");continue}oe.call(this,J),W.putImageData(J,0,0)}}catch(ce){e.Util.error("Unable to apply filter. "+ce.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return F}return L},K.prototype.on=function(P,D){if(this._cache&&this._cache.delete(p),arguments.length===3)return this._delegate.apply(this,arguments);var L=P.split(k),F=L.length,W,Z,J,Q,oe;for(W=0;W<F;W++)Z=L[W],J=Z.split("."),Q=J[0],oe=J[1]||"",this.eventListeners[Q]||(this.eventListeners[Q]=[]),this.eventListeners[Q].push({name:oe,handler:D});return this},K.prototype.off=function(P,D){var L=(P||"").split(k),F=L.length,W,Z,J,Q,oe,fe;if(this._cache&&this._cache.delete(p),!P)for(Z in this.eventListeners)this._off(Z);for(W=0;W<F;W++)if(J=L[W],Q=J.split("."),oe=Q[0],fe=Q[1],oe)this.eventListeners[oe]&&this._off(oe,fe,D);else for(Z in this.eventListeners)this._off(Z,fe,D);return this},K.prototype.dispatchEvent=function(P){var D={target:this,type:P.type,evt:P};return this.fire(P.type,D),this},K.prototype.addEventListener=function(P,D){return this.on(P,function(L){D.call(this,L.evt)}),this},K.prototype.removeEventListener=function(P){return this.off(P),this},K.prototype._delegate=function(P,D,L){var F=this;this.on(P,function(W){for(var Z=W.target.findAncestors(D,!0,F),J=0;J<Z.length;J++)W=e.Util.cloneObject(W),W.currentTarget=Z[J],L.call(Z[J],W)})},K.prototype.remove=function(){return this.isDragging()&&this.stopDrag(),i.DD._dragElements.delete(this._id),this._remove(),this},K.prototype._clearCaches=function(){this._clearSelfAndDescendantCache(g),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(h),this._clearSelfAndDescendantCache(N),this._clearSelfAndDescendantCache(q),this._clearSelfAndDescendantCache(y)},K.prototype._remove=function(){this._clearCaches();var P=this.getParent();P&&P.children&&(P.children.splice(this.index,1),P._setChildrenIndices(),this.parent=null)},K.prototype.destroy=function(){r._removeId(this.id(),this);for(var P=(this.name()||"").split(/\s/g),D=0;D<P.length;D++){var L=P[D];r._removeName(L,this._id)}return this.remove(),this},K.prototype.getAttr=function(P){var D="get"+e.Util._capitalize(P);return e.Util._isFunction(this[D])?this[D]():this.attrs[P]},K.prototype.getAncestors=function(){for(var P=this.getParent(),D=new e.Collection;P;)D.push(P),P=P.getParent();return D},K.prototype.getAttrs=function(){return this.attrs||{}},K.prototype.setAttrs=function(P){var D=this;return this._batchTransformChanges(function(){var L,F;if(!P)return D;for(L in P)L!==w&&(F=v+e.Util._capitalize(L),e.Util._isFunction(D[F])?D[F](P[L]):D._setAttr(L,P[L]))}),this},K.prototype.isListening=function(){return this._getCache(y,this._isListening)},K.prototype._isListening=function(P){var D=this.listening();if(!D)return!1;var L=this.getParent();return L&&L!==P&&this!==P?L._isListening(P):!0},K.prototype.isVisible=function(){return this._getCache(q,this._isVisible)},K.prototype._isVisible=function(P){var D=this.visible();if(!D)return!1;var L=this.getParent();return L&&L!==P&&this!==P?L._isVisible(P):!0},K.prototype.shouldDrawHit=function(P,D){if(D===void 0&&(D=!1),P)return this._isVisible(P)&&this._isListening(P);var L=this.getLayer(),F=!1;i.DD._dragElements.forEach(function(Z){Z.dragStatus==="dragging"&&(Z.node.nodeType==="Stage"||Z.node.getLayer()===L)&&(F=!0)});var W=!D&&!a.Konva.hitOnDragEnabled&&F;return this.isListening()&&this.isVisible()&&!W},K.prototype.show=function(){return this.visible(!0),this},K.prototype.hide=function(){return this.visible(!1),this},K.prototype.getZIndex=function(){return this.index||0},K.prototype.getAbsoluteZIndex=function(){var P=this.getDepth(),D=this,L=0,F,W,Z,J;function Q(oe){for(F=[],W=oe.length,Z=0;Z<W;Z++)J=oe[Z],L++,J.nodeType!==T&&(F=F.concat(J.getChildren().toArray())),J._id===D._id&&(Z=W);F.length>0&&F[0].getDepth()<=P&&Q(F)}return D.nodeType!==I&&Q(D.getStage().getChildren()),L},K.prototype.getDepth=function(){for(var P=0,D=this.parent;D;)P++,D=D.parent;return P},K.prototype._batchTransformChanges=function(P){this._batchingTransformChange=!0,P(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(O),this._clearSelfAndDescendantCache(g,!0)),this._needClearTransformCache=!1},K.prototype.setPosition=function(P){var D=this;return this._batchTransformChanges(function(){D.x(P.x),D.y(P.y)}),this},K.prototype.getPosition=function(){return{x:this.x(),y:this.y()}},K.prototype.getAbsolutePosition=function(P){for(var D=!1,L=this.parent;L;){if(L.isCached()){D=!0;break}L=L.parent}D&&!P&&(P=!0);var F=this.getAbsoluteTransform(P).getMatrix(),W=new e.Transform,Z=this.offset();return W.m=F.slice(),W.translate(Z.x,Z.y),W.getTranslation()},K.prototype.setAbsolutePosition=function(P){var D=this._clearTransform();this.attrs.x=D.x,this.attrs.y=D.y,delete D.x,delete D.y,this._clearCache(O);var L=this._getAbsoluteTransform().copy();return L.invert(),L.translate(P.x,P.y),P={x:this.attrs.x+L.getTranslation().x,y:this.attrs.y+L.getTranslation().y},this._setTransform(D),this.setPosition({x:P.x,y:P.y}),this._clearCache(O),this._clearSelfAndDescendantCache(g),this},K.prototype._setTransform=function(P){var D;for(D in P)this.attrs[D]=P[D]},K.prototype._clearTransform=function(){var P={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,P},K.prototype.move=function(P){var D=P.x,L=P.y,F=this.x(),W=this.y();return D!==void 0&&(F+=D),L!==void 0&&(W+=L),this.setPosition({x:F,y:W}),this},K.prototype._eachAncestorReverse=function(P,D){var L=[],F=this.getParent(),W,Z;if(!(D&&D._id===this._id)){for(L.unshift(this);F&&(!D||F._id!==D._id);)L.unshift(F),F=F.parent;for(W=L.length,Z=0;Z<W;Z++)P(L[Z])}},K.prototype.rotate=function(P){return this.rotation(this.rotation()+P),this},K.prototype.moveToTop=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToTop function is ignored."),!1;var P=this.index;return this.parent.children.splice(P,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},K.prototype.moveUp=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveUp function is ignored."),!1;var P=this.index,D=this.parent.getChildren().length;return P<D-1?(this.parent.children.splice(P,1),this.parent.children.splice(P+1,0,this),this.parent._setChildrenIndices(),!0):!1},K.prototype.moveDown=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveDown function is ignored."),!1;var P=this.index;return P>0?(this.parent.children.splice(P,1),this.parent.children.splice(P-1,0,this),this.parent._setChildrenIndices(),!0):!1},K.prototype.moveToBottom=function(){if(!this.parent)return e.Util.warn("Node has no parent. moveToBottom function is ignored."),!1;var P=this.index;return P>0?(this.parent.children.splice(P,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},K.prototype.setZIndex=function(P){if(!this.parent)return e.Util.warn("Node has no parent. zIndex parameter is ignored."),this;(P<0||P>=this.parent.children.length)&&e.Util.warn("Unexpected value "+P+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var D=this.index;return this.parent.children.splice(D,1),this.parent.children.splice(P,0,this),this.parent._setChildrenIndices(),this},K.prototype.getAbsoluteOpacity=function(){return this._getCache(c,this._getAbsoluteOpacity)},K.prototype._getAbsoluteOpacity=function(){var P=this.opacity(),D=this.getParent();return D&&!D._isUnderCache&&(P*=D.getAbsoluteOpacity()),P},K.prototype.moveTo=function(P){return this.getParent()!==P&&(this._remove(),P.add(this)),this},K.prototype.toObject=function(){var P={},D=this.getAttrs(),L,F,W,Z,J;P.attrs={};for(L in D)F=D[L],J=e.Util.isObject(F)&&!e.Util._isPlainObject(F)&&!e.Util._isArray(F),!J&&(W=typeof this[L]=="function"&&this[L],delete D[L],Z=W?W.call(this):null,D[L]=F,Z!==F&&(P.attrs[L]=F));return P.className=this.getClassName(),e.Util._prepareToStringify(P)},K.prototype.toJSON=function(){return JSON.stringify(this.toObject())},K.prototype.getParent=function(){return this.parent},K.prototype.findAncestors=function(P,D,L){var F=[];D&&this._isMatch(P)&&F.push(this);for(var W=this.parent;W;){if(W===L)return F;W._isMatch(P)&&F.push(W),W=W.parent}return F},K.prototype.isAncestorOf=function(P){return!1},K.prototype.findAncestor=function(P,D,L){return this.findAncestors(P,D,L)[0]},K.prototype._isMatch=function(P){if(!P)return!1;if(typeof P=="function")return P(this);var D=P.replace(/ /g,"").split(","),L=D.length,F,W;for(F=0;F<L;F++)if(W=D[F],e.Util.isValidSelector(W)||(e.Util.warn('Selector "'+W+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),e.Util.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),e.Util.warn("Konva is awesome, right?")),W.charAt(0)==="#"){if(this.id()===W.slice(1))return!0}else if(W.charAt(0)==="."){if(this.hasName(W.slice(1)))return!0}else if(this.className===W||this.nodeType===W)return!0;return!1},K.prototype.getLayer=function(){var P=this.getParent();return P?P.getLayer():null},K.prototype.getStage=function(){return this._getCache(N,this._getStage)},K.prototype._getStage=function(){var P=this.getParent();if(P)return P.getStage()},K.prototype.fire=function(P,D,L){return D===void 0&&(D={}),D.target=D.target||this,L?this._fireAndBubble(P,D):this._fire(P,D),this},K.prototype.getAbsoluteTransform=function(P){return P?this._getAbsoluteTransform(P):this._getCache(g,this._getAbsoluteTransform)},K.prototype._getAbsoluteTransform=function(P){var D;if(P)return D=new e.Transform,this._eachAncestorReverse(function(Q){var oe=Q.transformsEnabled();oe==="all"?D.multiply(Q.getTransform()):oe==="position"&&D.translate(Q.x()-Q.offsetX(),Q.y()-Q.offsetY())},P),D;D=this._cache.get(g)||new e.Transform,this.parent?this.parent.getAbsoluteTransform().copyInto(D):D.reset();var L=this.transformsEnabled();if(L==="all")D.multiply(this.getTransform());else if(L==="position"){var F=this.attrs.x||0,W=this.attrs.y||0,Z=this.attrs.offsetX||0,J=this.attrs.offsetY||0;D.translate(F-Z,W-J)}return D.dirty=!1,D},K.prototype.getAbsoluteScale=function(P){for(var D=this;D;)D._isUnderCache&&(P=D),D=D.getParent();var L=this.getAbsoluteTransform(P),F=L.decompose();return{x:F.scaleX,y:F.scaleY}},K.prototype.getAbsoluteRotation=function(){return this.getAbsoluteTransform().decompose().rotation},K.prototype.getTransform=function(){return this._getCache(O,this._getTransform)},K.prototype._getTransform=function(){var P,D,L=this._cache.get(O)||new e.Transform;L.reset();var F=this.x(),W=this.y(),Z=a.Konva.getAngle(this.rotation()),J=(P=this.attrs.scaleX)!==null&&P!==void 0?P:1,Q=(D=this.attrs.scaleY)!==null&&D!==void 0?D:1,oe=this.attrs.skewX||0,fe=this.attrs.skewY||0,ce=this.attrs.offsetX||0,Ce=this.attrs.offsetY||0;return(F!==0||W!==0)&&L.translate(F,W),Z!==0&&L.rotate(Z),(oe!==0||fe!==0)&&L.skew(oe,fe),(J!==1||Q!==1)&&L.scale(J,Q),(ce!==0||Ce!==0)&&L.translate(-1*ce,-1*Ce),L.dirty=!1,L},K.prototype.clone=function(P){var D=e.Util.cloneObject(this.attrs),L,F,W,Z,J;for(L in P)D[L]=P[L];var Q=new this.constructor(D);for(L in this.eventListeners)for(F=this.eventListeners[L],W=F.length,Z=0;Z<W;Z++)J=F[Z],J.name.indexOf(S)<0&&(Q.eventListeners[L]||(Q.eventListeners[L]=[]),Q.eventListeners[L].push(J));return Q},K.prototype._toKonvaCanvas=function(P){P=P||{};var D=this.getClientRect(),L=this.getStage(),F=P.x!==void 0?P.x:D.x,W=P.y!==void 0?P.y:D.y,Z=P.pixelRatio||1,J=new n.SceneCanvas({width:P.width||D.width||(L?L.width():0),height:P.height||D.height||(L?L.height():0),pixelRatio:Z}),Q=J.getContext();return Q.save(),(F||W)&&Q.translate(-1*F,-1*W),this.drawScene(J),Q.restore(),J},K.prototype.toCanvas=function(P){return this._toKonvaCanvas(P)._canvas},K.prototype.toDataURL=function(P){P=P||{};var D=P.mimeType||null,L=P.quality||null,F=this._toKonvaCanvas(P).toDataURL(D,L);return P.callback&&P.callback(F),F},K.prototype.toImage=function(P){if(!P||!P.callback)throw"callback required for toImage method config argument";var D=P.callback;delete P.callback,e.Util._urlToImage(this.toDataURL(P),function(L){D(L)})},K.prototype.setSize=function(P){return this.width(P.width),this.height(P.height),this},K.prototype.getSize=function(){return{width:this.width(),height:this.height()}},K.prototype.getClassName=function(){return this.className||this.nodeType},K.prototype.getType=function(){return this.nodeType},K.prototype.getDragDistance=function(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():a.Konva.dragDistance},K.prototype._off=function(P,D,L){var F=this.eventListeners[P],W,Z,J;for(W=0;W<F.length;W++)if(Z=F[W].name,J=F[W].handler,(Z!=="konva"||D==="konva")&&(!D||Z===D)&&(!L||L===J)){if(F.splice(W,1),F.length===0){delete this.eventListeners[P];break}W--}},K.prototype._fireChangeEvent=function(P,D,L){this._fire(P+x,{oldVal:D,newVal:L})},K.prototype.setId=function(P){var D=this.id();return r._removeId(D,this),s(this,P),this._setAttr("id",P),this},K.prototype.setName=function(P){var D=(this.name()||"").split(/\s/g),L=(P||"").split(/\s/g),F,W;for(W=0;W<D.length;W++)F=D[W],L.indexOf(F)===-1&&F&&r._removeName(F,this._id);for(W=0;W<L.length;W++)F=L[W],D.indexOf(F)===-1&&F&&r._addName(this,F);return this._setAttr(M,P),this},K.prototype.addName=function(P){if(!this.hasName(P)){var D=this.name(),L=D?D+" "+P:P;this.setName(L)}return this},K.prototype.hasName=function(P){if(!P)return!1;var D=this.name();if(!D)return!1;var L=(D||"").split(/\s/g);return L.indexOf(P)!==-1},K.prototype.removeName=function(P){var D=(this.name()||"").split(/\s/g),L=D.indexOf(P);return L!==-1&&(D.splice(L,1),this.setName(D.join(" "))),this},K.prototype.setAttr=function(P,D){var L=this[v+e.Util._capitalize(P)];return e.Util._isFunction(L)?L.call(this,D):this._setAttr(P,D),this},K.prototype._setAttr=function(P,D,L){var F=this.attrs[P];F===D&&!e.Util.isObject(D)||(D==null?delete this.attrs[P]:this.attrs[P]=D,this._shouldFireChangeEvents&&this._fireChangeEvent(P,F,D))},K.prototype._setComponentAttr=function(P,D,L){var F;L!==void 0&&(F=this.attrs[P],F||(this.attrs[P]=this.getAttr(P)),this.attrs[P][D]=L,this._fireChangeEvent(P,F,L))},K.prototype._fireAndBubble=function(P,D,L){D&&this.nodeType===T&&(D.target=this);var F=(P===C||P===E)&&(L&&(this===L||this.isAncestorOf&&this.isAncestorOf(L))||this.nodeType==="Stage"&&!L);if(!F){this._fire(P,D);var W=(P===C||P===E)&&L&&L.isAncestorOf&&L.isAncestorOf(this)&&!L.isAncestorOf(this.parent);(D&&!D.cancelBubble||!D)&&this.parent&&this.parent.isListening()&&!W&&(L&&L.parent?this._fireAndBubble.call(this.parent,P,D,L):this._fireAndBubble.call(this.parent,P,D))}},K.prototype._getProtoListeners=function(P){var D=this._cache.get(p);if(!D){D={};for(var L=Object.getPrototypeOf(this);L;){if(!L.eventListeners){L=Object.getPrototypeOf(L);continue}for(var F in L.eventListeners){var W=L.eventListeners[F],Z=D[F]||[];D[F]=W.concat(Z)}L=Object.getPrototypeOf(L)}this._cache.set(p,D)}return D[P]},K.prototype._fire=function(P,D){D=D||{},D.currentTarget=this,D.type=P;var L=this._getProtoListeners(P);if(L)for(var F=0;F<L.length;F++)L[F].handler.call(this,D);var W=this.eventListeners[P];if(W)for(var F=0;F<W.length;F++)W[F].handler.call(this,D)},K.prototype.draw=function(){return this.drawScene(),this.drawHit(),this},K.prototype._createDragElement=function(P){var D=P?P.pointerId:void 0,L=this.getStage(),F=this.getAbsolutePosition(),W=L._getPointerById(D)||L._changedPointerPositions[0]||F;i.DD._dragElements.set(this._id,{node:this,startPointerPos:W,offset:{x:W.x-F.x,y:W.y-F.y},dragStatus:"ready",pointerId:D})},K.prototype.startDrag=function(P,D){D===void 0&&(D=!0),i.DD._dragElements.has(this._id)||this._createDragElement(P);var L=i.DD._dragElements.get(this._id);L.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:P&&P.evt},D)},K.prototype._setDragPosition=function(P,D){var L=this.getStage()._getPointerById(D.pointerId);if(!!L){var F={x:L.x-D.offset.x,y:L.y-D.offset.y},W=this.dragBoundFunc();if(W!==void 0){var Z=W.call(this,F,P);Z?F=Z:e.Util.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==F.x||this._lastPos.y!==F.y)&&(this.setAbsolutePosition(F),this.getLayer()?this.getLayer().batchDraw():this.getStage()&&this.getStage().batchDraw()),this._lastPos=F}},K.prototype.stopDrag=function(P){var D=i.DD._dragElements.get(this._id);D&&(D.dragStatus="stopped"),i.DD._endDragBefore(P),i.DD._endDragAfter(P)},K.prototype.setDraggable=function(P){this._setAttr("draggable",P),this._dragChange()},K.prototype.isDragging=function(){var P=i.DD._dragElements.get(this._id);return P?P.dragStatus==="dragging":!1},K.prototype._listenDrag=function(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(P){var D=this,L=P.evt.button!==void 0,F=!L||a.Konva.dragButtons.indexOf(P.evt.button)>=0;if(!!F&&!this.isDragging()){var W=!1;i.DD._dragElements.forEach(function(Z){D.isAncestorOf(Z.node)&&(W=!0)}),W||this._createDragElement(P)}})},K.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var P=this.getStage();if(!P)return;var D=i.DD._dragElements.get(this._id),L=D&&D.dragStatus==="dragging",F=D&&D.dragStatus==="ready";L?this.stopDrag():F&&i.DD._dragElements.delete(this._id)}},K.prototype._dragCleanup=function(){this.off("mousedown.konva"),this.off("touchstart.konva")},K.create=function(P,D){return e.Util._isString(P)&&(P=JSON.parse(P)),this._createNode(P,D)},K._createNode=function(P,D){var L=K.prototype.getClassName.call(P),F=P.children,W,Z,J;D&&(P.attrs.container=D),a._NODES_REGISTRY[L]||(e.Util.warn('Can not find a node with class name "'+L+'". Fallback to "Shape".'),L="Shape");var Q=a._NODES_REGISTRY[L];if(W=new Q(P.attrs),F)for(Z=F.length,J=0;J<Z;J++)W.add(K._createNode(F[J]));return W},K}();r.Node=U,U.prototype.nodeType="Node",U.prototype._attrsAffectingSize=[],U.prototype.eventListeners={},U.prototype.on.call(U.prototype,B,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(O),this._clearSelfAndDescendantCache(g)}),U.prototype.on.call(U.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(q)}),U.prototype.on.call(U.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(y)}),U.prototype.on.call(U.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(c)});var X=t.Factory.addGetterSetter;X(U,"zIndex"),X(U,"absolutePosition"),X(U,"position"),X(U,"x",0,o.getNumberValidator()),X(U,"y",0,o.getNumberValidator()),X(U,"globalCompositeOperation","source-over",o.getStringValidator()),X(U,"opacity",1,o.getNumberValidator()),X(U,"name","",o.getStringValidator()),X(U,"id","",o.getStringValidator()),X(U,"rotation",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(U,"scale",["x","y"]),X(U,"scaleX",1,o.getNumberValidator()),X(U,"scaleY",1,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(U,"skew",["x","y"]),X(U,"skewX",0,o.getNumberValidator()),X(U,"skewY",0,o.getNumberValidator()),t.Factory.addComponentsGetterSetter(U,"offset",["x","y"]),X(U,"offsetX",0,o.getNumberValidator()),X(U,"offsetY",0,o.getNumberValidator()),X(U,"dragDistance",null,o.getNumberValidator()),X(U,"width",0,o.getNumberValidator()),X(U,"height",0,o.getNumberValidator()),X(U,"listening",!0,o.getBooleanValidator()),X(U,"preventDefault",!0,o.getBooleanValidator()),X(U,"filters",null,function(K){return this._filterUpToDate=!1,K}),X(U,"visible",!0,o.getBooleanValidator()),X(U,"transformsEnabled","all",o.getStringValidator()),X(U,"size"),X(U,"dragBoundFunc"),X(U,"draggable",!1,o.getBooleanValidator()),t.Factory.backCompat(U,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),e.Collection.mapMethods(U)})(or);var Za={},IS=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Za,"__esModule",{value:!0});Za.Container=void 0;var Ba=wt,$i=ct,Wl=or,yu=Xe,Sa=function(r){IS(e,r);function e(){var t=r!==null&&r.apply(this,arguments)||this;return t.children=new Ba.Collection,t}return e.prototype.getChildren=function(t){if(!t)return this.children;var n=new Ba.Collection;return this.children.each(function(a){t(a)&&n.push(a)}),n},e.prototype.hasChildren=function(){return this.getChildren().length>0},e.prototype.removeChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.remove();return this.children=new Ba.Collection,this},e.prototype.destroyChildren=function(){for(var t,n=0;n<this.children.length;n++)t=this.children[n],t.parent=null,t.index=0,t.destroy();return this.children=new Ba.Collection,this},e.prototype.add=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}var i=t[0];if(i.getParent())return i.moveTo(this),this;var o=this.children;return this._validateAdd(i),i._clearCaches(),i.index=o.length,i.parent=this,o.push(i),this._fire("add",{child:i}),this},e.prototype.destroy=function(){return this.hasChildren()&&this.destroyChildren(),r.prototype.destroy.call(this),this},e.prototype.find=function(t){return this._generalFind(t,!1)},e.prototype.get=function(t){return Ba.Util.warn("collection.get() method is deprecated. Please use collection.find() instead."),this.find(t)},e.prototype.findOne=function(t){var n=this._generalFind(t,!0);return n.length>0?n[0]:void 0},e.prototype._generalFind=function(t,n){var a=[];return this._descendants(function(i){var o=i._isMatch(t);return o&&a.push(i),!!(o&&n)}),Ba.Collection.toCollection(a)},e.prototype._descendants=function(t){for(var n=!1,a=0;a<this.children.length;a++){var i=this.children[a];if(n=t(i),n)return!0;if(!!i.hasChildren()&&(n=i._descendants(t),n))return!0}return!1},e.prototype.toObject=function(){var t=Wl.Node.prototype.toObject.call(this);t.children=[];for(var n=this.getChildren(),a=n.length,i=0;i<a;i++){var o=n[i];t.children.push(o.toObject())}return t},e.prototype.isAncestorOf=function(t){for(var n=t.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1},e.prototype.clone=function(t){var n=Wl.Node.prototype.clone.call(this,t);return this.getChildren().each(function(a){n.add(a.clone())}),n},e.prototype.getAllIntersections=function(t){var n=[];return this.find("Shape").each(function(a){a.isVisible()&&a.intersects(t)&&n.push(a)}),n},e.prototype._setChildrenIndices=function(){this.children.each(function(t,n){t.index=n})},e.prototype.drawScene=function(t,n){var a=this.getLayer(),i=t||a&&a.getCanvas(),o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.scene,u=i&&i.isCache;if(!this.isVisible()&&!u)return this;if(l){o.save();var f=this.getAbsoluteTransform(n).getMatrix();o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),this._drawCachedSceneCanvas(o),o.restore()}else this._drawChildren("drawScene",i,n);return this},e.prototype.drawHit=function(t,n){if(!this.shouldDrawHit(n))return this;var a=this.getLayer(),i=t||a&&a.hitCanvas,o=i&&i.getContext(),s=this._getCanvasCache(),l=s&&s.hit;if(l){o.save();var u=this.getAbsoluteTransform(n).getMatrix();o.transform(u[0],u[1],u[2],u[3],u[4],u[5]),this._drawCachedHitCanvas(o),o.restore()}else this._drawChildren("drawHit",i,n);return this},e.prototype._drawChildren=function(t,n,a){var i=n&&n.getContext(),o=this.clipWidth(),s=this.clipHeight(),l=this.clipFunc(),u=o&&s||l,f=a===this;if(u){i.save();var c=this.getAbsoluteTransform(a),p=c.getMatrix();if(i.transform(p[0],p[1],p[2],p[3],p[4],p[5]),i.beginPath(),l)l.call(this,i,this);else{var g=this.clipX(),h=this.clipY();i.rect(g,h,o,s)}i.clip(),p=c.copy().invert().getMatrix(),i.transform(p[0],p[1],p[2],p[3],p[4],p[5])}var m=!f&&this.globalCompositeOperation()!=="source-over"&&t==="drawScene";m&&(i.save(),i._applyGlobalCompositeOperation(this)),this.children.each(function(x){x[t](n,a)}),m&&i.restore(),u&&i.restore()},e.prototype.getClientRect=function(t){t=t||{};var n=t.skipTransform,a=t.relativeTo,i,o,s,l,u={x:1/0,y:1/0,width:0,height:0},f=this;this.children.each(function(m){if(!!m.visible()){var x=m.getClientRect({relativeTo:f,skipShadow:t.skipShadow,skipStroke:t.skipStroke});x.width===0&&x.height===0||(i===void 0?(i=x.x,o=x.y,s=x.x+x.width,l=x.y+x.height):(i=Math.min(i,x.x),o=Math.min(o,x.y),s=Math.max(s,x.x+x.width),l=Math.max(l,x.y+x.height)))}});for(var c=this.find("Shape"),p=!1,g=0;g<c.length;g++){var h=c[g];if(h._isVisible(this)){p=!0;break}}return p&&i!==void 0?u={x:i,y:o,width:s-i,height:l-o}:u={x:0,y:0,width:0,height:0},n?u:this._transformedRect(u,a)},e}(Wl.Node);Za.Container=Sa;$i.Factory.addComponentsGetterSetter(Sa,"clip",["x","y","width","height"]);$i.Factory.addGetterSetter(Sa,"clipX",void 0,yu.getNumberValidator());$i.Factory.addGetterSetter(Sa,"clipY",void 0,yu.getNumberValidator());$i.Factory.addGetterSetter(Sa,"clipWidth",void 0,yu.getNumberValidator());$i.Factory.addGetterSetter(Sa,"clipHeight",void 0,yu.getNumberValidator());$i.Factory.addGetterSetter(Sa,"clipFunc");Ba.Collection.mapMethods(Sa);var _g={},Xr={};Object.defineProperty(Xr,"__esModule",{value:!0});Xr.releaseCapture=Xr.setPointerCapture=Xr.hasPointerCapture=Xr.createEvent=Xr.getCapturedShape=void 0;var BS=dt,Mo=new Map,Tg=BS.Konva._global.PointerEvent!==void 0;function FS(r){return Mo.get(r)}Xr.getCapturedShape=FS;function Zf(r){return{evt:r,pointerId:r.pointerId}}Xr.createEvent=Zf;function zS(r,e){return Mo.get(r)===e}Xr.hasPointerCapture=zS;function GS(r,e){Eg(r);var t=e.getStage();!t||(Mo.set(r,e),Tg&&e._fire("gotpointercapture",Zf(new PointerEvent("gotpointercapture"))))}Xr.setPointerCapture=GS;function Eg(r,e){var t=Mo.get(r);if(!!t){var n=t.getStage();n&&n.content,Mo.delete(r),Tg&&t._fire("lostpointercapture",Zf(new PointerEvent("lostpointercapture")))}}Xr.releaseCapture=Eg;(function(r){var e=Qe&&Qe.__extends||function(){var de=function(R,G){return de=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(re,te){re.__proto__=te}||function(re,te){for(var ie in te)Object.prototype.hasOwnProperty.call(te,ie)&&(re[ie]=te[ie])},de(R,G)};return function(R,G){de(R,G);function re(){this.constructor=R}R.prototype=G===null?Object.create(G):(re.prototype=G.prototype,new re)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Stage=r.stages=void 0;var t=wt,n=ct,a=Za,i=dt,o=gn,s=pu,l=dt,u=Xr,f="Stage",c="string",p="px",g="mouseout",h="mouseleave",m="mouseover",x="mouseenter",w="mousemove",S="mousedown",y="mouseup",C="pointermove",E="pointerdown",M="pointerup",v="pointercancel",T="lostpointercapture",k="contextmenu",N="click",O="dblclick",I="touchstart",q="touchend",B="tap",j="dbltap",Y="touchmove",U="wheel",X="contentMouseout",K="contentMouseover",P="contentMousemove",D="contentMousedown",L="contentMouseup",F="contentContextmenu",W="contentClick",Z="contentDblclick",J="contentTouchstart",Q="contentTouchend",oe="contentDbltap",fe="contentTap",ce="contentTouchmove",Ce="contentWheel",Le="relative",Re="konvajs-content",De="_",me="container",_e=5,we="",xe=[x,S,w,y,h,I,Y,q,m,U,k,E,C,M,v,T],Be=xe.length;function Ue(de,R){de.content.addEventListener(R,function(G){de[De+R](G)},!1)}var Ee="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);";r.stages=[];function Me(de){return de===void 0&&(de={}),(de.clipFunc||de.clipWidth||de.clipHeight)&&t.Util.warn("Stage does not support clipping. Please use clip for Layers or Groups."),de}var ke=function(de){e(R,de);function R(G){var re=de.call(this,Me(G))||this;return re._pointerPositions=[],re._changedPointerPositions=[],re._buildDOM(),re._bindContentEvents(),r.stages.push(re),re.on("widthChange.konva heightChange.konva",re._resizeDOM),re.on("visibleChange.konva",re._checkVisibility),re.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",function(){Me(re.attrs)}),re._checkVisibility(),re}return R.prototype._validateAdd=function(G){var re=G.getType()==="Layer",te=G.getType()==="FastLayer",ie=re||te;ie||t.Util.throw("You may only add layers to the stage.")},R.prototype._checkVisibility=function(){if(!!this.content){var G=this.visible()?"":"none";this.content.style.display=G}},R.prototype.setContainer=function(G){if(typeof G===c){if(G.charAt(0)==="."){var re=G.slice(1);G=document.getElementsByClassName(re)[0]}else{var te;G.charAt(0)!=="#"?te=G:te=G.slice(1),G=document.getElementById(te)}if(!G)throw"Can not find container in document with id "+te}return this._setAttr(me,G),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),G.appendChild(this.content)),this},R.prototype.shouldDrawHit=function(){return!0},R.prototype.clear=function(){var G=this.children,re=G.length,te;for(te=0;te<re;te++)G[te].clear();return this},R.prototype.clone=function(G){return G||(G={}),G.container=document.createElement("div"),a.Container.prototype.clone.call(this,G)},R.prototype.destroy=function(){de.prototype.destroy.call(this);var G=this.content;G&&t.Util._isInDocument(G)&&this.container().removeChild(G);var re=r.stages.indexOf(this);return re>-1&&r.stages.splice(re,1),this},R.prototype.getPointerPosition=function(){var G=this._pointerPositions[0]||this._changedPointerPositions[0];return G?{x:G.x,y:G.y}:(t.Util.warn(Ee),null)},R.prototype._getPointerById=function(G){return this._pointerPositions.find(function(re){return re.id===G})},R.prototype.getPointersPositions=function(){return this._pointerPositions},R.prototype.getStage=function(){return this},R.prototype.getContent=function(){return this.content},R.prototype._toKonvaCanvas=function(G){G=G||{},G.x=G.x||0,G.y=G.y||0,G.width=G.width||this.width(),G.height=G.height||this.height();var re=new o.SceneCanvas({width:G.width,height:G.height,pixelRatio:G.pixelRatio||1}),te=re.getContext()._context,ie=this.children;return(G.x||G.y)&&te.translate(-1*G.x,-1*G.y),ie.each(function(ge){if(!!ge.isVisible()){var ue=ge._toKonvaCanvas(G);te.drawImage(ue._canvas,G.x,G.y,ue.getWidth()/ue.getPixelRatio(),ue.getHeight()/ue.getPixelRatio())}}),re},R.prototype.getIntersection=function(G,re){if(!G)return null;var te=this.children,ie=te.length,ge=ie-1,ue,Se;for(ue=ge;ue>=0;ue--)if(Se=te[ue].getIntersection(G,re),Se)return Se;return null},R.prototype._resizeDOM=function(){var G=this.width(),re=this.height();this.content&&(this.content.style.width=G+p,this.content.style.height=re+p),this.bufferCanvas.setSize(G,re),this.bufferHitCanvas.setSize(G,re),this.children.each(function(te){te.setSize({width:G,height:re}),te.draw()})},R.prototype.add=function(G){if(arguments.length>1){for(var re=0;re<arguments.length;re++)this.add(arguments[re]);return this}de.prototype.add.call(this,G);var te=this.children.length;return te>_e&&t.Util.warn("The stage has "+te+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),G.setSize({width:this.width(),height:this.height()}),G.draw(),i.Konva.isBrowser&&this.content.appendChild(G.canvas._canvas),this},R.prototype.getParent=function(){return null},R.prototype.getLayer=function(){return null},R.prototype.hasPointerCapture=function(G){return u.hasPointerCapture(G,this)},R.prototype.setPointerCapture=function(G){u.setPointerCapture(G,this)},R.prototype.releaseCapture=function(G){u.releaseCapture(G,this)},R.prototype.getLayers=function(){return this.getChildren()},R.prototype._bindContentEvents=function(){if(!!i.Konva.isBrowser)for(var G=0;G<Be;G++)Ue(this,xe[G])},R.prototype._mouseenter=function(G){this.setPointersPositions(G),this._fire(x,{evt:G,target:this,currentTarget:this})},R.prototype._mouseover=function(G){this.setPointersPositions(G),this._fire(K,{evt:G}),this._fire(m,{evt:G,target:this,currentTarget:this})},R.prototype._mouseleave=function(G){var re;this.setPointersPositions(G);var te=!((re=this.targetShape)===null||re===void 0)&&re.getStage()?this.targetShape:null,ie=!s.DD.isDragging||i.Konva.hitOnDragEnabled;te&&ie?(te._fireAndBubble(g,{evt:G}),te._fireAndBubble(h,{evt:G}),this._fire(h,{evt:G,target:this,currentTarget:this}),this.targetShape=null):ie&&(this._fire(h,{evt:G,target:this,currentTarget:this}),this._fire(g,{evt:G,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[],this._fire(X,{evt:G})},R.prototype._mousemove=function(G){var re;if(i.Konva.UA.ieMobile)return this._touchmove(G);this.setPointersPositions(G);var te=t.Util._getFirstPointerId(G),ie,ge=!((re=this.targetShape)===null||re===void 0)&&re.getStage()?this.targetShape:null,ue=!s.DD.isDragging||i.Konva.hitOnDragEnabled;if(ue){if(ie=this.getIntersection(this.getPointerPosition()),ie&&ie.isListening()){var Se=ge!==ie;ue&&Se?(ge&&(ge._fireAndBubble(g,{evt:G,pointerId:te},ie),ge._fireAndBubble(h,{evt:G,pointerId:te},ie)),ie._fireAndBubble(m,{evt:G,pointerId:te},ge),ie._fireAndBubble(x,{evt:G,pointerId:te},ge),ie._fireAndBubble(w,{evt:G,pointerId:te}),this.targetShape=ie):ie._fireAndBubble(w,{evt:G,pointerId:te})}else ge&&ue&&(ge._fireAndBubble(g,{evt:G,pointerId:te}),ge._fireAndBubble(h,{evt:G,pointerId:te}),this._fire(m,{evt:G,target:this,currentTarget:this,pointerId:te}),this.targetShape=null),this._fire(w,{evt:G,target:this,currentTarget:this,pointerId:te});this._fire(P,{evt:G})}G.cancelable&&G.preventDefault()},R.prototype._mousedown=function(G){if(i.Konva.UA.ieMobile)return this._touchstart(G);this.setPointersPositions(G);var re=t.Util._getFirstPointerId(G),te=this.getIntersection(this.getPointerPosition());s.DD.justDragged=!1,i.Konva.listenClickTap=!0,te&&te.isListening()?(this.clickStartShape=te,te._fireAndBubble(S,{evt:G,pointerId:re})):this._fire(S,{evt:G,target:this,currentTarget:this,pointerId:re}),this._fire(D,{evt:G})},R.prototype._mouseup=function(G){if(i.Konva.UA.ieMobile)return this._touchend(G);this.setPointersPositions(G);var re=t.Util._getFirstPointerId(G),te=this.getIntersection(this.getPointerPosition()),ie=this.clickStartShape,ge=this.clickEndShape,ue=!1;i.Konva.inDblClickWindow?(ue=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(i.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){i.Konva.inDblClickWindow=!1},i.Konva.dblClickWindow),te&&te.isListening()?(this.clickEndShape=te,te._fireAndBubble(y,{evt:G,pointerId:re}),i.Konva.listenClickTap&&ie&&ie._id===te._id&&(te._fireAndBubble(N,{evt:G,pointerId:re}),ue&&ge&&ge===te&&te._fireAndBubble(O,{evt:G,pointerId:re}))):(this.clickEndShape=null,this._fire(y,{evt:G,target:this,currentTarget:this,pointerId:re}),i.Konva.listenClickTap&&this._fire(N,{evt:G,target:this,currentTarget:this,pointerId:re}),ue&&this._fire(O,{evt:G,target:this,currentTarget:this,pointerId:re})),this._fire(L,{evt:G}),i.Konva.listenClickTap&&(this._fire(W,{evt:G}),ue&&this._fire(Z,{evt:G})),i.Konva.listenClickTap=!1,G.cancelable&&G.preventDefault()},R.prototype._contextmenu=function(G){this.setPointersPositions(G);var re=this.getIntersection(this.getPointerPosition());re&&re.isListening()?re._fireAndBubble(k,{evt:G}):this._fire(k,{evt:G,target:this,currentTarget:this}),this._fire(F,{evt:G})},R.prototype._touchstart=function(G){var re=this;this.setPointersPositions(G);var te=!1;this._changedPointerPositions.forEach(function(ie){var ge=re.getIntersection(ie);i.Konva.listenClickTap=!0,s.DD.justDragged=!1;var ue=ge&&ge.isListening();!ue||(i.Konva.captureTouchEventsEnabled&&ge.setPointerCapture(ie.id),re.tapStartShape=ge,ge._fireAndBubble(I,{evt:G,pointerId:ie.id},re),te=!0,ge.isListening()&&ge.preventDefault()&&G.cancelable&&G.preventDefault())}),te||this._fire(I,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(J,{evt:G})},R.prototype._touchmove=function(G){var re=this;this.setPointersPositions(G);var te=!s.DD.isDragging||i.Konva.hitOnDragEnabled;if(te){var ie=!1,ge={};this._changedPointerPositions.forEach(function(ue){var Se=u.getCapturedShape(ue.id)||re.getIntersection(ue),Fe=Se&&Se.isListening();!Fe||ge[Se._id]||(ge[Se._id]=!0,Se._fireAndBubble(Y,{evt:G,pointerId:ue.id}),ie=!0,Se.isListening()&&Se.preventDefault()&&G.cancelable&&G.preventDefault())}),ie||this._fire(Y,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(ce,{evt:G})}s.DD.isDragging&&s.DD.node.preventDefault()&&G.cancelable&&G.preventDefault()},R.prototype._touchend=function(G){var re=this;this.setPointersPositions(G);var te=this.tapEndShape,ie=!1;i.Konva.inDblClickWindow?(ie=!0,clearTimeout(this.dblTimeout)):s.DD.justDragged||(i.Konva.inDblClickWindow=!0,clearTimeout(this.dblTimeout)),this.dblTimeout=setTimeout(function(){i.Konva.inDblClickWindow=!1},i.Konva.dblClickWindow);var ge=!1,ue={},Se=!1,Fe=!1;this._changedPointerPositions.forEach(function(ze){var Ie=u.getCapturedShape(ze.id)||re.getIntersection(ze);Ie&&Ie.releaseCapture(ze.id);var et=Ie&&Ie.isListening();!et||ue[Ie._id]||(ue[Ie._id]=!0,re.tapEndShape=Ie,Ie._fireAndBubble(q,{evt:G,pointerId:ze.id}),ge=!0,i.Konva.listenClickTap&&Ie===re.tapStartShape&&(Se=!0,Ie._fireAndBubble(B,{evt:G,pointerId:ze.id}),ie&&te&&te===Ie&&(Fe=!0,Ie._fireAndBubble(j,{evt:G,pointerId:ze.id}))),Ie.isListening()&&Ie.preventDefault()&&G.cancelable&&G.preventDefault())}),ge||this._fire(q,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),i.Konva.listenClickTap&&!Se&&(this.tapEndShape=null,this._fire(B,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})),ie&&!Fe&&this._fire(j,{evt:G,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),this._fire(Q,{evt:G}),i.Konva.listenClickTap&&(this._fire(fe,{evt:G}),ie&&this._fire(oe,{evt:G})),this.preventDefault()&&G.cancelable&&G.preventDefault(),i.Konva.listenClickTap=!1},R.prototype._wheel=function(G){this.setPointersPositions(G);var re=this.getIntersection(this.getPointerPosition());re&&re.isListening()?re._fireAndBubble(U,{evt:G}):this._fire(U,{evt:G,target:this,currentTarget:this}),this._fire(Ce,{evt:G})},R.prototype._pointerdown=function(G){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(G);var re=u.getCapturedShape(G.pointerId)||this.getIntersection(this.getPointerPosition());re&&re._fireAndBubble(E,u.createEvent(G))}},R.prototype._pointermove=function(G){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(G);var re=u.getCapturedShape(G.pointerId)||this.getIntersection(this.getPointerPosition());re&&re._fireAndBubble(C,u.createEvent(G))}},R.prototype._pointerup=function(G){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(G);var re=u.getCapturedShape(G.pointerId)||this.getIntersection(this.getPointerPosition());re&&re._fireAndBubble(M,u.createEvent(G)),u.releaseCapture(G.pointerId)}},R.prototype._pointercancel=function(G){if(!!i.Konva._pointerEventsEnabled){this.setPointersPositions(G);var re=u.getCapturedShape(G.pointerId)||this.getIntersection(this.getPointerPosition());re&&re._fireAndBubble(M,u.createEvent(G)),u.releaseCapture(G.pointerId)}},R.prototype._lostpointercapture=function(G){u.releaseCapture(G.pointerId)},R.prototype.setPointersPositions=function(G){var re=this,te=this._getContentPosition(),ie=null,ge=null;G=G||window.event,G.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],t.Collection.prototype.each.call(G.touches,function(ue){re._pointerPositions.push({id:ue.identifier,x:(ue.clientX-te.left)/te.scaleX,y:(ue.clientY-te.top)/te.scaleY})}),t.Collection.prototype.each.call(G.changedTouches||G.touches,function(ue){re._changedPointerPositions.push({id:ue.identifier,x:(ue.clientX-te.left)/te.scaleX,y:(ue.clientY-te.top)/te.scaleY})})):(ie=(G.clientX-te.left)/te.scaleX,ge=(G.clientY-te.top)/te.scaleY,this.pointerPos={x:ie,y:ge},this._pointerPositions=[{x:ie,y:ge,id:t.Util._getFirstPointerId(G)}],this._changedPointerPositions=[{x:ie,y:ge,id:t.Util._getFirstPointerId(G)}])},R.prototype._setPointerPosition=function(G){t.Util.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(G)},R.prototype._getContentPosition=function(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var G=this.content.getBoundingClientRect();return{top:G.top,left:G.left,scaleX:G.width/this.content.clientWidth||1,scaleY:G.height/this.content.clientHeight||1}},R.prototype._buildDOM=function(){if(this.bufferCanvas=new o.SceneCanvas({width:this.width(),height:this.height()}),this.bufferHitCanvas=new o.HitCanvas({pixelRatio:1,width:this.width(),height:this.height()}),!!i.Konva.isBrowser){var G=this.container();if(!G)throw"Stage has no container. A container is required.";G.innerHTML=we,this.content=document.createElement("div"),this.content.style.position=Le,this.content.style.userSelect="none",this.content.className=Re,this.content.setAttribute("role","presentation"),G.appendChild(this.content),this._resizeDOM()}},R.prototype.cache=function(){return t.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this},R.prototype.clearCache=function(){return this},R.prototype.batchDraw=function(){return this.children.each(function(G){G.batchDraw()}),this},R}(a.Container);r.Stage=ke,ke.prototype.nodeType=f,l._registerNode(ke),n.Factory.addGetterSetter(ke,"container")})(_g);var Vo={},pr={};(function(r){var e=Qe&&Qe.__extends||function(){var k=function(N,O){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,q){I.__proto__=q}||function(I,q){for(var B in q)Object.prototype.hasOwnProperty.call(q,B)&&(I[B]=q[B])},k(N,O)};return function(N,O){k(N,O);function I(){this.constructor=N}N.prototype=O===null?Object.create(O):(I.prototype=O.prototype,new I)}}();Object.defineProperty(r,"__esModule",{value:!0}),r.Shape=r.shapes=void 0;var t=wt,n=ct,a=or,i=Xe,o=dt,s=Xr,l="hasShadow",u="shadowRGBA",f="patternImage",c="linearGradient",p="radialGradient",g;function h(){return g||(g=t.Util.createCanvasElement().getContext("2d"),g)}r.shapes={};function m(k){k.fill()}function x(k){k.stroke()}function w(k){k.fill()}function S(k){k.stroke()}function y(){this._clearCache(l)}function C(){this._clearCache(u)}function E(){this._clearCache(f)}function M(){this._clearCache(c)}function v(){this._clearCache(p)}var T=function(k){e(N,k);function N(O){for(var I=k.call(this,O)||this,q;q=t.Util.getRandomColor(),!(q&&!(q in r.shapes)););return I.colorKey=q,r.shapes[q]=I,I}return N.prototype.getContext=function(){return this.getLayer().getContext()},N.prototype.getCanvas=function(){return this.getLayer().getCanvas()},N.prototype.getSceneFunc=function(){return this.attrs.sceneFunc||this._sceneFunc},N.prototype.getHitFunc=function(){return this.attrs.hitFunc||this._hitFunc},N.prototype.hasShadow=function(){return this._getCache(l,this._hasShadow)},N.prototype._hasShadow=function(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())},N.prototype._getFillPattern=function(){return this._getCache(f,this.__getFillPattern)},N.prototype.__getFillPattern=function(){if(this.fillPatternImage()){var O=h(),I=O.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");return I&&I.setTransform&&I.setTransform({a:this.fillPatternScaleX(),b:0,c:0,d:this.fillPatternScaleY(),e:0,f:0}),I}},N.prototype._getLinearGradient=function(){return this._getCache(c,this.__getLinearGradient)},N.prototype.__getLinearGradient=function(){var O=this.fillLinearGradientColorStops();if(O){for(var I=h(),q=this.fillLinearGradientStartPoint(),B=this.fillLinearGradientEndPoint(),j=I.createLinearGradient(q.x,q.y,B.x,B.y),Y=0;Y<O.length;Y+=2)j.addColorStop(O[Y],O[Y+1]);return j}},N.prototype._getRadialGradient=function(){return this._getCache(p,this.__getRadialGradient)},N.prototype.__getRadialGradient=function(){var O=this.fillRadialGradientColorStops();if(O){for(var I=h(),q=this.fillRadialGradientStartPoint(),B=this.fillRadialGradientEndPoint(),j=I.createRadialGradient(q.x,q.y,this.fillRadialGradientStartRadius(),B.x,B.y,this.fillRadialGradientEndRadius()),Y=0;Y<O.length;Y+=2)j.addColorStop(O[Y],O[Y+1]);return j}},N.prototype.getShadowRGBA=function(){return this._getCache(u,this._getShadowRGBA)},N.prototype._getShadowRGBA=function(){if(this.hasShadow()){var O=t.Util.colorToRGBA(this.shadowColor());return"rgba("+O.r+","+O.g+","+O.b+","+O.a*(this.shadowOpacity()||1)+")"}},N.prototype.hasFill=function(){var O=this;return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],function(){return O.fillEnabled()&&!!(O.fill()||O.fillPatternImage()||O.fillLinearGradientColorStops()||O.fillRadialGradientColorStops())})},N.prototype.hasStroke=function(){var O=this;return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],function(){return O.strokeEnabled()&&O.strokeWidth()&&!!(O.stroke()||O.strokeLinearGradientColorStops())})},N.prototype.hasHitStroke=function(){var O=this.hitStrokeWidth();return O==="auto"?this.hasStroke():this.strokeEnabled()&&!!O},N.prototype.intersects=function(O){var I=this.getStage(),q=I.bufferHitCanvas,B;return q.getContext().clear(),this.drawHit(q,null,!0),B=q.context.getImageData(Math.round(O.x),Math.round(O.y),1,1).data,B[3]>0},N.prototype.destroy=function(){return a.Node.prototype.destroy.call(this),delete r.shapes[this.colorKey],delete this.colorKey,this},N.prototype._useBufferCanvas=function(O){var I;if(!this.getStage())return!1;var q=(I=this.attrs.perfectDrawEnabled)!==null&&I!==void 0?I:!0;if(!q)return!1;var B=O||this.hasFill(),j=this.hasStroke(),Y=this.getAbsoluteOpacity()!==1;if(B&&j&&Y)return!0;var U=this.hasShadow(),X=this.shadowForStrokeEnabled();return!!(B&&j&&U&&X)},N.prototype.setStrokeHitEnabled=function(O){t.Util.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),O?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)},N.prototype.getStrokeHitEnabled=function(){return this.hitStrokeWidth()!==0},N.prototype.getSelfRect=function(){var O=this.size();return{x:this._centroid?-O.width/2:0,y:this._centroid?-O.height/2:0,width:O.width,height:O.height}},N.prototype.getClientRect=function(O){O===void 0&&(O={});var I=O.skipTransform,q=O.relativeTo,B=this.getSelfRect(),j=!O.skipStroke&&this.hasStroke(),Y=j&&this.strokeWidth()||0,U=B.width+Y,X=B.height+Y,K=!O.skipShadow&&this.hasShadow(),P=K?this.shadowOffsetX():0,D=K?this.shadowOffsetY():0,L=U+Math.abs(P),F=X+Math.abs(D),W=K&&this.shadowBlur()||0,Z=L+W*2,J=F+W*2,Q=0;Math.round(Y/2)!==Y/2&&(Q=1);var oe={width:Z+Q,height:J+Q,x:-Math.round(Y/2+W)+Math.min(P,0)+B.x,y:-Math.round(Y/2+W)+Math.min(D,0)+B.y};return I?oe:this._transformedRect(oe,q)},N.prototype.drawScene=function(O,I){var q=this.getLayer(),B=O||q.getCanvas(),j=B.getContext(),Y=this._getCanvasCache(),U=this.getSceneFunc(),X=this.hasShadow(),K,P,D,L=B.isCache,F=B.isCache,W=I===this;if(!this.isVisible()&&!L)return this;if(Y){j.save();var Z=this.getAbsoluteTransform(I).getMatrix();return j.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]),this._drawCachedSceneCanvas(j),j.restore(),this}if(!U)return this;if(j.save(),this._useBufferCanvas()&&!F){K=this.getStage(),P=K.bufferCanvas,D=P.getContext(),D.clear(),D.save(),D._applyLineJoin(this);var J=this.getAbsoluteTransform(I).getMatrix();D.transform(J[0],J[1],J[2],J[3],J[4],J[5]),U.call(this,D,this),D.restore();var Q=P.pixelRatio;X&&j._applyShadow(this),j._applyOpacity(this),j._applyGlobalCompositeOperation(this),j.drawImage(P._canvas,0,0,P.width/Q,P.height/Q)}else{if(j._applyLineJoin(this),!W){var J=this.getAbsoluteTransform(I).getMatrix();j.transform(J[0],J[1],J[2],J[3],J[4],J[5]),j._applyOpacity(this),j._applyGlobalCompositeOperation(this)}X&&j._applyShadow(this),U.call(this,j,this)}return j.restore(),this},N.prototype.drawHit=function(O,I,q){if(q===void 0&&(q=!1),!this.shouldDrawHit(I,q))return this;var B=this.getLayer(),j=O||B.hitCanvas,Y=j&&j.getContext(),U=this.hitFunc()||this.sceneFunc(),X=this._getCanvasCache(),K=X&&X.hit;if(this.colorKey||(console.log(this),t.Util.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. See the shape in logs above. If you want to reuse shape you should call remove() instead of destroy()")),K){Y.save();var P=this.getAbsoluteTransform(I).getMatrix();return Y.transform(P[0],P[1],P[2],P[3],P[4],P[5]),this._drawCachedHitCanvas(Y),Y.restore(),this}if(!U)return this;Y.save(),Y._applyLineJoin(this);var D=this===I;if(!D){var L=this.getAbsoluteTransform(I).getMatrix();Y.transform(L[0],L[1],L[2],L[3],L[4],L[5])}return U.call(this,Y,this),Y.restore(),this},N.prototype.drawHitFromCache=function(O){O===void 0&&(O=0);var I=this._getCanvasCache(),q=this._getCachedSceneCanvas(),B=I.hit,j=B.getContext(),Y=B.getWidth(),U=B.getHeight(),X,K,P,D,L,F;j.clear(),j.drawImage(q._canvas,0,0,Y,U);try{for(X=j.getImageData(0,0,Y,U),K=X.data,P=K.length,D=t.Util._hexToRgb(this.colorKey),L=0;L<P;L+=4)F=K[L+3],F>O?(K[L]=D.r,K[L+1]=D.g,K[L+2]=D.b,K[L+3]=255):K[L+3]=0;j.putImageData(X,0,0)}catch(W){t.Util.error("Unable to draw hit graph from cached scene canvas. "+W.message)}return this},N.prototype.hasPointerCapture=function(O){return s.hasPointerCapture(O,this)},N.prototype.setPointerCapture=function(O){s.setPointerCapture(O,this)},N.prototype.releaseCapture=function(O){s.releaseCapture(O,this)},N}(a.Node);r.Shape=T,T.prototype._fillFunc=m,T.prototype._strokeFunc=x,T.prototype._fillFuncHit=w,T.prototype._strokeFuncHit=S,T.prototype._centroid=!1,T.prototype.nodeType="Shape",o._registerNode(T),T.prototype.eventListeners={},T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",y),T.prototype.on.call(T.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",C),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva",E),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",M),T.prototype.on.call(T.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",v),n.Factory.addGetterSetter(T,"stroke",void 0,i.getStringOrGradientValidator()),n.Factory.addGetterSetter(T,"strokeWidth",2,i.getNumberValidator()),n.Factory.addGetterSetter(T,"fillAfterStrokeEnabled",!1),n.Factory.addGetterSetter(T,"hitStrokeWidth","auto",i.getNumberOrAutoValidator()),n.Factory.addGetterSetter(T,"strokeHitEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(T,"perfectDrawEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(T,"shadowForStrokeEnabled",!0,i.getBooleanValidator()),n.Factory.addGetterSetter(T,"lineJoin"),n.Factory.addGetterSetter(T,"lineCap"),n.Factory.addGetterSetter(T,"sceneFunc"),n.Factory.addGetterSetter(T,"hitFunc"),n.Factory.addGetterSetter(T,"dash"),n.Factory.addGetterSetter(T,"dashOffset",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"shadowColor",void 0,i.getStringValidator()),n.Factory.addGetterSetter(T,"shadowBlur",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"shadowOpacity",1,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(T,"shadowOffset",["x","y"]),n.Factory.addGetterSetter(T,"shadowOffsetX",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"shadowOffsetY",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"fillPatternImage"),n.Factory.addGetterSetter(T,"fill",void 0,i.getStringOrGradientValidator()),n.Factory.addGetterSetter(T,"fillPatternX",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"fillPatternY",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"fillLinearGradientColorStops"),n.Factory.addGetterSetter(T,"strokeLinearGradientColorStops"),n.Factory.addGetterSetter(T,"fillRadialGradientStartRadius",0),n.Factory.addGetterSetter(T,"fillRadialGradientEndRadius",0),n.Factory.addGetterSetter(T,"fillRadialGradientColorStops"),n.Factory.addGetterSetter(T,"fillPatternRepeat","repeat"),n.Factory.addGetterSetter(T,"fillEnabled",!0),n.Factory.addGetterSetter(T,"strokeEnabled",!0),n.Factory.addGetterSetter(T,"shadowEnabled",!0),n.Factory.addGetterSetter(T,"dashEnabled",!0),n.Factory.addGetterSetter(T,"strokeScaleEnabled",!0),n.Factory.addGetterSetter(T,"fillPriority","color"),n.Factory.addComponentsGetterSetter(T,"fillPatternOffset",["x","y"]),n.Factory.addGetterSetter(T,"fillPatternOffsetX",0,i.getNumberValidator()),n.Factory.addGetterSetter(T,"fillPatternOffsetY",0,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(T,"fillPatternScale",["x","y"]),n.Factory.addGetterSetter(T,"fillPatternScaleX",1,i.getNumberValidator()),n.Factory.addGetterSetter(T,"fillPatternScaleY",1,i.getNumberValidator()),n.Factory.addComponentsGetterSetter(T,"fillLinearGradientStartPoint",["x","y"]),n.Factory.addComponentsGetterSetter(T,"strokeLinearGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(T,"fillLinearGradientStartPointX",0),n.Factory.addGetterSetter(T,"strokeLinearGradientStartPointX",0),n.Factory.addGetterSetter(T,"fillLinearGradientStartPointY",0),n.Factory.addGetterSetter(T,"strokeLinearGradientStartPointY",0),n.Factory.addComponentsGetterSetter(T,"fillLinearGradientEndPoint",["x","y"]),n.Factory.addComponentsGetterSetter(T,"strokeLinearGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(T,"fillLinearGradientEndPointX",0),n.Factory.addGetterSetter(T,"strokeLinearGradientEndPointX",0),n.Factory.addGetterSetter(T,"fillLinearGradientEndPointY",0),n.Factory.addGetterSetter(T,"strokeLinearGradientEndPointY",0),n.Factory.addComponentsGetterSetter(T,"fillRadialGradientStartPoint",["x","y"]),n.Factory.addGetterSetter(T,"fillRadialGradientStartPointX",0),n.Factory.addGetterSetter(T,"fillRadialGradientStartPointY",0),n.Factory.addComponentsGetterSetter(T,"fillRadialGradientEndPoint",["x","y"]),n.Factory.addGetterSetter(T,"fillRadialGradientEndPointX",0),n.Factory.addGetterSetter(T,"fillRadialGradientEndPointY",0),n.Factory.addGetterSetter(T,"fillPatternRotation",0),n.Factory.backCompat(T,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),t.Collection.mapMethods(T)})(pr);var VS=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Vo,"__esModule",{value:!0});Vo.Layer=void 0;var Hn=wt,Kl=Za,vi=or,Jf=ct,Zd=gn,$S=Xe,qS=pr,HS=dt,US="#",WS="beforeDraw",KS="draw",Pg=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],jS=Pg.length,Ja=function(r){VS(e,r);function e(t){var n=r.call(this,t)||this;return n.canvas=new Zd.SceneCanvas,n.hitCanvas=new Zd.HitCanvas({pixelRatio:1}),n._waitingForDraw=!1,n.on("visibleChange.konva",n._checkVisibility),n._checkVisibility(),n.on("imageSmoothingEnabledChange.konva",n._setSmoothEnabled),n._setSmoothEnabled(),n}return e.prototype.createPNGStream=function(){var t=this.canvas._canvas;return t.createPNGStream()},e.prototype.getCanvas=function(){return this.canvas},e.prototype.getHitCanvas=function(){return this.hitCanvas},e.prototype.getContext=function(){return this.getCanvas().getContext()},e.prototype.clear=function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},e.prototype.setZIndex=function(t){r.prototype.setZIndex.call(this,t);var n=this.getStage();return n&&(n.content.removeChild(this.getCanvas()._canvas),t<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[t+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas)),this},e.prototype.moveToTop=function(){vi.Node.prototype.moveToTop.call(this);var t=this.getStage();return t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas)),!0},e.prototype.moveUp=function(){var t=vi.Node.prototype.moveUp.call(this);if(!t)return!1;var n=this.getStage();return n?(n.content.removeChild(this.getCanvas()._canvas),this.index<n.children.length-1?n.content.insertBefore(this.getCanvas()._canvas,n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getCanvas()._canvas),!0):!1},e.prototype.moveDown=function(){if(vi.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[this.index+1].getCanvas()._canvas)}return!0}return!1},e.prototype.moveToBottom=function(){if(vi.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var n=t.children;t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,n[1].getCanvas()._canvas)}return!0}return!1},e.prototype.getLayer=function(){return this},e.prototype.remove=function(){var t=this.getCanvas()._canvas;return vi.Node.prototype.remove.call(this),t&&t.parentNode&&Hn.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},e.prototype.getStage=function(){return this.parent},e.prototype.setSize=function(t){var n=t.width,a=t.height;return this.canvas.setSize(n,a),this.hitCanvas.setSize(n,a),this._setSmoothEnabled(),this},e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Hn.Util.throw("You may only add groups and shapes to a layer.")},e.prototype._toKonvaCanvas=function(t){return t=t||{},t.width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=t.x!==void 0?t.x:this.x(),t.y=t.y!==void 0?t.y:this.y(),vi.Node.prototype._toKonvaCanvas.call(this,t)},e.prototype._checkVisibility=function(){var t=this.visible();t?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"},e.prototype._setSmoothEnabled=function(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()},e.prototype.getWidth=function(){if(this.parent)return this.parent.width()},e.prototype.setWidth=function(){Hn.Util.warn('Can not change width of layer. Use "stage.width(value)" function instead.')},e.prototype.getHeight=function(){if(this.parent)return this.parent.height()},e.prototype.setHeight=function(){Hn.Util.warn('Can not change height of layer. Use "stage.height(value)" function instead.')},e.prototype.batchDraw=function(){var t=this;return this._waitingForDraw||(this._waitingForDraw=!0,Hn.Util.requestAnimFrame(function(){t.draw(),t._waitingForDraw=!1})),this},e.prototype.getIntersection=function(t,n){if(!this.isListening()||!this.isVisible())return null;for(var a=1,i=!1;;){for(var o=0;o<jS;o++){var s=Pg[o],l=this._getIntersection({x:t.x+s.x*a,y:t.y+s.y*a}),u=l.shape;if(u&&n)return u.findAncestor(n,!0);if(u)return u;if(i=!!l.antialiased,!l.antialiased)break}if(i)a+=1;else return null}},e.prototype._getIntersection=function(t){var n=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(t.x*n),Math.round(t.y*n),1,1).data,i=a[3];if(i===255){var o=Hn.Util._rgbToHex(a[0],a[1],a[2]),s=qS.shapes[US+o];return s?{shape:s}:{antialiased:!0}}else if(i>0)return{antialiased:!0};return{}},e.prototype.drawScene=function(t,n){var a=this.getLayer(),i=t||a&&a.getCanvas();return this._fire(WS,{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),Kl.Container.prototype.drawScene.call(this,i,n),this._fire(KS,{node:this}),this},e.prototype.drawHit=function(t,n){var a=this.getLayer(),i=t||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),Kl.Container.prototype.drawHit.call(this,i,n),this},e.prototype.enableHitGraph=function(){return this.hitGraphEnabled(!0),this},e.prototype.disableHitGraph=function(){return this.hitGraphEnabled(!1),this},e.prototype.setHitGraphEnabled=function(t){Hn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)},e.prototype.getHitGraphEnabled=function(t){return Hn.Util.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()},e.prototype.toggleHitCanvas=function(){if(!!this.parent){var t=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}},e}(Kl.Container);Vo.Layer=Ja;Ja.prototype.nodeType="Layer";HS._registerNode(Ja);Jf.Factory.addGetterSetter(Ja,"imageSmoothingEnabled",!0);Jf.Factory.addGetterSetter(Ja,"clearBeforeDraw",!0);Jf.Factory.addGetterSetter(Ja,"hitGraphEnabled",!0,$S.getBooleanValidator());Hn.Collection.mapMethods(Ja);var mu={},YS=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(mu,"__esModule",{value:!0});mu.FastLayer=void 0;var kg=wt,XS=Vo,QS=dt,bu=function(r){YS(e,r);function e(t){var n=r.call(this,t)||this;return n.listening(!1),kg.Util.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.'),n}return e}(XS.Layer);mu.FastLayer=bu;bu.prototype.nodeType="FastLayer";QS._registerNode(bu);kg.Collection.mapMethods(bu);var qi={},ZS=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qi,"__esModule",{value:!0});qi.Group=void 0;var Ag=wt,JS=Za,e2=dt,wu=function(r){ZS(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._validateAdd=function(t){var n=t.getType();n!=="Group"&&n!=="Shape"&&Ag.Util.throw("You may only add groups and shapes to groups.")},e}(JS.Container);qi.Group=wu;wu.prototype.nodeType="Group";e2._registerNode(wu);Ag.Collection.mapMethods(wu);var Hi={};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.Animation=void 0;var jl=dt,Yl=function(){return jl.glob.performance&&jl.glob.performance.now?function(){return jl.glob.performance.now()}:function(){return new Date().getTime()}}(),t2=function(){function r(e,t){this.id=r.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:Yl(),frameRate:0},this.func=e,this.setLayers(t)}return r.prototype.setLayers=function(e){var t=[];return e?e.length>0?t=e:t=[e]:t=[],this.layers=t,this},r.prototype.getLayers=function(){return this.layers},r.prototype.addLayer=function(e){var t=this.layers,n=t.length,a;for(a=0;a<n;a++)if(t[a]._id===e._id)return!1;return this.layers.push(e),!0},r.prototype.isRunning=function(){var e=r,t=e.animations,n=t.length,a;for(a=0;a<n;a++)if(t[a].id===this.id)return!0;return!1},r.prototype.start=function(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=Yl(),r._addAnimation(this),this},r.prototype.stop=function(){return r._removeAnimation(this),this},r.prototype._updateFrameObject=function(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff},r._addAnimation=function(e){this.animations.push(e),this._handleAnimation()},r._removeAnimation=function(e){var t=e.id,n=this.animations,a=n.length,i;for(i=0;i<a;i++)if(n[i].id===t){this.animations.splice(i,1);break}},r._runFrames=function(){var e={},t=this.animations,n,a,i,o,s,l,u,f,c;for(o=0;o<t.length;o++)if(n=t[o],a=n.layers,i=n.func,n._updateFrameObject(Yl()),l=a.length,i?c=i.call(n,n.frame)!==!1:c=!0,!!c)for(s=0;s<l;s++)u=a[s],u._id!==void 0&&(e[u._id]=u);for(f in e)!e.hasOwnProperty(f)||e[f].draw()},r._animationLoop=function(){var e=r;e.animations.length?(e._runFrames(),requestAnimationFrame(e._animationLoop)):e.animRunning=!1},r._handleAnimation=function(){this.animRunning||(this.animRunning=!0,requestAnimationFrame(this._animationLoop))},r.animations=[],r.animIdCounter=0,r.animRunning=!1,r}();Hi.Animation=t2;var Mg={};(function(r){Object.defineProperty(r,"__esModule",{value:!0}),r.Easings=r.Tween=void 0;var e=wt,t=Hi,n=or,a=dt,i={node:1,duration:1,easing:1,onFinish:1,yoyo:1},o=1,s=2,l=3,u=0,f=["fill","stroke","shadowColor"],c=function(){function g(h,m,x,w,S,y,C){this.prop=h,this.propFunc=m,this.begin=w,this._pos=w,this.duration=y,this._change=0,this.prevPos=0,this.yoyo=C,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=x,this._change=S-this.begin,this.pause()}return g.prototype.fire=function(h){var m=this[h];m&&m()},g.prototype.setTime=function(h){h>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():h<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=h,this.update())},g.prototype.getTime=function(){return this._time},g.prototype.setPosition=function(h){this.prevPos=this._pos,this.propFunc(h),this._pos=h},g.prototype.getPosition=function(h){return h===void 0&&(h=this._time),this.func(h,this.begin,this._change,this.duration)},g.prototype.play=function(){this.state=s,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},g.prototype.reverse=function(){this.state=l,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},g.prototype.seek=function(h){this.pause(),this._time=h,this.update(),this.fire("onSeek")},g.prototype.reset=function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},g.prototype.finish=function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},g.prototype.update=function(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")},g.prototype.onEnterFrame=function(){var h=this.getTimer()-this._startTime;this.state===s?this.setTime(h):this.state===l&&this.setTime(this.duration-h)},g.prototype.pause=function(){this.state=o,this.fire("onPause")},g.prototype.getTimer=function(){return new Date().getTime()},g}(),p=function(){function g(h){var m=this,x=h.node,w=x._id,S,y=h.easing||r.Easings.Linear,C=!!h.yoyo,E;typeof h.duration>"u"?S=.3:h.duration===0?S=.001:S=h.duration,this.node=x,this._id=u++;var M=x.getLayer()||(x instanceof a.Konva.Stage?x.getLayers():null);M||e.Util.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new t.Animation(function(){m.tween.onEnterFrame()},M),this.tween=new c(E,function(v){m._tweenFunc(v)},y,0,1,S*1e3,C),this._addListeners(),g.attrs[w]||(g.attrs[w]={}),g.attrs[w][this._id]||(g.attrs[w][this._id]={}),g.tweens[w]||(g.tweens[w]={});for(E in h)i[E]===void 0&&this._addAttr(E,h[E]);this.reset(),this.onFinish=h.onFinish,this.onReset=h.onReset,this.onUpdate=h.onUpdate}return g.prototype._addAttr=function(h,m){var x=this.node,w=x._id,S,y,C,E,M,v,T,k;if(C=g.tweens[w][h],C&&delete g.attrs[w][C][h],S=x.getAttr(h),e.Util._isArray(m))if(y=[],M=Math.max(m.length,S.length),h==="points"&&m.length!==S.length&&(m.length>S.length?(T=S,S=e.Util._prepareArrayForTween(S,m,x.closed())):(v=m,m=e.Util._prepareArrayForTween(m,S,x.closed()))),h.indexOf("fill")===0)for(E=0;E<M;E++)if(E%2===0)y.push(m[E]-S[E]);else{var N=e.Util.colorToRGBA(S[E]);k=e.Util.colorToRGBA(m[E]),S[E]=N,y.push({r:k.r-N.r,g:k.g-N.g,b:k.b-N.b,a:k.a-N.a})}else for(E=0;E<M;E++)y.push(m[E]-S[E]);else f.indexOf(h)!==-1?(S=e.Util.colorToRGBA(S),k=e.Util.colorToRGBA(m),y={r:k.r-S.r,g:k.g-S.g,b:k.b-S.b,a:k.a-S.a}):y=m-S;g.attrs[w][this._id][h]={start:S,diff:y,end:m,trueEnd:v,trueStart:T},g.tweens[w][h]=this._id},g.prototype._tweenFunc=function(h){var m=this.node,x=g.attrs[m._id][this._id],w,S,y,C,E,M,v,T;for(w in x){if(S=x[w],y=S.start,C=S.diff,T=S.end,e.Util._isArray(y))if(E=[],v=Math.max(y.length,T.length),w.indexOf("fill")===0)for(M=0;M<v;M++)M%2===0?E.push((y[M]||0)+C[M]*h):E.push("rgba("+Math.round(y[M].r+C[M].r*h)+","+Math.round(y[M].g+C[M].g*h)+","+Math.round(y[M].b+C[M].b*h)+","+(y[M].a+C[M].a*h)+")");else for(M=0;M<v;M++)E.push((y[M]||0)+C[M]*h);else f.indexOf(w)!==-1?E="rgba("+Math.round(y.r+C.r*h)+","+Math.round(y.g+C.g*h)+","+Math.round(y.b+C.b*h)+","+(y.a+C.a*h)+")":E=y+C*h;m.setAttr(w,E)}},g.prototype._addListeners=function(){var h=this;this.tween.onPlay=function(){h.anim.start()},this.tween.onReverse=function(){h.anim.start()},this.tween.onPause=function(){h.anim.stop()},this.tween.onFinish=function(){var m=h.node,x=g.attrs[m._id][h._id];x.points&&x.points.trueEnd&&m.setAttr("points",x.points.trueEnd),h.onFinish&&h.onFinish.call(h)},this.tween.onReset=function(){var m=h.node,x=g.attrs[m._id][h._id];x.points&&x.points.trueStart&&m.points(x.points.trueStart),h.onReset&&h.onReset()},this.tween.onUpdate=function(){h.onUpdate&&h.onUpdate.call(h)}},g.prototype.play=function(){return this.tween.play(),this},g.prototype.reverse=function(){return this.tween.reverse(),this},g.prototype.reset=function(){return this.tween.reset(),this},g.prototype.seek=function(h){return this.tween.seek(h*1e3),this},g.prototype.pause=function(){return this.tween.pause(),this},g.prototype.finish=function(){return this.tween.finish(),this},g.prototype.destroy=function(){var h=this.node._id,m=this._id,x=g.tweens[h],w;this.pause();for(w in x)delete g.tweens[h][w];delete g.attrs[h][m]},g.attrs={},g.tweens={},g}();r.Tween=p,n.Node.prototype.to=function(g){var h=g.onFinish;g.node=this,g.onFinish=function(){this.destroy(),h&&h()};var m=new p(g);m.play()},r.Easings={BackEaseIn:function(g,h,m,x){var w=1.70158;return m*(g/=x)*g*((w+1)*g-w)+h},BackEaseOut:function(g,h,m,x){var w=1.70158;return m*((g=g/x-1)*g*((w+1)*g+w)+1)+h},BackEaseInOut:function(g,h,m,x){var w=1.70158;return(g/=x/2)<1?m/2*(g*g*(((w*=1.525)+1)*g-w))+h:m/2*((g-=2)*g*(((w*=1.525)+1)*g+w)+2)+h},ElasticEaseIn:function(g,h,m,x,w,S){var y=0;return g===0?h:(g/=x)===1?h+m:(S||(S=x*.3),!w||w<Math.abs(m)?(w=m,y=S/4):y=S/(2*Math.PI)*Math.asin(m/w),-(w*Math.pow(2,10*(g-=1))*Math.sin((g*x-y)*(2*Math.PI)/S))+h)},ElasticEaseOut:function(g,h,m,x,w,S){var y=0;return g===0?h:(g/=x)===1?h+m:(S||(S=x*.3),!w||w<Math.abs(m)?(w=m,y=S/4):y=S/(2*Math.PI)*Math.asin(m/w),w*Math.pow(2,-10*g)*Math.sin((g*x-y)*(2*Math.PI)/S)+m+h)},ElasticEaseInOut:function(g,h,m,x,w,S){var y=0;return g===0?h:(g/=x/2)===2?h+m:(S||(S=x*(.3*1.5)),!w||w<Math.abs(m)?(w=m,y=S/4):y=S/(2*Math.PI)*Math.asin(m/w),g<1?-.5*(w*Math.pow(2,10*(g-=1))*Math.sin((g*x-y)*(2*Math.PI)/S))+h:w*Math.pow(2,-10*(g-=1))*Math.sin((g*x-y)*(2*Math.PI)/S)*.5+m+h)},BounceEaseOut:function(g,h,m,x){return(g/=x)<1/2.75?m*(7.5625*g*g)+h:g<2/2.75?m*(7.5625*(g-=1.5/2.75)*g+.75)+h:g<2.5/2.75?m*(7.5625*(g-=2.25/2.75)*g+.9375)+h:m*(7.5625*(g-=2.625/2.75)*g+.984375)+h},BounceEaseIn:function(g,h,m,x){return m-r.Easings.BounceEaseOut(x-g,0,m,x)+h},BounceEaseInOut:function(g,h,m,x){return g<x/2?r.Easings.BounceEaseIn(g*2,0,m,x)*.5+h:r.Easings.BounceEaseOut(g*2-x,0,m,x)*.5+m*.5+h},EaseIn:function(g,h,m,x){return m*(g/=x)*g+h},EaseOut:function(g,h,m,x){return-m*(g/=x)*(g-2)+h},EaseInOut:function(g,h,m,x){return(g/=x/2)<1?m/2*g*g+h:-m/2*(--g*(g-2)-1)+h},StrongEaseIn:function(g,h,m,x){return m*(g/=x)*g*g*g*g+h},StrongEaseOut:function(g,h,m,x){return m*((g=g/x-1)*g*g*g*g+1)+h},StrongEaseInOut:function(g,h,m,x){return(g/=x/2)<1?m/2*g*g*g*g*g+h:m/2*((g-=2)*g*g*g*g+2)+h},Linear:function(g,h,m,x){return m*g/x+h}}})(Mg);Object.defineProperty(hu,"__esModule",{value:!0});hu.Konva=void 0;var r2=dt,hs=wt,Xl=or,n2=Za,Jd=_g,a2=Vo,i2=mu,o2=qi,s2=pu,eh=pr,u2=Hi,th=Mg,l2=Wn,f2=gn;hu.Konva=hs.Util._assign(r2.Konva,{Collection:hs.Collection,Util:hs.Util,Transform:hs.Transform,Node:Xl.Node,ids:Xl.ids,names:Xl.names,Container:n2.Container,Stage:Jd.Stage,stages:Jd.stages,Layer:a2.Layer,FastLayer:i2.FastLayer,Group:o2.Group,DD:s2.DD,Shape:eh.Shape,shapes:eh.shapes,Animation:u2.Animation,Tween:th.Tween,Easings:th.Easings,Context:l2.Context,Canvas:f2.Canvas});var xu={},c2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(xu,"__esModule",{value:!0});xu.Arc=void 0;var d2=wt,Cu=ct,h2=pr,v2=dt,Su=Xe,g2=dt,Bn=function(r){c2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=v2.Konva.getAngle(this.angle()),a=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,n,a),t.arc(0,0,this.innerRadius(),n,0,!a),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(h2.Shape);xu.Arc=Bn;Bn.prototype._centroid=!0;Bn.prototype.className="Arc";Bn.prototype._attrsAffectingSize=["innerRadius","outerRadius"];g2._registerNode(Bn);Cu.Factory.addGetterSetter(Bn,"innerRadius",0,Su.getNumberValidator());Cu.Factory.addGetterSetter(Bn,"outerRadius",0,Su.getNumberValidator());Cu.Factory.addGetterSetter(Bn,"angle",0,Su.getNumberValidator());Cu.Factory.addGetterSetter(Bn,"clockwise",!1,Su.getBooleanValidator());d2.Collection.mapMethods(Bn);var _u={},$o={},p2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),y2=Qe&&Qe.__spreadArrays||function(){for(var r=0,e=0,t=arguments.length;e<t;e++)r+=arguments[e].length;for(var n=Array(r),a=0,e=0;e<t;e++)for(var i=arguments[e],o=0,s=i.length;o<s;o++,a++)n[a]=i[o];return n};Object.defineProperty($o,"__esModule",{value:!0});$o.Line=void 0;var ho=wt,Tu=ct,m2=pr,Dg=Xe,b2=dt,ea=function(r){p2(e,r);function e(t){var n=r.call(this,t)||this;return n.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")}),n}return e.prototype._sceneFunc=function(t){var n=this.points(),a=n.length,i=this.tension(),o=this.closed(),s=this.bezier(),l,u,f;if(!!a){if(t.beginPath(),t.moveTo(n[0],n[1]),i!==0&&a>4){for(l=this.getTensionPoints(),u=l.length,f=o?0:4,o||t.quadraticCurveTo(l[0],l[1],l[2],l[3]);f<u-2;)t.bezierCurveTo(l[f++],l[f++],l[f++],l[f++],l[f++],l[f++]);o||t.quadraticCurveTo(l[u-2],l[u-1],n[a-2],n[a-1])}else if(s)for(f=2;f<a;)t.bezierCurveTo(n[f++],n[f++],n[f++],n[f++],n[f++],n[f++]);else for(f=2;f<a;f+=2)t.lineTo(n[f],n[f+1]);o?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}},e.prototype.getTensionPoints=function(){return this._getCache("tensionPoints",this._getTensionPoints)},e.prototype._getTensionPoints=function(){return this.closed()?this._getTensionPointsClosed():ho.Util._expandPoints(this.points(),this.tension())},e.prototype._getTensionPointsClosed=function(){var t=this.points(),n=t.length,a=this.tension(),i=ho.Util._getControlPoints(t[n-2],t[n-1],t[0],t[1],t[2],t[3],a),o=ho.Util._getControlPoints(t[n-4],t[n-3],t[n-2],t[n-1],t[0],t[1],a),s=ho.Util._expandPoints(t,a),l=[i[2],i[3]].concat(s).concat([o[0],o[1],t[n-2],t[n-1],o[2],o[3],i[0],i[1],t[0],t[1]]);return l},e.prototype.getWidth=function(){return this.getSelfRect().width},e.prototype.getHeight=function(){return this.getSelfRect().height},e.prototype.getSelfRect=function(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};this.tension()!==0?t=y2([t[0],t[1]],this._getTensionPoints(),[t[t.length-2],t[t.length-1]]):t=this.points();for(var n=t[0],a=t[0],i=t[1],o=t[1],s,l,u=0;u<t.length/2;u++)s=t[u*2],l=t[u*2+1],n=Math.min(n,s),a=Math.max(a,s),i=Math.min(i,l),o=Math.max(o,l);return{x:n,y:i,width:a-n,height:o-i}},e}(m2.Shape);$o.Line=ea;ea.prototype.className="Line";ea.prototype._attrsAffectingSize=["points","bezier","tension"];b2._registerNode(ea);Tu.Factory.addGetterSetter(ea,"closed",!1);Tu.Factory.addGetterSetter(ea,"bezier",!1);Tu.Factory.addGetterSetter(ea,"tension",0,Dg.getNumberValidator());Tu.Factory.addGetterSetter(ea,"points",[],Dg.getNumberArrayValidator());ho.Collection.mapMethods(ea);var w2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(_u,"__esModule",{value:!0});_u.Arrow=void 0;var x2=wt,ec=ct,C2=$o,Og=Xe,S2=dt,ei=function(r){w2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){r.prototype._sceneFunc.call(this,t);var n=Math.PI*2,a=this.points(),i=a,o=this.tension()!==0&&a.length>4;o&&(i=this.getTensionPoints());var s=a.length,l,u;o?(l=a[s-2]-(i[i.length-2]+i[i.length-4])/2,u=a[s-1]-(i[i.length-1]+i[i.length-3])/2):(l=a[s-2]-a[s-4],u=a[s-1]-a[s-3]);var f=(Math.atan2(u,l)+n)%n,c=this.pointerLength(),p=this.pointerWidth();t.save(),t.beginPath(),t.translate(a[s-2],a[s-1]),t.rotate(f),t.moveTo(0,0),t.lineTo(-c,p/2),t.lineTo(-c,-p/2),t.closePath(),t.restore(),this.pointerAtBeginning()&&(t.save(),t.translate(a[0],a[1]),o?(l=(i[0]+i[2])/2-a[0],u=(i[1]+i[3])/2-a[1]):(l=a[2]-a[0],u=a[3]-a[1]),t.rotate((Math.atan2(-u,-l)+n)%n),t.moveTo(0,0),t.lineTo(-c,p/2),t.lineTo(-c,-p/2),t.closePath(),t.restore());var g=this.dashEnabled();g&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),g&&(this.attrs.dashEnabled=!0)},e.prototype.getSelfRect=function(){var t=r.prototype.getSelfRect.call(this),n=this.pointerWidth()/2;return{x:t.x-n,y:t.y-n,width:t.width+n*2,height:t.height+n*2}},e}(C2.Line);_u.Arrow=ei;ei.prototype.className="Arrow";S2._registerNode(ei);ec.Factory.addGetterSetter(ei,"pointerLength",10,Og.getNumberValidator());ec.Factory.addGetterSetter(ei,"pointerWidth",10,Og.getNumberValidator());ec.Factory.addGetterSetter(ei,"pointerAtBeginning",!1);x2.Collection.mapMethods(ei);var Eu={},_2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Eu,"__esModule",{value:!0});Eu.Circle=void 0;var T2=wt,E2=ct,P2=pr,k2=Xe,A2=dt,ti=function(r){_2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius()!==t/2&&this.radius(t/2)},e.prototype.setHeight=function(t){this.radius()!==t/2&&this.radius(t/2)},e}(P2.Shape);Eu.Circle=ti;ti.prototype._centroid=!0;ti.prototype.className="Circle";ti.prototype._attrsAffectingSize=["radius"];A2._registerNode(ti);E2.Factory.addGetterSetter(ti,"radius",0,k2.getNumberValidator());T2.Collection.mapMethods(ti);var Pu={},M2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Pu,"__esModule",{value:!0});Pu.Ellipse=void 0;var D2=wt,tc=ct,O2=pr,Lg=Xe,L2=dt,ta=function(r){M2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.radiusX(),a=this.radiusY();t.beginPath(),t.save(),n!==a&&t.scale(1,a/n),t.arc(0,0,n,0,Math.PI*2,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radiusX()*2},e.prototype.getHeight=function(){return this.radiusY()*2},e.prototype.setWidth=function(t){this.radiusX(t/2)},e.prototype.setHeight=function(t){this.radiusY(t/2)},e}(O2.Shape);Pu.Ellipse=ta;ta.prototype.className="Ellipse";ta.prototype._centroid=!0;ta.prototype._attrsAffectingSize=["radiusX","radiusY"];L2._registerNode(ta);tc.Factory.addComponentsGetterSetter(ta,"radius",["x","y"]);tc.Factory.addGetterSetter(ta,"radiusX",0,Lg.getNumberValidator());tc.Factory.addGetterSetter(ta,"radiusY",0,Lg.getNumberValidator());D2.Collection.mapMethods(ta);var ku={},N2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(ku,"__esModule",{value:!0});ku.Image=void 0;var Ng=wt,Ui=ct,R2=pr,Au=Xe,I2=dt,Fn=function(r){N2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._sceneFunc=function(t){var n=this.getWidth(),a=this.getHeight(),i=this.attrs.image,o;if(i){var s=this.attrs.cropWidth,l=this.attrs.cropHeight;s&&l?o=[i,this.cropX(),this.cropY(),s,l,0,0,n,a]:o=[i,0,0,n,a]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,o)},e.prototype._hitFunc=function(t){var n=this.width(),a=this.height();t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){var t,n;return(t=this.attrs.width)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.width)||0},e.prototype.getHeight=function(){var t,n;return(t=this.attrs.height)!==null&&t!==void 0?t:((n=this.image())===null||n===void 0?void 0:n.height)||0},e.fromURL=function(t,n){var a=Ng.Util.createImageElement();a.onload=function(){var i=new e({image:a});n(i)},a.crossOrigin="Anonymous",a.src=t},e}(R2.Shape);ku.Image=Fn;Fn.prototype.className="Image";I2._registerNode(Fn);Ui.Factory.addGetterSetter(Fn,"image");Ui.Factory.addComponentsGetterSetter(Fn,"crop",["x","y","width","height"]);Ui.Factory.addGetterSetter(Fn,"cropX",0,Au.getNumberValidator());Ui.Factory.addGetterSetter(Fn,"cropY",0,Au.getNumberValidator());Ui.Factory.addGetterSetter(Fn,"cropWidth",0,Au.getNumberValidator());Ui.Factory.addGetterSetter(Fn,"cropHeight",0,Au.getNumberValidator());Ng.Collection.mapMethods(Fn);var Ai={},Rg=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.Tag=Ai.Label=void 0;var Ig=wt,Mu=ct,B2=pr,F2=qi,rc=Xe,Bg=dt,Fg=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],z2="Change.konva",G2="none",xf="up",Cf="right",Sf="down",_f="left",V2=Fg.length,Du=function(r){Rg(e,r);function e(t){var n=r.call(this,t)||this;return n.on("add.konva",function(a){this._addListeners(a.child),this._sync()}),n}return e.prototype.getText=function(){return this.find("Text")[0]},e.prototype.getTag=function(){return this.find("Tag")[0]},e.prototype._addListeners=function(t){var n=this,a,i=function(){n._sync()};for(a=0;a<V2;a++)t.on(Fg[a]+z2,i)},e.prototype.getWidth=function(){return this.getText().width()},e.prototype.getHeight=function(){return this.getText().height()},e.prototype._sync=function(){var t=this.getText(),n=this.getTag(),a,i,o,s,l,u,f;if(t&&n){switch(a=t.width(),i=t.height(),o=n.pointerDirection(),s=n.pointerWidth(),f=n.pointerHeight(),l=0,u=0,o){case xf:l=a/2,u=-1*f;break;case Cf:l=a+s,u=i/2;break;case Sf:l=a/2,u=i+f;break;case _f:l=-1*s,u=i/2;break}n.setAttrs({x:-1*l,y:-1*u,width:a,height:i}),t.setAttrs({x:-1*l,y:-1*u})}},e}(F2.Group);Ai.Label=Du;Du.prototype.className="Label";Bg._registerNode(Du);Ig.Collection.mapMethods(Du);var _a=function(r){Rg(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.width(),a=this.height(),i=this.pointerDirection(),o=this.pointerWidth(),s=this.pointerHeight(),l=this.cornerRadius(),u=0,f=0,c=0,p=0;typeof l=="number"?u=f=c=p=Math.min(l,n/2,a/2):(u=Math.min(l[0]||0,n/2,a/2),f=Math.min(l[1]||0,n/2,a/2),p=Math.min(l[2]||0,n/2,a/2),c=Math.min(l[3]||0,n/2,a/2)),t.beginPath(),t.moveTo(u,0),i===xf&&(t.lineTo((n-o)/2,0),t.lineTo(n/2,-1*s),t.lineTo((n+o)/2,0)),t.lineTo(n-f,0),t.arc(n-f,f,f,Math.PI*3/2,0,!1),i===Cf&&(t.lineTo(n,(a-s)/2),t.lineTo(n+o,a/2),t.lineTo(n,(a+s)/2)),t.lineTo(n,a-p),t.arc(n-p,a-p,p,0,Math.PI/2,!1),i===Sf&&(t.lineTo((n+o)/2,a),t.lineTo(n/2,a+s),t.lineTo((n-o)/2,a)),t.lineTo(c,a),t.arc(c,a-c,c,Math.PI/2,Math.PI,!1),i===_f&&(t.lineTo(0,(a+s)/2),t.lineTo(-1*o,a/2),t.lineTo(0,(a-s)/2)),t.lineTo(0,u),t.arc(u,u,u,Math.PI,Math.PI*3/2,!1),t.closePath(),t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=0,n=0,a=this.pointerWidth(),i=this.pointerHeight(),o=this.pointerDirection(),s=this.width(),l=this.height();return o===xf?(n-=i,l+=i):o===Sf?l+=i:o===_f?(t-=a*1.5,s+=a):o===Cf&&(s+=a*1.5),{x:t,y:n,width:s,height:l}},e}(B2.Shape);Ai.Tag=_a;_a.prototype.className="Tag";Bg._registerNode(_a);Mu.Factory.addGetterSetter(_a,"pointerDirection",G2);Mu.Factory.addGetterSetter(_a,"pointerWidth",0,rc.getNumberValidator());Mu.Factory.addGetterSetter(_a,"pointerHeight",0,rc.getNumberValidator());Mu.Factory.addGetterSetter(_a,"cornerRadius",0,rc.getNumberOrArrayOfNumbersValidator(4));Ig.Collection.mapMethods(_a);var qo={},$2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(qo,"__esModule",{value:!0});qo.Path=void 0;var q2=wt,H2=ct,U2=pr,W2=dt,Wi=function(r){$2(e,r);function e(t){var n=r.call(this,t)||this;n.dataArray=[],n.pathLength=0,n.dataArray=e.parsePathData(n.data()),n.pathLength=0;for(var a=0;a<n.dataArray.length;++a)n.pathLength+=n.dataArray[a].pathLength;return n.on("dataChange.konva",function(){this.dataArray=e.parsePathData(this.data()),this.pathLength=0;for(var i=0;i<this.dataArray.length;++i)this.pathLength+=this.dataArray[i].pathLength}),n}return e.prototype._sceneFunc=function(t){var n=this.dataArray;t.beginPath();for(var a=!1,i=0;i<n.length;i++){var o=n[i].command,s=n[i].points;switch(o){case"L":t.lineTo(s[0],s[1]);break;case"M":t.moveTo(s[0],s[1]);break;case"C":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"Q":t.quadraticCurveTo(s[0],s[1],s[2],s[3]);break;case"A":var l=s[0],u=s[1],f=s[2],c=s[3],p=s[4],g=s[5],h=s[6],m=s[7],x=f>c?f:c,w=f>c?1:f/c,S=f>c?c/f:1;t.translate(l,u),t.rotate(h),t.scale(w,S),t.arc(0,0,x,p,p+g,1-m),t.scale(1/w,1/S),t.rotate(-h),t.translate(-l,-u);break;case"z":a=!0,t.closePath();break}}!a&&!this.hasFill()?t.strokeShape(this):t.fillStrokeShape(this)},e.prototype.getSelfRect=function(){var t=[];this.dataArray.forEach(function(f){if(f.command==="A"){var c=f.points[4],p=f.points[5],g=f.points[4]+p,h=Math.PI/180;if(Math.abs(c-g)<h&&(h=Math.abs(c-g)),p<0)for(var m=c-h;m>g;m-=h){var x=e.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],m,0);t.push(x.x,x.y)}else for(var m=c+h;m<g;m+=h){var x=e.getPointOnEllipticalArc(f.points[0],f.points[1],f.points[2],f.points[3],m,0);t.push(x.x,x.y)}}else if(f.command==="C")for(var m=0;m<=1;m+=.01){var x=e.getPointOnCubicBezier(m,f.start.x,f.start.y,f.points[0],f.points[1],f.points[2],f.points[3],f.points[4],f.points[5]);t.push(x.x,x.y)}else t=t.concat(f.points)});for(var n=t[0],a=t[0],i=t[1],o=t[1],s,l,u=0;u<t.length/2;u++)s=t[u*2],l=t[u*2+1],isNaN(s)||(n=Math.min(n,s),a=Math.max(a,s)),isNaN(l)||(i=Math.min(i,l),o=Math.max(o,l));return{x:Math.round(n),y:Math.round(i),width:Math.round(a-n),height:Math.round(o-i)}},e.prototype.getLength=function(){return this.pathLength},e.prototype.getPointAtLength=function(t){var n,a=0,i=this.dataArray.length;if(!i)return null;for(;a<i&&t>this.dataArray[a].pathLength;)t-=this.dataArray[a].pathLength,++a;if(a===i)return n=this.dataArray[a-1].points.slice(-2),{x:n[0],y:n[1]};if(t<.01)return n=this.dataArray[a].points.slice(0,2),{x:n[0],y:n[1]};var o=this.dataArray[a],s=o.points;switch(o.command){case"L":return e.getPointOnLine(t,o.start.x,o.start.y,s[0],s[1]);case"C":return e.getPointOnCubicBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return e.getPointOnQuadraticBezier(t/o.pathLength,o.start.x,o.start.y,s[0],s[1],s[2],s[3]);case"A":var l=s[0],u=s[1],f=s[2],c=s[3],p=s[4],g=s[5],h=s[6];return p+=g*t/o.pathLength,e.getPointOnEllipticalArc(l,u,f,c,p,h)}return null},e.getLineLength=function(t,n,a,i){return Math.sqrt((a-t)*(a-t)+(i-n)*(i-n))},e.getPointOnLine=function(t,n,a,i,o,s,l){s===void 0&&(s=n),l===void 0&&(l=a);var u=(o-a)/(i-n+1e-8),f=Math.sqrt(t*t/(1+u*u));i<n&&(f*=-1);var c=u*f,p;if(i===n)p={x:s,y:l+c};else if((l-a)/(s-n+1e-8)===u)p={x:s+f,y:l+c};else{var g,h,m=this.getLineLength(n,a,i,o),x=(s-n)*(i-n)+(l-a)*(o-a);x=x/(m*m),g=n+x*(i-n),h=a+x*(o-a);var w=this.getLineLength(s,l,g,h),S=Math.sqrt(t*t-w*w);f=Math.sqrt(S*S/(1+u*u)),i<n&&(f*=-1),c=u*f,p={x:g+f,y:h+c}}return p},e.getPointOnCubicBezier=function(t,n,a,i,o,s,l,u,f){function c(w){return w*w*w}function p(w){return 3*w*w*(1-w)}function g(w){return 3*w*(1-w)*(1-w)}function h(w){return(1-w)*(1-w)*(1-w)}var m=u*c(t)+s*p(t)+i*g(t)+n*h(t),x=f*c(t)+l*p(t)+o*g(t)+a*h(t);return{x:m,y:x}},e.getPointOnQuadraticBezier=function(t,n,a,i,o,s,l){function u(h){return h*h}function f(h){return 2*h*(1-h)}function c(h){return(1-h)*(1-h)}var p=s*u(t)+i*f(t)+n*c(t),g=l*u(t)+o*f(t)+a*c(t);return{x:p,y:g}},e.getPointOnEllipticalArc=function(t,n,a,i,o,s){var l=Math.cos(s),u=Math.sin(s),f={x:a*Math.cos(o),y:i*Math.sin(o)};return{x:t+(f.x*l-f.y*u),y:n+(f.x*u+f.y*l)}},e.parsePathData=function(t){if(!t)return[];var n=t,a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var i=0;i<a.length;i++)n=n.replace(new RegExp(a[i],"g"),"|"+a[i]);var o=n.split("|"),s=[],l=[],u=0,f=0,c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,p;for(i=1;i<o.length;i++){var g=o[i],h=g.charAt(0);for(g=g.slice(1),l.length=0;p=c.exec(g);)l.push(p[0]);for(var m=[],x=0,w=l.length;x<w;x++){var S=parseFloat(l[x]);isNaN(S)?m.push(0):m.push(S)}for(;m.length>0&&!isNaN(m[0]);){var y=null,C=[],E=u,M=f,v,T,k,N,O,I,q,B,j,Y;switch(h){case"l":u+=m.shift(),f+=m.shift(),y="L",C.push(u,f);break;case"L":u=m.shift(),f=m.shift(),C.push(u,f);break;case"m":var U=m.shift(),X=m.shift();if(u+=U,f+=X,y="M",s.length>2&&s[s.length-1].command==="z"){for(var K=s.length-2;K>=0;K--)if(s[K].command==="M"){u=s[K].points[0]+U,f=s[K].points[1]+X;break}}C.push(u,f),h="l";break;case"M":u=m.shift(),f=m.shift(),y="M",C.push(u,f),h="L";break;case"h":u+=m.shift(),y="L",C.push(u,f);break;case"H":u=m.shift(),y="L",C.push(u,f);break;case"v":f+=m.shift(),y="L",C.push(u,f);break;case"V":f=m.shift(),y="L",C.push(u,f);break;case"C":C.push(m.shift(),m.shift(),m.shift(),m.shift()),u=m.shift(),f=m.shift(),C.push(u,f);break;case"c":C.push(u+m.shift(),f+m.shift(),u+m.shift(),f+m.shift()),u+=m.shift(),f+=m.shift(),y="C",C.push(u,f);break;case"S":T=u,k=f,v=s[s.length-1],v.command==="C"&&(T=u+(u-v.points[2]),k=f+(f-v.points[3])),C.push(T,k,m.shift(),m.shift()),u=m.shift(),f=m.shift(),y="C",C.push(u,f);break;case"s":T=u,k=f,v=s[s.length-1],v.command==="C"&&(T=u+(u-v.points[2]),k=f+(f-v.points[3])),C.push(T,k,u+m.shift(),f+m.shift()),u+=m.shift(),f+=m.shift(),y="C",C.push(u,f);break;case"Q":C.push(m.shift(),m.shift()),u=m.shift(),f=m.shift(),C.push(u,f);break;case"q":C.push(u+m.shift(),f+m.shift()),u+=m.shift(),f+=m.shift(),y="Q",C.push(u,f);break;case"T":T=u,k=f,v=s[s.length-1],v.command==="Q"&&(T=u+(u-v.points[0]),k=f+(f-v.points[1])),u=m.shift(),f=m.shift(),y="Q",C.push(T,k,u,f);break;case"t":T=u,k=f,v=s[s.length-1],v.command==="Q"&&(T=u+(u-v.points[0]),k=f+(f-v.points[1])),u+=m.shift(),f+=m.shift(),y="Q",C.push(T,k,u,f);break;case"A":N=m.shift(),O=m.shift(),I=m.shift(),q=m.shift(),B=m.shift(),j=u,Y=f,u=m.shift(),f=m.shift(),y="A",C=this.convertEndpointToCenterParameterization(j,Y,u,f,q,B,N,O,I);break;case"a":N=m.shift(),O=m.shift(),I=m.shift(),q=m.shift(),B=m.shift(),j=u,Y=f,u+=m.shift(),f+=m.shift(),y="A",C=this.convertEndpointToCenterParameterization(j,Y,u,f,q,B,N,O,I);break}s.push({command:y||h,points:C,start:{x:E,y:M},pathLength:this.calcLength(E,M,y||h,C)})}(h==="z"||h==="Z")&&s.push({command:"z",points:[],start:void 0,pathLength:0})}return s},e.calcLength=function(t,n,a,i){var o,s,l,u,f=e;switch(a){case"L":return f.getLineLength(t,n,i[0],i[1]);case"C":for(o=0,s=f.getPointOnCubicBezier(0,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),u=.01;u<=1;u+=.01)l=f.getPointOnCubicBezier(u,t,n,i[0],i[1],i[2],i[3],i[4],i[5]),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;return o;case"Q":for(o=0,s=f.getPointOnQuadraticBezier(0,t,n,i[0],i[1],i[2],i[3]),u=.01;u<=1;u+=.01)l=f.getPointOnQuadraticBezier(u,t,n,i[0],i[1],i[2],i[3]),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;return o;case"A":o=0;var c=i[4],p=i[5],g=i[4]+p,h=Math.PI/180;if(Math.abs(c-g)<h&&(h=Math.abs(c-g)),s=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),p<0)for(u=c-h;u>g;u-=h)l=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;else for(u=c+h;u<g;u+=h)l=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),o+=f.getLineLength(s.x,s.y,l.x,l.y),s=l;return l=f.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],g,0),o+=f.getLineLength(s.x,s.y,l.x,l.y),o}return 0},e.convertEndpointToCenterParameterization=function(t,n,a,i,o,s,l,u,f){var c=f*(Math.PI/180),p=Math.cos(c)*(t-a)/2+Math.sin(c)*(n-i)/2,g=-1*Math.sin(c)*(t-a)/2+Math.cos(c)*(n-i)/2,h=p*p/(l*l)+g*g/(u*u);h>1&&(l*=Math.sqrt(h),u*=Math.sqrt(h));var m=Math.sqrt((l*l*(u*u)-l*l*(g*g)-u*u*(p*p))/(l*l*(g*g)+u*u*(p*p)));o===s&&(m*=-1),isNaN(m)&&(m=0);var x=m*l*g/u,w=m*-u*p/l,S=(t+a)/2+Math.cos(c)*x-Math.sin(c)*w,y=(n+i)/2+Math.sin(c)*x+Math.cos(c)*w,C=function(O){return Math.sqrt(O[0]*O[0]+O[1]*O[1])},E=function(O,I){return(O[0]*I[0]+O[1]*I[1])/(C(O)*C(I))},M=function(O,I){return(O[0]*I[1]<O[1]*I[0]?-1:1)*Math.acos(E(O,I))},v=M([1,0],[(p-x)/l,(g-w)/u]),T=[(p-x)/l,(g-w)/u],k=[(-1*p-x)/l,(-1*g-w)/u],N=M(T,k);return E(T,k)<=-1&&(N=Math.PI),E(T,k)>=1&&(N=0),s===0&&N>0&&(N=N-2*Math.PI),s===1&&N<0&&(N=N+2*Math.PI),[S,y,l,u,v,N,c,s]},e}(U2.Shape);qo.Path=Wi;Wi.prototype.className="Path";Wi.prototype._attrsAffectingSize=["data"];W2._registerNode(Wi);H2.Factory.addGetterSetter(Wi,"data");q2.Collection.mapMethods(Wi);var Ho={},K2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ho,"__esModule",{value:!0});Ho.Rect=void 0;var j2=wt,Y2=ct,X2=pr,Q2=dt,Z2=Xe,Uo=function(r){K2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.cornerRadius(),a=this.width(),i=this.height();if(t.beginPath(),!n)t.rect(0,0,a,i);else{var o=0,s=0,l=0,u=0;typeof n=="number"?o=s=l=u=Math.min(n,a/2,i/2):(o=Math.min(n[0]||0,a/2,i/2),s=Math.min(n[1]||0,a/2,i/2),u=Math.min(n[2]||0,a/2,i/2),l=Math.min(n[3]||0,a/2,i/2)),t.moveTo(o,0),t.lineTo(a-s,0),t.arc(a-s,s,s,Math.PI*3/2,0,!1),t.lineTo(a,i-u),t.arc(a-u,i-u,u,0,Math.PI/2,!1),t.lineTo(l,i),t.arc(l,i-l,l,Math.PI/2,Math.PI,!1),t.lineTo(0,o),t.arc(o,o,o,Math.PI,Math.PI*3/2,!1)}t.closePath(),t.fillStrokeShape(this)},e}(X2.Shape);Ho.Rect=Uo;Uo.prototype.className="Rect";Q2._registerNode(Uo);Y2.Factory.addGetterSetter(Uo,"cornerRadius",0,Z2.getNumberOrArrayOfNumbersValidator(4));j2.Collection.mapMethods(Uo);var Ou={},J2=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ou,"__esModule",{value:!0});Ou.RegularPolygon=void 0;var e_=wt,zg=ct,t_=pr,Gg=Xe,r_=dt,Ta=function(r){J2(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this._getPoints();t.beginPath(),t.moveTo(n[0].x,n[0].y);for(var a=1;a<n.length;a++)t.lineTo(n[a].x,n[a].y);t.closePath(),t.fillStrokeShape(this)},e.prototype._getPoints=function(){for(var t=this.attrs.sides,n=this.attrs.radius||0,a=[],i=0;i<t;i++)a.push({x:n*Math.sin(i*2*Math.PI/t),y:-1*n*Math.cos(i*2*Math.PI/t)});return a},e.prototype.getSelfRect=function(){var t=this._getPoints(),n=t[0].x,a=t[0].y,i=t[0].x,o=t[0].y;return t.forEach(function(s){n=Math.min(n,s.x),a=Math.max(a,s.x),i=Math.min(i,s.y),o=Math.max(o,s.y)}),{x:n,y:i,width:a-n,height:o-i}},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(t_.Shape);Ou.RegularPolygon=Ta;Ta.prototype.className="RegularPolygon";Ta.prototype._centroid=!0;Ta.prototype._attrsAffectingSize=["radius"];r_._registerNode(Ta);zg.Factory.addGetterSetter(Ta,"radius",0,Gg.getNumberValidator());zg.Factory.addGetterSetter(Ta,"sides",0,Gg.getNumberValidator());e_.Collection.mapMethods(Ta);var Lu={},n_=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Lu,"__esModule",{value:!0});Lu.Ring=void 0;var a_=wt,Vg=ct,i_=pr,$g=Xe,o_=dt,rh=Math.PI*2,Ea=function(r){n_(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,rh,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),rh,0,!0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(i_.Shape);Lu.Ring=Ea;Ea.prototype.className="Ring";Ea.prototype._centroid=!0;Ea.prototype._attrsAffectingSize=["innerRadius","outerRadius"];o_._registerNode(Ea);Vg.Factory.addGetterSetter(Ea,"innerRadius",0,$g.getNumberValidator());Vg.Factory.addGetterSetter(Ea,"outerRadius",0,$g.getNumberValidator());a_.Collection.mapMethods(Ea);var Nu={},s_=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Nu,"__esModule",{value:!0});Nu.Sprite=void 0;var u_=wt,ri=ct,l_=pr,f_=Hi,qg=Xe,c_=dt,pn=function(r){s_(e,r);function e(t){var n=r.call(this,t)||this;return n._updated=!0,n.anim=new f_.Animation(function(){var a=n._updated;return n._updated=!1,a}),n.on("animationChange.konva",function(){this.frameIndex(0)}),n.on("frameIndexChange.konva",function(){this._updated=!0}),n.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())}),n}return e.prototype._sceneFunc=function(t){var n=this.animation(),a=this.frameIndex(),i=a*4,o=this.animations()[n],s=this.frameOffsets(),l=o[i+0],u=o[i+1],f=o[i+2],c=o[i+3],p=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,f,c),t.closePath(),t.fillStrokeShape(this)),p)if(s){var g=s[n],h=a*2;t.drawImage(p,l,u,f,c,g[h+0],g[h+1],f,c)}else t.drawImage(p,l,u,f,c,0,0,f,c)},e.prototype._hitFunc=function(t){var n=this.animation(),a=this.frameIndex(),i=a*4,o=this.animations()[n],s=this.frameOffsets(),l=o[i+2],u=o[i+3];if(t.beginPath(),s){var f=s[n],c=a*2;t.rect(f[c+0],f[c+1],l,u)}else t.rect(0,0,l,u);t.closePath(),t.fillShape(this)},e.prototype._useBufferCanvas=function(){return r.prototype._useBufferCanvas.call(this,!0)},e.prototype._setInterval=function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())},e.prototype.start=function(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}},e.prototype.stop=function(){this.anim.stop(),clearInterval(this.interval)},e.prototype.isRunning=function(){return this.anim.isRunning()},e.prototype._updateIndex=function(){var t=this.frameIndex(),n=this.animation(),a=this.animations(),i=a[n],o=i.length/4;t<o-1?this.frameIndex(t+1):this.frameIndex(0)},e}(l_.Shape);Nu.Sprite=pn;pn.prototype.className="Sprite";c_._registerNode(pn);ri.Factory.addGetterSetter(pn,"animation");ri.Factory.addGetterSetter(pn,"animations");ri.Factory.addGetterSetter(pn,"frameOffsets");ri.Factory.addGetterSetter(pn,"image");ri.Factory.addGetterSetter(pn,"frameIndex",0,qg.getNumberValidator());ri.Factory.addGetterSetter(pn,"frameRate",17,qg.getNumberValidator());ri.Factory.backCompat(pn,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});u_.Collection.mapMethods(pn);var Ru={},d_=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ru,"__esModule",{value:!0});Ru.Star=void 0;var h_=wt,nc=ct,v_=pr,ac=Xe,g_=dt,ra=function(r){d_(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){var n=this.innerRadius(),a=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-a);for(var o=1;o<i*2;o++){var s=o%2===0?a:n,l=s*Math.sin(o*Math.PI/i),u=-1*s*Math.cos(o*Math.PI/i);t.lineTo(l,u)}t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.outerRadius()*2},e.prototype.getHeight=function(){return this.outerRadius()*2},e.prototype.setWidth=function(t){this.outerRadius(t/2)},e.prototype.setHeight=function(t){this.outerRadius(t/2)},e}(v_.Shape);Ru.Star=ra;ra.prototype.className="Star";ra.prototype._centroid=!0;ra.prototype._attrsAffectingSize=["innerRadius","outerRadius"];g_._registerNode(ra);nc.Factory.addGetterSetter(ra,"numPoints",5,ac.getNumberValidator());nc.Factory.addGetterSetter(ra,"innerRadius",0,ac.getNumberValidator());nc.Factory.addGetterSetter(ra,"outerRadius",0,ac.getNumberValidator());h_.Collection.mapMethods(ra);var Ya={},p_=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.Text=Ya.stringToArray=void 0;var Vs=wt,$r=ct,y_=pr,m_=dt,Pa=Xe,b_=dt;function Hg(r){return Array.from(r)}Ya.stringToArray=Hg;var vs="auto",w_="center",ao="justify",x_="Change.konva",C_="2d",nh="-",Ug="left",S_="text",__="Text",T_="top",E_="bottom",ah="middle",Wg="normal",ih="px ",io=" ",P_="right",k_="word",A_="char",M_="none",Ql="\u2026",Kg=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],D_=Kg.length;function O_(r){return r.split(",").map(function(e){e=e.trim();var t=e.indexOf(" ")>=0,n=e.indexOf('"')>=0||e.indexOf("'")>=0;return t&&!n&&(e='"'+e+'"'),e}).join(", ")}var gs;function Zl(){return gs||(gs=Vs.Util.createCanvasElement().getContext(C_),gs)}function L_(r){r.fillText(this._partialText,this._partialTextX,this._partialTextY)}function N_(r){r.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function R_(r){return r=r||{},!r.fillLinearGradientColorStops&&!r.fillRadialGradientColorStops&&!r.fillPatternImage&&(r.fill=r.fill||"black"),r}var sr=function(r){p_(e,r);function e(t){var n=r.call(this,R_(t))||this;n._partialTextX=0,n._partialTextY=0;for(var a=0;a<D_;a++)n.on(Kg[a]+x_,n._setTextData);return n._setTextData(),n}return e.prototype._sceneFunc=function(t){var n=this.textArr,a=n.length;if(!!this.text()){var i=this.padding(),o=this.fontSize(),s=this.lineHeight()*o,l=this.verticalAlign(),u=0,f=this.align(),c=this.getWidth(),p=this.letterSpacing(),g=this.fill(),h=this.textDecoration(),m=h.indexOf("underline")!==-1,x=h.indexOf("line-through")!==-1,w,S=0,S=s/2,y=0,C=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",ah),t.setAttr("textAlign",Ug),l===ah?u=(this.getHeight()-a*s-i*2)/2:l===E_&&(u=this.getHeight()-a*s-i*2),t.translate(i,u+i),w=0;w<a;w++){var y=0,C=0,E=n[w],M=E.text,v=E.width,T=w!==a-1,k,N,O;if(t.save(),f===P_?y+=c-v-i*2:f===w_&&(y+=(c-v-i*2)/2),m&&(t.save(),t.beginPath(),t.moveTo(y,S+C+Math.round(o/2)),k=M.split(" ").length-1,N=k===0,O=f===ao&&T&&!N?c-i*2:v,t.lineTo(y+Math.round(O),S+C+Math.round(o/2)),t.lineWidth=o/15,t.strokeStyle=g,t.stroke(),t.restore()),x&&(t.save(),t.beginPath(),t.moveTo(y,S+C),k=M.split(" ").length-1,N=k===0,O=f===ao&&T&&!N?c-i*2:v,t.lineTo(y+Math.round(O),S+C),t.lineWidth=o/15,t.strokeStyle=g,t.stroke(),t.restore()),p!==0||f===ao){k=M.split(" ").length-1;for(var I=Hg(M),q=0;q<I.length;q++){var B=I[q];B===" "&&w!==a-1&&f===ao&&(y+=(c-i*2-v)/k),this._partialTextX=y,this._partialTextY=S+C,this._partialText=B,t.fillStrokeShape(this),y+=this.measureSize(B).width+p}}else this._partialTextX=y,this._partialTextY=S+C,this._partialText=M,t.fillStrokeShape(this);t.restore(),a>1&&(S+=s)}}},e.prototype._hitFunc=function(t){var n=this.getWidth(),a=this.getHeight();t.beginPath(),t.rect(0,0,n,a),t.closePath(),t.fillStrokeShape(this)},e.prototype.setText=function(t){var n=Vs.Util._isString(t)?t:t==null?"":t+"";return this._setAttr(S_,n),this},e.prototype.getWidth=function(){var t=this.attrs.width===vs||this.attrs.width===void 0;return t?this.getTextWidth()+this.padding()*2:this.attrs.width},e.prototype.getHeight=function(){var t=this.attrs.height===vs||this.attrs.height===void 0;return t?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return Vs.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.measureSize=function(t){var n=Zl(),a=this.fontSize(),i;return n.save(),n.font=this._getContextFont(),i=n.measureText(t),n.restore(),{width:i.width,height:a}},e.prototype._getContextFont=function(){return m_.Konva.UA.isIE?this.fontStyle()+io+this.fontSize()+ih+this.fontFamily():this.fontStyle()+io+this.fontVariant()+io+(this.fontSize()+ih)+O_(this.fontFamily())},e.prototype._addTextLine=function(t){this.align()===ao&&(t=t.trim());var n=this._getTextWidth(t);return this.textArr.push({text:t,width:n})},e.prototype._getTextWidth=function(t){var n=this.letterSpacing(),a=t.length;return Zl().measureText(t).width+(a?n*(a-1):0)},e.prototype._setTextData=function(){var t=this.text().split(`
`),n=+this.fontSize(),a=0,i=this.lineHeight()*n,o=this.attrs.width,s=this.attrs.height,l=o!==vs&&o!==void 0,u=s!==vs&&s!==void 0,f=this.padding(),c=o-f*2,p=s-f*2,g=0,h=this.wrap(),m=h!==M_,x=h!==A_&&m,w=this.ellipsis();this.textArr=[],Zl().font=this._getContextFont();for(var S=w?this._getTextWidth(Ql):0,y=0,C=t.length;y<C;++y){var E=t[y],M=this._getTextWidth(E);if(l&&M>c)for(;E.length>0;){for(var v=0,T=E.length,k="",N=0;v<T;){var O=v+T>>>1,I=E.slice(0,O+1),q=this._getTextWidth(I)+S;q<=c?(v=O+1,k=I,N=q):T=O}if(k){if(x){var B,j=E[k.length],Y=j===io||j===nh;Y&&N<=c?B=k.length:B=Math.max(k.lastIndexOf(io),k.lastIndexOf(nh))+1,B>0&&(v=B,k=k.slice(0,v),N=this._getTextWidth(k))}if(k=k.trimRight(),this._addTextLine(k),a=Math.max(a,N),g+=i,!m||u&&g+i>p){var U=this.textArr[this.textArr.length-1];if(U&&w){var X=this._getTextWidth(U.text+Ql)<c;X||(U.text=U.text.slice(0,U.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(U.text+Ql)}break}if(E=E.slice(v),E=E.trimLeft(),E.length>0&&(M=this._getTextWidth(E),M<=c)){this._addTextLine(E),g+=i,a=Math.max(a,M);break}}else break}else this._addTextLine(E),g+=i,a=Math.max(a,M);if(u&&g+i>p)break}this.textHeight=n,this.textWidth=a},e.prototype.getStrokeScaleEnabled=function(){return!0},e}(y_.Shape);Ya.Text=sr;sr.prototype._fillFunc=L_;sr.prototype._strokeFunc=N_;sr.prototype.className=__;sr.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];b_._registerNode(sr);$r.Factory.overWriteSetter(sr,"width",Pa.getNumberOrAutoValidator());$r.Factory.overWriteSetter(sr,"height",Pa.getNumberOrAutoValidator());$r.Factory.addGetterSetter(sr,"fontFamily","Arial");$r.Factory.addGetterSetter(sr,"fontSize",12,Pa.getNumberValidator());$r.Factory.addGetterSetter(sr,"fontStyle",Wg);$r.Factory.addGetterSetter(sr,"fontVariant",Wg);$r.Factory.addGetterSetter(sr,"padding",0,Pa.getNumberValidator());$r.Factory.addGetterSetter(sr,"align",Ug);$r.Factory.addGetterSetter(sr,"verticalAlign",T_);$r.Factory.addGetterSetter(sr,"lineHeight",1,Pa.getNumberValidator());$r.Factory.addGetterSetter(sr,"wrap",k_);$r.Factory.addGetterSetter(sr,"ellipsis",!1,Pa.getBooleanValidator());$r.Factory.addGetterSetter(sr,"letterSpacing",0,Pa.getNumberValidator());$r.Factory.addGetterSetter(sr,"text","",Pa.getStringValidator());$r.Factory.addGetterSetter(sr,"textDecoration","");Vs.Collection.mapMethods(sr);var Iu={},I_=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Iu,"__esModule",{value:!0});Iu.TextPath=void 0;var Es=wt,yn=ct,B_=pr,En=qo,Jl=Ya,jg=Xe,F_=dt,z_="",Yg="normal";function Xg(r){r.fillText(this.partialText,0,0)}function Qg(r){r.strokeText(this.partialText,0,0)}var lr=function(r){I_(e,r);function e(t){var n=r.call(this,t)||this;return n.dummyCanvas=Es.Util.createCanvasElement(),n.dataArray=[],n.dataArray=En.Path.parsePathData(n.attrs.data),n.on("dataChange.konva",function(){this.dataArray=En.Path.parsePathData(this.attrs.data),this._setTextData()}),n.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva",n._setTextData),t&&t.getKerning&&(Es.Util.warn('getKerning TextPath API is deprecated. Please use "kerningFunc" instead.'),n.kerningFunc(t.getKerning)),n._setTextData(),n}return e.prototype._sceneFunc=function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var n=this.textDecoration(),a=this.fill(),i=this.fontSize(),o=this.glyphInfo;n==="underline"&&t.beginPath();for(var s=0;s<o.length;s++){t.save();var l=o[s].p0;t.translate(l.x,l.y),t.rotate(o[s].rotation),this.partialText=o[s].text,t.fillStrokeShape(this),n==="underline"&&(s===0&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}n==="underline"&&(t.strokeStyle=a,t.lineWidth=i/20,t.stroke()),t.restore()},e.prototype._hitFunc=function(t){t.beginPath();var n=this.glyphInfo;if(n.length>=1){var a=n[0].p0;t.moveTo(a.x,a.y)}for(var i=0;i<n.length;i++){var o=n[i].p1;t.lineTo(o.x,o.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()},e.prototype.getTextWidth=function(){return this.textWidth},e.prototype.getTextHeight=function(){return Es.Util.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight},e.prototype.setText=function(t){return Jl.Text.prototype.setText.call(this,t)},e.prototype._getContextFont=function(){return Jl.Text.prototype._getContextFont.call(this)},e.prototype._getTextSize=function(t){var n=this.dummyCanvas,a=n.getContext("2d");a.save(),a.font=this._getContextFont();var i=a.measureText(t);return a.restore(),{width:i.width,height:parseInt(this.attrs.fontSize,10)}},e.prototype._setTextData=function(){var t=this,n=this._getTextSize(this.attrs.text),a=this.letterSpacing(),i=this.align(),o=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var l=0,u=0;u<t.dataArray.length;u++)t.dataArray[u].pathLength>0&&(l+=t.dataArray[u].pathLength);var f=0;i==="center"&&(f=Math.max(0,l/2-s/2)),i==="right"&&(f=Math.max(0,l-s));for(var c=Jl.stringToArray(this.text()),p=this.text().split(" ").length-1,g,h,m,x=-1,w=0,S=function(){w=0;for(var q=t.dataArray,B=x+1;B<q.length;B++){if(q[B].pathLength>0)return x=B,q[B];q[B].command==="M"&&(g={x:q[B].points[0],y:q[B].points[1]})}return{}},y=function(q){var B=t._getTextSize(q).width+a;q===" "&&i==="justify"&&(B+=(l-s)/p);var j=0,Y=0;for(h=void 0;Math.abs(B-j)/B>.01&&Y<20;){Y++;for(var U=j;m===void 0;)m=S(),m&&U+m.pathLength<B&&(U+=m.pathLength,m=void 0);if(m==={}||g===void 0)return;var X=!1;switch(m.command){case"L":En.Path.getLineLength(g.x,g.y,m.points[0],m.points[1])>B?h=En.Path.getPointOnLine(B,g.x,g.y,m.points[0],m.points[1],g.x,g.y):m=void 0;break;case"A":var K=m.points[4],P=m.points[5],D=m.points[4]+P;w===0?w=K+1e-8:B>j?w+=Math.PI/180*P/Math.abs(P):w-=Math.PI/360*P/Math.abs(P),(P<0&&w<D||P>=0&&w>D)&&(w=D,X=!0),h=En.Path.getPointOnEllipticalArc(m.points[0],m.points[1],m.points[2],m.points[3],w,m.points[6]);break;case"C":w===0?B>m.pathLength?w=1e-8:w=B/m.pathLength:B>j?w+=(B-j)/m.pathLength/2:w=Math.max(w-(j-B)/m.pathLength/2,0),w>1&&(w=1,X=!0),h=En.Path.getPointOnCubicBezier(w,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3],m.points[4],m.points[5]);break;case"Q":w===0?w=B/m.pathLength:B>j?w+=(B-j)/m.pathLength:w-=(j-B)/m.pathLength,w>1&&(w=1,X=!0),h=En.Path.getPointOnQuadraticBezier(w,m.start.x,m.start.y,m.points[0],m.points[1],m.points[2],m.points[3]);break}h!==void 0&&(j=En.Path.getLineLength(g.x,g.y,h.x,h.y)),X&&(X=!1,m=void 0)}},C="C",E=t._getTextSize(C).width+a,M=f/E-1,v=0;v<M&&(y(C),!(g===void 0||h===void 0));v++)g=h;for(var T=0;T<c.length&&(y(c[T]),!(g===void 0||h===void 0));T++){var k=En.Path.getLineLength(g.x,g.y,h.x,h.y),N=0;if(o)try{N=o(c[T-1],c[T])*this.fontSize()}catch{N=0}g.x+=N,h.x+=N,this.textWidth+=N;var O=En.Path.getPointOnLine(N+k/2,g.x,g.y,h.x,h.y),I=Math.atan2(h.y-g.y,h.x-g.x);this.glyphInfo.push({transposeX:O.x,transposeY:O.y,text:c[T],rotation:I,p0:g,p1:h}),g=h}},e.prototype.getSelfRect=function(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(c){t.push(c.p0.x),t.push(c.p0.y),t.push(c.p1.x),t.push(c.p1.y)});for(var n=t[0]||0,a=t[0]||0,i=t[1]||0,o=t[1]||0,s,l,u=0;u<t.length/2;u++)s=t[u*2],l=t[u*2+1],n=Math.min(n,s),a=Math.max(a,s),i=Math.min(i,l),o=Math.max(o,l);var f=this.fontSize();return{x:n-f/2,y:i-f/2,width:a-n+f,height:o-i+f}},e}(B_.Shape);Iu.TextPath=lr;lr.prototype._fillFunc=Xg;lr.prototype._strokeFunc=Qg;lr.prototype._fillFuncHit=Xg;lr.prototype._strokeFuncHit=Qg;lr.prototype.className="TextPath";lr.prototype._attrsAffectingSize=["text","fontSize","data"];F_._registerNode(lr);yn.Factory.addGetterSetter(lr,"data");yn.Factory.addGetterSetter(lr,"fontFamily","Arial");yn.Factory.addGetterSetter(lr,"fontSize",12,jg.getNumberValidator());yn.Factory.addGetterSetter(lr,"fontStyle",Yg);yn.Factory.addGetterSetter(lr,"align","left");yn.Factory.addGetterSetter(lr,"letterSpacing",0,jg.getNumberValidator());yn.Factory.addGetterSetter(lr,"textBaseline","middle");yn.Factory.addGetterSetter(lr,"fontVariant",Yg);yn.Factory.addGetterSetter(lr,"text",z_);yn.Factory.addGetterSetter(lr,"textDecoration",null);yn.Factory.addGetterSetter(lr,"kerningFunc",null);Es.Collection.mapMethods(lr);var Bu={},G_=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),$s=Qe&&Qe.__assign||function(){return $s=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}return r},$s.apply(this,arguments)};Object.defineProperty(Bu,"__esModule",{value:!0});Bu.Transformer=void 0;var Bt=wt,Xt=ct,V_=or,$_=pr,q_=Ho,oh=qi,fn=dt,ni=Xe,H_=dt,Un="tr-konva",U_=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(function(r){return r+("."+Un)}).join(" "),sh="nodesRect",W_=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(function(r){return r+("."+Un)}).join(" "),K_={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135},j_="ontouchstart"in fn.Konva._global;function Y_(r,e){if(r==="rotater")return"crosshair";e+=Bt.Util._degToRad(K_[r]||0);var t=(Bt.Util._radToDeg(e)%360+360)%360;return Bt.Util._inRange(t,315+22.5,360)||Bt.Util._inRange(t,0,22.5)?"ns-resize":Bt.Util._inRange(t,45-22.5,45+22.5)?"nesw-resize":Bt.Util._inRange(t,90-22.5,90+22.5)?"ew-resize":Bt.Util._inRange(t,135-22.5,135+22.5)?"nwse-resize":Bt.Util._inRange(t,180-22.5,180+22.5)?"ns-resize":Bt.Util._inRange(t,225-22.5,225+22.5)?"nesw-resize":Bt.Util._inRange(t,270-22.5,270+22.5)?"ew-resize":Bt.Util._inRange(t,315-22.5,315+22.5)?"nwse-resize":(Bt.Util.error("Transformer has unknown angle for cursor detection: "+t),"pointer")}var qs=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],uh=1e8;function X_(r){return{x:r.x+r.width/2*Math.cos(r.rotation)+r.height/2*Math.sin(-r.rotation),y:r.y+r.height/2*Math.cos(r.rotation)+r.width/2*Math.sin(r.rotation)}}function Zg(r,e,t){var n=t.x+(r.x-t.x)*Math.cos(e)-(r.y-t.y)*Math.sin(e),a=t.y+(r.x-t.x)*Math.sin(e)+(r.y-t.y)*Math.cos(e);return $s($s({},r),{rotation:r.rotation+e,x:n,y:a})}function Q_(r,e){var t=X_(r);return Zg(r,e,t)}function Z_(r,e,t){for(var n=e,a=0;a<r.length;a++){var i=fn.Konva.getAngle(r[a]),o=Math.abs(i-e)%(Math.PI*2),s=Math.min(o,Math.PI*2-o);s<t&&(n=i)}return n}var Ft=function(r){G_(e,r);function e(t){var n=r.call(this,t)||this;return n._transforming=!1,n._createElements(),n._handleMouseMove=n._handleMouseMove.bind(n),n._handleMouseUp=n._handleMouseUp.bind(n),n.update=n.update.bind(n),n.on(U_,n.update),n.getNode()&&n.update(),n}return e.prototype.attachTo=function(t){return this.setNode(t),this},e.prototype.setNode=function(t){return Bt.Util.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])},e.prototype.getNode=function(){return this._nodes&&this._nodes[0]},e.prototype.setNodes=function(t){var n=this;t===void 0&&(t=[]),this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,t.length===1?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(function(i){var o=i._attrsAffectingSize.map(function(l){return l+"Change."+Un}).join(" "),s=function(){n.nodes().length===1&&n.rotation(n.nodes()[0].getAbsoluteRotation()),n._resetTransformCache(),!n._transforming&&!n.isDragging()&&n.update()};i.on(o,s),i.on(W_,s),i.on("_clearTransformCache."+Un,s),i.on("xChange."+Un+" yChange."+Un,s),n._proxyDrag(i)}),this._resetTransformCache();var a=!!this.findOne(".top-left");return a&&this.update(),this},e.prototype._proxyDrag=function(t){var n=this,a;t.on("dragstart."+Un,function(i){a=t.getAbsolutePosition(),!n.isDragging()&&t!==n.findOne(".back")&&n.startDrag(i,!1)}),t.on("dragmove."+Un,function(i){if(!!a){var o=t.getAbsolutePosition(),s=o.x-a.x,l=o.y-a.y;n.nodes().forEach(function(u){if(u!==t&&!u.isDragging()){var f=u.getAbsolutePosition();u.setAbsolutePosition({x:f.x+s,y:f.y+l}),u.startDrag(i)}}),a=null}})},e.prototype.getNodes=function(){return this._nodes||[]},e.prototype.getActiveAnchor=function(){return this._movingAnchorName},e.prototype.detach=function(){this._nodes&&this._nodes.forEach(function(t){t.off("."+Un)}),this._nodes=[],this._resetTransformCache()},e.prototype._resetTransformCache=function(){this._clearCache(sh),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")},e.prototype._getNodeRect=function(){return this._getCache(sh,this.__getNodeRect)},e.prototype.__getNodeShape=function(t,n,a){n===void 0&&(n=this.rotation());var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),o=t.getAbsoluteScale(a),s=t.getAbsolutePosition(a),l=i.x*o.x-t.offsetX()*o.x,u=i.y*o.y-t.offsetY()*o.y,f=(fn.Konva.getAngle(t.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),c={x:s.x+l*Math.cos(f)+u*Math.sin(-f),y:s.y+u*Math.cos(f)+l*Math.sin(f),width:i.width*o.x,height:i.height*o.y,rotation:f};return Zg(c,-fn.Konva.getAngle(n),{x:0,y:0})},e.prototype.__getNodeRect=function(){var t=this,n=this.getNode();if(!n)return{x:-uh,y:-uh,width:0,height:0,rotation:0};var a=[];this.nodes().map(function(c){var p=c.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:t.ignoreStroke()}),g=[{x:p.x,y:p.y},{x:p.x+p.width,y:p.y},{x:p.x+p.width,y:p.y+p.height},{x:p.x,y:p.y+p.height}],h=c.getAbsoluteTransform();g.forEach(function(m){var x=h.point(m);a.push(x)})});var i=new Bt.Transform;i.rotate(-fn.Konva.getAngle(this.rotation()));var o,s,l,u;a.forEach(function(c){var p=i.point(c);o===void 0&&(o=l=p.x,s=u=p.y),o=Math.min(o,p.x),s=Math.min(s,p.y),l=Math.max(l,p.x),u=Math.max(u,p.y)}),i.invert();var f=i.point({x:o,y:s});return{x:f.x,y:f.y,width:l-o,height:u-s,rotation:fn.Konva.getAngle(this.rotation())}},e.prototype.getX=function(){return this._getNodeRect().x},e.prototype.getY=function(){return this._getNodeRect().y},e.prototype.getWidth=function(){return this._getNodeRect().width},e.prototype.getHeight=function(){return this._getNodeRect().height},e.prototype._createElements=function(){this._createBack(),qs.forEach(function(t){this._createAnchor(t)}.bind(this)),this._createAnchor("rotater")},e.prototype._createAnchor=function(t){var n=this,a=new q_.Rect({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:j_?10:"auto"}),i=this;a.on("mousedown touchstart",function(o){i._handleMouseDown(o)}),a.on("dragstart",function(o){a.stopDrag(),o.cancelBubble=!0}),a.on("dragend",function(o){o.cancelBubble=!0}),a.on("mouseenter",function(){var o=fn.Konva.getAngle(n.rotation()),s=Y_(t,o);a.getStage().content.style.cursor=s,n._cursorChange=!0}),a.on("mouseout",function(){a.getStage().content.style.cursor="",n._cursorChange=!1}),this.add(a)},e.prototype._createBack=function(){var t=this,n=new $_.Shape({name:"back",width:0,height:0,draggable:!0,sceneFunc:function(a){var i=this.getParent(),o=i.padding();a.beginPath(),a.rect(-o,-o,this.width()+o*2,this.height()+o*2),a.moveTo(this.width()/2,-o),i.rotateEnabled()&&a.lineTo(this.width()/2,-i.rotateAnchorOffset()*Bt.Util._sign(this.height())-o),a.fillStrokeShape(this)},hitFunc:function(a,i){if(!!t.shouldOverdrawWholeArea()){var o=t.padding();a.beginPath(),a.rect(-o,-o,i.width()+o*2,i.height()+o*2),a.fillStrokeShape(i)}}});this.add(n),this._proxyDrag(n),n.on("dragstart",function(a){a.cancelBubble=!0}),n.on("dragmove",function(a){a.cancelBubble=!0}),n.on("dragend",function(a){a.cancelBubble=!0})},e.prototype._handleMouseDown=function(t){this._movingAnchorName=t.target.name().split(" ")[0];var n=this._getNodeRect(),a=n.width,i=n.height,o=Math.sqrt(Math.pow(a,2)+Math.pow(i,2));this.sin=Math.abs(i/o),this.cos=Math.abs(a/o),window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0),this._transforming=!0;var s=t.target.getAbsolutePosition(),l=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:l.x-s.x,y:l.y-s.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(function(u){u._fire("transformstart",{evt:t,target:u})})},e.prototype._handleMouseMove=function(t){var n,a,i,o=this.findOne("."+this._movingAnchorName),s=o.getStage();s.setPointersPositions(t);var l=s.getPointerPosition(),u={x:l.x-this._anchorDragOffset.x,y:l.y-this._anchorDragOffset.y},f=o.getAbsolutePosition();o.setAbsolutePosition(u);var c=o.getAbsolutePosition();if(!(f.x===c.x&&f.y===c.y)){if(this._movingAnchorName==="rotater"){var p=this._getNodeRect();n=o.x()-p.width/2,a=-o.y()+p.height/2;var g=Math.atan2(-a,n)+Math.PI/2;p.height<0&&(g-=Math.PI);var h=fn.Konva.getAngle(this.rotation()),m=h+g,x=fn.Konva.getAngle(this.rotationSnapTolerance()),w=Z_(this.rotationSnaps(),m,x),S=w-p.rotation,y=Q_(p,S);this._fitNodesInto(y,t);return}var C=this.keepRatio()||t.shiftKey,k=this.centeredScaling()||t.altKey;if(this._movingAnchorName==="top-left"){if(C){var E=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(E.x-o.x(),2)+Math.pow(E.y-o.y(),2));var M=this.findOne(".top-left").x()>E.x?-1:1,v=this.findOne(".top-left").y()>E.y?-1:1;n=i*this.cos*M,a=i*this.sin*v,this.findOne(".top-left").x(E.x-n),this.findOne(".top-left").y(E.y-a)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(o.y());else if(this._movingAnchorName==="top-right"){if(C){var E=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};i=Math.sqrt(Math.pow(o.x()-E.x,2)+Math.pow(E.y-o.y(),2));var M=this.findOne(".top-right").x()<E.x?-1:1,v=this.findOne(".top-right").y()>E.y?-1:1;n=i*this.cos*M,a=i*this.sin*v,this.findOne(".top-right").x(E.x+n),this.findOne(".top-right").y(E.y-a)}var T=o.position();this.findOne(".top-left").y(T.y),this.findOne(".bottom-right").x(T.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(o.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(o.x());else if(this._movingAnchorName==="bottom-left"){if(C){var E=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};i=Math.sqrt(Math.pow(E.x-o.x(),2)+Math.pow(o.y()-E.y,2));var M=E.x<o.x()?-1:1,v=o.y()<E.y?-1:1;n=i*this.cos*M,a=i*this.sin*v,o.x(E.x-n),o.y(E.y+a)}T=o.position(),this.findOne(".top-left").x(T.x),this.findOne(".bottom-right").y(T.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(o.y());else if(this._movingAnchorName==="bottom-right"){if(C){var E=k?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};i=Math.sqrt(Math.pow(o.x()-E.x,2)+Math.pow(o.y()-E.y,2));var M=this.findOne(".bottom-right").x()<E.x?-1:1,v=this.findOne(".bottom-right").y()<E.y?-1:1;n=i*this.cos*M,a=i*this.sin*v,this.findOne(".bottom-right").x(E.x+n),this.findOne(".bottom-right").y(E.y+a)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var k=this.centeredScaling()||t.altKey;if(k){var N=this.findOne(".top-left"),O=this.findOne(".bottom-right"),I=N.x(),q=N.y(),B=this.getWidth()-O.x(),j=this.getHeight()-O.y();O.move({x:-I,y:-q}),N.move({x:B,y:j})}var Y=this.findOne(".top-left").getAbsolutePosition();n=Y.x,a=Y.y;var U=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),X=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:a,width:U,height:X,rotation:fn.Konva.getAngle(this.rotation())},t)}},e.prototype._handleMouseUp=function(t){this._removeEvents(t)},e.prototype.getAbsoluteTransform=function(){return this.getTransform()},e.prototype._removeEvents=function(t){if(this._transforming){this._transforming=!1,window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0);var n=this.getNode();this._fire("transformend",{evt:t,target:n}),n&&this._nodes.forEach(function(a){a._fire("transformend",{evt:t,target:a})}),this._movingAnchorName=null}},e.prototype._fitNodesInto=function(t,n){var a=this,i=this._getNodeRect(),o=1;if(Bt.Util._inRange(t.width,-this.padding()*2-o,o)){this.update();return}if(Bt.Util._inRange(t.height,-this.padding()*2-o,o)){this.update();return}var s=new Bt.Transform;if(s.rotate(fn.Konva.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){var l=s.point({x:-this.padding()*2,y:0});t.x+=l.x,t.y+=l.y,t.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){var l=s.point({x:this.padding()*2,y:0});this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.width+=this.padding()*2}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){var l=s.point({x:0,y:-this.padding()*2});t.x+=l.x,t.y+=l.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.height+=this.padding()*2}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){var l=s.point({x:0,y:this.padding()*2});this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=l.x,this._anchorDragOffset.y-=l.y,t.height+=this.padding()*2}if(this.boundBoxFunc()){var u=this.boundBoxFunc()(i,t);u?t=u:Bt.Util.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}var f=1e7,c=new Bt.Transform;c.translate(i.x,i.y),c.rotate(i.rotation),c.scale(i.width/f,i.height/f);var p=new Bt.Transform;p.translate(t.x,t.y),p.rotate(t.rotation),p.scale(t.width/f,t.height/f);var g=p.multiply(c.invert());this._nodes.forEach(function(h){var m,x=h.getParent().getAbsoluteTransform(),w=h.getTransform().copy();w.translate(h.offsetX(),h.offsetY());var S=new Bt.Transform;S.multiply(x.copy().invert()).multiply(g).multiply(x).multiply(w);var y=S.decompose();h.setAttrs(y),a._fire("transform",{evt:n,target:h}),h._fire("transform",{evt:n,target:h}),(m=h.getLayer())===null||m===void 0||m.batchDraw()}),this.rotation(Bt.Util._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()},e.prototype.forceUpdate=function(){this._resetTransformCache(),this.update()},e.prototype._batchChangeChild=function(t,n){var a=this.findOne(t);a.setAttrs(n)},e.prototype.update=function(){var t=this,n,a=this._getNodeRect();this.rotation(Bt.Util._getRotation(a.rotation));var i=a.width,o=a.height,s=this.enabledAnchors(),l=this.resizeEnabled(),u=this.padding(),f=this.anchorSize();this.find("._anchor").each(function(c){c.setAttrs({width:f,height:f,offsetX:f/2,offsetY:f/2,stroke:t.anchorStroke(),strokeWidth:t.anchorStrokeWidth(),fill:t.anchorFill(),cornerRadius:t.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:f/2+u,offsetY:f/2+u,visible:l&&s.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:i/2,y:0,offsetY:f/2+u,visible:l&&s.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:i,y:0,offsetX:f/2-u,offsetY:f/2+u,visible:l&&s.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:o/2,offsetX:f/2+u,visible:l&&s.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:i,y:o/2,offsetX:f/2-u,visible:l&&s.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:o,offsetX:f/2+u,offsetY:f/2-u,visible:l&&s.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:i/2,y:o,offsetY:f/2-u,visible:l&&s.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:i,y:o,offsetX:f/2-u,offsetY:f/2-u,visible:l&&s.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:i/2,y:-this.rotateAnchorOffset()*Bt.Util._sign(o)-u,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:i,height:o,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(n=this.getLayer())===null||n===void 0||n.batchDraw()},e.prototype.isTransforming=function(){return this._transforming},e.prototype.stopTransform=function(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}},e.prototype.destroy=function(){return this.getStage()&&this._cursorChange&&(this.getStage().content.style.cursor=""),oh.Group.prototype.destroy.call(this),this.detach(),this._removeEvents(),this},e.prototype.toObject=function(){return V_.Node.prototype.toObject.call(this)},e}(oh.Group);Bu.Transformer=Ft;function J_(r){return r instanceof Array||Bt.Util.warn("enabledAnchors value should be an array"),r instanceof Array&&r.forEach(function(e){qs.indexOf(e)===-1&&Bt.Util.warn("Unknown anchor name: "+e+". Available names are: "+qs.join(", "))}),r||[]}Ft.prototype.className="Transformer";H_._registerNode(Ft);Xt.Factory.addGetterSetter(Ft,"enabledAnchors",qs,J_);Xt.Factory.addGetterSetter(Ft,"resizeEnabled",!0);Xt.Factory.addGetterSetter(Ft,"anchorSize",10,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"rotateEnabled",!0);Xt.Factory.addGetterSetter(Ft,"rotationSnaps",[]);Xt.Factory.addGetterSetter(Ft,"rotateAnchorOffset",50,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"rotationSnapTolerance",5,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"borderEnabled",!0);Xt.Factory.addGetterSetter(Ft,"anchorStroke","rgb(0, 161, 255)");Xt.Factory.addGetterSetter(Ft,"anchorStrokeWidth",1,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"anchorFill","white");Xt.Factory.addGetterSetter(Ft,"anchorCornerRadius",0,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"borderStroke","rgb(0, 161, 255)");Xt.Factory.addGetterSetter(Ft,"borderStrokeWidth",1,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"borderDash");Xt.Factory.addGetterSetter(Ft,"keepRatio",!0);Xt.Factory.addGetterSetter(Ft,"centeredScaling",!1);Xt.Factory.addGetterSetter(Ft,"ignoreStroke",!1);Xt.Factory.addGetterSetter(Ft,"padding",0,ni.getNumberValidator());Xt.Factory.addGetterSetter(Ft,"node");Xt.Factory.addGetterSetter(Ft,"nodes");Xt.Factory.addGetterSetter(Ft,"boundBoxFunc");Xt.Factory.addGetterSetter(Ft,"shouldOverdrawWholeArea",!1);Xt.Factory.backCompat(Ft,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});Bt.Collection.mapMethods(Ft);var Fu={},eT=Qe&&Qe.__extends||function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(n[i]=a[i])},r(e,t)};return function(e,t){r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}();Object.defineProperty(Fu,"__esModule",{value:!0});Fu.Wedge=void 0;var tT=wt,zu=ct,rT=pr,nT=dt,Jg=Xe,aT=dt,zn=function(r){eT(e,r);function e(){return r!==null&&r.apply(this,arguments)||this}return e.prototype._sceneFunc=function(t){t.beginPath(),t.arc(0,0,this.radius(),0,nT.Konva.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)},e.prototype.getWidth=function(){return this.radius()*2},e.prototype.getHeight=function(){return this.radius()*2},e.prototype.setWidth=function(t){this.radius(t/2)},e.prototype.setHeight=function(t){this.radius(t/2)},e}(rT.Shape);Fu.Wedge=zn;zn.prototype.className="Wedge";zn.prototype._centroid=!0;zn.prototype._attrsAffectingSize=["radius"];aT._registerNode(zn);zu.Factory.addGetterSetter(zn,"radius",0,Jg.getNumberValidator());zu.Factory.addGetterSetter(zn,"angle",0,Jg.getNumberValidator());zu.Factory.addGetterSetter(zn,"clockwise",!1);zu.Factory.backCompat(zn,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});tT.Collection.mapMethods(zn);var Gu={};Object.defineProperty(Gu,"__esModule",{value:!0});Gu.Blur=void 0;var lh=ct,iT=or,oT=Xe;function fh(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var sT=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],uT=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function lT(r,e){var t=r.data,n=r.width,a=r.height,i,o,s,l,u,f,c,p,g,h,m,x,w,S,y,C,E,M,v,T,k,N,O,I,q=e+e+1,B=n-1,j=a-1,Y=e+1,U=Y*(Y+1)/2,X=new fh,K=null,P=X,D=null,L=null,F=sT[e],W=uT[e];for(s=1;s<q;s++)P=P.next=new fh,s===Y&&(K=P);for(P.next=X,c=f=0,o=0;o<a;o++){for(C=E=M=v=p=g=h=m=0,x=Y*(T=t[f]),w=Y*(k=t[f+1]),S=Y*(N=t[f+2]),y=Y*(O=t[f+3]),p+=U*T,g+=U*k,h+=U*N,m+=U*O,P=X,s=0;s<Y;s++)P.r=T,P.g=k,P.b=N,P.a=O,P=P.next;for(s=1;s<Y;s++)l=f+((B<s?B:s)<<2),p+=(P.r=T=t[l])*(I=Y-s),g+=(P.g=k=t[l+1])*I,h+=(P.b=N=t[l+2])*I,m+=(P.a=O=t[l+3])*I,C+=T,E+=k,M+=N,v+=O,P=P.next;for(D=X,L=K,i=0;i<n;i++)t[f+3]=O=m*F>>W,O!==0?(O=255/O,t[f]=(p*F>>W)*O,t[f+1]=(g*F>>W)*O,t[f+2]=(h*F>>W)*O):t[f]=t[f+1]=t[f+2]=0,p-=x,g-=w,h-=S,m-=y,x-=D.r,w-=D.g,S-=D.b,y-=D.a,l=c+((l=i+e+1)<B?l:B)<<2,C+=D.r=t[l],E+=D.g=t[l+1],M+=D.b=t[l+2],v+=D.a=t[l+3],p+=C,g+=E,h+=M,m+=v,D=D.next,x+=T=L.r,w+=k=L.g,S+=N=L.b,y+=O=L.a,C-=T,E-=k,M-=N,v-=O,L=L.next,f+=4;c+=n}for(i=0;i<n;i++){for(E=M=v=C=g=h=m=p=0,f=i<<2,x=Y*(T=t[f]),w=Y*(k=t[f+1]),S=Y*(N=t[f+2]),y=Y*(O=t[f+3]),p+=U*T,g+=U*k,h+=U*N,m+=U*O,P=X,s=0;s<Y;s++)P.r=T,P.g=k,P.b=N,P.a=O,P=P.next;for(u=n,s=1;s<=e;s++)f=u+i<<2,p+=(P.r=T=t[f])*(I=Y-s),g+=(P.g=k=t[f+1])*I,h+=(P.b=N=t[f+2])*I,m+=(P.a=O=t[f+3])*I,C+=T,E+=k,M+=N,v+=O,P=P.next,s<j&&(u+=n);for(f=i,D=X,L=K,o=0;o<a;o++)l=f<<2,t[l+3]=O=m*F>>W,O>0?(O=255/O,t[l]=(p*F>>W)*O,t[l+1]=(g*F>>W)*O,t[l+2]=(h*F>>W)*O):t[l]=t[l+1]=t[l+2]=0,p-=x,g-=w,h-=S,m-=y,x-=D.r,w-=D.g,S-=D.b,y-=D.a,l=i+((l=o+Y)<j?l:j)*n<<2,p+=C+=D.r=t[l],g+=E+=D.g=t[l+1],h+=M+=D.b=t[l+2],m+=v+=D.a=t[l+3],D=D.next,x+=T=L.r,w+=k=L.g,S+=N=L.b,y+=O=L.a,C-=T,E-=k,M-=N,v-=O,L=L.next,f+=n}}var fT=function(e){var t=Math.round(this.blurRadius());t>0&&lT(e,t)};Gu.Blur=fT;lh.Factory.addGetterSetter(iT.Node,"blurRadius",0,oT.getNumberValidator(),lh.Factory.afterSetFilter);var Vu={};Object.defineProperty(Vu,"__esModule",{value:!0});Vu.Brighten=void 0;var ch=ct,cT=or,dT=Xe,hT=function(r){var e=this.brightness()*255,t=r.data,n=t.length,a;for(a=0;a<n;a+=4)t[a]+=e,t[a+1]+=e,t[a+2]+=e};Vu.Brighten=hT;ch.Factory.addGetterSetter(cT.Node,"brightness",0,dT.getNumberValidator(),ch.Factory.afterSetFilter);var $u={};Object.defineProperty($u,"__esModule",{value:!0});$u.Contrast=void 0;var dh=ct,vT=or,gT=Xe,pT=function(r){var e=Math.pow((this.contrast()+100)/100,2),t=r.data,n=t.length,a=150,i=150,o=150,s;for(s=0;s<n;s+=4)a=t[s],i=t[s+1],o=t[s+2],a/=255,a-=.5,a*=e,a+=.5,a*=255,i/=255,i-=.5,i*=e,i+=.5,i*=255,o/=255,o-=.5,o*=e,o+=.5,o*=255,a=a<0?0:a>255?255:a,i=i<0?0:i>255?255:i,o=o<0?0:o>255?255:o,t[s]=a,t[s+1]=i,t[s+2]=o};$u.Contrast=pT;dh.Factory.addGetterSetter(vT.Node,"contrast",0,gT.getNumberValidator(),dh.Factory.afterSetFilter);var qu={};Object.defineProperty(qu,"__esModule",{value:!0});qu.Emboss=void 0;var wa=ct,Hu=or,yT=wt,ep=Xe,mT=function(r){var e=this.embossStrength()*10,t=this.embossWhiteLevel()*255,n=this.embossDirection(),a=this.embossBlend(),i=0,o=0,s=r.data,l=r.width,u=r.height,f=l*4,c=u;switch(n){case"top-left":i=-1,o=-1;break;case"top":i=-1,o=0;break;case"top-right":i=-1,o=1;break;case"right":i=0,o=1;break;case"bottom-right":i=1,o=1;break;case"bottom":i=1,o=0;break;case"bottom-left":i=1,o=-1;break;case"left":i=0,o=-1;break;default:yT.Util.error("Unknown emboss direction: "+n)}do{var p=(c-1)*f,g=i;c+g<1&&(g=0),c+g>u&&(g=0);var h=(c-1+g)*l*4,m=l;do{var x=p+(m-1)*4,w=o;m+w<1&&(w=0),m+w>l&&(w=0);var S=h+(m-1+w)*4,y=s[x]-s[S],C=s[x+1]-s[S+1],E=s[x+2]-s[S+2],M=y,v=M>0?M:-M,T=C>0?C:-C,k=E>0?E:-E;if(T>v&&(M=C),k>v&&(M=E),M*=e,a){var N=s[x]+M,O=s[x+1]+M,I=s[x+2]+M;s[x]=N>255?255:N<0?0:N,s[x+1]=O>255?255:O<0?0:O,s[x+2]=I>255?255:I<0?0:I}else{var q=t-M;q<0?q=0:q>255&&(q=255),s[x]=s[x+1]=s[x+2]=q}}while(--m)}while(--c)};qu.Emboss=mT;wa.Factory.addGetterSetter(Hu.Node,"embossStrength",.5,ep.getNumberValidator(),wa.Factory.afterSetFilter);wa.Factory.addGetterSetter(Hu.Node,"embossWhiteLevel",.5,ep.getNumberValidator(),wa.Factory.afterSetFilter);wa.Factory.addGetterSetter(Hu.Node,"embossDirection","top-left",null,wa.Factory.afterSetFilter);wa.Factory.addGetterSetter(Hu.Node,"embossBlend",!1,null,wa.Factory.afterSetFilter);var Uu={};Object.defineProperty(Uu,"__esModule",{value:!0});Uu.Enhance=void 0;var hh=ct,bT=or,wT=Xe;function ef(r,e,t,n,a){var i=t-e,o=a-n,s;return i===0?n+o/2:o===0?n:(s=(r-e)/i,s=o*s+n,s)}var xT=function(r){var e=r.data,t=e.length,n=e[0],a=n,i,o=e[1],s=o,l,u=e[2],f=u,c,p,g=this.enhance();if(g!==0){for(p=0;p<t;p+=4)i=e[p+0],i<n?n=i:i>a&&(a=i),l=e[p+1],l<o?o=l:l>s&&(s=l),c=e[p+2],c<u?u=c:c>f&&(f=c);a===n&&(a=255,n=0),s===o&&(s=255,o=0),f===u&&(f=255,u=0);var h,m,x,w,S,y,C,E,M;for(g>0?(m=a+g*(255-a),x=n-g*(n-0),S=s+g*(255-s),y=o-g*(o-0),E=f+g*(255-f),M=u-g*(u-0)):(h=(a+n)*.5,m=a+g*(a-h),x=n+g*(n-h),w=(s+o)*.5,S=s+g*(s-w),y=o+g*(o-w),C=(f+u)*.5,E=f+g*(f-C),M=u+g*(u-C)),p=0;p<t;p+=4)e[p+0]=ef(e[p+0],n,a,x,m),e[p+1]=ef(e[p+1],o,s,y,S),e[p+2]=ef(e[p+2],u,f,M,E)}};Uu.Enhance=xT;hh.Factory.addGetterSetter(bT.Node,"enhance",0,wT.getNumberValidator(),hh.Factory.afterSetFilter);var Wu={};Object.defineProperty(Wu,"__esModule",{value:!0});Wu.Grayscale=void 0;var CT=function(r){var e=r.data,t=e.length,n,a;for(n=0;n<t;n+=4)a=.34*e[n]+.5*e[n+1]+.16*e[n+2],e[n]=a,e[n+1]=a,e[n+2]=a};Wu.Grayscale=CT;var Ku={};Object.defineProperty(Ku,"__esModule",{value:!0});Ku.HSL=void 0;var Mi=ct,ic=or,oc=Xe;Mi.Factory.addGetterSetter(ic.Node,"hue",0,oc.getNumberValidator(),Mi.Factory.afterSetFilter);Mi.Factory.addGetterSetter(ic.Node,"saturation",0,oc.getNumberValidator(),Mi.Factory.afterSetFilter);Mi.Factory.addGetterSetter(ic.Node,"luminance",0,oc.getNumberValidator(),Mi.Factory.afterSetFilter);var ST=function(r){var e=r.data,t=e.length,n=1,a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o=this.luminance()*127,s,l=n*a*Math.cos(i*Math.PI/180),u=n*a*Math.sin(i*Math.PI/180),f=.299*n+.701*l+.167*u,c=.587*n-.587*l+.33*u,p=.114*n-.114*l-.497*u,g=.299*n-.299*l-.328*u,h=.587*n+.413*l+.035*u,m=.114*n-.114*l+.293*u,x=.299*n-.3*l+1.25*u,w=.587*n-.586*l-1.05*u,S=.114*n+.886*l-.2*u,y,C,E,M;for(s=0;s<t;s+=4)y=e[s+0],C=e[s+1],E=e[s+2],M=e[s+3],e[s+0]=f*y+c*C+p*E+o,e[s+1]=g*y+h*C+m*E+o,e[s+2]=x*y+w*C+S*E+o,e[s+3]=M};Ku.HSL=ST;var ju={};Object.defineProperty(ju,"__esModule",{value:!0});ju.HSV=void 0;var Di=ct,sc=or,uc=Xe,_T=function(r){var e=r.data,t=e.length,n=Math.pow(2,this.value()),a=Math.pow(2,this.saturation()),i=Math.abs(this.hue()+360)%360,o,s=n*a*Math.cos(i*Math.PI/180),l=n*a*Math.sin(i*Math.PI/180),u=.299*n+.701*s+.167*l,f=.587*n-.587*s+.33*l,c=.114*n-.114*s-.497*l,p=.299*n-.299*s-.328*l,g=.587*n+.413*s+.035*l,h=.114*n-.114*s+.293*l,m=.299*n-.3*s+1.25*l,x=.587*n-.586*s-1.05*l,w=.114*n+.886*s-.2*l,S,y,C,E;for(o=0;o<t;o+=4)S=e[o+0],y=e[o+1],C=e[o+2],E=e[o+3],e[o+0]=u*S+f*y+c*C,e[o+1]=p*S+g*y+h*C,e[o+2]=m*S+x*y+w*C,e[o+3]=E};ju.HSV=_T;Di.Factory.addGetterSetter(sc.Node,"hue",0,uc.getNumberValidator(),Di.Factory.afterSetFilter);Di.Factory.addGetterSetter(sc.Node,"saturation",0,uc.getNumberValidator(),Di.Factory.afterSetFilter);Di.Factory.addGetterSetter(sc.Node,"value",0,uc.getNumberValidator(),Di.Factory.afterSetFilter);var Yu={};Object.defineProperty(Yu,"__esModule",{value:!0});Yu.Invert=void 0;var TT=function(r){var e=r.data,t=e.length,n;for(n=0;n<t;n+=4)e[n]=255-e[n],e[n+1]=255-e[n+1],e[n+2]=255-e[n+2]};Yu.Invert=TT;var Xu={};Object.defineProperty(Xu,"__esModule",{value:!0});Xu.Kaleidoscope=void 0;var Hs=ct,tp=or,ET=wt,rp=Xe,PT=function(r,e,t){var n=r.data,a=e.data,i=r.width,o=r.height,s=t.polarCenterX||i/2,l=t.polarCenterY||o/2,u,f,c,p=0,g=0,h=0,m=0,x,w=Math.sqrt(s*s+l*l);f=i-s,c=o-l,x=Math.sqrt(f*f+c*c),w=x>w?x:w;var S=o,y=i,C,E,M=360/y*Math.PI/180,v,T;for(E=0;E<y;E+=1)for(v=Math.sin(E*M),T=Math.cos(E*M),C=0;C<S;C+=1)f=Math.floor(s+w*C/S*T),c=Math.floor(l+w*C/S*v),u=(c*i+f)*4,p=n[u+0],g=n[u+1],h=n[u+2],m=n[u+3],u=(E+C*i)*4,a[u+0]=p,a[u+1]=g,a[u+2]=h,a[u+3]=m},kT=function(r,e,t){var n=r.data,a=e.data,i=r.width,o=r.height,s=t.polarCenterX||i/2,l=t.polarCenterY||o/2,u,f,c,p,g,h=0,m=0,x=0,w=0,S,y=Math.sqrt(s*s+l*l);f=i-s,c=o-l,S=Math.sqrt(f*f+c*c),y=S>y?S:y;var C=o,E=i,M,v,T=t.polarRotation||0,k,N;for(f=0;f<i;f+=1)for(c=0;c<o;c+=1)p=f-s,g=c-l,M=Math.sqrt(p*p+g*g)*C/y,v=(Math.atan2(g,p)*180/Math.PI+360+T)%360,v=v*E/360,k=Math.floor(v),N=Math.floor(M),u=(N*i+k)*4,h=n[u+0],m=n[u+1],x=n[u+2],w=n[u+3],u=(c*i+f)*4,a[u+0]=h,a[u+1]=m,a[u+2]=x,a[u+3]=w},AT=function(r){var e=r.width,t=r.height,n,a,i,o,s,l,u,f,c,p,g=Math.round(this.kaleidoscopePower()),h=Math.round(this.kaleidoscopeAngle()),m=Math.floor(e*(h%360)/360);if(!(g<1)){var x=ET.Util.createCanvasElement();x.width=e,x.height=t;var w=x.getContext("2d").getImageData(0,0,e,t);PT(r,w,{polarCenterX:e/2,polarCenterY:t/2});for(var S=e/Math.pow(2,g);S<=8;)S=S*2,g-=1;S=Math.ceil(S);var y=S,C=0,E=y,M=1;for(m+S>e&&(C=y,E=0,M=-1),a=0;a<t;a+=1)for(n=C;n!==E;n+=M)i=Math.round(n+m)%e,c=(e*a+i)*4,s=w.data[c+0],l=w.data[c+1],u=w.data[c+2],f=w.data[c+3],p=(e*a+n)*4,w.data[p+0]=s,w.data[p+1]=l,w.data[p+2]=u,w.data[p+3]=f;for(a=0;a<t;a+=1)for(y=Math.floor(S),o=0;o<g;o+=1){for(n=0;n<y+1;n+=1)c=(e*a+n)*4,s=w.data[c+0],l=w.data[c+1],u=w.data[c+2],f=w.data[c+3],p=(e*a+y*2-n-1)*4,w.data[p+0]=s,w.data[p+1]=l,w.data[p+2]=u,w.data[p+3]=f;y*=2}kT(w,r,{polarRotation:0})}};Xu.Kaleidoscope=AT;Hs.Factory.addGetterSetter(tp.Node,"kaleidoscopePower",2,rp.getNumberValidator(),Hs.Factory.afterSetFilter);Hs.Factory.addGetterSetter(tp.Node,"kaleidoscopeAngle",0,rp.getNumberValidator(),Hs.Factory.afterSetFilter);var Qu={};Object.defineProperty(Qu,"__esModule",{value:!0});Qu.Mask=void 0;var vh=ct,MT=or,DT=Xe;function ps(r,e,t){var n=(t*r.width+e)*4,a=[];return a.push(r.data[n++],r.data[n++],r.data[n++],r.data[n++]),a}function oo(r,e){return Math.sqrt(Math.pow(r[0]-e[0],2)+Math.pow(r[1]-e[1],2)+Math.pow(r[2]-e[2],2))}function OT(r){for(var e=[0,0,0],t=0;t<r.length;t++)e[0]+=r[t][0],e[1]+=r[t][1],e[2]+=r[t][2];return e[0]/=r.length,e[1]/=r.length,e[2]/=r.length,e}function LT(r,e){var t=ps(r,0,0),n=ps(r,r.width-1,0),a=ps(r,0,r.height-1),i=ps(r,r.width-1,r.height-1),o=e||10;if(oo(t,n)<o&&oo(n,i)<o&&oo(i,a)<o&&oo(a,t)<o){for(var s=OT([n,t,i,a]),l=[],u=0;u<r.width*r.height;u++){var f=oo(s,[r.data[u*4],r.data[u*4+1],r.data[u*4+2]]);l[u]=f<o?0:255}return l}}function NT(r,e){for(var t=0;t<r.width*r.height;t++)r.data[4*t+3]=e[t]}function RT(r,e,t){for(var n=[1,1,1,1,0,1,1,1,1],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var l=0;l<e;l++){for(var u=s*e+l,f=0,c=0;c<a;c++)for(var p=0;p<a;p++){var g=s+c-i,h=l+p-i;if(g>=0&&g<t&&h>=0&&h<e){var m=g*e+h,x=n[c*a+p];f+=r[m]*x}}o[u]=f===255*8?255:0}return o}function IT(r,e,t){for(var n=[1,1,1,1,1,1,1,1,1],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var l=0;l<e;l++){for(var u=s*e+l,f=0,c=0;c<a;c++)for(var p=0;p<a;p++){var g=s+c-i,h=l+p-i;if(g>=0&&g<t&&h>=0&&h<e){var m=g*e+h,x=n[c*a+p];f+=r[m]*x}}o[u]=f>=255*4?255:0}return o}function BT(r,e,t){for(var n=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],a=Math.round(Math.sqrt(n.length)),i=Math.floor(a/2),o=[],s=0;s<t;s++)for(var l=0;l<e;l++){for(var u=s*e+l,f=0,c=0;c<a;c++)for(var p=0;p<a;p++){var g=s+c-i,h=l+p-i;if(g>=0&&g<t&&h>=0&&h<e){var m=g*e+h,x=n[c*a+p];f+=r[m]*x}}o[u]=f}return o}var FT=function(r){var e=this.threshold(),t=LT(r,e);return t&&(t=RT(t,r.width,r.height),t=IT(t,r.width,r.height),t=BT(t,r.width,r.height),NT(r,t)),r};Qu.Mask=FT;vh.Factory.addGetterSetter(MT.Node,"threshold",0,DT.getNumberValidator(),vh.Factory.afterSetFilter);var Zu={};Object.defineProperty(Zu,"__esModule",{value:!0});Zu.Noise=void 0;var gh=ct,zT=or,GT=Xe,VT=function(r){var e=this.noise()*255,t=r.data,n=t.length,a=e/2,i;for(i=0;i<n;i+=4)t[i+0]+=a-2*a*Math.random(),t[i+1]+=a-2*a*Math.random(),t[i+2]+=a-2*a*Math.random()};Zu.Noise=VT;gh.Factory.addGetterSetter(zT.Node,"noise",.2,GT.getNumberValidator(),gh.Factory.afterSetFilter);var Ju={};Object.defineProperty(Ju,"__esModule",{value:!0});Ju.Pixelate=void 0;var ph=ct,$T=wt,qT=or,HT=Xe,UT=function(r){var e=Math.ceil(this.pixelSize()),t=r.width,n=r.height,a,i,o,s,l,u,f,c=Math.ceil(t/e),p=Math.ceil(n/e),g,h,m,x,w,S,y,C=r.data;if(e<=0){$T.Util.error("pixelSize value can not be <= 0");return}for(w=0;w<c;w+=1)for(S=0;S<p;S+=1){for(s=0,l=0,u=0,f=0,g=w*e,h=g+e,m=S*e,x=m+e,y=0,a=g;a<h;a+=1)if(!(a>=t))for(i=m;i<x;i+=1)i>=n||(o=(t*i+a)*4,s+=C[o+0],l+=C[o+1],u+=C[o+2],f+=C[o+3],y+=1);for(s=s/y,l=l/y,u=u/y,f=f/y,a=g;a<h;a+=1)if(!(a>=t))for(i=m;i<x;i+=1)i>=n||(o=(t*i+a)*4,C[o+0]=s,C[o+1]=l,C[o+2]=u,C[o+3]=f)}};Ju.Pixelate=UT;ph.Factory.addGetterSetter(qT.Node,"pixelSize",8,HT.getNumberValidator(),ph.Factory.afterSetFilter);var el={};Object.defineProperty(el,"__esModule",{value:!0});el.Posterize=void 0;var yh=ct,WT=or,KT=Xe,jT=function(r){var e=Math.round(this.levels()*254)+1,t=r.data,n=t.length,a=255/e,i;for(i=0;i<n;i+=1)t[i]=Math.floor(t[i]/a)*a};el.Posterize=jT;yh.Factory.addGetterSetter(WT.Node,"levels",.5,KT.getNumberValidator(),yh.Factory.afterSetFilter);var tl={};Object.defineProperty(tl,"__esModule",{value:!0});tl.RGB=void 0;var Us=ct,lc=or,YT=Xe,XT=function(r){var e=r.data,t=e.length,n=this.red(),a=this.green(),i=this.blue(),o,s;for(o=0;o<t;o+=4)s=(.34*e[o]+.5*e[o+1]+.16*e[o+2])/255,e[o]=s*n,e[o+1]=s*a,e[o+2]=s*i,e[o+3]=e[o+3]};tl.RGB=XT;Us.Factory.addGetterSetter(lc.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Us.Factory.addGetterSetter(lc.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Us.Factory.addGetterSetter(lc.Node,"blue",0,YT.RGBComponent,Us.Factory.afterSetFilter);var rl={};Object.defineProperty(rl,"__esModule",{value:!0});rl.RGBA=void 0;var Do=ct,nl=or,QT=Xe,ZT=function(r){var e=r.data,t=e.length,n=this.red(),a=this.green(),i=this.blue(),o=this.alpha(),s,l;for(s=0;s<t;s+=4)l=1-o,e[s]=n*o+e[s]*l,e[s+1]=a*o+e[s+1]*l,e[s+2]=i*o+e[s+2]*l};rl.RGBA=ZT;Do.Factory.addGetterSetter(nl.Node,"red",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Do.Factory.addGetterSetter(nl.Node,"green",0,function(r){return this._filterUpToDate=!1,r>255?255:r<0?0:Math.round(r)});Do.Factory.addGetterSetter(nl.Node,"blue",0,QT.RGBComponent,Do.Factory.afterSetFilter);Do.Factory.addGetterSetter(nl.Node,"alpha",1,function(r){return this._filterUpToDate=!1,r>1?1:r<0?0:r});var al={};Object.defineProperty(al,"__esModule",{value:!0});al.Sepia=void 0;var JT=function(r){var e=r.data,t=e.length,n,a,i,o;for(n=0;n<t;n+=4)a=e[n+0],i=e[n+1],o=e[n+2],e[n+0]=Math.min(255,a*.393+i*.769+o*.189),e[n+1]=Math.min(255,a*.349+i*.686+o*.168),e[n+2]=Math.min(255,a*.272+i*.534+o*.131)};al.Sepia=JT;var il={};Object.defineProperty(il,"__esModule",{value:!0});il.Solarize=void 0;var eE=function(r){var e=r.data,t=r.width,n=r.height,a=t*4,i=n;do{var o=(i-1)*a,s=t;do{var l=o+(s-1)*4,u=e[l],f=e[l+1],c=e[l+2];u>127&&(u=255-u),f>127&&(f=255-f),c>127&&(c=255-c),e[l]=u,e[l+1]=f,e[l+2]=c}while(--s)}while(--i)};il.Solarize=eE;var ol={};Object.defineProperty(ol,"__esModule",{value:!0});ol.Threshold=void 0;var mh=ct,tE=or,rE=Xe,nE=function(r){var e=this.threshold()*255,t=r.data,n=t.length,a;for(a=0;a<n;a+=1)t[a]=t[a]<e?0:255};ol.Threshold=nE;mh.Factory.addGetterSetter(tE.Node,"threshold",.5,rE.getNumberValidator(),mh.Factory.afterSetFilter);Object.defineProperty(du,"__esModule",{value:!0});du.Konva=void 0;var bh=hu,aE=xu,iE=_u,oE=Eu,sE=Pu,uE=ku,wh=Ai,lE=$o,fE=qo,cE=Ho,dE=Ou,hE=Lu,vE=Nu,gE=Ru,pE=Ya,yE=Iu,mE=Bu,bE=Fu,wE=Gu,xE=Vu,CE=$u,SE=qu,_E=Uu,TE=Wu,EE=Ku,PE=ju,kE=Yu,AE=Xu,ME=Qu,DE=Zu,OE=Ju,LE=el,NE=tl,RE=rl,IE=al,BE=il,FE=ol;du.Konva=bh.Konva.Util._assign(bh.Konva,{Arc:aE.Arc,Arrow:iE.Arrow,Circle:oE.Circle,Ellipse:sE.Ellipse,Image:uE.Image,Label:wh.Label,Tag:wh.Tag,Line:lE.Line,Path:fE.Path,Rect:cE.Rect,RegularPolygon:dE.RegularPolygon,Ring:hE.Ring,Sprite:vE.Sprite,Star:gE.Star,Text:pE.Text,TextPath:yE.TextPath,Transformer:mE.Transformer,Wedge:bE.Wedge,Filters:{Blur:wE.Blur,Brighten:xE.Brighten,Contrast:CE.Contrast,Emboss:SE.Emboss,Enhance:_E.Enhance,Grayscale:TE.Grayscale,HSL:EE.HSL,HSV:PE.HSV,Invert:kE.Invert,Kaleidoscope:AE.Kaleidoscope,Mask:ME.Mask,Noise:DE.Noise,Pixelate:OE.Pixelate,Posterize:LE.Posterize,RGB:NE.RGB,RGBA:RE.RGBA,Sepia:IE.Sepia,Solarize:BE.Solarize,Threshold:FE.Threshold}});(function(r,e){var t=du.Konva;t._injectGlobal(t),e.default=t,r.exports=e.default})(mf,mf.exports);var zE=mf.exports,np={exports:{}};(function(r,e){(function(t,n){r.exports=n()})(self,function(){return(()=>{var t={621:(i,o,s)=>{function l(P,D){(D==null||D>P.length)&&(D=P.length);for(var L=0,F=new Array(D);L<D;L++)F[L]=P[L];return F}function u(P){for(var D="",L=0;L<P.length;L++)D+=P[L],L!==P.length-1&&(D+=" ");return D}function f(P,D,L){L?P.setAttribute(D,""):P.removeAttribute(D)}function c(P,D,L){customElements.get(P)===void 0&&customElements.define(P,D,{extends:L})}s.r(o),s.d(o,{contextMenus:()=>K});var p="cy-context-menus-divider",g={evtType:"cxttap",menuItems:[],menuItemClasses:["cy-context-menus-cxt-menuitem"],contextMenuClasses:["cy-context-menus-cxt-menu"],submenuIndicator:{src:"assets/submenu-indicator-default.svg",width:12,height:12}};function h(P){return(h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(D){return typeof D}:function(D){return D&&typeof Symbol=="function"&&D.constructor===Symbol&&D!==Symbol.prototype?"symbol":typeof D})(P)}function m(P,D){var L;if(typeof Symbol>"u"||P[Symbol.iterator]==null){if(Array.isArray(P)||(L=function(oe,fe){if(oe){if(typeof oe=="string")return x(oe,fe);var ce=Object.prototype.toString.call(oe).slice(8,-1);return ce==="Object"&&oe.constructor&&(ce=oe.constructor.name),ce==="Map"||ce==="Set"?Array.from(oe):ce==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ce)?x(oe,fe):void 0}}(P))||D&&P&&typeof P.length=="number"){L&&(P=L);var F=0,W=function(){};return{s:W,n:function(){return F>=P.length?{done:!0}:{done:!1,value:P[F++]}},e:function(oe){throw oe},f:W}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Z,J=!0,Q=!1;return{s:function(){L=P[Symbol.iterator]()},n:function(){var oe=L.next();return J=oe.done,oe},e:function(oe){Q=!0,Z=oe},f:function(){try{J||L.return==null||L.return()}finally{if(Q)throw Z}}}}function x(P,D){(D==null||D>P.length)&&(D=P.length);for(var L=0,F=new Array(D);L<D;L++)F[L]=P[L];return F}function w(P,D){if(!(P instanceof D))throw new TypeError("Cannot call a class as a function")}function S(P,D){for(var L=0;L<D.length;L++){var F=D[L];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(P,F.key,F)}}function y(P,D,L){return D&&S(P.prototype,D),L&&S(P,L),P}function C(P,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(D&&D.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),D&&I(P,D)}function E(P){var D=O();return function(){var L,F=q(P);if(D){var W=q(this).constructor;L=Reflect.construct(F,arguments,W)}else L=F.apply(this,arguments);return M(this,L)}}function M(P,D){return!D||h(D)!=="object"&&typeof D!="function"?v(P):D}function v(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function T(P,D,L){return(T=typeof Reflect<"u"&&Reflect.get?Reflect.get:function(F,W,Z){var J=function(oe,fe){for(;!Object.prototype.hasOwnProperty.call(oe,fe)&&(oe=q(oe))!==null;);return oe}(F,W);if(J){var Q=Object.getOwnPropertyDescriptor(J,W);return Q.get?Q.get.call(Z):Q.value}})(P,D,L||P)}function k(P){var D=typeof Map=="function"?new Map:void 0;return(k=function(L){if(L===null||(F=L,Function.toString.call(F).indexOf("[native code]")===-1))return L;var F;if(typeof L!="function")throw new TypeError("Super expression must either be null or a function");if(D!==void 0){if(D.has(L))return D.get(L);D.set(L,W)}function W(){return N(L,arguments,q(this).constructor)}return W.prototype=Object.create(L.prototype,{constructor:{value:W,enumerable:!1,writable:!0,configurable:!0}}),I(W,L)})(P)}function N(P,D,L){return(N=O()?Reflect.construct:function(F,W,Z){var J=[null];J.push.apply(J,W);var Q=new(Function.bind.apply(F,J));return Z&&I(Q,Z.prototype),Q}).apply(null,arguments)}function O(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function I(P,D){return(I=Object.setPrototypeOf||function(L,F){return L.__proto__=F,L})(P,D)}function q(P){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(D){return D.__proto__||Object.getPrototypeOf(D)})(P)}function B(P){P.preventDefault(),P.stopPropagation()}var j=function(P){C(L,P);var D=E(L);function L(F,W,Z){var J,Q,oe,fe,ce,Ce,Le,Re,De,me;w(this,L),T((Q=v(me=D.call(this)),q(L.prototype)),"setAttribute",Q).call(Q,"id",F.id);var _e=me._getMenuItemClassStr(Z.cxtMenuItemClasses,F.hasTrailingDivider);if(T((oe=v(me),q(L.prototype)),"setAttribute",oe).call(oe,"class",_e),T((fe=v(me),q(L.prototype)),"setAttribute",fe).call(fe,"title",(J=F.tooltipText)!==null&&J!==void 0?J:""),F.disabled&&f(v(me),"disabled",!0),F.image){var we=document.createElement("img");we.src=F.image.src,we.width=F.image.width,we.height=F.image.height,we.style.position="absolute",we.style.top=F.image.y+"px",we.style.left=F.image.x+"px",T((ce=v(me),q(L.prototype)),"appendChild",ce).call(ce,we)}if(me.innerHTML+=F.content,me.onMenuItemClick=W,me.data={},me.clickFns=[],me.selector=F.selector,me.hasTrailingDivider=F.hasTrailingDivider,me.show=F.show===void 0||F.show,me.coreAsWell=F.coreAsWell||!1,me.scratchpad=Z,F.onClickFunction===void 0&&F.submenu===void 0)throw new Error("A menu item must either have click function or a submenu or both");return me.onClickFunction=F.onClickFunction,F.submenu instanceof Array&&me._createSubmenu(F.submenu),T((Ce=v(me),q(L.prototype)),"addEventListener",Ce).call(Ce,"mousedown",B),T((Le=v(me),q(L.prototype)),"addEventListener",Le).call(Le,"mouseup",B),T((Re=v(me),q(L.prototype)),"addEventListener",Re).call(Re,"touchstart",B),T((De=v(me),q(L.prototype)),"addEventListener",De).call(De,"touchend",B),me}return y(L,[{key:"bindOnClickFunction",value:function(F){this.clickFns.push(F),T(q(L.prototype),"addEventListener",this).call(this,"click",F)}},{key:"unbindOnClickFunctions",value:function(){var F,W=m(this.clickFns);try{for(W.s();!(F=W.n()).done;){var Z=F.value;T(q(L.prototype),"removeEventListener",this).call(this,"click",Z)}}catch(J){W.e(J)}finally{W.f()}this.clickFns=[]}},{key:"enable",value:function(){f(this,"disabled",!1),this.hasSubmenu()&&this.addEventListener("mouseenter",this.mouseEnterHandler)}},{key:"disable",value:function(){f(this,"disabled",!0),this.hasSubmenu()&&this.removeEventListener("mouseenter",this.mouseEnterHandler)}},{key:"hide",value:function(){this.show=!1,this.style.display="none"}},{key:"getHasTrailingDivider",value:function(){return!!this.hasTrailingDivider}},{key:"setHasTrailingDivider",value:function(F){this.hasTrailingDivider=F}},{key:"hasSubmenu",value:function(){return this.submenu instanceof Y}},{key:"appendSubmenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.hasSubmenu()||this._createSubmenu(),this.submenu.appendMenuItem(F,W)}},{key:"isClickable",value:function(){return this.onClickFunction!==void 0}},{key:"display",value:function(){this.show=!0,this.style.display="block"}},{key:"isVisible",value:function(){return this.show===!0&&this.style.display!=="none"}},{key:"removeSubmenu",value:function(){this.hasSubmenu()&&(this.submenu.removeAllMenuItems(),this.detachSubmenu())}},{key:"detachSubmenu",value:function(){this.hasSubmenu()&&(this.removeChild(this.submenu),this.removeChild(this.indicator),this.removeEventListener("mouseenter",this.mouseEnterHandler),this.removeEventListener("mouseleave",this.mouseLeaveHandler),this.submenu=void 0,this.indicator=void 0)}},{key:"_onMouseEnter",value:function(F){var W=this.getBoundingClientRect(),Z=function(ce){ce.style.opacity="0",ce.style.display="block";var Ce=ce.getBoundingClientRect();return ce.style.opacity="1",ce.style.display="none",Ce}(this.submenu),J=W.right+Z.width>window.innerWidth,Q=W.top+Z.height>window.innerHeight;J||Q?J&&!Q?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.left="auto",this.submenu.style.bottom="auto"):J&&Q?(this.submenu.style.right=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.top="auto",this.submenu.style.left="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.bottom="0px",this.submenu.style.right="auto",this.submenu.style.top="auto"):(this.submenu.style.left=this.clientWidth+"px",this.submenu.style.top="0px",this.submenu.style.right="auto",this.submenu.style.bottom="auto"),this.submenu.display();var oe=Array.from(this.submenu.children).filter(function(ce){if(ce instanceof L)return ce.isVisible()}),fe=oe.length;oe.forEach(function(ce,Ce){ce instanceof L&&(Ce<fe-1&&ce.getHasTrailingDivider()?ce.classList.add(p):ce.getHasTrailingDivider()&&ce.classList.remove(p))})}},{key:"_onMouseLeave",value:function(F){var W,Z,J,Q,oe;W={x:F.clientX,y:F.clientY},Z=this.submenu,Q=W.y,(J=W.x)>=(oe=Z.getBoundingClientRect()).left&&J<=oe.right&&Q>=oe.top&&Q<=oe.bottom||this.submenu.hide()}},{key:"_createSubmenu",value:function(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];this.indicator=this.scratchpad.submenuIndicatorGen(),this.submenu=new Y(this.onMenuItemClick,this.scratchpad),this.appendChild(this.indicator),this.appendChild(this.submenu);var W,Z=m(F);try{for(Z.s();!(W=Z.n()).done;){var J=W.value,Q=new L(J,this.onMenuItemClick,this.scratchpad);this.submenu.appendMenuItem(Q)}}catch(oe){Z.e(oe)}finally{Z.f()}this.mouseEnterHandler=this._onMouseEnter.bind(this),this.mouseLeaveHandler=this._onMouseLeave.bind(this),this.addEventListener("mouseenter",this.mouseEnterHandler),this.addEventListener("mouseleave",this.mouseLeaveHandler)}},{key:"_getMenuItemClassStr",value:function(F,W){return W?F+" "+p:F}}],[{key:"define",value:function(){c("ctx-menu-item",L,"button")}}]),L}(k(HTMLButtonElement)),Y=function(P){C(L,P);var D=E(L);function L(F,W){var Z,J;return w(this,L),T((Z=v(J=D.call(this)),q(L.prototype)),"setAttribute",Z).call(Z,"class",W.cxtMenuClasses),J.style.position="absolute",J.onMenuItemClick=F,J.scratchpad=W,J}return y(L,[{key:"hide",value:function(){this.isVisible()&&(this.hideSubmenus(),this.style.display="none")}},{key:"display",value:function(){this.style.display="block"}},{key:"isVisible",value:function(){return this.style.display!=="none"}},{key:"hideMenuItems",value:function(){var F,W=m(this.children);try{for(W.s();!(F=W.n()).done;){var Z=F.value;Z instanceof HTMLElement?Z.style.display="none":console.warn("".concat(Z," is not a HTMLElement"))}}catch(J){W.e(J)}finally{W.f()}}},{key:"hideSubmenus",value:function(){var F,W=m(this.children);try{for(W.s();!(F=W.n()).done;){var Z=F.value;Z instanceof j&&Z.submenu&&Z.submenu.hide()}}catch(J){W.e(J)}finally{W.f()}}},{key:"appendMenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;if(W!==void 0){if(W.parentNode!==this)throw new Error("The item with id='".concat(W.id,"' is not a child of the context menu"));this.insertBefore(F,W)}else this.appendChild(F);F.isClickable()&&this._performBindings(F)}},{key:"moveBefore",value:function(F,W){if(F.parentNode!==this)throw new Error("The item with id='".concat(F.id,"' is not a child of context menu"));if(W.parentNode!==this)throw new Error("The item with id='".concat(W.id,"' is not a child of context menu"));this.removeChild(F),this.insertBefore(F,W)}},{key:"removeAllMenuItems",value:function(){for(;this.firstChild;){var F=this.lastChild;F instanceof j?this._removeImmediateMenuItem(F):(console.warn("Found non menu item in the context menu: ",F),this.removeChild(F))}}},{key:"_removeImmediateMenuItem",value:function(F){if(!this._detachImmediateMenuItem(F))throw new Error("menu item(id=".concat(F.id,") is not in the context menu"));F.detachSubmenu(),F.unbindOnClickFunctions()}},{key:"_detachImmediateMenuItem",value:function(F){if(F.parentNode===this){if(this.removeChild(F),this.children.length<=0){var W=this.parentNode;W instanceof j&&W.detachSubmenu()}return!0}return!1}},{key:"_performBindings",value:function(F){var W=this._bindOnClick(F.onClickFunction);F.bindOnClickFunction(W),F.bindOnClickFunction(this.onMenuItemClick)}},{key:"_bindOnClick",value:function(F){var W=this;return function(){var Z=W.scratchpad.currentCyEvent;F(Z)}}}],[{key:"define",value:function(){c("menu-item-list",L,"div")}}]),L}(k(HTMLDivElement)),U=function(P){C(L,P);var D=E(L);function L(F,W){var Z;return w(this,L),(Z=D.call(this,F,W)).onMenuItemClick=function(J){B(J),Z.hide(),F()},Z}return y(L,[{key:"removeMenuItem",value:function(F){var W=F.parentElement;W instanceof Y&&this.contains(W)&&W._removeImmediateMenuItem(F)}},{key:"appendMenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;this.ensureDoesntContain(F.id),T(q(L.prototype),"appendMenuItem",this).call(this,F,W)}},{key:"insertMenuItem",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Z=W.before,J=W.parent;if(this.ensureDoesntContain(F.id),Z!==void 0){if(!this.contains(Z))throw new Error("before(id=".concat(Z.id,") is not in the context menu"));var Q=Z.parentNode;if(!(Q instanceof Y))throw new Error("Parent of before(id=".concat(Z.id,") is not a submenu"));Q.appendMenuItem(F,Z)}else if(J!==void 0){if(!this.contains(J))throw new Error("parent(id=".concat(J.id,") is not a descendant of the context menu"));J.appendSubmenuItem(F)}else this.appendMenuItem(F)}},{key:"moveBefore",value:function(F,W){var Z=F.parentElement;if(!this.contains(Z))throw new Error("parent(id=".concat(Z.id,") is not in the contex menu"));if(!this.contains(W))throw new Error("before(id=".concat(W.id,") is not in the context menu"));Z.removeChild(F),this.insertMenuItem(F,{before:W})}},{key:"moveToSubmenu",value:function(F){var W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Z=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null,J=F.parentElement;if(!(J instanceof Y))throw new Error("current parent(id=".concat(J.id,") is not a submenu"));if(!this.contains(J))throw new Error("parent of the menu item(id=".concat(J.id,") is not in the context menu"));if(W!==null){if(!this.contains(W))throw new Error("parent(id=".concat(W.id,") is not in the context menu"));J._detachImmediateMenuItem(F),W.appendSubmenuItem(F)}else Z!==null&&(F.selector=Z.selector,F.coreAsWell=Z.coreAsWell),J._detachImmediateMenuItem(F),this.appendMenuItem(F)}},{key:"ensureDoesntContain",value:function(F){var W=document.getElementById(F);if(W!==void 0&&this.contains(W))throw new Error("There is already an element with id=".concat(F," in the context menu"))}}],[{key:"define",value:function(){c("ctx-menu",L,"div")}}]),L}(Y);function X(P,D){(D==null||D>P.length)&&(D=P.length);for(var L=0,F=new Array(D);L<D;L++)F[L]=P[L];return F}function K(P){var D=this;D.scratch("cycontextmenus")||D.scratch("cycontextmenus",{});var L,F,W=function(_e){return D.scratch("cycontextmenus")[_e]},Z=function(_e,we){return D.scratch("cycontextmenus")[_e]=we},J=W("options"),Q=W("cxtMenu"),oe=function(_e){var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,xe=ce(_e);if(we!==void 0){var Be=Le(we);Q.insertMenuItem(xe,{parent:Be})}else Q.insertMenuItem(xe)},fe=function(_e){for(var we=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0,xe=0;xe<_e.length;xe++)oe(_e[xe],we)},ce=function(_e){var we=D.scratch("cycontextmenus");return new j(_e,Q.onMenuItemClick,we)},Ce=function(){W("active")&&(Q.removeAllMenuItems(),D.off("tapstart",W("eventCyTapStart")),D.off(J.evtType,W("onCxttap")),D.off("viewport",W("onViewport")),document.removeEventListener("mouseup",W("hideOnNonCyClick")),Q.parentNode.removeChild(Q),Q=void 0,Z("cxtMenu",void 0),Z("active",!1),Z("anyVisibleChild",!1),Z("onCxttap",void 0),Z("onViewport",void 0),Z("hideOnNonCyClick",void 0))},Le=function(_e){var we=document.getElementById(_e);if(we instanceof j)return we;throw new Error("The item with id=".concat(_e," is not a menu item"))};if(P!=="get"){j.define(),Y.define(),U.define(),J=function(_e,we){var xe={};for(var Be in _e)xe[Be]=_e[Be];for(var Ue in we)xe[Ue]instanceof Array?xe[Ue]=xe[Ue].concat(we[Ue]):xe[Ue]=we[Ue];return xe}(g,P),Z("options",J),W("active")&&Ce(),Z("active",!0),Z("submenuIndicatorGen",function(_e){var we=document.createElement("img");return we.src=_e.src,we.width=_e.width,we.height=_e.height,we.classList.add("cy-context-menus-submenu-indicator"),we}.bind(void 0,J.submenuIndicator));var Re=u(J.contextMenuClasses);Z("cxtMenuClasses",Re);var De=D.scratch("cycontextmenus");Q=new U(function(){return Z("cxtMenuPosition",void 0)},De),Z("cxtMenu",Q),D.container().appendChild(Q),Z("cxtMenuItemClasses",u(J.menuItemClasses));var me=J.menuItems;fe(me),F=function(_e){Z("currentCyEvent",_e),function(ke){var de,R=D.container(),G=W("cxtMenuPosition"),re=ke.position||ke.cyPosition;if(G!=re){Q.hideMenuItems(),Z("anyVisibleChild",!1),Z("cxtMenuPosition",re);var te={top:(de=R.getBoundingClientRect()).top,left:de.left},ie=ke.renderedPosition||ke.cyRenderedPosition,ge=getComputedStyle(R)["border-width"],ue=parseInt(ge.replace("px",""))||0;ue>0&&(te.top+=ue,te.left+=ue);var Se=R.clientHeight,Fe=R.clientWidth,ze=Se/2,Ie=Fe/2;ie.y>ze&&ie.x<=Ie?(Q.style.left=ie.x+"px",Q.style.bottom=Se-ie.y+"px",Q.style.right="auto",Q.style.top="auto"):ie.y>ze&&ie.x>Ie?(Q.style.right=Fe-ie.x+"px",Q.style.bottom=Se-ie.y+"px",Q.style.left="auto",Q.style.top="auto"):ie.y<=ze&&ie.x<=Ie?(Q.style.left=ie.x+"px",Q.style.top=ie.y+"px",Q.style.right="auto",Q.style.bottom="auto"):(Q.style.right=Fe-ie.x+"px",Q.style.top=ie.y+"px",Q.style.left="auto",Q.style.bottom="auto")}}(_e);var we,xe=_e.target||_e.cyTarget,Be=function(ke,de){var R;if(typeof Symbol>"u"||ke[Symbol.iterator]==null){if(Array.isArray(ke)||(R=function(ue,Se){if(ue){if(typeof ue=="string")return X(ue,Se);var Fe=Object.prototype.toString.call(ue).slice(8,-1);return Fe==="Object"&&ue.constructor&&(Fe=ue.constructor.name),Fe==="Map"||Fe==="Set"?Array.from(ue):Fe==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Fe)?X(ue,Se):void 0}}(ke))||de&&ke&&typeof ke.length=="number"){R&&(ke=R);var G=0,re=function(){};return{s:re,n:function(){return G>=ke.length?{done:!0}:{done:!1,value:ke[G++]}},e:function(ue){throw ue},f:re}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var te,ie=!0,ge=!1;return{s:function(){R=ke[Symbol.iterator]()},n:function(){var ue=R.next();return ie=ue.done,ue},e:function(ue){ge=!0,te=ue},f:function(){try{ie||R.return==null||R.return()}finally{if(ge)throw te}}}}(Q.children);try{for(Be.s();!(we=Be.n()).done;){var Ue=we.value;Ue instanceof j&&(xe===D?Ue.coreAsWell:xe.is(Ue.selector))&&Ue.show&&(Q.display(),Z("anyVisibleChild",!0),Ue.display())}}catch(ke){Be.e(ke)}finally{Be.f()}var Ee=Array.from(Q.children).filter(function(ke){if(ke instanceof j)return ke.isVisible()}),Me=Ee.length;Ee.forEach(function(ke,de){ke instanceof j&&(de<Me-1&&ke.getHasTrailingDivider()?ke.classList.add(p):ke.getHasTrailingDivider()&&ke.classList.remove(p))}),!W("anyVisibleChild")&&!function(ke){return ke.offsetWidth<=0&&ke.offsetHeight<=0||ke.style&&ke.style.display||getComputedStyle(ke).display}(Q)&&Q.hide()},D.on(J.evtType,F),Z("onCxttap",F),function(){var _e=function(xe){if(Q.contains(xe.originalEvent.target))return!1;Q.hide(),Z("cxtMenuPosition",void 0),Z("currentCyEvent",void 0)};D.on("tapstart",_e),Z("eventCyTapStart",_e);var we=function(){Q.hide()};D.on("viewport",we),Z("onViewport",we)}(),L=function(_e){D.container().contains(_e.target)||Q.contains(_e.target)||(Q.hide(),Z("cxtMenuPosition",void 0))},document.addEventListener("mouseup",L),Z("hideOnNonCyClick",L),function(){var _e,we=function(xe,Be){var Ue;if(typeof Symbol>"u"||xe[Symbol.iterator]==null){if(Array.isArray(xe)||(Ue=function(G,re){if(G){if(typeof G=="string")return l(G,re);var te=Object.prototype.toString.call(G).slice(8,-1);return te==="Object"&&G.constructor&&(te=G.constructor.name),te==="Map"||te==="Set"?Array.from(G):te==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(te)?l(G,re):void 0}}(xe))||Be&&xe&&typeof xe.length=="number"){Ue&&(xe=Ue);var Ee=0,Me=function(){};return{s:Me,n:function(){return Ee>=xe.length?{done:!0}:{done:!1,value:xe[Ee++]}},e:function(G){throw G},f:Me}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ke,de=!0,R=!1;return{s:function(){Ue=xe[Symbol.iterator]()},n:function(){var G=Ue.next();return de=G.done,G},e:function(G){R=!0,ke=G},f:function(){try{de||Ue.return==null||Ue.return()}finally{if(R)throw ke}}}}(document.getElementsByClassName("cy-context-menus-cxt-menu"));try{for(we.s();!(_e=we.n()).done;)_e.value.addEventListener("contextmenu",function(xe){return xe.preventDefault()})}catch(xe){we.e(xe)}finally{we.f()}}()}return function(_e){return{isActive:function(){return W("active")},appendMenuItem:function(we){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return oe(we,xe),_e},appendMenuItems:function(we){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:void 0;return fe(we,xe),_e},removeMenuItem:function(we){var xe=Le(we);return Q.removeMenuItem(xe),_e},setTrailingDivider:function(we,xe){var Be=Le(we);return Be.setHasTrailingDivider(xe),xe?Be.classList.add(p):Be.classList.remove(p),_e},insertBeforeMenuItem:function(we,xe){var Be=ce(we),Ue=Le(xe);return Q.insertMenuItem(Be,{before:Ue}),_e},moveToSubmenu:function(we){var xe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,Be=Le(we);if(xe===null)Q.moveToSubmenu(Be);else if(typeof xe=="string"){var Ue=Le(xe.toString());Q.moveToSubmenu(Be,Ue)}else xe.coreAsWell!==void 0||xe.selector!==void 0?Q.moveToSubmenu(Be,null,xe):console.warn("options neither has coreAsWell nor selector property but it is an object. Are you sure that this is what you want to do?");return _e},moveBeforeOtherMenuItem:function(we,xe){var Be=Le(we),Ue=Le(xe);return Q.moveBefore(Be,Ue),_e},disableMenuItem:function(we){return Le(we).disable(),_e},enableMenuItem:function(we){return Le(we).enable(),_e},hideMenuItem:function(we){return Le(we).hide(),_e},showMenuItem:function(we){return Le(we).display(),_e},destroy:function(){return Ce(),_e}}}(this)}},579:(i,o,s)=>{var l=s(621).contextMenus,u=function(f){f&&f("core","contextMenus",l)};typeof cytoscape<"u"&&u(cytoscape),i.exports=u}},n={};function a(i){var o=n[i];if(o!==void 0)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,a),s.exports}return a.d=(i,o)=>{for(var s in o)a.o(o,s)&&!a.o(i,s)&&Object.defineProperty(i,s,{enumerable:!0,get:o[s]})},a.o=(i,o)=>Object.prototype.hasOwnProperty.call(i,o),a.r=i=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},a(579)})()})})(np);var GE=oS(np.exports);const VE={class:"q-pa-md"},$E={class:""},qE=Lr("div",{class:"text-h6"},"Selected Node",-1),HE=["innerHTML"],UE=Lr("div",{class:"text-h6"},"Ancestor Nodes",-1),WE={class:"text-h6"},KE=["innerHTML"],jE={class:"text-caption"},YE=["innerHTML"],XE=["innerHTML"],QE=["innerHTML"],ZE=Object.assign({name:"IndexPage"},{__name:"GraphComponent",emits:["nodeSelected"],setup(r,{expose:e,emit:t}){window.jQuery=Ul,window.$=Ul,Dn.use(GE),sS(Dn),uS(Dn,Ul,zE);const n=Ht([]),a=t,i=Ht(50),o=Ht("nodes"),s=Ht(null),l=Ht(null),u=Ht([]),f=Ht([]);var c=null;class p{constructor(v,T,k,N,O,I,q,B,j){this.zoomLevels=["test","summary","title"],this.currentZoomLevel=0,this.graphWithStyle=v,this.graph=v.graph,this.nodeStyles=v.style,this.elements=this.graph,this.display_main_text=B,this.zoomLevelsChanges=O,this.fontSizeSection=I,this.fontsSize=q,this.divsToTypeset=[],this.styleAlreadySet=!1,this.hasMathML=N,this.move_nodes=k,this.graph_fileName=j,this.selectedNode=null,this.layout_name=T,c=this,this.max_display_order=0,this.current_display_order=c.max_display_order,this.titleNamesList=["section","sectionTitle","subsection","subsectionTitle"],c.hasMathML&&c.computeNodeSizes(!1),c.cyInstance=Dn({container:s.value,layout:{name:T},elements:c.elements,wheelSensitivity:.2,autoungrabify:!k}),c.cyInstance.nodeHtmlLabel([{query:".l0",valign:"center",halign:"left",valignBox:"center",halignBox:"right",tpl:function(X){let K=c.nodeStyles[X.name].nodeStyle["node-width"];return K||(K=500),X.name=="sectionTitle"?c.getLabelFromText(X.text,X.id,K,c.fontSizeSection.section):X.name=="subsectionTitle"?c.getLabelFromText(X.text,X.id,K,c.fontSizeSection.subsection):c.currentZoomLevel==1&&X.hasSummary?c.getLabelFromText(X.summary,X.id,K,c.fontsSize[1]):c.currentZoomLevel>=1&&X.hasTitle?c.getLabelFromText(X.title,X.id,K,c.fontsSize[2],!0):!c.display_main_text&&X.hasSummary?c.getLabelFromText(X.summary,X.id,K,c.fontsSize[1]):!c.display_main_text&&X.hasTitle?c.getLabelFromText(X.title,X.id,K,c.fontsSize[2],!0):c.getLabelFromText(X.text,X.id,K,c.fontsSize[0])}},{query:".l1",valign:"center",halign:"left",valignBox:"top",halignBox:"left",tpl:function(X){return display_summary&&X.hasOwnProperty("summary")?getLabelFromText(X.summary,X.id,c.nodeStyles[X.name].nodeStyle["node-width"]):getLabelFromText(X.text,X.id,c.nodeStyles[X.name].nodeStyle["node-width"])}},{query:".l2",valign:"center",halign:"center",valignBox:"center",halignBox:"center",tpl:function(X){return c.styleAlreadySet=!0,"prout"}}]),setTimeout(c.setStyle,500),c.move_nodes||c.cyInstance.filter("node").panify(),c.cyInstance.on("mouseover","node",function(X){N||(c.divsToTypeset=c.divsToTypeset.concat(getDivsToTypeset(X.target)))}),c.cyInstance.filter("node").addClass("highlight"),c.cyNodes=c.cyInstance.filter("node"),c.highlighted_items=[];for(var Y=0;Y<c.cyNodes.length;Y++)c.highlighted_items.push(c.cyNodes[Y]);c.cyInstance.on("click","node",function(X){c.selectNode(X.target)}),c.cyInstance.on("zoom",function(X){var K=!1;if(console.log(c.currentZoomLevel,c.styleAlreadySet,c.cyInstance.zoom()),c.styleAlreadySet){c.currentZoomLevel==0&&c.cyInstance.zoom()<c.zoomLevelsChanges[0]&&(c.currentZoomLevel=1,K=!0),c.currentZoomLevel==2&&c.cyInstance.zoom()>c.zoomLevelsChanges[1]&&(c.currentZoomLevel=1,K=!0),c.currentZoomLevel==1&&(c.cyInstance.zoom()>c.zoomLevelsChanges[0]&&(c.currentZoomLevel=0,K=!0),c.cyInstance.zoom()<c.zoomLevelsChanges[1]&&(c.currentZoomLevel=2,K=!0));let D=c.cyInstance.nodes();if(K==!0){console.log("zoomLevel",c.currentZoomLevel,c.cyInstance.zoom(),c.styleAlreadySet);for(var P=0;P<D.length;P++)D[P].addClass(".highlight"),D[P].removeClass(".highlight");N||(c.divsToTypeset=["cy"]),c.updateStyle()}}});for(var Y=0;Y<c.graph.length;Y++){var U=c.graph[Y];console.log(U),U.group=="nodes"&&(c.max_display_order=Math.max(c.max_display_order,U.data.display_order))}c.current_display_order=c.max_display_order}computeNodeSizes(v){var T=[],k=[];console.log(c);for(var N=0;N<c.graph.length;N++){var O=c.graph[N];if(console.log(O),O.group=="nodes"){O.data.height=0,O.data.width=0,console.log("SIZE:",c.nodeStyles[O.data.name].nodeStyle["node-width"]);let j=c.nodeStyles[O.data.name].nodeStyle["node-width"];switch(j||(j=500),O.data.name){case"sectionTitle":var I=document.createElement("div");I.style.width=j.toString()+"px",I.style.fontSize=c.fontSizeSection.section.toString()+"px",console.log("fontsize",c.fontSizeSection.section.toString(),O.data.id),I.innerHTML=O.data.text,l.value.appendChild(I),T.push(O),k.push(I),console.log("height",I.offsetHeight,I.getBoundingClientRect().height),console.log(O.data.height);break;case"subsectionTitle":var I=document.createElement("div");I.style.width=j.toString()+"px",I.style.fontSize=c.fontSizeSection.subsection.toString()+"px",I.innerHTML=O.data.text,l.value.appendChild(I),T.push(O),k.push(I),console.log("height",I.offsetHeight);break;default:if(O.data.height=0,O.data.width=0,console.log(O.data.id,O.data.hasSummary,O.data.hasTitle,!O.data.hasSummary&&!O.data.hasTitle),c.display_main_text||!O.data.hasSummary&&!O.data.hasTitle){var I=document.createElement("div");I.style.width=j.toString()+"px",I.style.fontSize=c.fontsSize[0].toString()+"px",I.innerHTML=O.data.text,l.value.appendChild(I),T.push(O),k.push(I),console.log("BUGGG",c.display_main_text,O.data.hasSummary,O.data.hasTitle,O.data.id)}if(O.data.hasSummary){var q=document.createElement("div");q.style.width=j.toString()+"px",q.style.fontSize=c.fontsSize[1].toString()+"px",q.style.border="2px solid black",q.innerHTML=O.data.summary,l.value.appendChild(q),T.push(O),k.push(q)}if(O.data.hasTitle){var B=document.createElement("div");B.style.width=j.toString()+"px",B.style.fontSize=c.fontsSize[2].toString()+"px",B.innerHTML=O.data.title,l.value.appendChild(B),T.push(O),k.push(B)}}}}v&&(console.log("using MATHKAX!"),MathJax.typeset(k));for(var N=0;N<T.length;N++){var O=T[N],I=k[N];switch(O.data.name){case"sectionTitle":O.data.height=I.scrollHeight+100,O.data.width=I.scrollWidth+350,console.log(O.data.height);break;case"subsectionTitle":console.log("height",I.offsetHeight),O.data.height=I.scrollHeight+100,O.data.width=I.scrollWidth+80;break;default:O.data.height=Math.max(O.data.height,I.scrollHeight+50),O.data.width=Math.max(O.data.width,I.scrollWidth+80)}I.remove()}}async asyncSetStyle(){for(;typeof c.cyInstance>"u";)await sleep(100);c.setStyle()}setStyle(){console.log(c),console.log("cuurentZoom",c.currentZoomLevel);for(var v=[{selector:'edge[type="strong"]',style:{width:2,"target-arrow-shape":"triangle","line-color":"yellow","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"black blue","line-style":"dashed","line-dash-offset":500,"line-gradient-stop-positions":"0 100"}},{selector:'edge[type="strong"][visibility=0]',style:{display:"none",width:6,"target-arrow-shape":"triangle","line-color":"yellow","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"black blue","line-gradient-stop-positions":"0 100"}},{selector:'edge[type="strong"].highlight',style:{display:"element",width:15,"target-arrow-shape":"triangle","line-color":"black","target-arrow-color":"black","arrow-scale":2,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"red red","line-style":"solid","line-gradient-stop-positions":"0 100"}},{selector:'edge[type="weak"]',style:{display:"none",width:2,"target-arrow-shape":"triangle","line-color":"red","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"black blue","line-style":"dashed","line-gradient-stop-positions":"0 100"}},{selector:'edge[type="weak"].highlight',style:{display:"element",width:8,"target-arrow-shape":"triangle","line-color":"red","target-arrow-color":"black","arrow-scale":3,"curve-style":"straight","line-fill":"linear-gradient","line-gradient-stop-colors":"red red","line-style":"dashed","line-gradient-stop-positions":"0 100"}}],T=0;T<c.graph.length;T++)if(c.graph[T].group=="nodes"){""+c.graph[T].data.id;var k={selector:'node[id = "'+c.graph[T].data.id+'"]',style:{width:c.graph[T].data.width,height:c.graph[T].data.height}};Object.assign(k.style,c.nodeStyles[c.graph[T].data.name].nodeStyle),k.style.width=c.graph[T].data.width,k.style.height=c.graph[T].data.height,k.style["background-opacity"]=k.style["background-opacity"]/4,k.style["border-width"]=k.style["border-width"]/4,k.style["border-style"]="dashed",v.push(k);var N={selector:'node[id = "'+c.graph[T].data.id+'"].highlight',style:{width:c.graph[T].data.width,height:c.graph[T].data.height}};Object.assign(N.style,c.nodeStyles[c.graph[T].data.name].nodeStyle),N.style.width=c.graph[T].data.width,N.style.height=c.graph[T].data.height,v.push(N)}c.cyInstance.style().fromJson(v).update(),c.cyInstance.edgeEditing({undoable:!1,bendRemovalSensitivity:16,enableMultipleAnchorRemovalOption:!0,initAnchorsAutomatically:!1,useTrailingDividersAfterContextMenuOptions:!1,enableCreateAnchorOnDrag:!1}),c.cyInstance.style().update(),c.cyInstance.layout({name:c.layout_name}).run(),c.currentZoomLevel=0,c.styleAlreadySet=!0}getLabelFromText(v,T,k,N=20,O=!1){return O?String.raw`<div id= '`+"_graph_internal_"+T+String.raw`' style = "font-size:`+N.toString()+String.raw`px;width:`+k.toString()+String.raw`px;margin:30px;"><b>`+v+String.raw`</b></div>`:String.raw`<div id= '`+"_graph_internal_"+T+String.raw`' style = "font-size:`+N.toString()+String.raw`px;width:`+k.toString()+String.raw`px;margin:30px;">`+v+String.raw`</div>`}getCyNode(v){let T=c.cyInstance.nodes();for(var k=0;k<T.length;k++)if(T[k].id()==v)return T[k]}getDivsToTypeset(v){divName="_graph_internal_"+v.id();for(var T=[divName],k=v.children(),N=0;N<k.length;N++)T=T.concat(getDivsToTypeset(k[N]));return T}getGraphJSON(){for(var v=0;v<c.graph.length;v++)if(c.graph[v].group=="nodes"){let k=c.getCyNode(c.graph[v].data.id);c.graph[v].position=k.position()}else"cyedgebendeditingWeights"in c.graph[v].data&&c.graph[v].data.cyedgebendeditingWeights.length>0&&(c.graph[v].classes="edgebendediting-hasbendpoints"),"cyedgecontroleditingWeights"in c.graph[v].data&&c.graph[v].data.cyedgecontroleditingWeights.length>0&&(c.graph[v].classes="edgecontrolediting-hascontrolpoints");return{graph:c.graph,style:c.nodeStyles,full_text:c.graphWithStyle.full_text}}getAncestors(v,T,k){for(var N=0;N<T.length;N++)if(T[N]==v)return[T,k];T.push(v);for(var O=v.incomers('edge[type="strong"]'),N=0;N<O.size();N++){k.push(O[N]);var I=O[N].source();T.includes(I)||c.getAncestors(I,T,k)}return[T,k]}static sleep(v){return new Promise(T=>setTimeout(T,v))}selectNode(v,T=!1){let k=c.getCyNode(v.id());var N=v;let O=k.parent();a("nodeSelected",v.id());for(var I=0;I<c.highlighted_items.length;I++){if(c.highlighted_items[I].removeClass("highlight"),!c.hasMathML){let X="_graph_internal_"+c.highlighted_items[I].id();c.divsToTypeset.includes(X)||c.divsToTypeset.push(X)}T==!0&&c.cyInstance.center(k)}if(k==c.selectedNode){c.selectedNode=null,c.highlighted_items=[];for(var I=0;I<c.cyNodes.length;I++)c.highlighted_items.push(c.cyNodes[I])}else{var q=c.getAncestors(N,[],[]);c.highlighted_items=q[0].concat(q[1]);var B=k.incomers();c.highlighted_items=c.highlighted_items.concat(B);var j=c.getAncestors(O,[],[]);c.highlighted_items=c.highlighted_items.concat(j[0].concat(j[1])),c.selectedNode=k}for(var I=0;I<c.highlighted_items.length;I++)c.highlighted_items[I].addClass("highlight"),c.hasMathML||(c.divsToTypeset=c.divsToTypeset.concat(c.getDivsToTypeset(c.highlighted_items[I])));u.value=[{title:k.data().title,summary:k.data().summary,content:k.data().text,expanded:!1}],f.value=[];for(var Y=k.incomers(),I=0;I<Y.size();I++){var U=Y[I];f.value.push({title:U.data().title,summary:U.data().summary,content:U.data().text,expanded:!1})}}set_display_order(v){let T=c.cyInstance.nodes();console.log(v),c.current_display_order=v;for(var k=0;k<T.length;k++)console.log("a",v,T[k].data().display_order,T[k].data().display_order<=c.display_order),console.log("style",T[k].style),T[k].data().display_order<=c.current_display_order?(T[k].addClass("l0"),T[k].style("display","element")):(T[k].removeClass("l0"),T[k].style("display","none")),T[k].data().display_order==c.current_display_order&&(console.log("selecting node",T[k].data().name,c.titleNamesList.includes(T[k].data().name)),c.titleNamesList.includes(T[k].data().name)||c.selectNode(T[k]));c.updateStyle()}updateStyle(){let v=c.cyInstance.nodes();for(var T=0;T<v.length;T++)v[T].data("display_order",v[T].data().display_order)}}const g=Ht([]);function h(M,v){let T=["section","subsection"],k=[{},{},{}];for(let B=0;B<M.length;B++)if(M[B].group=="nodes"){let j=M[B],Y=!0;for(var N=0;N<T.length;N++)j.data.name==T[N]&&(console.log("section"),k[N][j.data.id]={title:"",order:j.data.order,parent:j.data.parent},Y=!1),j.data.name==T[N]+"Title"&&(console.log("sectionTitle"),k[N][j.data.parent].title=j.data.text,Y=!1);Y==!0&&(k[T.length][j.data.id]={title:j.data.title,order:j.data.order,parent:j.data.parent})}function O(B){let j=Object.keys(B).map(U=>[U,B[U]]);return j.sort((U,X)=>U[1].order-X[1].order),j.map(U=>U[0])}function I(B){if(B[0]=="<"){let j=B.indexOf(">"),Y=B.lastIndexOf("<");B.length,B=B.substring(j+1,Y)}return B}function q(B,j,Y){if(document.createElement("div"),B>2)return[];let U=[];if(B==0){let X=O(k[0]);for(let K=0;K<X.length;K++){let P=I(k[0][X[K]].title),D=q(k.length-1,X[K],Y).concat(q(B+1,X[K],Y));U.push({label:P,children:D})}}else{let X={};for(let P in k[B])k[B][P].parent==j&&(X[P]=k[B][P]);let K=O(X);for(let P=0;P<K.length;P++)if(B+1<k.length-1){let D=q(k.length-1,K[P]).concat(q(B+1,K[P],Y));U.push({label:I(X[K[P]].title),children:D})}else{let D=q(k.length-1,K[P],Y);U.push({label:I(X[K[P]].title),children:D,id:K[P],handler:Y})}}return U}g.value=q(0,"",v),console.log("TOC",g.value)}function m(M,v){h(M.graph,v),n.value=M,console.log("graph changed",M),u.value=[],console.log("cy",s.value),k=!0;var T=!0,k=!0,N=!1,O=[.4,.2],I=[20,40,60],q={section:80,subsection:60};new p(n.value,"preset",k,T,O,q,I,N,"")}function x(){if(c!=null)return c.getGraphJSON()}function w(M){c!=null&&c.selectNode(c.getCyNode(M),!0)}function S(){c.current_display_order=Math.min(c.current_display_order+1,c.max_display_order),c.set_display_order(c.current_display_order)}function y(){console.log("b"),c.current_display_order=Math.max(c.current_display_order-1,0),c.set_display_order(c.current_display_order)}function C(){c.current_display_order=c.max_display_order,c.set_display_order(c.current_display_order)}function E(){c.current_display_order=0,c.set_display_order(c.current_display_order)}return e({graphContent:n,ToC:g,updateGraph:m,getGraphJSON:x,selectNode:w,forward:S,backward:y,fastForward:C,fastBackward:E}),(M,v)=>{const T=Xp("qpage");return si(),_l(T,null,{default:Or(()=>[Lr("div",null,[br(_y,{modelValue:i.value,"onUpdate:modelValue":v[3]||(v[3]=k=>i.value=k),style:{height:"100vh"}},{before:Or(()=>[Lr("div",VE,[Lr("div",{id:"testdiv",ref_key:"testdiv",ref:l},null,512),v[0]||(kc(-1),v[0]=Lr("div",{id:"cy",ref_key:"cy",ref:s},null,512),kc(1),v[0])])]),separator:Or(()=>[br(Ty,{color:"primary","text-color":"white",size:"40px",icon:"drag_indicator"})]),after:Or(()=>[Lr("div",$E,[br(ly,{modelValue:o.value,"onUpdate:modelValue":v[1]||(v[1]=k=>o.value=k),dense:"",class:"text-grey","active-color":"primary","indicator-color":"primary",align:"justify"},{default:Or(()=>[br(Dc,{name:"nodes",label:"Nodes"}),br(Dc,{name:"fullText",label:"Full Text"})]),_:1},8,["modelValue"]),br(Ml),br(xy,{modelValue:o.value,"onUpdate:modelValue":v[2]||(v[2]=k=>o.value=k),animated:""},{default:Or(()=>[br(Nc,{name:"nodes"},{default:Or(()=>[qE,(si(!0),Tl(El,null,Pc(u.value,k=>(si(),_l(Rc,{key:k.title,class:"my-card",flat:"",bordered:""},{default:Or(()=>[br(Jo,null,{default:Or(()=>[Lr("div",null,[br(Ml),br(Jo,{class:"text-subtitle2"},{default:Or(()=>[Lr("div",{innerHTML:k.content},null,8,HE)]),_:2},1024)])]),_:2},1024)]),_:2},1024))),128)),UE,(si(!0),Tl(El,null,Pc(f.value,k=>(si(),Tl(El,{key:k.title},[k.title?(si(),_l(Rc,{key:0,class:"my-card",flat:"",bordered:""},{default:Or(()=>[br(Jo,null,{default:Or(()=>[Lr("div",WE,[Lr("div",{innerHTML:k.title},null,8,KE)]),Lr("div",jE,[Lr("div",{innerHTML:k.summary},null,8,YE)])]),_:2},1024),br(Ey,null,{default:Or(()=>[br(Gp,{color:"grey",round:"",flat:"",dense:"",icon:k.expanded?"keyboard_arrow_up":"keyboard_arrow_down",onClick:N=>k.expanded=!k.expanded},null,8,["icon","onClick"])]),_:2},1024),br(cy,null,{default:Or(()=>[Th(Lr("div",null,[br(Ml),br(Jo,{class:"text-subtitle2"},{default:Or(()=>[Lr("div",{innerHTML:k.content},null,8,XE)]),_:2},1024)],512),[[Qp,k.expanded]])]),_:2},1024)]),_:2},1024)):Zp("",!0)],64))),128))]),_:1}),br(Nc,{name:"fullText"},{default:Or(()=>[Lr("div",{innerHTML:n.value.full_text},null,8,QE)]),_:1})]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])])]),_:1})}}});var tP=Object.freeze(Object.defineProperty({__proto__:null,default:ZE},Symbol.toStringTag,{value:"Module"}));export{tP as G,ey as Q,Sy as T,Ws as a,cy as b,Oc as c,kl as d,_y as e,ly as f,Dc as g,xy as h,Nc as i,Ml as j,Rc as k,Jo as l,Ty as m,Ks as u};
